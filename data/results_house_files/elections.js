!(function(e){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=e();else if("function"===typeof define&&define.amd)define([],e);else{var t;(t=(t=(t="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).DevelopmentSeed||(t.DevelopmentSeed={})).Elections||(t.Elections={})).prodStable=e()}})((function(){return (function a(o,s,l){function u(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};o[t][0].call(i.exports,(function(e){return u(o[t][1][e]||e)}),i,i.exports,a,o,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u})({1:[(function(e,t,r){"use strict";t.exports={S:[{statePostal:"FL",seatNum:"00",incumbentLastName:"Nelson",incumbentParty:"D",pollCloseTime:[7,8]},{statePostal:"IN",seatNum:"00",incumbentLastName:"Donnelly",incumbentParty:"D",pollCloseTime:[6,7]},{statePostal:"MO",seatNum:"00",incumbentLastName:"McCaskill",incumbentParty:"D",pollCloseTime:[8]},{statePostal:"ND",seatNum:"00",incumbentLastName:"Heitkamp",incumbentParty:"D",pollCloseTime:[8,9]},{statePostal:"WV",seatNum:"00",incumbentLastName:"Manchin",incumbentParty:"D",pollCloseTime:[7.5]},{statePostal:"MN",seatNum:"01",incumbentLastName:"Smith",incumbentParty:"D",pollCloseTime:[9]},{statePostal:"OH",seatNum:"00",incumbentLastName:"Brown",incumbentParty:"D",pollCloseTime:[7.5]},{statePostal:"AZ",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[9,10]},{statePostal:"NV",seatNum:"00",incumbentLastName:"Heller",incumbentParty:"R",pollCloseTime:[10]},{statePostal:"TN",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[8]},{statePostal:"TX",seatNum:"00",incumbentLastName:"Cruz",incumbentParty:"R",pollCloseTime:[8,9]},{statePostal:"NJ",seatNum:"00",incumbentLastName:"Menendez",incumbentParty:"D",pollCloseTime:[8]}],G:[{statePostal:"FL",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[7,8]},{statePostal:"IA",seatNum:"00",incumbentLastName:"Reynolds",incumbentParty:"R",pollCloseTime:[10]},{statePostal:"KS",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[8,9]},{statePostal:"ME",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[8]},{statePostal:"NV",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[10]},{statePostal:"OH",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[7.5]},{statePostal:"OR",seatNum:"00",incumbentLastName:"Brown",incumbentParty:"D",pollCloseTime:[10,11]},{statePostal:"SD",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[8,9]},{statePostal:"WI",seatNum:"00",incumbentLastName:"Walker",incumbentParty:"R",pollCloseTime:[9]},{statePostal:"GA",seatNum:"00",incumbentLastName:"(Open)",incumbentParty:"R",pollCloseTime:[7]}]}}),{}],2:[(function(e,t,r){t.exports=[{id:"56",bbox:[-23.443523117436186,3.8962896165195793,-21.851973686517233,4.689825142632098]},{id:"55",bbox:[-15.485775962841418,5.482460102886551,-11.506902385544034,9.034163302751946]},{id:"54",bbox:[-5.936479377327698,1.1140144049018763,-1.9576058000303145,4.29316050997608]},{id:"53",bbox:[-32.99281970294991,10.602350401187897,-28.218171410193047,14.099860050910294]},{id:"51",bbox:[-7.130141450516914,-.07957744596164186,.4297183463481156,3.4992314057861824]},{id:"50",bbox:[6.795916070023931,11.773306618564249,7.989578143213145,13.326776219083232]},{id:"49",bbox:[-24.239297832895662,1.1140144049018763,-22.647748401976706,4.689825142632098]},{id:"48",bbox:[-23.045635759706446,-9.583867288828422,-13.894226531922463,.7161785936721542]},{id:"47",bbox:[-11.904789743273774,-2.06856473670984,-5.140704661868223,-.07957744596164186]},{id:"46",bbox:[-18.270987466949585,4.29316050997608,-17.47521275149011,5.878392808207919]},{id:"45",bbox:[-6.334366735057436,-5.640865768013186,-1.5597184423005765,-2.06856473670984]},{id:"44",bbox:[9.979014931861839,7.853461935831719,11.57056436278079,9.819185411421728]},{id:"42",bbox:[-2.7533805154897912,4.29316050997608,3.612817208186022,8.247427367548804]},{id:"41",bbox:[-32.594932345220165,9.42689758023931,-28.218171410193047,11.383516707859837]},{id:"40",bbox:[-20.658311613328017,-1.2731347642926056,-16.281550678300896,1.1140144049018763]},{id:"39",bbox:[-7.528028808246651,1.5117965070605637,-2.7533805154897912,6.669395076903756]},{id:"38",bbox:[-18.270987466949585,5.878392808207919,-17.47521275149011,7.459122501793945]},{id:"37",bbox:[-7.130141450516914,-3.2609144645095296,1.2254930618075925,-.07957744596164186]},{id:"36",bbox:[-1.5597184423005765,5.482460102886551,12.366339078240266,12.551213544191489]},{id:"35",bbox:[-21.851973686517233,-2.06856473670984,-20.658311613328017,1.1140144049018763]},{id:"34",bbox:[2.817042492726546,3.1020048662128676,6.795916070023931,7.853461935831719]},{id:"33",bbox:[7.193803427753668,11.773306618564249,9.183240216402359,13.326776219083232]},{id:"32",bbox:[-26.62662197927409,.7161785936721542,-24.239297832895662,3.8962896165195793]},{id:"31",bbox:[-19.86253689786854,2.7046290266405992,-17.077325393760372,4.29316050997608]},{id:"30",bbox:[-27.820284052463307,12.939296376234873,-26.62662197927409,14.099860050910294]},{id:"29",bbox:[-17.077325393760372,-.875318136261318,-12.70056445873325,3.8962896165195793]},{id:"28",bbox:[-12.70056445873325,-6.036688117382431,-10.711127670084558,-2.06856473670984]},{id:"27",bbox:[-17.47521275149011,5.878392808207919,-14.2921138896522,10.602350401187897]},{id:"26",bbox:[-10.711127670084558,10.993192166837424,-8.721690881435867,11.773306618564249]},{id:"26",bbox:[-9.119578239165605,5.482460102886551,-4.742817304138483,11.383516707859837]},{id:"25",bbox:[6.795916070023931,9.42689758023931,12.366339078240266,12.162544616137934]},{id:"24",bbox:[-2.3554931577600526,1.1140144049018763,3.2149298504562838,4.29316050997608]},{id:"23",bbox:[9.183240216402359,12.162544616137934,10.774789647321313,14.485430949681184]},{id:"22",bbox:[-14.2921138896522,-6.036688117382431,-11.109015027814298,-2.06856473670984]},{id:"21",bbox:[-11.506902385544034,-.07957744596164186,-5.936479377327698,2.307122951781246]},{id:"20",bbox:[-19.4646495401388,1.1140144049018763,-16.281550678300896,2.7046290266405992]},{id:"19",bbox:[-17.47521275149011,3.8962896165195793,-14.69000124738194,5.878392808207919]},{id:"18",bbox:[-10.711127670084558,1.1140144049018763,-7.528028808246651,5.482460102886551]},{id:"17",bbox:[-15.485775962841418,-.875318136261318,-10.31324031235482,5.482460102886551]},{id:"16",bbox:[-28.218171410193047,11.773306618564249,-26.62662197927409,14.099860050910294]},{id:"15",bbox:[-26.268523357317328,-7.340750480953978,-25.47274864185785,-6.945952277159806]},{id:"15",bbox:[-27.462185430506548,-6.945952277159806,-26.66641071504707,-6.550822381552462]},{id:"15",bbox:[-25.074861284128115,-7.735198542992472,-23.881199210938902,-6.945952277159806]},{id:"15",bbox:[-23.48331185320916,-9.309123358445317,-22.289649780019943,-8.12927809610089]},{id:"13",bbox:[-8.323803523706129,-6.827447294552443,-3.15126787321953,-2.06856473670984]},{id:"12",bbox:[-11.109015027814298,-15.408040146142639,-.7639437268410993,-5.640865768013186]},{id:"10",bbox:[2.4191551349968075,2.307122951781246,3.2149298504562838,4.29316050997608]},{id:"09",bbox:[6.795916070023931,7.853461935831719,9.979014931861839,9.819185411421728]},{id:"08",bbox:[-22.647748401976706,1.1140144049018763,-19.4646495401388,3.8962896165195793]},{id:"06",bbox:[-32.99281970294991,-4.055061513867121,-24.637185190625402,9.42689758023931]},{id:"05",bbox:[-16.281550678300896,-2.06856473670984,-11.904789743273774,-.875318136261318]},{id:"04",bbox:[-25.03507254835514,-3.658075953846464,-21.851973686517233,1.1140144049018763]},{id:"02",bbox:[-31.36148153625798,-7.814044520574485,-29.769932105339027,-6.629874007747697]},{id:"01",bbox:[-10.711127670084558,-6.036688117382431,-8.323803523706129,-2.06856473670984]},{id:"00",bbox:[-34.99281970294991,-15.80804014614264,12.366339078240266,15.485430949681184]}]}),{}],3:[(function(e,t,r){t.exports=[{districtResults2016:[{district:0,gopPres2016Margin:.147306407874253,winner2016Party:"R"}],state:"02"},{districtResults2016:[{district:9,gopPres2016Margin:-.1586117552207334,winner2016Party:"D"},{district:8,gopPres2016Margin:.20786616461367863,winner2016Party:"R"},{district:7,gopPres2016Margin:-.48286009941202157,winner2016Party:"D"},{district:6,gopPres2016Margin:.09814329776131768,winner2016Party:"R"},{district:5,gopPres2016Margin:.2054610367359132,winner2016Party:"R"},{district:4,gopPres2016Margin:.39400693656820684,winner2016Party:"R"},{district:3,gopPres2016Margin:-.2951599881018145,winner2016Party:"D"},{district:2,gopPres2016Margin:-.04814331031908938,winner2016Party:"R"},{district:1,gopPres2016Margin:.01056433033768498,winner2016Party:"D"}],state:"04"},{districtResults2016:[{district:6,gopPres2016Margin:.15268298246561857,winner2016Party:"R"},{district:5,gopPres2016Margin:.6210428405715906,winner2016Party:"R"},{district:4,gopPres2016Margin:.3588416070745896,winner2016Party:"R"},{district:3,gopPres2016Margin:-.1494949197900278,winner2016Party:"D"},{district:2,gopPres2016Margin:.3991689434986308,winner2016Party:"R"},{district:1,gopPres2016Margin:.484812361461931,winner2016Party:"R"}],state:"21"},{districtResults2016:[{district:8,gopPres2016Margin:-.3333947599484016,winner2016Party:"D"},{district:7,gopPres2016Margin:-.5250930687690227,winner2016Party:"D"},{district:6,gopPres2016Margin:-.15443602291893302,winner2016Party:"D"},{district:5,gopPres2016Margin:-.33796443402325044,winner2016Party:"D"},{district:4,gopPres2016Margin:-.5711798518736874,winner2016Party:"D"},{district:3,gopPres2016Margin:-.30882757223677165,winner2016Party:"D"},{district:2,gopPres2016Margin:-.20953013024638967,winner2016Party:"D"},{district:1,gopPres2016Margin:.25070450858318366,winner2016Party:"R"}],state:"24"},{districtResults2016:[{district:0,gopPres2016Margin:.462952757290433,winner2016Party:"R"}],state:"56"},{districtResults2016:[{district:7,gopPres2016Margin:-.41171675729283064,winner2016Party:"D"},{district:6,gopPres2016Margin:.43787487758339955,winner2016Party:"R"},{district:5,gopPres2016Margin:.32858246022136844,winner2016Party:"R"},{district:4,gopPres2016Margin:.62469226015072,winner2016Party:"R"},{district:3,gopPres2016Margin:.3295220829341821,winner2016Party:"R"},{district:2,hasRunoff:!0,gopPres2016Margin:.3170111696874435,winner2016Party:"R"},{district:1,gopPres2016Margin:.29199751455294654,winner2016Party:"R"}],state:"01"},{districtResults2016:[{district:8,gopPres2016Margin:.15486516844629783,winner2016Party:"D"},{district:7,gopPres2016Margin:.30549153221765707,winner2016Party:"D"},{district:6,gopPres2016Margin:.25464537869062903,winner2016Party:"R"},{district:5,gopPres2016Margin:-.5469537590773174,winner2016Party:"D"},{district:4,gopPres2016Margin:-.3063750156397047,winner2016Party:"D"},{district:3,gopPres2016Margin:-.09354445191326213,winner2016Party:"R"},{district:2,gopPres2016Margin:.01184340503135096,winner2016Party:"R"},{district:1,gopPres2016Margin:.14783481461009207,winner2016Party:"D"}],state:"27"},{districtResults2016:[{district:0,gopPres2016Margin:.20423882410449007,winner2016Party:"R"}],state:"30"},{districtResults2016:[{district:12,gopPres2016Margin:-.3323673984259074,winner2016Party:"D"},{district:11,gopPres2016Margin:.008921978024865907,winner2016Party:"R"},{district:10,gopPres2016Margin:-.7242683909156185,winner2016Party:"D"},{district:9,gopPres2016Margin:-.311728138346539,winner2016Party:"D"},{district:8,gopPres2016Margin:-.5416585128265341,winner2016Party:"D"},{district:7,gopPres2016Margin:-.011238343851339531,winner2016Party:"R"},{district:6,gopPres2016Margin:-.15602623856378386,winner2016Party:"D"},{district:5,gopPres2016Margin:.011230437943189455,winner2016Party:"D"},{district:4,gopPres2016Margin:.14769779552599183,winner2016Party:"R"},{district:3,gopPres2016Margin:.061906613081615,winner2016Party:"R"},{district:2,gopPres2016Margin:.046196786473032665,winner2016Party:"R"},{district:1,gopPres2016Margin:-.24456008287083025,winner2016Party:"D"}],state:"34"},{districtResults2016:[{district:13,gopPres2016Margin:.09153686086375416,winner2016Party:"R"},{district:12,gopPres2016Margin:-.39801793194476276,winner2016Party:"D"},{district:11,gopPres2016Margin:.29124086007507216,winner2016Party:"R"},{district:10,gopPres2016Margin:.24004219864931095,winner2016Party:"R"},{district:9,gopPres2016Margin:.12025509528660808,winner2016Party:"R"},{district:8,gopPres2016Margin:.14750062738255995,winner2016Party:"R"},{district:7,gopPres2016Margin:.17704435871374408,winner2016Party:"R"},{district:6,gopPres2016Margin:.14562916611486337,winner2016Party:"R"},{district:5,gopPres2016Margin:.17349295324393296,winner2016Party:"R"},{district:4,gopPres2016Margin:-.4032375323375569,winner2016Party:"D"},{district:3,gopPres2016Margin:.23979514713973893,winner2016Party:"R"},{district:2,gopPres2016Margin:.114857652141512,winner2016Party:"R"},{district:1,gopPres2016Margin:-.3744051557322363,winner2016Party:"D"}],state:"37"},{districtResults2016:[{district:5,hasRunoff:!0,gopPres2016Margin:.13658236008562444,winner2016Party:"R"},{district:4,hasRunoff:!0,gopPres2016Margin:.37160533939837004,winner2016Party:"R"},{district:3,gopPres2016Margin:.5279141972005712,winner2016Party:"R"},{district:2,hasRunoff:!0,gopPres2016Margin:.5007761804564382,winner2016Party:"R"},{district:1,hasRunoff:!0,gopPres2016Margin:.28758996616437565,winner2016Party:"R"}],state:"40"},{districtResults2016:[{district:7,hasRunoff:!0,gopPres2016Margin:.18748851950931966,winner2016Party:"R"},{district:6,gopPres2016Margin:-.37426649005822793,winner2016Party:"D"},{district:5,gopPres2016Margin:.18495829541265849,winner2016Party:"R"},{district:4,hasRunoff:!0,gopPres2016Margin:.25630394620281305,winner2016Party:"R"},{district:3,gopPres2016Margin:.3802541131395087,winner2016Party:"R"},{district:2,hasRunoff:!0,gopPres2016Margin:.1857076327664563,winner2016Party:"R"},{district:1,gopPres2016Margin:.12693941824880411,winner2016Party:"R"}],state:"45"},{districtResults2016:[{district:36,gopPres2016Margin:.4654494931705217,winner2016Party:"R"},{district:35,gopPres2016Margin:-.33332673375141686,winner2016Party:"D"},{district:34,gopPres2016Margin:-.21481795531498463,winner2016Party:"D"},{district:33,gopPres2016Margin:-.49070202591882467,winner2016Party:"D"},{district:32,hasRunoff:!0,gopPres2016Margin:-.018652388288569757,winner2016Party:"R"},{district:31,hasRunoff:!0,gopPres2016Margin:.12530306709024816,winner2016Party:"R"},{district:30,gopPres2016Margin:-.6080122875615624,winner2016Party:"D"},{district:29,hasRunoff:!0,gopPres2016Margin:-.4555676676572043,winner2016Party:"D"},{district:28,gopPres2016Margin:-.1970806372768033,winner2016Party:"D"},{district:27,hasRunoff:!0,gopPres2016Margin:.23448100082835963,winner2016Party:"R"},{district:26,gopPres2016Margin:.26240004968404057,winner2016Party:"R"},{district:25,hasRunoff:!0,gopPres2016Margin:.14749762970056537,winner2016Party:"R"},{district:24,gopPres2016Margin:.062166437835363984,winner2016Party:"R"},{district:23,hasRunoff:!0,gopPres2016Margin:-.03463643538535447,winner2016Party:"R"},{district:22,hasRunoff:!0,gopPres2016Margin:.07837928029210797,winner2016Party:"R"},{district:21,hasRunoff:!0,gopPres2016Margin:.09860102455513463,winner2016Party:"R"},{district:20,gopPres2016Margin:-.2635397441608859,winner2016Party:"D"},{district:19,gopPres2016Margin:.4868262299366248,winner2016Party:"R"},{district:18,gopPres2016Margin:-.5632522376112742,winner2016Party:"D"},{district:17,gopPres2016Margin:.1728932926707409,winner2016Party:"R"},{district:16,gopPres2016Margin:-.40312842042517333,winner2016Party:"D"},{district:15,gopPres2016Margin:-.16556433949165586,winner2016Party:"D"},{district:14,gopPres2016Margin:.19657786621673767,winner2016Party:"R"},{district:13,gopPres2016Margin:.62762444759443,winner2016Party:"R"},{district:12,gopPres2016Margin:.2996066763272481,winner2016Party:"R"},{district:11,gopPres2016Margin:.5853405531836496,winner2016Party:"R"},{district:10,hasRunoff:!0,gopPres2016Margin:.09084868733881049,winner2016Party:"R"},{district:9,gopPres2016Margin:-.6115094014505543,winner2016Party:"D"},{district:8,gopPres2016Margin:.48286877964567654,winner2016Party:"R"},{district:7,hasRunoff:!0,gopPres2016Margin:-.013585476901213733,winner2016Party:"R"},{district:6,hasRunoff:!0,gopPres2016Margin:.12158380663867155,winner2016Party:"R"},{district:5,hasRunoff:!0,gopPres2016Margin:.2832219079454873,winner2016Party:"R"},{district:4,gopPres2016Margin:.5323257079641296,winner2016Party:"R"},{district:3,hasRunoff:!0,gopPres2016Margin:.1393044797473975,winner2016Party:"R"},{district:2,hasRunoff:!0,gopPres2016Margin:.09243241118864129,winner2016Party:"R"},{district:1,gopPres2016Margin:.4657211652951605,winner2016Party:"R"}],state:"48"},{districtResults2016:[{district:11,gopPres2016Margin:-.38938621048321953,winner2016Party:"D"},{district:10,gopPres2016Margin:-.09816743676090532,winner2016Party:"R"},{district:9,gopPres2016Margin:.4126715878749804,winner2016Party:"R"},{district:8,gopPres2016Margin:-.5183105455674983,winner2016Party:"D"},{district:7,gopPres2016Margin:.06456532147136383,winner2016Party:"R"},{district:6,gopPres2016Margin:.24640485294540437,winner2016Party:"R"},{district:5,gopPres2016Margin:.11025290833705151,winner2016Party:"R"},{district:4,gopPres2016Margin:-.21396516252914552,winner2016Party:"D"},{district:3,gopPres2016Margin:-.3154806162014022,winner2016Party:"D"},{district:2,gopPres2016Margin:.03353776096656323,winner2016Party:"R"},{district:1,gopPres2016Margin:.1238882824975239,winner2016Party:"R"}],state:"51"},{districtResults2016:[{district:8,gopPres2016Margin:.17437452004918993,winner2016Party:"R"},{district:7,gopPres2016Margin:.20255304782141528,winner2016Party:"R"},{district:6,gopPres2016Margin:.16576261960771632,winner2016Party:"R"},{district:5,gopPres2016Margin:.198263514829396,winner2016Party:"R"},{district:4,gopPres2016Margin:-.5150361141957431,winner2016Party:"D"},{district:3,gopPres2016Margin:.044520481954243525,winner2016Party:"D"},{district:2,gopPres2016Margin:-.36322789532080957,winner2016Party:"D"},{district:1,gopPres2016Margin:.10265275210872254,winner2016Party:"R"}],state:"55"},{districtResults2016:[{district:14,gopPres2016Margin:-.6089934148635936,winner2016Party:"D"},{district:13,gopPres2016Margin:-.6064786387249159,winner2016Party:"D"},{district:12,gopPres2016Margin:-.2623146552484693,winner2016Party:"D"},{district:11,gopPres2016Margin:.04370939461877702,winner2016Party:"R"},{district:10,gopPres2016Margin:.32160589203340534,winner2016Party:"R"},{district:9,gopPres2016Margin:-.0771891185507924,winner2016Party:"D"},{district:8,gopPres2016Margin:.0670319421776638,winner2016Party:"R"},{district:7,gopPres2016Margin:.17043344062013138,winner2016Party:"R"},{district:6,gopPres2016Margin:.08416874015842679,winner2016Party:"R"},{district:5,gopPres2016Margin:-.04265316140756347,winner2016Party:"D"},{district:4,gopPres2016Margin:.24780130887504867,winner2016Party:"R"},{district:3,gopPres2016Margin:.09440760407998695,winner2016Party:"R"},{district:2,gopPres2016Margin:.1732487855527126,winner2016Party:"R"},{district:1,gopPres2016Margin:.2127901746533263,winner2016Party:"R"}],state:"26"},{districtResults2016:[{district:7,gopPres2016Margin:-.12096769857017643,winner2016Party:"D"},{district:6,gopPres2016Margin:-.08930701915749087,winner2016Party:"R"},{district:5,gopPres2016Margin:.23941381656621727,winner2016Party:"R"},{district:4,gopPres2016Margin:.2316293016213206,winner2016Party:"R"},{district:3,gopPres2016Margin:.11906643052580228,winner2016Party:"R"},{district:2,gopPres2016Margin:-.2127939277583336,winner2016Party:"D"},{district:1,gopPres2016Margin:-.4584893315853237,winner2016Party:"D"}],state:"08"},{districtResults2016:[{district:27,gopPres2016Margin:-.19710269966592764,winner2016Party:"R"},{district:26,gopPres2016Margin:-.16264708221390067,winner2016Party:"R"},{district:25,gopPres2016Margin:.018667730355005983,winner2016Party:"R"},{district:24,gopPres2016Margin:-.6716744550329584,winner2016Party:"D"},{district:23,gopPres2016Margin:-.26060331681280974,winner2016Party:"D"},{district:22,gopPres2016Margin:-.15743748562323623,winner2016Party:"D"},{district:21,gopPres2016Margin:-.19549113782229008,winner2016Party:"D"},{district:20,gopPres2016Margin:-.621006052380095,winner2016Party:"D"},{district:19,gopPres2016Margin:.22063885157824042,winner2016Party:"R"},{district:18,gopPres2016Margin:.09207113648960981,winner2016Party:"R"},{district:17,gopPres2016Margin:.271962719825016,winner2016Party:"R"},{district:16,gopPres2016Margin:.10793408382412609,winner2016Party:"R"},{district:15,gopPres2016Margin:.09987025954070682,winner2016Party:"R"},{district:14,gopPres2016Margin:-.1818132295484328,winner2016Party:"D"},{district:13,gopPres2016Margin:-.031999112983701075,winner2016Party:"D"},{district:12,gopPres2016Margin:.18595657306310026,winner2016Party:"R"},{district:11,gopPres2016Margin:.3231347550516417,winner2016Party:"R"},{district:10,gopPres2016Margin:-.26891331417472775,winner2016Party:"D"},{district:9,gopPres2016Margin:-.12906627773258914,winner2016Party:"D"},{district:8,gopPres2016Margin:.20710057699341397,winner2016Party:"R"},{district:7,gopPres2016Margin:-.0729102994058141,winner2016Party:"D"},{district:6,gopPres2016Margin:.1697876239474668,winner2016Party:"R"},{district:5,gopPres2016Margin:-.25418947854294616,winner2016Party:"D"},{district:4,gopPres2016Margin:.2801580225367075,winner2016Party:"R"},{district:3,gopPres2016Margin:.1595618843975342,winner2016Party:"R"},{district:2,gopPres2016Margin:.3559906016520357,winner2016Party:"R"},{district:1,gopPres2016Margin:.3934353771921978,winner2016Party:"R"}],state:"12"},{districtResults2016:[{district:2,gopPres2016Margin:.24664694459064593,winner2016Party:"R"},{district:1,gopPres2016Margin:.3829995467954546,winner2016Party:"R"}],state:"16"},{districtResults2016:[{district:4,gopPres2016Margin:.27044878754976476,winner2016Party:"R"},{district:3,gopPres2016Margin:-.012120138880824924,winner2016Party:"R"},{district:2,gopPres2016Margin:.18327886526734274,winner2016Party:"R"},{district:1,gopPres2016Margin:.44780598985267955,winner2016Party:"R"}],state:"20"},{districtResults2016:[{district:5,gopPres2016Margin:-.0408065722222365,winner2016Party:"D"},{district:4,gopPres2016Margin:-.0013634103963734267,winner2016Party:"D"},{district:3,gopPres2016Margin:-.46676648229847295,winner2016Party:"D"},{district:2,gopPres2016Margin:.19448849465012014,winner2016Party:"R"},{district:1,gopPres2016Margin:-.21871177638306832,winner2016Party:"D"}],state:"41"},{districtResults2016:[{district:18,gopPres2016Margin:.19542372423481102,winner2016Party:"R"},{district:17,gopPres2016Margin:.10105676427286112,winner2016Party:"D"},{district:16,gopPres2016Margin:.06806216662092808,winner2016Party:"R"},{district:15,gopPres2016Margin:.0751748094823485,winner2016Party:"R"},{district:14,gopPres2016Margin:-.35432895932370423,winner2016Party:"D"},{district:13,gopPres2016Margin:-.3358234754768597,winner2016Party:"D"},{district:12,gopPres2016Margin:.20663103967300495,winner2016Party:"R"},{district:11,gopPres2016Margin:.23820870659773866,winner2016Party:"R"},{district:10,gopPres2016Margin:.358864770951492,winner2016Party:"R"},{district:9,gopPres2016Margin:.4261489301407478,winner2016Party:"R"},{district:8,gopPres2016Margin:.0023822750468316,winner2016Party:"R"},{district:7,gopPres2016Margin:-.023668332733687254,winner2016Party:"R"},{district:6,gopPres2016Margin:-.004778394848301495,winner2016Party:"R"},{district:5,gopPres2016Margin:.2883535977739361,winner2016Party:"R"},{district:4,gopPres2016Margin:.21498737765180034,winner2016Party:"R"},{district:3,gopPres2016Margin:.26036780375575563,winner2016Party:"R"},{district:2,gopPres2016Margin:-.8282624217051244,winner2016Party:"D"},{district:1,gopPres2016Margin:-.6128008111405079,winner2016Party:"D"}],state:"42"},{districtResults2016:[{district:6,gopPres2016Margin:.3405920804916924,winner2016Party:"R"},{district:5,gopPres2016Margin:.2939032615354153,winner2016Party:"R"},{district:4,gopPres2016Margin:.23991180682931731,winner2016Party:"R"},{district:3,gopPres2016Margin:.3812376646055443,winner2016Party:"R"},{district:2,gopPres2016Margin:-.5269651264378974,winner2016Party:"D"},{district:1,gopPres2016Margin:.42204389725550545,winner2016Party:"R"}],state:"22"},{districtResults2016:[{district:2,gopPres2016Margin:.10288158996763022,winner2016Party:"R"},{district:1,gopPres2016Margin:-.1480743237246056,winner2016Party:"D"}],state:"23"},{districtResults2016:[{district:9,gopPres2016Margin:-.10554343367232662,winner2016Party:"D"},{district:8,gopPres2016Margin:-.2562915183676616,winner2016Party:"D"},{district:7,gopPres2016Margin:-.7122104038991754,winner2016Party:"D"},{district:6,gopPres2016Margin:-.17556926275325083,winner2016Party:"D"},{district:5,gopPres2016Margin:-.42922679869377434,winner2016Party:"D"},{district:4,gopPres2016Margin:-.23741290408900506,winner2016Party:"D"},{district:3,gopPres2016Margin:-.2246399918728324,winner2016Party:"D"},{district:2,gopPres2016Margin:-.1904195637879657,winner2016Party:"D"},{district:1,gopPres2016Margin:-.2034859412564022,winner2016Party:"D"}],state:"25"},{districtResults2016:[{district:4,gopPres2016Margin:.41137746732285546,winner2016Party:"R"},{district:3,hasRunoff:!0,gopPres2016Margin:.24513218593104472,winner2016Party:"R"},{district:2,gopPres2016Margin:-.2842264917524252,winner2016Party:"D"},{district:1,gopPres2016Margin:.3297137025506968,winner2016Party:"R"}],state:"28"},{districtResults2016:[{district:8,gopPres2016Margin:.5422242036456796,winner2016Party:"R"},{district:7,gopPres2016Margin:.4553745795416786,winner2016Party:"R"},{district:6,gopPres2016Margin:.3232120838471023,winner2016Party:"R"},{district:5,gopPres2016Margin:-.14765276925284987,winner2016Party:"D"},{district:4,gopPres2016Margin:.3584563296055814,winner2016Party:"R"},{district:3,gopPres2016Margin:.39004945958863774,winner2016Party:"R"},{district:2,gopPres2016Margin:.10319992598584717,winner2016Party:"R"},{district:1,gopPres2016Margin:-.5802035429705293,winner2016Party:"D"}],state:"29"},{districtResults2016:[{district:3,gopPres2016Margin:.541936080833503,winner2016Party:"R"},{district:2,gopPres2016Margin:.022401261656609984,winner2016Party:"R"},{district:1,gopPres2016Margin:.20721553461324607,winner2016Party:"R"}],state:"31"},{districtResults2016:[{district:4,gopPres2016Margin:-.04943451822107954,winner2016Party:"D"},{district:3,gopPres2016Margin:.010015325505757046,winner2016Party:"D"},{district:2,gopPres2016Margin:.12365840416427666,winner2016Party:"R"},{district:1,gopPres2016Margin:-.29001579955395473,winner2016Party:"D"}],state:"32"},{districtResults2016:[{district:2,gopPres2016Margin:-.02359007640665136,winner2016Party:"D"},{district:1,gopPres2016Margin:.015665803259758353,winner2016Party:"D"}],state:"33"},{districtResults2016:[{district:3,gopPres2016Margin:-.15157422471314208,winner2016Party:"D"},{district:2,gopPres2016Margin:.10187534708872656,winner2016Party:"R"},{district:1,gopPres2016Margin:-.16522775888066768,winner2016Party:"D"}],state:"35"},{districtResults2016:[{district:27,gopPres2016Margin:.24292056068070375,winner2016Party:"R"},{district:26,gopPres2016Margin:-.1959067298081177,winner2016Party:"D"},{district:25,gopPres2016Margin:-.1617984066421904,winner2016Party:"D"},{district:24,gopPres2016Margin:-.03626570799952324,winner2016Party:"R"},{district:23,gopPres2016Margin:.1471084637232472,winner2016Party:"R"},{district:22,gopPres2016Margin:.15321482563397296,winner2016Party:"R"},{district:21,gopPres2016Margin:.13660754920673002,winner2016Party:"R"},{district:20,gopPres2016Margin:-.13313589696859243,winner2016Party:"D"},{district:19,gopPres2016Margin:.0677888398084417,winner2016Party:"R"},{district:18,gopPres2016Margin:.020477323758243942,winner2016Party:"D"},{district:17,gopPres2016Margin:-.19955293766033225,winner2016Party:"D"},{district:16,gopPres2016Margin:-.5222726396748366,winner2016Party:"D"},{district:15,gopPres2016Margin:-.8863382909314518,winner2016Party:"D"},{district:14,gopPres2016Margin:-.5760938927829368,winner2016Party:"D"},{district:13,gopPres2016Margin:-.864089878781906,winner2016Party:"D"},{district:12,gopPres2016Margin:-.6903532687510876,winner2016Party:"D"},{district:11,gopPres2016Margin:.09766757436531072,winner2016Party:"R"},{district:10,gopPres2016Margin:-.5888761749389164,winner2016Party:"D"},{district:9,gopPres2016Margin:-.6861452789623939,winner2016Party:"D"},{district:8,gopPres2016Margin:-.7080499176109519,winner2016Party:"D"},{district:7,gopPres2016Margin:-.7605294240593391,winner2016Party:"D"},{district:6,gopPres2016Margin:-.3281959121079242,winner2016Party:"D"},{district:5,gopPres2016Margin:-.7278843747729713,winner2016Party:"D"},{district:4,gopPres2016Margin:-.09538231290913697,winner2016Party:"D"},{district:3,gopPres2016Margin:-.061313357039862584,winner2016Party:"D"},{district:2,gopPres2016Margin:.0894976300312297,winner2016Party:"R"},{district:1,gopPres2016Margin:.12186873452058025,winner2016Party:"R"}],state:"36"},{districtResults2016:[{district:0,gopPres2016Margin:.3572888837263329,winner2016Party:"R"}],state:"38"},{districtResults2016:[{district:2,gopPres2016Margin:-.06944324893736499,winner2016Party:"D"},{district:1,gopPres2016Margin:-.24998296809356194,winner2016Party:"D"}],state:"44"},{districtResults2016:[{district:0,gopPres2016Margin:.29793322219009816,winner2016Party:"R"}],state:"46"},{districtResults2016:[{district:9,gopPres2016Margin:-.5730183164893023,winner2016Party:"D"},{district:8,gopPres2016Margin:.3537210719043507,winner2016Party:"R"},{district:7,gopPres2016Margin:.3899940071641628,winner2016Party:"R"},{district:6,gopPres2016Margin:.48761739246682934,winner2016Party:"R"},{district:5,gopPres2016Margin:-.1818559194964232,winner2016Party:"D"},{district:4,gopPres2016Margin:.40868259169828675,winner2016Party:"R"},{district:3,gopPres2016Margin:.3504524008170546,winner2016Party:"R"},{district:2,gopPres2016Margin:.35174451447685107,winner2016Party:"R"},{district:1,gopPres2016Margin:.568390392577106,winner2016Party:"R"}],state:"47"},{districtResults2016:[{district:4,gopPres2016Margin:.06716116516057379,winner2016Party:"R"},{district:3,gopPres2016Margin:.23909976718116754,winner2016Party:"R"},{district:2,gopPres2016Margin:.14042997183575204,winner2016Party:"R"},{district:1,gopPres2016Margin:.27373570616110365,winner2016Party:"R"}],state:"49"},{districtResults2016:[{district:0,gopPres2016Margin:-.2640751308410325,winner2016Party:"D"}],state:"50"},{districtResults2016:[{district:10,gopPres2016Margin:-.11321465031016087,winner2016Party:"D"},{district:9,gopPres2016Margin:-.47074395128106655,winner2016Party:"D"},{district:8,gopPres2016Margin:-.0303221257931482,winner2016Party:"R"},{district:7,gopPres2016Margin:-.6984102562869761,winner2016Party:"D"},{district:6,gopPres2016Margin:-.12381166591692908,winner2016Party:"D"},{district:5,gopPres2016Margin:.13036675428714484,winner2016Party:"R"},{district:4,gopPres2016Margin:.22860639727032217,winner2016Party:"R"},{district:3,gopPres2016Margin:.07409170236395367,winner2016Party:"R"},{district:2,gopPres2016Margin:-.22078080681946552,winner2016Party:"D"},{district:1,gopPres2016Margin:-.16381317351466604,winner2016Party:"D"}],state:"53"},{districtResults2016:[{district:3,gopPres2016Margin:.49266754991091416,winner2016Party:"R"},{district:2,gopPres2016Margin:.3643588647324657,winner2016Party:"R"},{district:1,gopPres2016Margin:.4163694063814608,winner2016Party:"R"}],state:"54"},{districtResults2016:[{district:16,gopPres2016Margin:.16642214847577647,winner2016Party:"R"},{district:15,gopPres2016Margin:.1563993389170565,winner2016Party:"R"},{district:14,gopPres2016Margin:.11432085578805976,winner2016Party:"R"},{district:13,gopPres2016Margin:-.06522459545306755,winner2016Party:"D"},{district:12,gopPres2016Margin:.11438438299339684,winner2016Party:"R"},{district:11,gopPres2016Margin:-.6349765548640924,winner2016Party:"D"},{district:10,gopPres2016Margin:.07230680076163506,winner2016Party:"R"},{district:9,gopPres2016Margin:-.22200453496698225,winner2016Party:"D"},{district:8,gopPres2016Margin:.342629551313617,winner2016Party:"R"},{district:7,gopPres2016Margin:.29613013989492715,winner2016Party:"R"},{district:6,gopPres2016Margin:.4233354131937654,winner2016Party:"R"},{district:5,gopPres2016Margin:.2494251857092324,winner2016Party:"R"},{district:4,gopPres2016Margin:.3341234114224468,winner2016Party:"R"},{district:3,gopPres2016Margin:-.3889551735438322,winner2016Party:"D"},{district:2,gopPres2016Margin:.16031304162183876,winner2016Party:"R"},{district:1,gopPres2016Margin:.0663746993574326,winner2016Party:"R"}],state:"39"},{districtResults2016:[{district:4,gopPres2016Margin:.3282640648196704,winner2016Party:"R"},{district:3,gopPres2016Margin:.31434507449608606,winner2016Party:"R"},{district:2,gopPres2016Margin:.10717194290070169,winner2016Party:"R"},{district:1,gopPres2016Margin:.34808373862747205,winner2016Party:"R"}],state:"05"},{districtResults2016:[{district:53,gopPres2016Margin:-.34930551304398255,winner2016Party:"D"},{district:52,gopPres2016Margin:-.2255617175588748,winner2016Party:"D"},{district:51,gopPres2016Margin:-.4895653187727105,winner2016Party:"D"},{district:50,gopPres2016Margin:.15008979848264464,winner2016Party:"R"},{district:49,gopPres2016Margin:-.07468614660154996,winner2016Party:"R"},{district:48,gopPres2016Margin:-.016999043803786036,winner2016Party:"R"},{district:47,gopPres2016Margin:-.3146650312616918,winner2016Party:"D"},{district:46,gopPres2016Margin:-.3798474235611757,winner2016Party:"D"},{district:45,gopPres2016Margin:-.05388522956517512,winner2016Party:"R"},{district:44,gopPres2016Margin:-.7077279299501522,winner2016Party:"D"},{district:43,gopPres2016Margin:-.6169144663761429,winner2016Party:"D"},{district:42,gopPres2016Margin:.11953560313821956,winner2016Party:"R"},{district:41,gopPres2016Margin:-.2786563652089041,winner2016Party:"D"},{district:40,gopPres2016Margin:-.6945068421627791,winner2016Party:"D"},{district:39,gopPres2016Margin:-.08545843523010142,winner2016Party:"R"},{district:38,gopPres2016Margin:-.3954992729718735,winner2016Party:"D"},{district:37,gopPres2016Margin:-.7605474153852839,winner2016Party:"D"},{district:36,gopPres2016Margin:-.08739099296457008,winner2016Party:"D"},{district:35,gopPres2016Margin:-.407903038529036,winner2016Party:"D"},{district:34,gopPres2016Margin:-.7284630094094832,winner2016Party:"D"},{district:33,gopPres2016Margin:-.41332930202855633,winner2016Party:"D"},{district:32,gopPres2016Margin:-.3887278114576043,winner2016Party:"D"},{district:31,gopPres2016Margin:-.21089915874576642,winner2016Party:"D"},{district:30,gopPres2016Margin:-.43407821782505174,winner2016Party:"D"},{district:29,gopPres2016Margin:-.6093600277273746,winner2016Party:"D"},{district:28,gopPres2016Margin:-.49796372738147093,winner2016Party:"D"},{district:27,gopPres2016Margin:-.3764567089909478,winner2016Party:"D"},{district:26,gopPres2016Margin:-.2136232340035278,winner2016Party:"D"},{district:25,gopPres2016Margin:-.0664653008281747,winner2016Party:"R"},{district:24,gopPres2016Margin:-.19941589966622839,winner2016Party:"D"},{district:23,gopPres2016Margin:.21909971131077882,winner2016Party:"R"},{district:22,gopPres2016Margin:.09345752247580238,winner2016Party:"R"},{district:21,gopPres2016Margin:-.1542174212824638,winner2016Party:"R"},{district:20,gopPres2016Margin:-.468333740031064,winner2016Party:"D"},{district:19,gopPres2016Margin:-.5141485265347949,winner2016Party:"D"},{district:18,gopPres2016Margin:-.5317421480106702,winner2016Party:"D"},{district:17,gopPres2016Margin:-.5319787809028125,winner2016Party:"D"},{district:16,gopPres2016Margin:-.21321068290641998,winner2016Party:"D"},{district:15,gopPres2016Margin:-.448928347233432,winner2016Party:"D"},{district:14,gopPres2016Margin:-.5858736533007958,winner2016Party:"D"},{district:13,gopPres2016Margin:-.7931353512615243,winner2016Party:"D"},{district:12,gopPres2016Margin:-.7660876393040651,winner2016Party:"D"},{district:11,gopPres2016Margin:-.4763791565009578,winner2016Party:"D"},{district:10,gopPres2016Margin:-.029580321475148826,winner2016Party:"R"},{district:9,gopPres2016Margin:-.18169831548594595,winner2016Party:"D"},{district:8,gopPres2016Margin:.1512471557978792,winner2016Party:"R"},{district:7,gopPres2016Margin:-.11247653844787094,winner2016Party:"D"},{district:6,gopPres2016Margin:-.43985797252147135,winner2016Party:"D"},{district:5,gopPres2016Margin:-.4463497757847534,winner2016Party:"D"},{district:4,gopPres2016Margin:.14470251246239077,winner2016Party:"R"},{district:3,gopPres2016Margin:-.12517674173531007,winner2016Party:"D"},{district:2,gopPres2016Margin:-.4518809258266412,winner2016Party:"D"},{district:1,gopPres2016Margin:.1935665222976347,winner2016Party:"R"}],state:"06"},{districtResults2016:[{district:5,gopPres2016Margin:-.04096818707805026,winner2016Party:"D"},{district:4,gopPres2016Margin:-.22968460111317254,winner2016Party:"D"},{district:3,gopPres2016Margin:-.15472212137854854,winner2016Party:"D"},{district:2,gopPres2016Margin:-.028774871195545518,winner2016Party:"D"},{district:1,gopPres2016Margin:-.2305626932492604,winner2016Party:"D"}],state:"09"},{districtResults2016:[{district:0,gopPres2016Margin:-.1139420808718795,winner2016Party:"D"}],state:"10"},{districtResults2016:[{district:14,gopPres2016Margin:.5289207103551776,winner2016Party:"R"},{district:13,gopPres2016Margin:-.4446408495312256,winner2016Party:"D"},{district:12,gopPres2016Margin:.16164004856635847,winner2016Party:"R"},{district:11,gopPres2016Margin:.25067109610339133,winner2016Party:"R"},{district:10,gopPres2016Margin:.25498217873318246,winner2016Party:"R"},{district:9,gopPres2016Margin:.5845128947058527,winner2016Party:"R"},{district:8,gopPres2016Margin:.2893745715856791,winner2016Party:"R"},{district:7,hasRunoff:!0,gopPres2016Margin:.06384673799547076,winner2016Party:"R"},{district:6,hasRunoff:!0,gopPres2016Margin:.015244730756923524,winner2016Party:"R"},{district:5,gopPres2016Margin:-.7307190397540514,winner2016Party:"D"},{district:4,gopPres2016Margin:-.5306114249170469,winner2016Party:"D"},{district:3,gopPres2016Margin:.3157434009696534,winner2016Party:"R"},{district:2,gopPres2016Margin:-.11726937090897366,winner2016Party:"D"},{district:1,gopPres2016Margin:.15508517331434,winner2016Party:"R"}],state:"13"},{districtResults2016:[{district:2,gopPres2016Margin:-.3184845904833885,winner2016Party:"D"},{district:1,gopPres2016Margin:-.3253368370759675,winner2016Party:"D"}],state:"15"},{districtResults2016:[{district:18,gopPres2016Margin:.27298876893310586,winner2016Party:"R"},{district:17,gopPres2016Margin:.006672351163242104,winner2016Party:"D"},{district:16,gopPres2016Margin:.170671941803331,winner2016Party:"R"},{district:15,gopPres2016Margin:.46212909699413535,winner2016Party:"R"},{district:14,gopPres2016Margin:.03957792819561405,winner2016Party:"R"},{district:13,gopPres2016Margin:.053180643330828684,winner2016Party:"R"},{district:12,gopPres2016Margin:.1481614939422387,winner2016Party:"R"},{district:11,gopPres2016Margin:-.23250125483376105,winner2016Party:"D"},{district:10,gopPres2016Margin:-.28908599840402677,winner2016Party:"D"},{district:9,gopPres2016Margin:-.4451165180139259,winner2016Party:"D"},{district:8,gopPres2016Margin:-.21551002047527457,winner2016Party:"D"},{district:7,gopPres2016Margin:-.7734325477092245,winner2016Party:"D"},{district:6,gopPres2016Margin:-.06802042340665099,winner2016Party:"R"},{district:5,gopPres2016Margin:-.45991916775409597,winner2016Party:"D"},{district:4,gopPres2016Margin:-.6825989968883648,winner2016Party:"D"},{district:3,gopPres2016Margin:-.1544479416013567,winner2016Party:"D"},{district:2,gopPres2016Margin:-.5855655444454637,winner2016Party:"D"},{district:1,gopPres2016Margin:-.5322351854833076,winner2016Party:"D"}],state:"17"},{districtResults2016:[{district:4,gopPres2016Margin:.270569319250845,winner2016Party:"R"},{district:3,gopPres2016Margin:.03486885947026586,winner2016Party:"R"},{district:2,gopPres2016Margin:.040541489486209184,winner2016Party:"D"},{district:1,gopPres2016Margin:.03507038088329335,winner2016Party:"R"}],state:"19"},{districtResults2016:[{district:9,gopPres2016Margin:.2676220032014916,winner2016Party:"R"},{district:8,gopPres2016Margin:.336384211539355,winner2016Party:"R"},{district:7,gopPres2016Margin:-.22529546946815496,winner2016Party:"D"},{district:6,gopPres2016Margin:.40221226500884577,winner2016Party:"R"},{district:5,gopPres2016Margin:.11705647305903692,winner2016Party:"R"},{district:4,gopPres2016Margin:.3392216386174597,winner2016Party:"R"},{district:3,gopPres2016Margin:.34780530604859494,winner2016Party:"R"},{district:2,gopPres2016Margin:.23000784923703976,winner2016Party:"R"},{district:1,gopPres2016Margin:-.12463880622762755,winner2016Party:"D"}],state:"18"}]}),{}],4:[(function(e,t,r){t.exports=[{state:"AL",seatNum:"07",fips:"0107",isOpen:!1,isVacant:!1,name:"Terri Sewell",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"AZ",seatNum:"03",fips:"0403",isOpen:!1,isVacant:!1,name:"Raúl Grijalva",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"AZ",seatNum:"07",fips:"0407",isOpen:!1,isVacant:!1,name:"Ruben Gallego",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"AZ",seatNum:"09",fips:"0409",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"02",fips:"0602",isOpen:!1,isVacant:!1,name:"Jared Huffman",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"03",fips:"0603",isOpen:!1,isVacant:!1,name:"John Garamendi",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"05",fips:"0605",isOpen:!1,isVacant:!1,name:"Mike Thompson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"06",fips:"0606",isOpen:!1,isVacant:!1,name:"Doris Matsui",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"09",fips:"0609",isOpen:!1,isVacant:!1,name:"Jerry McNerney",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"11",fips:"0611",isOpen:!1,isVacant:!1,name:"Mark DeSaulnier",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"12",fips:"0612",isOpen:!1,isVacant:!1,name:"Nancy Pelosi",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"13",fips:"0613",isOpen:!1,isVacant:!1,name:"Barbara Lee",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"14",fips:"0614",isOpen:!1,isVacant:!1,name:"Jackie Speier",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"15",fips:"0615",isOpen:!1,isVacant:!1,name:"Eric Swalwell",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"17",fips:"0617",isOpen:!1,isVacant:!1,name:"Ro Khanna",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"18",fips:"0618",isOpen:!1,isVacant:!1,name:"Anna Eshoo",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"19",fips:"0619",isOpen:!1,isVacant:!1,name:"Zoe Lofgren",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"20",fips:"0620",isOpen:!1,isVacant:!1,name:"Jimmy Panetta",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"24",fips:"0624",isOpen:!1,isVacant:!1,name:"Salud Carbajal",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"26",fips:"0626",isOpen:!1,isVacant:!1,name:"Julia Brownley",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"27",fips:"0627",isOpen:!1,isVacant:!1,name:"Judy Chu",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"28",fips:"0628",isOpen:!1,isVacant:!1,name:"Adam Schiff",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"29",fips:"0629",isOpen:!1,isVacant:!1,name:"Tony Cárdenas",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"30",fips:"0630",isOpen:!1,isVacant:!1,name:"Brad Sherman",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"31",fips:"0631",isOpen:!1,isVacant:!1,name:"Pete Aguilar",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"32",fips:"0632",isOpen:!1,isVacant:!1,name:"Grace Napolitano",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"33",fips:"0633",isOpen:!1,isVacant:!1,name:"Ted Lieu",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"34",fips:"0634",isOpen:!1,isVacant:!1,name:"Jimmy Gomez",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"35",fips:"0635",isOpen:!1,isVacant:!1,name:"Norma Torres",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"36",fips:"0636",isOpen:!1,isVacant:!1,name:"Raul Ruiz",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"37",fips:"0637",isOpen:!1,isVacant:!1,name:"Karen Bass",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"38",fips:"0638",isOpen:!1,isVacant:!1,name:"Linda Sánchez",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"40",fips:"0640",isOpen:!1,isVacant:!1,name:"Lucille Roybal-Allard",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"41",fips:"0641",isOpen:!1,isVacant:!1,name:"Mark Takano",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"43",fips:"0643",isOpen:!1,isVacant:!1,name:"Maxine Waters",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"44",fips:"0644",isOpen:!1,isVacant:!1,name:"Nanette  Barragan",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"46",fips:"0646",isOpen:!1,isVacant:!1,name:"Lou  Correa",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"47",fips:"0647",isOpen:!1,isVacant:!1,name:"Alan Lowenthal",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"51",fips:"0651",isOpen:!1,isVacant:!1,name:"Juan Vargas",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"52",fips:"0652",isOpen:!1,isVacant:!1,name:"Scott Peters",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"53",fips:"0653",isOpen:!1,isVacant:!1,name:"Susan Davis",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CO",seatNum:"01",fips:"0801",isOpen:!1,isVacant:!1,name:"Diana DeGette",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CO",seatNum:"02",fips:"0802",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CO",seatNum:"07",fips:"0807",isOpen:!1,isVacant:!1,name:"Ed Perlmutter",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CT",seatNum:"01",fips:"0901",isOpen:!1,isVacant:!1,name:"John Larson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CT",seatNum:"02",fips:"0902",isOpen:!1,isVacant:!1,name:"Joe Courtney",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CT",seatNum:"03",fips:"0903",isOpen:!1,isVacant:!1,name:"Rosa DeLauro",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CT",seatNum:"04",fips:"0904",isOpen:!1,isVacant:!1,name:"Jim Himes",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CT",seatNum:"05",fips:"0905",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"DE",seatNum:"00",fips:"1000",isOpen:!1,isVacant:!1,name:"Lisa Blunt Rochester",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"05",fips:"1205",isOpen:!1,isVacant:!1,name:"Al Lawson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"09",fips:"1209",isOpen:!1,isVacant:!1,name:"Darren  Soto",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"10",fips:"1210",isOpen:!1,isVacant:!1,name:"Val Demings",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"13",fips:"1213",isOpen:!1,isVacant:!1,name:"Charlie Crist",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"14",fips:"1214",isOpen:!1,isVacant:!1,name:"Kathy Castor",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"20",fips:"1220",isOpen:!1,isVacant:!1,name:"Alcee Hastings",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"21",fips:"1221",isOpen:!1,isVacant:!1,name:"Lois Frankel",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"22",fips:"1222",isOpen:!1,isVacant:!1,name:"Ted Deutch",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"23",fips:"1223",isOpen:!1,isVacant:!1,name:"Debbie Wasserman Schultz",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"FL",seatNum:"24",fips:"1224",isOpen:!1,isVacant:!1,name:"Frederica Wilson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"GA",seatNum:"02",fips:"1302",isOpen:!1,isVacant:!1,name:"Sanford Bishop",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"GA",seatNum:"04",fips:"1304",isOpen:!1,isVacant:!1,name:"Henry Johnson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"GA",seatNum:"05",fips:"1305",isOpen:!1,isVacant:!1,name:"John Lewis",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"GA",seatNum:"13",fips:"1313",isOpen:!1,isVacant:!1,name:"David Scott",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"HI",seatNum:"01",fips:"1501",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"HI",seatNum:"02",fips:"1502",isOpen:!1,isVacant:!1,name:"Tulsi Gabbard",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IA",seatNum:"02",fips:"1902",isOpen:!1,isVacant:!1,name:"David Loebsack",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"01",fips:"1701",isOpen:!1,isVacant:!1,name:"Bobby Rush",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"02",fips:"1702",isOpen:!1,isVacant:!1,name:"Robin Kelly",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"03",fips:"1703",isOpen:!1,isVacant:!1,name:"Daniel Lipinski",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"04",fips:"1704",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"05",fips:"1705",isOpen:!1,isVacant:!1,name:"Mike Quigley",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"07",fips:"1707",isOpen:!1,isVacant:!1,name:"Danny Davis",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"08",fips:"1708",isOpen:!1,isVacant:!1,name:"Raja  Krishnamoorthi",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"09",fips:"1709",isOpen:!1,isVacant:!1,name:"Janice Schakowsky",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"10",fips:"1710",isOpen:!1,isVacant:!1,name:"Bradley Schneider",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"11",fips:"1711",isOpen:!1,isVacant:!1,name:"Bill Foster",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IL",seatNum:"17",fips:"1717",isOpen:!1,isVacant:!1,name:"Cheri Bustos",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IN",seatNum:"01",fips:"1801",isOpen:!1,isVacant:!1,name:"Peter Visclosky",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"IN",seatNum:"07",fips:"1807",isOpen:!1,isVacant:!1,name:"André Carson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"KY",seatNum:"03",fips:"2103",isOpen:!1,isVacant:!1,name:"John Yarmuth",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"LA",seatNum:"02",fips:"2202",isOpen:!1,isVacant:!1,name:"Cedric Richmond",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"01",fips:"2501",isOpen:!1,isVacant:!1,name:"Richard Neal",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"02",fips:"2502",isOpen:!1,isVacant:!1,name:"James McGovern",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"03",fips:"2503",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"04",fips:"2504",isOpen:!1,isVacant:!1,name:"Joseph Kennedy",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"05",fips:"2505",isOpen:!1,isVacant:!1,name:"Katherine Clark",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"06",fips:"2506",isOpen:!1,isVacant:!1,name:"Seth Moulton",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"07",fips:"2507",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"08",fips:"2508",isOpen:!1,isVacant:!1,name:"Stephen Lynch",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MA",seatNum:"09",fips:"2509",isOpen:!1,isVacant:!1,name:"Bill Keating",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"02",fips:"2402",isOpen:!1,isVacant:!1,name:"Dutch Ruppersberger",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"03",fips:"2403",isOpen:!1,isVacant:!1,name:"John Sarbanes",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"04",fips:"2404",isOpen:!1,isVacant:!1,name:"Anthony Brown",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"05",fips:"2405",isOpen:!1,isVacant:!1,name:"Steny Hoyer",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"06",fips:"2406",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"07",fips:"2407",isOpen:!1,isVacant:!1,name:"Elijah Cummings",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MD",seatNum:"08",fips:"2408",isOpen:!1,isVacant:!1,name:"Jamie  Raskin",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"ME",seatNum:"01",fips:"2301",isOpen:!1,isVacant:!1,name:"Chellie Pingree",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MI",seatNum:"05",fips:"2605",isOpen:!1,isVacant:!1,name:"Daniel Kildee",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MI",seatNum:"09",fips:"2609",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MI",seatNum:"12",fips:"2612",isOpen:!1,isVacant:!1,name:"Debbie Dingell",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MI",seatNum:"13",fips:"2613",isOpen:!1,isVacant:!0,name:"Vacant",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MI",seatNum:"14",fips:"2614",isOpen:!1,isVacant:!1,name:"Brenda Lawrence",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MN",seatNum:"04",fips:"2704",isOpen:!1,isVacant:!1,name:"Betty McCollum",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MN",seatNum:"05",fips:"2705",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MO",seatNum:"01",fips:"2901",isOpen:!1,isVacant:!1,name:"Lacy Clay",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MO",seatNum:"05",fips:"2905",isOpen:!1,isVacant:!1,name:"Emanuel Cleaver",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"MS",seatNum:"02",fips:"2802",isOpen:!1,isVacant:!1,name:"Bennie Thompson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NC",seatNum:"01",fips:"3701",isOpen:!1,isVacant:!1,name:"George Butterfield",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NC",seatNum:"04",fips:"3704",isOpen:!1,isVacant:!1,name:"David Price",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NC",seatNum:"12",fips:"3712",isOpen:!1,isVacant:!1,name:"Alma Adams",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NH",seatNum:"02",fips:"3302",isOpen:!1,isVacant:!1,name:"Ann Kuster",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"01",fips:"3401",isOpen:!1,isVacant:!1,name:"Donald Norcross",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"06",fips:"3406",isOpen:!1,isVacant:!1,name:"Frank Pallone",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"08",fips:"3408",isOpen:!1,isVacant:!1,name:"Albio Sires",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"09",fips:"3409",isOpen:!1,isVacant:!1,name:"Bill Pascrell",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"10",fips:"3410",isOpen:!1,isVacant:!1,name:"Donald Payne",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NJ",seatNum:"12",fips:"3412",isOpen:!1,isVacant:!1,name:"Bonnie Watson Coleman",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NM",seatNum:"01",fips:"3501",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NM",seatNum:"03",fips:"3503",isOpen:!1,isVacant:!1,name:"Ben Luján",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NV",seatNum:"01",fips:"3201",isOpen:!1,isVacant:!1,name:"Dina Titus",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"03",fips:"3603",isOpen:!1,isVacant:!1,name:"Thomas Suozzi",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"04",fips:"3604",isOpen:!1,isVacant:!1,name:"Kathleen Rice",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"05",fips:"3605",isOpen:!1,isVacant:!1,name:"Gregory Meeks",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"06",fips:"3606",isOpen:!1,isVacant:!1,name:"Grace Meng",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"07",fips:"3607",isOpen:!1,isVacant:!1,name:"Nydia Velázquez",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"08",fips:"3608",isOpen:!1,isVacant:!1,name:"Hakeem Jeffries",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"09",fips:"3609",isOpen:!1,isVacant:!1,name:"Yvette Clarke",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"10",fips:"3610",isOpen:!1,isVacant:!1,name:"Jerrold Nadler",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"12",fips:"3612",isOpen:!1,isVacant:!1,name:"Carolyn Maloney",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"13",fips:"3613",isOpen:!1,isVacant:!1,name:"Adriano Espaillat",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"14",fips:"3614",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"15",fips:"3615",isOpen:!1,isVacant:!1,name:"José Serrano",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"16",fips:"3616",isOpen:!1,isVacant:!1,name:"Eliot Engel",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"17",fips:"3617",isOpen:!1,isVacant:!1,name:"Nita Lowey",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"18",fips:"3618",isOpen:!1,isVacant:!1,name:"Sean Maloney",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"20",fips:"3620",isOpen:!1,isVacant:!1,name:"Paul Tonko",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"25",fips:"3625",isOpen:!1,isVacant:!0,name:"Vacant",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"NY",seatNum:"26",fips:"3626",isOpen:!1,isVacant:!1,name:"Brian Higgins",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OH",seatNum:"03",fips:"3903",isOpen:!1,isVacant:!1,name:"Joyce Beatty",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OH",seatNum:"09",fips:"3909",isOpen:!1,isVacant:!1,name:"Marcy Kaptur",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OH",seatNum:"11",fips:"3911",isOpen:!1,isVacant:!1,name:"Marcia Fudge",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OH",seatNum:"13",fips:"3913",isOpen:!1,isVacant:!1,name:"Tim Ryan",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OR",seatNum:"01",fips:"4101",isOpen:!1,isVacant:!1,name:"Suzanne Bonamici",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OR",seatNum:"03",fips:"4103",isOpen:!1,isVacant:!1,name:"Earl Blumenauer",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OR",seatNum:"04",fips:"4104",isOpen:!1,isVacant:!1,name:"Peter DeFazio",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"OR",seatNum:"05",fips:"4105",isOpen:!1,isVacant:!1,name:"Kurt Schrader",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"PA",seatNum:"02",fips:"4202",isOpen:!1,isVacant:!1,name:"Brendan Boyle",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"PA",seatNum:"03",fips:"4203",isOpen:!1,isVacant:!1,name:"Dwight Evans",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"PA",seatNum:"04",fips:"4204",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"PA",seatNum:"18",fips:"4218",isOpen:!1,isVacant:!1,name:"Michael Doyle",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"RI",seatNum:"01",fips:"4401",isOpen:!1,isVacant:!1,name:"David Cicilline",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"RI",seatNum:"02",fips:"4402",isOpen:!1,isVacant:!1,name:"Jim Langevin",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"SC",seatNum:"06",fips:"4506",isOpen:!1,isVacant:!1,name:"James Clyburn",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TN",seatNum:"05",fips:"4705",isOpen:!1,isVacant:!1,name:"Jim Cooper",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TN",seatNum:"09",fips:"4709",isOpen:!1,isVacant:!1,name:"Steve Cohen",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"09",fips:"4809",isOpen:!1,isVacant:!1,name:"Al Green",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"15",fips:"4815",isOpen:!1,isVacant:!1,name:"Vicente  Gonzalez",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"16",fips:"4816",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"18",fips:"4818",isOpen:!1,isVacant:!1,name:"Sheila Jackson Lee",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"20",fips:"4820",isOpen:!1,isVacant:!1,name:"Joaquin Castro",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"28",fips:"4828",isOpen:!1,isVacant:!1,name:"Henry Cuellar",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"29",fips:"4829",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"30",fips:"4830",isOpen:!1,isVacant:!1,name:"Eddie Johnson",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"33",fips:"4833",isOpen:!1,isVacant:!1,name:"Marc Veasey",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"34",fips:"4834",isOpen:!1,isVacant:!1,name:"Filemon Vela",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"TX",seatNum:"35",fips:"4835",isOpen:!1,isVacant:!1,name:"Lloyd Doggett",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"VA",seatNum:"03",fips:"5103",isOpen:!1,isVacant:!1,name:"Bobby Scott",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"VA",seatNum:"04",fips:"5104",isOpen:!1,isVacant:!1,name:"Donald McEachin",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"VA",seatNum:"08",fips:"5108",isOpen:!1,isVacant:!1,name:"Rep. Don Beyer",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"VA",seatNum:"11",fips:"5111",isOpen:!1,isVacant:!1,name:"Gerald Connolly",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"VT",seatNum:"00",fips:"5000",isOpen:!1,isVacant:!1,name:"Peter Welch",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"01",fips:"5301",isOpen:!1,isVacant:!1,name:"Suzan DelBene",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"02",fips:"5302",isOpen:!1,isVacant:!1,name:"Rick Larsen",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"06",fips:"5306",isOpen:!1,isVacant:!1,name:"Derek Kilmer",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"07",fips:"5307",isOpen:!1,isVacant:!1,name:"Pramila  Jayapal",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"09",fips:"5309",isOpen:!1,isVacant:!1,name:"Adam Smith",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WA",seatNum:"10",fips:"5310",isOpen:!1,isVacant:!1,name:"Denny Heck",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WI",seatNum:"02",fips:"5502",isOpen:!1,isVacant:!1,name:"Mark Pocan",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WI",seatNum:"03",fips:"5503",isOpen:!1,isVacant:!1,name:"Ron Kind",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"WI",seatNum:"04",fips:"5504",isOpen:!1,isVacant:!1,name:"Gwen Moore",party:"D",raceRating:"SOLID D",ratingGroup:"Strong D"},{state:"CA",seatNum:"07",fips:"0607",isOpen:!1,isVacant:!1,name:"Ami Bera",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"CA",seatNum:"16",fips:"0616",isOpen:!1,isVacant:!1,name:"Jim Costa",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"CA",seatNum:"49",fips:"0649",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY D",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"07",fips:"1207",isOpen:!1,isVacant:!1,name:"Stephanie  Murphy",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"MN",seatNum:"07",fips:"2707",isOpen:!1,isVacant:!1,name:"Collin Peterson",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"NH",seatNum:"01",fips:"3301",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"NJ",seatNum:"02",fips:"3402",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY D",ratingGroup:"Vulnerable R"},{state:"NJ",seatNum:"05",fips:"3405",isOpen:!1,isVacant:!1,name:"Josh  Gottheimer",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"PA",seatNum:"05",fips:"4205",isOpen:!1,isVacant:!0,name:"Vacant",party:"R",raceRating:"LIKELY D",ratingGroup:"Vulnerable R"},{state:"PA",seatNum:"06",fips:"4206",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY D",ratingGroup:"Vulnerable R"},{state:"PA",seatNum:"08",fips:"4208",isOpen:!1,isVacant:!1,name:"Matthew Cartwright",party:"D",raceRating:"LIKELY D",ratingGroup:"Likely D"},{state:"PA",seatNum:"17",fips:"4217",isOpen:!1,isVacant:!1,name:"Keith Rothfus",party:"R",raceRating:"LIKELY D",ratingGroup:"Vulnerable R"},{state:"AZ",seatNum:"01",fips:"0401",isOpen:!1,isVacant:!1,name:"Tom O'Halleran",party:"D",raceRating:"LEAN D",ratingGroup:"Vulnerable D"},{state:"AZ",seatNum:"02",fips:"0402",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"CO",seatNum:"06",fips:"0806",isOpen:!1,isVacant:!1,name:"Mike Coffman",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"27",fips:"1227",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"IA",seatNum:"01",fips:"1901",isOpen:!1,isVacant:!1,name:"Rod Blum",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"IL",seatNum:"06",fips:"1706",isOpen:!1,isVacant:!1,name:"Peter Roskam",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"KS",seatNum:"03",fips:"2003",isOpen:!1,isVacant:!1,name:"Kevin Yoder",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"MI",seatNum:"11",fips:"2611",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"MN",seatNum:"02",fips:"2702",isOpen:!1,isVacant:!1,name:"Jason  Lewis",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"MN",seatNum:"03",fips:"2703",isOpen:!1,isVacant:!1,name:"Erik Paulsen",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"NJ",seatNum:"11",fips:"3411",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"NV",seatNum:"03",fips:"3203",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"LEAN D",ratingGroup:"Vulnerable D"},{state:"NV",seatNum:"04",fips:"3204",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"LEAN D",ratingGroup:"Vulnerable D"},{state:"PA",seatNum:"07",fips:"4207",isOpen:!1,isVacant:!0,name:"Vacant",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"VA",seatNum:"10",fips:"5110",isOpen:!1,isVacant:!1,name:"Barbara Comstock",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"WA",seatNum:"08",fips:"5308",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN D",ratingGroup:"Vulnerable R"},{state:"MN",seatNum:"01",fips:"2701",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"TOSSUP D",ratingGroup:"Vulnerable D"},{state:"AL",seatNum:"01",fips:"0101",isOpen:!1,isVacant:!1,name:"Bradley Byrne",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AL",seatNum:"02",fips:"0102",isOpen:!1,isVacant:!1,name:"Martha Roby",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AL",seatNum:"03",fips:"0103",isOpen:!1,isVacant:!1,name:"Mike Rogers",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AL",seatNum:"04",fips:"0104",isOpen:!1,isVacant:!1,name:"Robert Aderholt",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AL",seatNum:"05",fips:"0105",isOpen:!1,isVacant:!1,name:"Mo Brooks",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AL",seatNum:"06",fips:"0106",isOpen:!1,isVacant:!1,name:"Gary Palmer",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AR",seatNum:"01",fips:"0501",isOpen:!1,isVacant:!1,name:"Eric Crawford",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AR",seatNum:"03",fips:"0503",isOpen:!1,isVacant:!1,name:"Steve Womack",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AR",seatNum:"04",fips:"0504",isOpen:!1,isVacant:!1,name:"Bruce Westerman",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AZ",seatNum:"04",fips:"0404",isOpen:!1,isVacant:!1,name:"Paul Gosar",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AZ",seatNum:"05",fips:"0405",isOpen:!1,isVacant:!1,name:"Andy Biggs",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"CA",seatNum:"08",fips:"0608",isOpen:!1,isVacant:!1,name:"Paul Cook",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"CA",seatNum:"23",fips:"0623",isOpen:!1,isVacant:!1,name:"Kevin McCarthy",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"CA",seatNum:"42",fips:"0642",isOpen:!1,isVacant:!1,name:"Ken Calvert",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"CO",seatNum:"04",fips:"0804",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"CO",seatNum:"05",fips:"0805",isOpen:!1,isVacant:!1,name:"Doug Lamborn",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"01",fips:"1201",isOpen:!1,isVacant:!1,name:"Matt Gaetz",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"02",fips:"1202",isOpen:!1,isVacant:!1,name:"Neal  Dunn",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"03",fips:"1203",isOpen:!1,isVacant:!1,name:"Ted Yoho",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"04",fips:"1204",isOpen:!1,isVacant:!1,name:"John Rutherford",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"08",fips:"1208",isOpen:!1,isVacant:!1,name:"Bill Posey",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"11",fips:"1211",isOpen:!1,isVacant:!1,name:"Daniel Webster",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"12",fips:"1212",isOpen:!1,isVacant:!1,name:"Gus Bilirakis",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"17",fips:"1217",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"FL",seatNum:"19",fips:"1219",isOpen:!1,isVacant:!1,name:"Francis  Rooney",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"01",fips:"1301",isOpen:!1,isVacant:!1,name:"Buddy Carter",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"03",fips:"1303",isOpen:!1,isVacant:!1,name:"Drew  Ferguson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"08",fips:"1308",isOpen:!1,isVacant:!1,name:"Austin Scott",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"09",fips:"1309",isOpen:!1,isVacant:!1,name:"Doug Collins",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"10",fips:"1310",isOpen:!1,isVacant:!1,name:"Jody Hice",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"11",fips:"1311",isOpen:!1,isVacant:!1,name:"Barry Loudermilk",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"12",fips:"1312",isOpen:!1,isVacant:!1,name:"Rick Allen",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"GA",seatNum:"14",fips:"1314",isOpen:!1,isVacant:!1,name:"Tom Graves",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"ID",seatNum:"01",fips:"1601",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"ID",seatNum:"02",fips:"1602",isOpen:!1,isVacant:!1,name:"Mike Simpson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IL",seatNum:"15",fips:"1715",isOpen:!1,isVacant:!1,name:"John Shimkus",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IL",seatNum:"16",fips:"1716",isOpen:!1,isVacant:!1,name:"Adam Kinzinger",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IL",seatNum:"18",fips:"1718",isOpen:!1,isVacant:!1,name:"Darin LaHood",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"03",fips:"1803",isOpen:!1,isVacant:!1,name:"Jim  Banks",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"04",fips:"1804",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"05",fips:"1805",isOpen:!1,isVacant:!1,name:"Susan Brooks",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"06",fips:"1806",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"08",fips:"1808",isOpen:!1,isVacant:!1,name:"Larry Bucshon",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"IN",seatNum:"09",fips:"1809",isOpen:!1,isVacant:!1,name:"Trey  Hollingsworth",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KS",seatNum:"01",fips:"2001",isOpen:!1,isVacant:!1,name:"Roger Marshall",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KS",seatNum:"04",fips:"2004",isOpen:!1,isVacant:!1,name:"Ron Estes",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KY",seatNum:"01",fips:"2101",isOpen:!1,isVacant:!1,name:"James Comer",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KY",seatNum:"02",fips:"2102",isOpen:!1,isVacant:!1,name:"Brett Guthrie",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KY",seatNum:"04",fips:"2104",isOpen:!1,isVacant:!1,name:"Thomas Massie",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"KY",seatNum:"05",fips:"2105",isOpen:!1,isVacant:!1,name:"Harold Rogers",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"LA",seatNum:"01",fips:"2201",isOpen:!1,isVacant:!1,name:"Steve Scalise",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"LA",seatNum:"03",fips:"2203",isOpen:!1,isVacant:!1,name:"Clay Higgins",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"LA",seatNum:"04",fips:"2204",isOpen:!1,isVacant:!1,name:"Mike Johnson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"LA",seatNum:"05",fips:"2205",isOpen:!1,isVacant:!1,name:"Ralph Abraham",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"LA",seatNum:"06",fips:"2206",isOpen:!1,isVacant:!1,name:"Garret Graves",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MD",seatNum:"01",fips:"2401",isOpen:!1,isVacant:!1,name:"Andy Harris",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MI",seatNum:"02",fips:"2602",isOpen:!1,isVacant:!1,name:"Bill Huizenga",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MI",seatNum:"04",fips:"2604",isOpen:!1,isVacant:!1,name:"John Moolenaar",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MI",seatNum:"10",fips:"2610",isOpen:!1,isVacant:!1,name:"Paul Mitchell",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MN",seatNum:"06",fips:"2706",isOpen:!1,isVacant:!1,name:"Tom Emmer",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MO",seatNum:"03",fips:"2903",isOpen:!1,isVacant:!1,name:"Blaine Luetkemeyer",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MO",seatNum:"04",fips:"2904",isOpen:!1,isVacant:!1,name:"Vicky Hartzler",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MO",seatNum:"06",fips:"2906",isOpen:!1,isVacant:!1,name:"Sam Graves",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MO",seatNum:"07",fips:"2907",isOpen:!1,isVacant:!1,name:"Billy Long",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MO",seatNum:"08",fips:"2908",isOpen:!1,isVacant:!1,name:"Jason Smith",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MS",seatNum:"01",fips:"2801",isOpen:!1,isVacant:!1,name:"Trent Kelly",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MS",seatNum:"03",fips:"2803",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"MS",seatNum:"04",fips:"2804",isOpen:!1,isVacant:!1,name:"Steven Palazzo",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"03",fips:"3703",isOpen:!1,isVacant:!1,name:"Walter Jones",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"05",fips:"3705",isOpen:!1,isVacant:!1,name:"Virginia Foxx",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"06",fips:"3706",isOpen:!1,isVacant:!1,name:"Mark Walker",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"07",fips:"3707",isOpen:!1,isVacant:!1,name:"David Rouzer",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"10",fips:"3710",isOpen:!1,isVacant:!1,name:"Patrick McHenry",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NC",seatNum:"11",fips:"3711",isOpen:!1,isVacant:!1,name:"Mark Meadows",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"ND",seatNum:"00",fips:"3800",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NE",seatNum:"01",fips:"3101",isOpen:!1,isVacant:!1,name:"Jeff Fortenberry",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NE",seatNum:"03",fips:"3103",isOpen:!1,isVacant:!1,name:"Adrian Smith",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NJ",seatNum:"04",fips:"3404",isOpen:!1,isVacant:!1,name:"Christopher Smith",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"NV",seatNum:"02",fips:"3202",isOpen:!1,isVacant:!1,name:"Mark Amodei",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"02",fips:"3902",isOpen:!1,isVacant:!1,name:"Brad Wenstrup",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"04",fips:"3904",isOpen:!1,isVacant:!1,name:"Jim Jordan",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"05",fips:"3905",isOpen:!1,isVacant:!1,name:"Robert Latta",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"06",fips:"3906",isOpen:!1,isVacant:!1,name:"Bill Johnson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"07",fips:"3907",isOpen:!1,isVacant:!1,name:"Bob Gibbs",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"08",fips:"3908",isOpen:!1,isVacant:!1,name:"Warren  Davidson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"15",fips:"3915",isOpen:!1,isVacant:!1,name:"Steve Stivers",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OH",seatNum:"16",fips:"3916",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OK",seatNum:"01",fips:"4001",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OK",seatNum:"02",fips:"4002",isOpen:!1,isVacant:!1,name:"Markwayne Mullin",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OK",seatNum:"03",fips:"4003",isOpen:!1,isVacant:!1,name:"Frank Lucas",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OK",seatNum:"04",fips:"4004",isOpen:!1,isVacant:!1,name:"Tom Cole",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"OR",seatNum:"02",fips:"4102",isOpen:!1,isVacant:!1,name:"Greg Walden",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"PA",seatNum:"09",fips:"4209",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"PA",seatNum:"11",fips:"4211",isOpen:!1,isVacant:!1,name:"Lloyd Smucker",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"PA",seatNum:"12",fips:"4212",isOpen:!1,isVacant:!1,name:"Tom Marino",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"PA",seatNum:"13",fips:"4213",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"PA",seatNum:"15",fips:"4215",isOpen:!1,isVacant:!1,name:"Glenn Thompson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SC",seatNum:"02",fips:"4502",isOpen:!1,isVacant:!1,name:"Joe Wilson",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SC",seatNum:"03",fips:"4503",isOpen:!1,isVacant:!1,name:"Jeff Duncan",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SC",seatNum:"04",fips:"4504",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SC",seatNum:"05",fips:"4505",isOpen:!1,isVacant:!1,name:"Ralph Norman",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SC",seatNum:"07",fips:"4507",isOpen:!1,isVacant:!1,name:"Tom Rice",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"SD",seatNum:"00",fips:"4600",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"01",fips:"4701",isOpen:!1,isVacant:!1,name:"David Roe",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"02",fips:"4702",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"03",fips:"4703",isOpen:!1,isVacant:!1,name:"Charles Fleischmann",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"04",fips:"4704",isOpen:!1,isVacant:!1,name:"Scott DesJarlais",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"06",fips:"4706",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"07",fips:"4707",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TN",seatNum:"08",fips:"4708",isOpen:!1,isVacant:!1,name:"David  Kustoff",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"01",fips:"4801",isOpen:!1,isVacant:!1,name:"Louie Gohmert",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"03",fips:"4803",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"04",fips:"4804",isOpen:!1,isVacant:!1,name:"John Ratcliffe",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"05",fips:"4805",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"08",fips:"4808",isOpen:!1,isVacant:!1,name:"Kevin Brady",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"11",fips:"4811",isOpen:!1,isVacant:!1,name:"Mike Conaway",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"12",fips:"4812",isOpen:!1,isVacant:!1,name:"Kay Granger",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"13",fips:"4813",isOpen:!1,isVacant:!1,name:"Mac Thornberry",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"14",fips:"4814",isOpen:!1,isVacant:!1,name:"Randy Weber",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"17",fips:"4817",isOpen:!1,isVacant:!1,name:"Bill Flores",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"19",fips:"4819",isOpen:!1,isVacant:!1,name:"Jodey  Arrington",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"25",fips:"4825",isOpen:!1,isVacant:!1,name:"Roger Williams",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"26",fips:"4826",isOpen:!1,isVacant:!1,name:"Michael Burgess",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"27",fips:"4827",isOpen:!1,isVacant:!1,name:"Michael Cloud",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"TX",seatNum:"36",fips:"4836",isOpen:!1,isVacant:!1,name:"Brian Babin",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"UT",seatNum:"01",fips:"4901",isOpen:!1,isVacant:!1,name:"Rob Bishop",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"UT",seatNum:"02",fips:"4902",isOpen:!1,isVacant:!1,name:"Chris Stewart",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"UT",seatNum:"03",fips:"4903",isOpen:!1,isVacant:!1,name:"John Curtis",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"VA",seatNum:"01",fips:"5101",isOpen:!1,isVacant:!1,name:"Robert Wittman",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"VA",seatNum:"06",fips:"5106",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"VA",seatNum:"09",fips:"5109",isOpen:!1,isVacant:!1,name:"Morgan Griffith",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WA",seatNum:"04",fips:"5304",isOpen:!1,isVacant:!1,name:"Dan Newhouse",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WI",seatNum:"05",fips:"5505",isOpen:!1,isVacant:!1,name:"Jim Sensenbrenner",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WI",seatNum:"07",fips:"5507",isOpen:!1,isVacant:!1,name:"Sean Duffy",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WI",seatNum:"08",fips:"5508",isOpen:!1,isVacant:!1,name:"Mike  Gallagher",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WV",seatNum:"01",fips:"5401",isOpen:!1,isVacant:!1,name:"David McKinley",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"WY",seatNum:"00",fips:"5600",isOpen:!1,isVacant:!1,name:"Liz Cheney",party:"R",raceRating:"SOLID R",ratingGroup:"Strong R"},{state:"AR",seatNum:"02",fips:"0502",isOpen:!1,isVacant:!1,name:"French Hill",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"AZ",seatNum:"06",fips:"0406",isOpen:!1,isVacant:!1,name:"David Schweikert",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"AZ",seatNum:"08",fips:"0408",isOpen:!1,isVacant:!1,name:"Debbie Lesko",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"CA",seatNum:"01",fips:"0601",isOpen:!1,isVacant:!1,name:"Doug LaMalfa",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"CA",seatNum:"04",fips:"0604",isOpen:!1,isVacant:!1,name:"Tom McClintock",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"CA",seatNum:"21",fips:"0621",isOpen:!1,isVacant:!1,name:"David Valadao",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"CA",seatNum:"22",fips:"0622",isOpen:!1,isVacant:!1,name:"Devin Nunes",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"CO",seatNum:"03",fips:"0803",isOpen:!1,isVacant:!1,name:"Scott Tipton",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"IN",seatNum:"02",fips:"1802",isOpen:!1,isVacant:!1,name:"Jackie Walorski",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"MI",seatNum:"01",fips:"2601",isOpen:!1,isVacant:!1,name:"Jack  Bergman",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"MI",seatNum:"03",fips:"2603",isOpen:!1,isVacant:!1,name:"Justin Amash",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"MI",seatNum:"07",fips:"2607",isOpen:!1,isVacant:!1,name:"Tim Walberg",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"NC",seatNum:"08",fips:"3708",isOpen:!1,isVacant:!1,name:"Richard Hudson",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"NY",seatNum:"01",fips:"3601",isOpen:!1,isVacant:!1,name:"Lee Zeldin",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"NY",seatNum:"02",fips:"3602",isOpen:!1,isVacant:!1,name:"Peter King",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"NY",seatNum:"21",fips:"3621",isOpen:!1,isVacant:!1,name:"Elise Stefanik",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"NY",seatNum:"23",fips:"3623",isOpen:!1,isVacant:!1,name:"Tom Reed",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"OH",seatNum:"10",fips:"3910",isOpen:!1,isVacant:!1,name:"Michael Turner",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"OH",seatNum:"14",fips:"3914",isOpen:!1,isVacant:!1,name:"David Joyce",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"OK",seatNum:"05",fips:"4005",isOpen:!1,isVacant:!1,name:"Steve Russell",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"PA",seatNum:"14",fips:"4214",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"LIKELY R",ratingGroup:"Vulnerable D"},{state:"TX",seatNum:"02",fips:"4802",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"TX",seatNum:"06",fips:"4806",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"TX",seatNum:"10",fips:"4810",isOpen:!1,isVacant:!1,name:"Michael McCaul",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"TX",seatNum:"21",fips:"4821",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"TX",seatNum:"24",fips:"4824",isOpen:!1,isVacant:!1,name:"Kenny Marchant",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"TX",seatNum:"31",fips:"4831",isOpen:!1,isVacant:!1,name:"John Carter",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"WI",seatNum:"06",fips:"5506",isOpen:!1,isVacant:!1,name:"Glenn Grothman",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"WV",seatNum:"02",fips:"5402",isOpen:!1,isVacant:!1,name:"Alex Mooney",party:"R",raceRating:"LIKELY R",ratingGroup:"Likely R"},{state:"AK",seatNum:"00",fips:"0200",isOpen:!1,isVacant:!1,name:"Don Young",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"50",fips:"0650",isOpen:!1,isVacant:!1,name:"Duncan Hunter",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"06",fips:"1206",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"16",fips:"1216",isOpen:!1,isVacant:!1,name:"Vern Buchanan",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"18",fips:"1218",isOpen:!1,isVacant:!1,name:"Brian  Mast",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"25",fips:"1225",isOpen:!1,isVacant:!1,name:"Mario Diaz-Balart",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"GA",seatNum:"07",fips:"1307",isOpen:!1,isVacant:!1,name:"Rob Woodall",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"IA",seatNum:"04",fips:"1904",isOpen:!1,isVacant:!1,name:"Steve King",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"IL",seatNum:"12",fips:"1712",isOpen:!1,isVacant:!1,name:"Mike Bost",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"IL",seatNum:"13",fips:"1713",isOpen:!1,isVacant:!1,name:"Rodney Davis",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"MI",seatNum:"06",fips:"2606",isOpen:!1,isVacant:!1,name:"Fred Upton",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"MN",seatNum:"08",fips:"2708",isOpen:!0,isVacant:!1,name:"Open",party:"D",raceRating:"LEAN R",ratingGroup:"Vulnerable D"},{state:"MO",seatNum:"02",fips:"2902",isOpen:!1,isVacant:!1,name:"Ann Wagner",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"MT",seatNum:"00",fips:"3000",isOpen:!1,isVacant:!1,name:"Greg Gianforte",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"NC",seatNum:"02",fips:"3702",isOpen:!1,isVacant:!1,name:"George Holding",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"NE",seatNum:"02",fips:"3102",isOpen:!1,isVacant:!1,name:"Don  Bacon",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"NY",seatNum:"11",fips:"3611",isOpen:!1,isVacant:!1,name:"Daniel Donovan",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"NY",seatNum:"24",fips:"3624",isOpen:!1,isVacant:!1,name:"John Katko",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"NY",seatNum:"27",fips:"3627",isOpen:!1,isVacant:!1,name:"Chris Collins",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"OH",seatNum:"01",fips:"3901",isOpen:!1,isVacant:!1,name:"Steve Chabot",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"PA",seatNum:"16",fips:"4216",isOpen:!1,isVacant:!1,name:"Mike Kelly",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"SC",seatNum:"01",fips:"4501",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"TX",seatNum:"22",fips:"4822",isOpen:!1,isVacant:!1,name:"Pete Olson",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"TX",seatNum:"23",fips:"4823",isOpen:!1,isVacant:!1,name:"Will Hurd",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"VA",seatNum:"05",fips:"5105",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"WA",seatNum:"03",fips:"5303",isOpen:!1,isVacant:!1,name:"Jaime Herrera Beutler",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"WA",seatNum:"05",fips:"5305",isOpen:!1,isVacant:!1,name:"Cathy McMorris Rodgers",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"WI",seatNum:"01",fips:"5501",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"WV",seatNum:"03",fips:"5403",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"LEAN R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"10",fips:"0610",isOpen:!1,isVacant:!1,name:"Jeff Denham",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"25",fips:"0625",isOpen:!1,isVacant:!1,name:"Steve Knight",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"39",fips:"0639",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"45",fips:"0645",isOpen:!1,isVacant:!1,name:"Mimi Walters",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"CA",seatNum:"48",fips:"0648",isOpen:!1,isVacant:!1,name:"Dana Rohrabacher",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"15",fips:"1215",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"FL",seatNum:"26",fips:"1226",isOpen:!1,isVacant:!1,name:"Carlos Curbelo",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"GA",seatNum:"06",fips:"1306",isOpen:!1,isVacant:!1,name:"Karen Handel",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"IA",seatNum:"03",fips:"1903",isOpen:!1,isVacant:!1,name:"David Young",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"IL",seatNum:"14",fips:"1714",isOpen:!1,isVacant:!1,name:"Randy Hultgren",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"KS",seatNum:"02",fips:"2002",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"KY",seatNum:"06",fips:"2106",isOpen:!1,isVacant:!1,name:"Andy Barr",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"ME",seatNum:"02",fips:"2302",isOpen:!1,isVacant:!1,name:"Bruce Poliquin",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"MI",seatNum:"08",fips:"2608",isOpen:!1,isVacant:!1,name:"Mike Bishop",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NC",seatNum:"09",fips:"3709",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NC",seatNum:"13",fips:"3713",isOpen:!1,isVacant:!1,name:"Ted Budd",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NJ",seatNum:"03",fips:"3403",isOpen:!1,isVacant:!1,name:"Tom MacArthur",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NJ",seatNum:"07",fips:"3407",isOpen:!1,isVacant:!1,name:"Leonard Lance",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NM",seatNum:"02",fips:"3502",isOpen:!0,isVacant:!1,name:"Open",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NY",seatNum:"19",fips:"3619",isOpen:!1,isVacant:!1,name:"John Faso",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"NY",seatNum:"22",fips:"3622",isOpen:!1,isVacant:!1,name:"Claudia Tenney",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"OH",seatNum:"12",fips:"3912",isOpen:!1,isVacant:!1,name:"Troy Balderson",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"PA",seatNum:"01",fips:"4201",isOpen:!1,isVacant:!1,name:"Brian   Fitzpatrick",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"PA",seatNum:"10",fips:"4210",isOpen:!1,isVacant:!1,name:"Scott Perry",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"TX",seatNum:"07",fips:"4807",isOpen:!1,isVacant:!1,name:"John Culberson",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"TX",seatNum:"32",fips:"4832",isOpen:!1,isVacant:!1,name:"Pete Sessions",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"UT",seatNum:"04",fips:"4904",isOpen:!1,isVacant:!1,name:"Mia Love",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"VA",seatNum:"02",fips:"5102",isOpen:!1,isVacant:!1,name:"Scott Taylor",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"},{state:"VA",seatNum:"07",fips:"5107",isOpen:!1,isVacant:!1,name:"David Brat",party:"R",raceRating:"TOSSUP R",ratingGroup:"Vulnerable R"}]}),{}],5:[(function(e,t,r){"use strict";t.exports={P:"//washingtonpost.com/2016-election-results/us-presidential-race/",S:"//washingtonpost.com/2016-election-results/us-senate/",H:"//washingtonpost.com/2016-election-results/house-of-representatives",G:"//washingtonpost.com/2016-election-results/governors-state-race"}}),{}],6:[(function(e,t,r){t.exports={state:["WV-S-0-R","WV-H-3-R","OH-G-0-D","OH-S-0-R","IN-S-0-R","IN-H-6-R","NC-H-3-R","NC-H-9-R","ID-G-0-D","ID-G-0-R","OR-G-0-D","OR-G-0-R","PA-G-0-R","PA-S-0-R","NE-S-0-R","NE-H-2-D","GA-G-0-R","GA-G-0-D","TX-G-0-D","TX-H-7-D","AR-G-0-D","AR-H-2-D","KY-H-6-D","AL-G-0-R","AL-H-2-R","NM-G-0-R","NM-G-0-D","SD-G-0-R","SD-G-0-D","IA-G-0-D","IA-H-1-D","MT-S-0-R","MT-H-0-D","MS-G-0-D","MS-H-3-R","NJ-S-0-R","NJ-H-11-D","CA-G-0-X","CA-S-0-X","NV-S-0-D","NV-G-0-D","ND-S-0-R","ND-H-0-R","SC-G-0-R","SC-H-4-R","VA-S-0-R","VA-H-10-D","CO-G-0-D","CO-H-6-D","NY-H-11-R","NY-H-14-D","OK-G-0-R","OK-H-1-R","SC-G-0-R","SC-H-4-R","UT-S-0-R","MD-G-0-D","MD-S-0-D","MS-S-0-D","MS-H-3-R","AL-H-2-R","GA-G-0-R","GA-H-6-D","TN-G-0-R","TN-S-0-R","KS-G-0-R","KS-H-3-D","MI-S-0-R","MI-G-0-D","MO-S-0-R","MO-H-1-D","WA-S-0-X","WA-H-8-X","HI-G-0-D","HI-H-1-D","CT-G-0-D","CT-G-0-R","MN-S-1-D","MN-S-1-R","WI-G-0-D","WI-S-0-R","VT-G-0-D","AZ-G-0-D","AZ-S-0-R","FL-G-0-D","FL-G-0-R","MA-H-7-D","MA-S-0-R","DE-S-0-D","DE-S-0-R","NH-G-0-D","NH-H-1-D","RI-G-0-D","RI-G-0-R","NY-G-0-D","NY-A-0-D","OH-H-1-G"],landing:["CT-G-0-G","FL-G-0-G","GA-G-0-G","IA-G-0-G","KS-G-0-G","ME-G-0-G","NV-G-0-G","OH-G-0-G","WI-G-0-G","FL-S-0-G","IN-S-0-G","MO-S-0-G","ND-S-0-G","AZ-S-0-G","NV-S-0-G","TN-S-0-G","TX-S-0-G","MN-H-1-G","CA-H-10-G","CA-H-25-G","CA-H-39-G","CA-H-45-G","CA-H-48-G","FL-H-15-G","FL-H-26-G","GA-H-6-G","IA-H-3-G","IL-H-14-G","KS-H-2-G","KY-H-6-G","ME-H-2-G","MI-H-8-G","NC-H-9-G","NC-H-13-G","NJ-H-3-G","NJ-H-7-G","NM-H-2-G","NY-H-19-G","NY-H-22-G","OH-H-12-G","PA-H-1-G","PA-H-10-G","TX-H-7-G","TX-H-32-G","UT-H-4-G","VA-H-2-G","VA-H-7-G"]}}),{}],7:[(function(e,t,r){"use strict";var n=e("wapo-shared/race-helpers").officeIDs,i={president:{total:538,dem:0,demTotal:0,rep:0,repTotal:0,ind:0,half:270,win:270},house:{total:435,dem:0,demTotal:0,rep:0,repTotal:0,ind:0,half:218,win:218,currentDem:193,currentRep:237},senate:{total:100,dem:23,demTotal:23,rep:42,repTotal:42,ind:0,half:50,win:51,currentDem:49,currentRep:51},governor:{total:50,dem:7,demTotal:7,rep:7,repTotal:7,ind:0,half:25}};for(var a in i)i[n[a]]=i[a];t.exports=i}),{"wapo-shared/race-helpers":263}],8:[(function(e,t,r){t.exports=[{state:"TN",fips:"47",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"ME",fips:"23",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"TX",fips:"48",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"IL",fips:"17",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"WY",fips:"56",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"SC",fips:"45",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"OK",fips:"40",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"KY",fips:"21",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"OR",fips:"41",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"RI",fips:"44",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"ID",fips:"16",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"KS",fips:"20",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"NH",fips:"33",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"NM",fips:"35",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"VA",fips:"51",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"DE",fips:"10",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"CO",fips:"08",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"CT",fips:"09",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"MO",fips:"29",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"AR",fips:"05",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"NC",fips:"37",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"WV",fips:"54",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"LA",fips:"22",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"ID",fips:"16",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"CO",fips:"08",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"IA",fips:"19",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"ND",fips:"38",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"GA",fips:"13",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"WI",fips:"55",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"OK",fips:"40",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"VT",fips:"50",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"UT",fips:"49",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"MA",fips:"25",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"KS",fips:"20",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"AK",fips:"02",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"WA",fips:"53",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"KY",fips:"21",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"MI",fips:"26",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"OH",fips:"39",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"FL",fips:"12",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"NY",fips:"36",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"SC",fips:"45",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"AL",fips:"01",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"SD",fips:"46",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"PA",fips:"42",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"MD",fips:"24",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"OR",fips:"41",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"IN",fips:"18",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"HI",fips:"15",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"AR",fips:"05",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"IL",fips:"17",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"MT",fips:"30",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"NJ",fips:"34",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"AK",fips:"02",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"GA",fips:"13",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"IA",fips:"19",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"NC",fips:"37",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"SD",fips:"46",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"NE",fips:"31",party:"R",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong R"},{state:"CA",fips:"06",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"LA",fips:"22",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"NH",fips:"33",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"NV",fips:"32",party:"D",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong D"},{state:"AL",fips:"01",party:"D",notUpForReelection:!0,senateClass:"2",ratingGroup:"Strong D"},{state:"AZ",fips:"04",party:"R",notUpForReelection:!0,senateClass:"3",ratingGroup:"Strong R"},{state:"CA",fips:"06",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Feinstein",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"CT",fips:"09",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Murphy",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"DE",fips:"10",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Carper",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"HI",fips:"15",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Hirono",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"MA",fips:"25",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Warren",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"MD",fips:"24",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Cardin",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"ME",fips:"23",seatNum:"00",isSpecial:!1,isOpen:!1,name:"King",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"MN",fips:"27",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Klobuchar",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"NM",fips:"35",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Heinrich",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"NY",fips:"36",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Gillirand",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"RI",fips:"44",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Whitehouse",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"VT",fips:"50",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Sanders",party:"D",raceRating:"Safe D",ratingGroup:"Strong D"},{state:"WA",fips:"53",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Cantwell",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"MI",fips:"26",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Stabenow",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"OH",fips:"39",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Brown",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"PA",fips:"42",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Casey",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"VA",fips:"51",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Kaine",party:"D",raceRating:"Likely D",ratingGroup:"Likely D"},{state:"MN",fips:"27",seatNum:"01",isSpecial:!0,isOpen:!1,name:"Smih",party:"D",raceRating:"Lean D",ratingGroup:"Vulnerable D"},{state:"NJ",fips:"34",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Menendez",party:"D",raceRating:"Lean D",ratingGroup:"Vulnerable D"},{state:"WV",fips:"54",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Manchin",party:"D",raceRating:"Lean D",ratingGroup:"Vulnerable D"},{state:"WI",fips:"55",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Baldwin",party:"D",raceRating:"Lean D",ratingGroup:"Vulnerable D"},{state:"AZ",fips:"04",seatNum:"00",isSpecial:!1,isOpen:!0,name:"Open",party:"R",raceRating:"Tossup",ratingGroup:"Vulnerable R"},{state:"FL",fips:"12",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Nelson",party:"D",raceRating:"Tossup",ratingGroup:"Vulnerable D"},{state:"IN",fips:"18",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Donnelly",party:"D",raceRating:"Tossup",ratingGroup:"Vulnerable D"},{state:"MO",fips:"29",seatNum:"00",isSpecial:!1,isOpen:!1,name:"McCaskill",party:"D",raceRating:"Tossup",ratingGroup:"Vulnerable D"},{state:"MT",fips:"30",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Tester",party:"D",raceRating:"Tossup",ratingGroup:"Vulnerable D"},{state:"NV",fips:"32",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Heller",party:"R",raceRating:"Tossup",ratingGroup:"Vulnerable R"},{state:"TN",fips:"47",seatNum:"00",isSpecial:!1,isOpen:!0,name:"Open",party:"R",raceRating:"Lean R",ratingGroup:"Vulnerable R"},{state:"ND",fips:"38",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Heitkamp",party:"D",raceRating:"Lean R",ratingGroup:"Vulnerable D"},{state:"TX",fips:"48",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Cruz",party:"R",raceRating:"Lean R",ratingGroup:"Vulnerable R"},{state:"MS",fips:"28",seatNum:"01",isSpecial:!0,isOpen:!1,name:"Hyde-Smith",party:"R",raceRating:"Likely R",ratingGroup:"Likely R"},{state:"MS",fips:"28",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Wicker",party:"R",raceRating:"Safe R",ratingGroup:"Strong R"},{state:"NE",fips:"31",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Fischer",party:"R",raceRating:"Safe R",ratingGroup:"Strong R"},{state:"UT",fips:"49",seatNum:"00",isSpecial:!1,isOpen:!0,name:"Open",party:"R",raceRating:"Safe R",ratingGroup:"Strong R"},{state:"WY",fips:"56",seatNum:"00",isSpecial:!1,isOpen:!1,name:"Barrasso",party:"R",raceRating:"Safe R",ratingGroup:"Strong R"}]}),{}],9:[(function(e,t,r){t.exports=[{id:"01",bbox:[-88.47322184299986,30.211837347000085,-84.88802121899988,35.008021457000154]},{id:"02",bbox:[-179.14734,51.215265027000044,-129.9741669149999,71.38921046500008]},{id:"04",bbox:[-114.81629947499994,31.332081677000076,-109.04521236999989,37.00425429000012]},{id:"05",bbox:[-94.61791188699993,33.004099985000096,-89.64483228799992,36.49960445000005]},{id:"06",bbox:[-124.40917464699993,32.534270766000134,-114.13119958999994,42.009505681000064]},{id:"08",bbox:[-109.06024520999995,36.99242006100013,-102.04157390499995,41.002913546000116]},{id:"09",bbox:[-73.72777376499988,40.988988394000046,-71.7872383649999,42.05057848200005]},{id:"10",bbox:[-75.78914081299985,38.45103325600002,-75.04841149199984,39.839459074000104]},{id:"11",bbox:[-77.11975681699994,38.80892658800002,-76.9093908829999,38.99554020900018]},{id:"12",bbox:[-87.63491789599993,24.523213195000153,-80.03143944599987,31.000962206000167]},{id:"13",bbox:[-85.6051604939999,30.355729950000182,-80.84051153199988,35.0008133460002]},{id:"15",bbox:[-160.24655917199985,18.911121472000104,-154.80638043499985,22.232356370000048]},{id:"16",bbox:[-117.24286972999994,41.99362186200011,-111.04366837899994,49.00083838900008]},{id:"17",bbox:[-91.51296742199986,36.970750113000065,-87.4949413999999,42.508294202]},{id:"18",bbox:[-88.09788658499991,37.77173490200016,-84.78470021299995,41.76050507400015]},{id:"19",bbox:[-96.63777827299992,40.37542960700006,-90.14005463399991,43.50096239700008]},{id:"20",bbox:[-102.05173465899986,36.99301177600017,-94.58837967099993,40.00451627700011]},{id:"21",bbox:[-89.56948826399986,36.497147153000014,-81.96476111899995,39.14745049100014]},{id:"22",bbox:[-94.04334529999994,28.929092954000055,-88.82051983299993,33.019447088000106]},{id:"23",bbox:[-71.08446388399989,42.98476421400011,-67,47.459830086000125]},{id:"24",bbox:[-79.48664538499986,37.91512351400007,-75.04946318299994,39.7230291260002]},{id:"25",bbox:[-73.50796377699987,41.237955536000186,-69.9280530069999,42.88676061800015]},{id:"26",bbox:[-90.41731423199991,41.69611002300013,-82.41866536799995,48.23807965400016]},{id:"27",bbox:[-97.23908448799989,43.499500660000194,-89.49313976099984,49.384469968000076]},{id:"28",bbox:[-91.65490100099993,30.17582385300011,-88.09788278599984,34.99570049900018]},{id:"29",bbox:[-95.77469620999995,35.995676355000114,-89.09974805699989,40.61363258200009]},{id:"30",bbox:[-116.0498459669999,44.358202625000104,-104.03955246699985,49.001102767000134]},{id:"31",bbox:[-104.05336405499992,39.999924896000095,-95.30828243099984,43.004472045000114]},{id:"32",bbox:[-120.00749658299992,35.00111792000018,-114.03963575299991,41.999812963000124]},{id:"33",bbox:[-72.55523213499987,42.69697629000012,-70.71129564199993,45.30564955500017]},{id:"34",bbox:[-75.55978826699987,38.92903715,-73.9027272159999,41.35454465800012]},{id:"35",bbox:[-109.05016229399985,31.331902287000162,-103.00215373099991,37.00028683500017]},{id:"36",bbox:[-79.76181677699992,40.49626430000018,-71.85646070899986,45.01586151399999]},{id:"37",bbox:[-84.32186486599994,33.8417490720002,-75.46003300399991,36.588148875000115]},{id:"38",bbox:[-104.05002278699993,45.9350831540001,-96.55550277999993,49.00055311]},{id:"39",bbox:[-84.82028842799986,38.40350870700007,-80.51871533499991,41.97731791400008]},{id:"40",bbox:[-103.00242477599988,33.61584999900015,-94.43104484899993,37.00230566500005]},{id:"41",bbox:[-124.56617536999988,41.99187135900013,-116.46422312599987,46.28768217800007]},{id:"42",bbox:[-80.51967819599992,39.71979106100008,-74.6894691139999,42.26925804000001]},{id:"44",bbox:[-71.88617535999992,41.14700112800011,-71.1196432999999,42.018789422000054]},{id:"45",bbox:[-83.35387987999991,32.03762984100007,-78.55080002499994,35.215424939000116]},{id:"46",bbox:[-104.05772848299989,42.48030137500018,-96.4377180009999,45.94566303400006]},{id:"47",bbox:[-90.30996733099994,34.9830133530001,-81.6468965659999,36.678111119000164]},{id:"48",bbox:[-106.64546828199985,25.837048983000045,-93.50803251699989,36.500568855000154]},{id:"49",bbox:[-114.05298629899988,36.99789925500016,-109.04104727499993,42.001560718000064]},{id:"50",bbox:[-73.43747252999992,42.726941337000085,-71.46774700399993,45.01665583]},{id:"51",bbox:[-83.67494333699989,36.540748535000034,-75.24196685499993,39.46600416300015]},{id:"53",bbox:[-124.75643622199988,45.54510516900007,-116.9171666339999,49.00243328500005]},{id:"54",bbox:[-82.64354237799989,37.20172175000005,-77.71844188499995,40.6386205670002]},{id:"55",bbox:[-92.88942339699992,42.491999843000144,-86.80533012799992,47.08085500700008]},{id:"56",bbox:[-111.05687488399991,40.99549316200006,-104.05224885499985,45.00589722600017]},{id:"72",bbox:[-67.95241213299994,17.93128644400008,-67,18.51596120000005]},{id:"78",bbox:null},{id:"00",bbox:[-124.848974,24.396308,-66.885444,49.384358]}]}),{}],10:[(function(e,t,r){t.exports=[{id:"02",bbox:[-35.55655411886716,-20.284352551599646,-19.695891140228685,-10.963474509986016]},{id:"15",bbox:[-18.77316425260371,-20.219443583132335,-10.742378005353066,-15.267581012897818]},{id:"72",bbox:[-.0006104269041186266,.00016107948676919432,-.0006018712403600794,.00016633170945698088]},{id:"01",bbox:[10.668082748896381,-12.879481587145033,15.464777543520173,-5.164236649666133]},{id:"05",bbox:[2.4614090055953883,-8.943546851544145,8.738919310676646,-3.2707080159457753]},{id:"04",bbox:[-23.89312579347954,-10.416361688527928,-15.424600732288846,-.5771663649839466]},{id:"06",bbox:[-32.4655630032633,-7.060733316871008,-22.477283819622805,9.988541168243172]},{id:"08",bbox:[-15.424763218262346,-2.471999134161257,-6.378229739926994,4.688913244057538]},{id:"09",bbox:[26.564574748566336,6.683187926897026,28.71522582985977,8.777059670734404]},{id:"11",bbox:[23.431012515420495,2.456636493794173,23.69365692484505,2.7419895822864064]},{id:"10",bbox:[24.74428408715919,2.2467229999507845,26.049092328728094,4.421008493605531]},{id:"12",bbox:[11.965386518183148,-20.412072963093078,23.30512450806489,-10.99012913867168]},{id:"13",bbox:[13.970788224508894,-11.760913773545735,20.742738173545778,-4.751057345945285]},{id:"19",bbox:[.0013287938763302657,2.7794436882154483,7.52023297063185,7.70859103529476]},{id:"16",bbox:[-23.440753415118728,6.589883469145535,-16.021234825289614,18.308033332330726]},{id:"17",bbox:[6.067504081808929,-2.4422386690397357,11.0381589558383,6.396429874577525]},{id:"18",bbox:[10.4204893822903,-1.0582409011006666,14.284726955225377,5.601726042361949]},{id:"20",bbox:[-6.769827711170243,-2.7018570434566302,2.4498345468155667,2.2907728354177714]},{id:"21",bbox:[8.763550876130477,-3.220597442513611,17.98085021339941,1.508470268036807]},{id:"22",bbox:[3.293930546610618,-14.963145314979442,10.489797944414747,-8.83425266333402]},{id:"25",bbox:[26.527562281723842,7.898142265206518,30.853032564415177,10.34220879365719]},{id:"24",bbox:[20.41265000894889,1.353878463439089,26.055971799943563,4.175510578614167]},{id:"23",bbox:[27.930424897032204,10.57098994377951,32.504280010337034,17.673433049960924]},{id:"26",bbox:[6.777589108813381,5.352033544766139,16.201271814152168,15.17178449667303]},{id:"27",bbox:[-.5607714829235624,7.572650639566324,7.623021093100393,16.574075328951455]},{id:"29",bbox:[.9992474404472612,-4.080845170697847,9.304139470971975,3.141209223358987]},{id:"28",bbox:[6.545224627924476,-13.073914717629323,11.018860658698548,-5.462092724047847]},{id:"30",bbox:[-20.366866793873694,10.276436651597159,-7.655788849331184,18.10118994500923]},{id:"37",bbox:[15.590640601663976,-5.610979688692399,26.57364579249677,-.7581003328670285]},{id:"38",bbox:[-8.055472522556293,11.354049098030496,.1264951321801581,16.339495711436957]},{id:"31",bbox:[-8.724200040201286,2.0572094527596496,1.5575413387693726,7.182925997479681]},{id:"33",bbox:[27.218645605380747,9.654751794775189,29.264919300537358,13.886162745347383]},{id:"34",bbox:[25.04361268241484,3.1666309976181264,26.708751880079472,6.96586936127095]},{id:"35",bbox:[-16.657945369413586,-10.560973966165514,-7.959179635117966,-1.5917142190927247]},{id:"32",bbox:[-27.97874938539364,-3.5445599588676027,-20.055339945005787,8.67644513020702]},{id:"36",bbox:[19.389947661649334,5.768090371823625,28.786298087448973,12.846883572297093]},{id:"39",bbox:[13.73381162872088,.6822534060671017,18.946381100395225,6.632175527194171]},{id:"40",bbox:[-8.017848472844555,-8.0217180323755,2.7240051886556533,-2.3798905475022116]},{id:"41",bbox:[-31.59682098681221,7.884035908674582,-21.585826898959624,16.220913236638438]},{id:"42",bbox:[18.60227889634065,3.1196008390538412,25.839460401779462,7.787078908054071]},{id:"44",bbox:[28.47755550365389,7.50754153641014,29.448214381810832,8.892170874313134]},{id:"45",bbox:[16.876795259653438,-8.934346376399716,23.202129463861763,-4.134245178651644]},{id:"46",bbox:[-8.455747331973626,5.97452716860283,.23356358194215424,11.732392596445031]},{id:"47",bbox:[7.9869990048134145,-5.65194101032475,18.59062494870777,-1.9651554856578322]},{id:"48",bbox:[-13.369025182728032,-19.856500101902174,4.0760898415350395,-3.1655439862432564]},{id:"49",bbox:[-21.559467373890094,-1.5917142190927247,-14.562105157665897,7.174510923784711]},{id:"51",bbox:[16.084979458467824,-2.336670016157976,25.965798672194992,3.1723628450432475]},{id:"50",bbox:[25.620152867489015,9.4610740091833,27.736202817393135,13.34905636823815]},{id:"53",bbox:[-29.38583851540864,13.888926997669463,-21.036584894117926,19.807794637875084]},{id:"55",bbox:[4.1496143626561075,6.189961673880756,10.854143960108571,13.272779669353291]},{id:"54",bbox:[17.013821900567596,-1.0454991159281264,22.603204076293515,4.550792239725212]},{id:"56",bbox:[-16.88460660866502,4.041179743853902,-8.194922720277576,11.207880382926218]},{id:"78",bbox:[0,0,0,0]},{id:"00",bbox:[-35.55655411886716,-20.412072963093078,35.70428001033704,21.507794637875083]}]}),{}],11:[(function(e,t,r){var l=e("util/"),u=Array.prototype.slice,n=Object.prototype.hasOwnProperty,a=t.exports=i;function c(e,t){return l.isUndefined(t)?""+t:l.isNumber(t)&&!isFinite(t)?t.toString():l.isFunction(t)||l.isRegExp(t)?t.toString():t}function p(e,t){return l.isString(e)?e.length<t?e:e.slice(0,t):e}function h(e,t,r,n,i){throw new a.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function i(e,t){e||h(e,!0,t,"==",a.ok)}function d(e,t){if(e===t)return!0;if(l.isBuffer(e)&&l.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return l.isDate(e)&&l.isDate(t)?e.getTime()===t.getTime():l.isRegExp(e)&&l.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:l.isObject(e)||l.isObject(t)?(function(e,t){if(l.isNullOrUndefined(e)||l.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(l.isPrimitive(e)||l.isPrimitive(t))return e===t;var r=f(e),n=f(t);if(r&&!n||!r&&n)return!1;if(r)return e=u.call(e),t=u.call(t),d(e,t);var i,a,o=m(e),s=m(t);if(o.length!=s.length)return!1;for(o.sort(),s.sort(),a=o.length-1;a>=0;a--)if(o[a]!=s[a])return!1;for(a=o.length-1;a>=0;a--)if(i=o[a],!d(e[i],t[i]))return!1;return!0})(e,t):e==t}function f(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function s(e,t,r,n){var i;l.isString(r)&&(n=r,r=null);try{t()}catch(e){i=e}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&h(i,r,"Missing expected exception"+n),!e&&o(i,r)&&h(i,r,"Got unwanted exception"+n),e&&i&&r&&!o(i,r)||!e&&i)throw i}a.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=(t=this,p(JSON.stringify(t.actual,c),128)+" "+t.operator+" "+p(JSON.stringify(t.expected,c),128)),this.generatedMessage=!0);var r=e.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,a=r.name,o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},l.inherits(a.AssertionError,Error),a.fail=h,a.ok=i,a.equal=function(e,t,r){e!=t&&h(e,t,r,"==",a.equal)},a.notEqual=function(e,t,r){e==t&&h(e,t,r,"!=",a.notEqual)},a.deepEqual=function(e,t,r){d(e,t)||h(e,t,r,"deepEqual",a.deepEqual)},a.notDeepEqual=function(e,t,r){d(e,t)&&h(e,t,r,"notDeepEqual",a.notDeepEqual)},a.strictEqual=function(e,t,r){e!==t&&h(e,t,r,"===",a.strictEqual)},a.notStrictEqual=function(e,t,r){e===t&&h(e,t,r,"!==",a.notStrictEqual)},a.throws=function(e,t,r){s.apply(this,[!0].concat(u.call(arguments)))},a.doesNotThrow=function(e,t){s.apply(this,[!1].concat(u.call(arguments)))},a.ifError=function(e){if(e)throw e};var m=Object.keys||function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t}}),{"util/":134}],12:[(function(e,t,r){t.exports=function(e,t,r,n,i,a){e.forEach((function(e){e(t,r,n,i,a)}))}}),{}],13:[(function(e,t,r){var w=e("xtend/mutable"),D=e("assert"),S=e("xtend"),R=e("./apply-hook");function P(r,n,i,a){r&&!i[r]&&(i[r]={}),Object.keys(n).forEach((function(e){var t=a?a(n[e],e):n[e];r?i[r][e]=t:i[e]=t}))}function n(e){throw e}function E(n){return function(e,t,r){e&&n(e,t,r)}}function A(t,e){return e.forEach((function(e){t=e(t)})),t}t.exports=function(e){e=e||{},D.equal(typeof e,"object","barracks: hooks should be undefined or an object");var m=[],y=[],s=[],i=[],l=[],a=[],u=[];t(e);var c=!1,p=!1,h=!1,d=!1,g=r._subscriptions={},v=r._reducers={},b=r._effects={},_=r._models=[],x={};return r.model=function(e){D.equal(typeof e,"object","barracks.store.model: model should be an object"),_.push(e)},r.state=function(e){e=e||{},D.equal(typeof e,"object","barracks.store.state: opts should be an object");var n=e.state;if(!e.state&&!1===e.freeze)return S(x);if(!e.state)return Object.freeze(S(x));D.equal(typeof n,"object","barracks.store.state: state should be an object");var i=[],a={};_.forEach((function(e){var t=e.namespace;i.push(t);var r=e.state||{};t?(a[t]=a[t]||{},P(t,r,a),a[t]=S(a[t],n[t])):w(a,r)})),Object.keys(n).forEach((function(e){-1===i.indexOf(e)&&(a[e]=n[e])}));var t=A(S(x,S(n,a)),l);return!1===e.freeze?t:Object.freeze(t)},(r.start=r).use=t,r;function t(e){D.equal(typeof e,"object","barracks.use: hooks should be an object"),D.ok(!e.onError||"function"===typeof e.onError,"barracks.use: onError should be undefined or a function"),D.ok(!e.onAction||"function"===typeof e.onAction,"barracks.use: onAction should be undefined or a function"),D.ok(!e.onStateChange||"function"===typeof e.onStateChange,"barracks.use: onStateChange should be undefined or a function"),e.onStateChange&&m.push(e.onStateChange),e.onError&&s.push(E(e.onError)),e.onAction&&y.push(e.onAction),e.wrapSubscriptions&&i.push(e.wrapSubscriptions),e.wrapInitialState&&l.push(e.wrapInitialState),e.wrapReducers&&a.push(e.wrapReducers),e.wrapEffects&&u.push(e.wrapEffects)}function r(r){return r=r||{},D.equal(typeof r,"object","barracks.store.start: opts should be undefined or an object"),_.forEach((function(e){var n=e.namespace;if(!h&&e.state&&!1!==r.state){var t=e.state||{};n?(x[n]=x[n]||{},P(n,t,x)):w(x,t)}!c&&e.reducers&&!1!==r.reducers&&P(n,e.reducers,v,(function(e){return A(e,a)})),!p&&e.effects&&!1!==r.effects&&P(n,e.effects,b,(function(e){return A(e,u)})),!d&&e.subscriptions&&!1!==r.subscriptions&&P(n,e.subscriptions,g,(function(e,t){var r=f("subscription: "+(n?n+":"+t:t));return(e=A(e,i))(r,(function(e){R(s,e,x,f)})),e}))})),h||!1===r.state||(x=A(x,l)),r.noSubscriptions||(d=!0),r.noReducers||(c=!0),r.noEffects||(p=!0),r.noState||(h=!0),s.length||s.push(E(n)),f;function f(i,a){return D.equal(typeof i,"string","barracks.store.start.createSend: selfName should be a string"),D.ok(!a||"boolean"===typeof a,"barracks.store.start.send: callOnError should be undefined or a boolean"),function(e,t,r){r||a||(r=t,t=null),t="undefined"===typeof t?null:t,D.equal(typeof e,"string","barracks.store.start.send: name should be a string"),D.ok(!r||"function"===typeof r,"barracks.store.start.send: cb should be a function");var n=a?function(e){(e=e||null)&&R(s,e,x,(function(r){return function(e,t){D.equal(typeof e,"string","barracks.store.start.send: name should be a string"),o(e,t="undefined"===typeof t?null:t,r,n)}}))}:r;o(e,t,i,n)}}function o(c,p,h,d){D.equal(typeof c,"string","barracks._send: name should be a string"),D.equal(typeof h,"string","barracks._send: caller should be a string"),D.equal(typeof d,"function","barracks._send: cb should be a function"),(function(){var e=!1,t=!1,r=S(x);y.length&&R(y,p,x,c,h,f);var n=c;if(/:/.test(c)){var i=c.split(":"),a=i.shift();n=i.join(":")}var o=a?v[a]:v;if(o&&o[n]){if(a){var s=o[n](p,x[a]);r[a]=S(x[a],s)}else w(r,v[n](p,x));e=!0,m.length&&R(m,p,r,x,n,f),d(null,x=r)}var l=a?b[a]:b;if(!e&&l&&l[n]){var u=f("effect: "+c);a?l[n](p,x[a],u,d):l[n](p,x,u,d),t=!0}if(!e&&!t)throw new Error("Could not find action "+n)})()}}}}),{"./apply-hook":12,assert:11,xtend:138,"xtend/mutable":139}],14:[(function(e,t,r){}),{}],15:[(function(e,t,r){!(function(e){"use strict";var c="undefined"!==typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),a="a".charCodeAt(0),o="A".charCodeAt(0),s="-".charCodeAt(0),l="_".charCodeAt(0);function p(e){var t=e.charCodeAt(0);return t===r||t===s?62:t===n||t===l?63:t<i?-1:t<i+10?t-i+26+26:t<o+26?t-o:t<a+26?t-a+26:void 0}e.toByteArray=function(e){var t,r,n,i,a,o;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;a="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,o=new c(3*e.length/4-a),n=a>0?e.length-4:e.length;var l=0;function u(e){o[l++]=e}for(r=t=0;t<n;t+=4,r+=3)u((16711680&(i=p(e.charAt(t))<<18|p(e.charAt(t+1))<<12|p(e.charAt(t+2))<<6|p(e.charAt(t+3))))>>16),u((65280&i)>>8),u(255&i);return 2===a?u(255&(i=p(e.charAt(t))<<2|p(e.charAt(t+1))>>4)):1===a&&(u((i=p(e.charAt(t))<<10|p(e.charAt(t+1))<<4|p(e.charAt(t+2))>>2)>>8&255),u(255&i)),o},e.fromByteArray=function(e){var t,r,n,i,a=e.length%3,o="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,n=e.length-a;t<n;t+=3)r=(e[t]<<16)+(e[t+1]<<8)+e[t+2],o+=s((i=r)>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(a){case 1:o+=s((r=e[e.length-1])>>2),o+=s(r<<4&63),o+="==";break;case 2:o+=s((r=(e[e.length-2]<<8)+e[e.length-1])>>10),o+=s(r>>4&63),o+=s(r<<2&63),o+="="}return o}})("undefined"===typeof r?this.base64js={}:r)}),{}],16:[(function(T,e,k){(function(e){"use strict";var n=T("base64-js"),a=T("ieee754"),o=T("isarray");k.Buffer=s,k.SlowBuffer=function e(t,r){if(!(this instanceof e))return new e(t,r);var n=new s(t,r);delete n.parent;return n},k.INSPECT_MAX_BYTES=50,s.poolSize=8192;var r={};function t(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"===typeof e?(function(e,t){if(e=u(e,t<0?0:0|c(t)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;r++)e[r]=0;return e})(this,e):"string"===typeof e?(function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");var n=0|i(t,r);return(e=u(e,n)).write(t,r),e})(this,e,arguments.length>1?arguments[1]:"utf8"):(function(e,t){if(s.isBuffer(t))return r=e,n=t,i=0|c(n.length),r=u(r,i),n.copy(r,0,0,i),r;var r,n,i;if(o(t))return (function(e,t){var r=0|c(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e})(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return (function(e,t){e=s.TYPED_ARRAY_SUPPORT?(t.byteLength,s._augment(new Uint8Array(t))):l(e,new Uint8Array(t));return e})(e,t)}return t.length?(function(e,t){var r=0|c(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e})(e,t):(function(e,t){var r,n=0;"Buffer"===t.type&&o(t.data)&&(r=t.data,n=0|c(r.length)),e=u(e,n);for(var i=0;i<n;i+=1)e[i]=255&r[i];return e})(e,t)})(this,e)):arguments.length>1?new s(e,arguments[1]):new s(e)}function l(e,t){var r=0|c(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function u(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t))).__proto__=s.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=r),e}function c(e){if(e>=t())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t().toString(16)+" bytes");return 0|e}function i(e,t){"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(n)return I(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[r+o]=s}return o}function g(e,t,r,n){return C(function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function p(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function h(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,l,u=e[i],c=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p<=r)switch(p){case 1:u<128&&(c=u);break;case 2:128===(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=p}return (function(e){var t=e.length;if(t<=d)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=d));return r})(n)}(s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:(function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}})())?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a&&e[i]===t[i];)++i;return i!==a&&(r=e[i],n=t[i]),r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!o(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var r;if(void 0===t)for(r=t=0;r<e.length;r++)t+=e[r].length;var n=new s(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length}return n},s.byteLength=i,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?h(this,0,e):function(e,t,r){var n=!1;if(e||(e="utf8"),(t|=0)<0&&(t=0),(r=void 0===r||r===1/0?this.length:0|r)>this.length&&(r=this.length),r<=t)return"";for(;;)switch(e){case"hex":return v(this,t,r);case"utf8":case"utf-8":return h(this,t,r);case"ascii":return f(this,t,r);case"binary":return m(this,t,r);case"base64":return p(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=k.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"===typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return r(this,e,t);if("number"===typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);function r(e,t,r){for(var n=-1,i=0;r+i<e.length;i++)if(e[r+i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.length)return r+n}else n=-1;return-1}throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=t,t=0|r,r=i}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o,s,l,u,c,p,h,d,f,m=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return d=t,f=r,C(I(e,(h=this).length-d),h,d,f);case"ascii":return g(this,e,t,r);case"binary":return g(this,e,t,r);case"base64":return u=this,c=t,p=r,C(O(e),u,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,l=r,C(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,(o=this).length-s),o,s,l);default:if(m)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),m=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var d=4096;function f(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(127&e[i]);return n}function m(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}function v(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;a++)i+=M(e[a]);return i}function b(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function _(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,a){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<a)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function w(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function S(e,t,r,n,i,a){if(t>i||t<a)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function R(e,t,r,n,i){return i||S(e,t,r,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,i){return i||S(e,t,r,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,r,n,52,8),r+8}s.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)r=s._augment(this.subarray(e,t));else{var i=t-e;r=new s(i,void 0);for(var a=0;a<i;a++)r[a]=this[a+e]}return r.length&&(r.parent=this.parent||this),r},s.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||_(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},s.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||_(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return t||_(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||_(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||_(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||_(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||_(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||_(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){t||_(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||_(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||_(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||_(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||_(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||x(this,e,t,r,Math.pow(2,8*r),0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||x(this,e,t,r,Math.pow(2,8*r),0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=0,o=1,s=e<0?1:0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=e<0?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;i--)e[i+t]=this[i+r];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;i++)e[i+t]=this[i+r];else e._set(this.subarray(r,r+a),t);return a},s.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),r<t)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"===typeof e)for(n=t;n<r;n++)this[n]=e;else{var i=I(e.toString()),a=i.length;for(n=t;n<r;n++)this[n]=i[n%a]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"===typeof Uint8Array)throw new TypeError("Buffer.toArrayBuffer not supported in this browser");if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer};var E=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=E.get,e.set=E.set,e.write=E.write,e.toString=E.toString,e.toLocaleString=E.toString,e.toJSON=E.toJSON,e.equals=E.equals,e.compare=E.compare,e.indexOf=E.indexOf,e.copy=E.copy,e.slice=E.slice,e.readUIntLE=E.readUIntLE,e.readUIntBE=E.readUIntBE,e.readUInt8=E.readUInt8,e.readUInt16LE=E.readUInt16LE,e.readUInt16BE=E.readUInt16BE,e.readUInt32LE=E.readUInt32LE,e.readUInt32BE=E.readUInt32BE,e.readIntLE=E.readIntLE,e.readIntBE=E.readIntBE,e.readInt8=E.readInt8,e.readInt16LE=E.readInt16LE,e.readInt16BE=E.readInt16BE,e.readInt32LE=E.readInt32LE,e.readInt32BE=E.readInt32BE,e.readFloatLE=E.readFloatLE,e.readFloatBE=E.readFloatBE,e.readDoubleLE=E.readDoubleLE,e.readDoubleBE=E.readDoubleBE,e.writeUInt8=E.writeUInt8,e.writeUIntLE=E.writeUIntLE,e.writeUIntBE=E.writeUIntBE,e.writeUInt16LE=E.writeUInt16LE,e.writeUInt16BE=E.writeUInt16BE,e.writeUInt32LE=E.writeUInt32LE,e.writeUInt32BE=E.writeUInt32BE,e.writeIntLE=E.writeIntLE,e.writeIntBE=E.writeIntBE,e.writeInt8=E.writeInt8,e.writeInt16LE=E.writeInt16LE,e.writeInt16BE=E.writeInt16BE,e.writeInt32LE=E.writeInt32LE,e.writeInt32BE=E.writeInt32BE,e.writeFloatLE=E.writeFloatLE,e.writeFloatBE=E.writeFloatBE,e.writeDoubleLE=E.writeDoubleLE,e.writeDoubleBE=E.writeDoubleBE,e.fill=E.fill,e.inspect=E.inspect,e.toArrayBuffer=E.toArrayBuffer,e};var A=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function I(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function O(e){return n.toByteArray(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(A,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function C(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{"base64-js":15,ieee754:104,isarray:17}],17:[(function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}),{}],18:[(function(e,t,r){var n,i,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!(function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}})();var u,c=[],p=!1,h=-1;function d(){p&&u&&(p=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!p){var e=l(d);p=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,p=!1,(function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}})(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||p||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}),{}],19:[(function(e,t,r){"use strict";var T=e("punycode"),k=e("./util");function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=a,r.resolve=function(e,t){return a(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},r.format=function(e){k.isString(e)&&(e=a(e));return e instanceof E?e.format():E.prototype.format.call(e)},r.Url=E;var L=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,N=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),z=["'"].concat(i),j=["%","/","?",";","#"].concat(z),F=["/","?","#"],V=/^[+a-z0-9A-Z_-]{0,63}$/,G=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},H={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=e("querystring");function a(e,t,r){if(e&&k.isObject(e)&&e instanceof E)return e;var n=new E;return n.parse(e,t,r),n}E.prototype.parse=function(e,t,r){if(!k.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(i);a[0]=a[0].replace(/\\/g,"/");var o=e=a.join(i);if(o=o.trim(),!r&&1===e.split("#").length){var s=N.exec(o);if(s)return this.path=o,this.href=o,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?q.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=L.exec(o);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,o=o.substr(l.length)}if(r||l||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===o.substr(0,2);!c||l&&U[l]||(o=o.substr(2),this.slashes=!0)}if(!U[l]&&(c||l&&!H[l])){for(var p,h,d=-1,f=0;f<F.length;f++){-1!==(m=o.indexOf(F[f]))&&(-1===d||m<d)&&(d=m)}-1!==(h=-1===d?o.lastIndexOf("@"):o.lastIndexOf("@",d))&&(p=o.slice(0,h),o=o.slice(h+1),this.auth=decodeURIComponent(p)),d=-1;for(f=0;f<j.length;f++){var m;-1!==(m=o.indexOf(j[f]))&&(-1===d||m<d)&&(d=m)}-1===d&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),v=(f=0,g.length);f<v;f++){var b=g[f];if(b&&!b.match(V)){for(var _="",x=0,w=b.length;x<w;x++)b.charCodeAt(x)>127?_+="x":_+=b[x];if(!_.match(V)){var D=g.slice(0,f),S=g.slice(f+1),R=b.match(G);R&&(D.push(R[1]),S.unshift(R[2])),S.length&&(o="/"+S.join(".")+o),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=T.toASCII(this.hostname));var P=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!B[u])for(f=0,v=z.length;f<v;f++){var A=z[f];if(-1!==o.indexOf(A)){var M=encodeURIComponent(A);M===A&&(M=escape(A)),o=o.split(A).join(M)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var O=o.indexOf("?");if(-1!==O?(this.search=o.substr(O),this.query=o.substr(O+1),t&&(this.query=q.parse(this.query)),o=o.slice(0,O)):t&&(this.search="",this.query={}),o&&(this.pathname=o),H[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var C=this.search||"";this.path=P+C}return this.href=this.format(),this},E.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&k.isObject(this.query)&&Object.keys(this.query).length&&(a=q.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||H[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+n},E.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},E.prototype.resolveObject=function(e){if(k.isString(e)){var t=new E;t.parse(e,!1,!0),e=t}for(var r=new E,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];"protocol"!==l&&(r[l]=e[l])}return H[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!H[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var p=u[c];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||U[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",f=r.search||"";r.path=d+f}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=y||m||r.host&&e.pathname,v=g,b=r.pathname&&r.pathname.split("/")||[],_=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!H[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),g=g&&(""===h[0]||""===b[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=h;else if(h.length)b||(b=[]),b.pop(),b=b.concat(h),r.search=e.search,r.query=e.query;else if(!k.isNullOrUndefined(e.search)){if(_)r.hostname=r.host=b.shift(),(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift());return r.search=e.search,r.query=e.query,k.isNull(r.pathname)&&k.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=b.slice(-1)[0],w=(r.host||e.host||b.length>1)&&("."===x||".."===x)||""===x,D=0,S=b.length;S>=0;S--)"."===(x=b[S])?b.splice(S,1):".."===x?(b.splice(S,1),D++):D&&(b.splice(S,1),D--);if(!g&&!v)for(;D--;D)b.unshift("..");!g||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),w&&"/"!==b.join("/").substr(-1)&&b.push("");var R,P=""===b[0]||b[0]&&"/"===b[0].charAt(0);_&&(r.hostname=r.host=P?"":b.length?b.shift():"",(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift()));return(g=g||r.host&&b.length)&&!P&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),k.isNull(r.pathname)&&k.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},E.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}}),{"./util":20,punycode:126,querystring:129}],20:[(function(e,t,r){"use strict";t.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}),{}],21:[(function(e,t,r){"use strict";t.exports=function(){var e=[].map.call(arguments,(function(e){return e.trim()})).filter((function(e){return e.length})).join("-");return e.length?1===e.length?e.toLowerCase():/[_.\- ]+/.test(e)?(e=(function(e){for(var t=!1,r=0;r<e.length;r++){var n=e.charAt(r);t&&/[a-zA-Z]/.test(n)&&n.toUpperCase()===n?(e=e.substr(0,r)+"-"+e.substr(r),t=!1,r++):t=n.toLowerCase()===n}return e})(e)).replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})):e===e.toUpperCase()?e.toLowerCase():e[0]!==e[0].toLowerCase()?e[0].toLowerCase()+e.slice(1):e:""}}),{}],22:[(function(e,t,r){!(function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r))e.push(o.apply(null,r));else if("object"===n)for(var i in r)a.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}"undefined"!==typeof t&&t.exports?t.exports=o:window.classNames=o})()}),{}],23:[(function(e,n,t){(function(t){var r=Object.prototype.toString;n.exports=function(e){switch(r.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!==e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof t&&t.isBuffer(e)?"buffer":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))}}).call(this,e("buffer").Buffer)}),{buffer:16}],24:[(function(e,t,r){e("../modules/es5"),e("../modules/es6.object.freeze"),e("../modules/es6.object.seal"),e("../modules/es6.object.prevent-extensions"),e("../modules/es6.object.is-frozen"),e("../modules/es6.object.is-sealed"),e("../modules/es6.object.is-extensible"),e("../modules/es6.string.trim"),t.exports=e("../modules/$.core")}),{"../modules/$.core":36,"../modules/es5":75,"../modules/es6.object.freeze":79,"../modules/es6.object.is-extensible":80,"../modules/es6.object.is-frozen":81,"../modules/es6.object.is-sealed":82,"../modules/es6.object.prevent-extensions":83,"../modules/es6.object.seal":84,"../modules/es6.string.trim":86}],25:[(function(e,t,r){e("../../modules/es6.array.find"),t.exports=e("../../modules/$.core").Array.find}),{"../../modules/$.core":36,"../../modules/es6.array.find":76}],26:[(function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from}),{"../../modules/$.core":36,"../../modules/es6.array.from":77,"../../modules/es6.string.iterator":85}],27:[(function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign}),{"../../modules/$.core":36,"../../modules/es6.object.assign":78}],28:[(function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}}),{}],29:[(function(e,t,r){var n=e("./$.wks")("unscopables"),i=Array.prototype;void 0==i[n]&&e("./$.hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}}),{"./$.hide":45,"./$.wks":73}],30:[(function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}}),{"./$.is-object":51}],31:[(function(e,t,r){var l=e("./$.to-iobject"),u=e("./$.to-length"),c=e("./$.to-index");t.exports=function(s){return function(e,t,r){var n,i=l(e),a=u(i.length),o=c(r,a);if(s&&t!=t){for(;a>o;)if((n=i[o++])!=n)return!0}else for(;a>o;o++)if((s||o in i)&&i[o]===t)return s||o;return!s&&-1}}}),{"./$.to-index":67,"./$.to-iobject":69,"./$.to-length":70}],32:[(function(e,t,r){var v=e("./$.ctx"),b=e("./$.iobject"),_=e("./$.to-object"),x=e("./$.to-length"),w=e("./$.array-species-create");t.exports=function(p){var h=1==p,d=2==p,f=3==p,m=4==p,y=6==p,g=5==p||y;return function(e,t,r){for(var n,i,a=_(e),o=b(a),s=v(t,r,3),l=x(o.length),u=0,c=h?w(e,l):d?w(e,0):void 0;l>u;u++)if((g||u in o)&&(i=s(n=o[u],u,a),p))if(h)c[u]=i;else if(i)switch(p){case 3:return!0;case 5:return n;case 6:return u;case 2:c.push(n)}else if(m)return!1;return y?-1:f||m?m:c}}}),{"./$.array-species-create":33,"./$.ctx":37,"./$.iobject":48,"./$.to-length":70,"./$.to-object":71}],33:[(function(e,t,r){var n=e("./$.is-object"),i=e("./$.is-array"),a=e("./$.wks")("species");t.exports=function(e,t){var r;return i(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)||(r=void 0),n(r)&&null===(r=r[a])&&(r=void 0)),new(void 0===r?Array:r)(t)}}),{"./$.is-array":50,"./$.is-object":51,"./$.wks":73}],34:[(function(e,t,r){var i=e("./$.cof"),a=e("./$.wks")("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[a])?r:o?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}}),{"./$.cof":35,"./$.wks":73}],35:[(function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}}),{}],36:[(function(e,t,r){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)}),{}],37:[(function(e,t,r){var a=e("./$.a-function");t.exports=function(n,i,e){if(a(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}}),{"./$.a-function":28}],38:[(function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}}),{}],39:[(function(e,t,r){t.exports=!e("./$.fails")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))}),{"./$.fails":42}],40:[(function(e,t,r){var n=e("./$.is-object"),i=e("./$.global").document,a=n(i)&&n(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}}),{"./$.global":43,"./$.is-object":51}],41:[(function(e,t,r){var m=e("./$.global"),y=e("./$.core"),g=e("./$.hide"),v=e("./$.redefine"),b=e("./$.ctx"),_="prototype",x=function(e,t,r){var n,i,a,o,s=e&x.F,l=e&x.G,u=e&x.S,c=e&x.P,p=e&x.B,h=l?m:u?m[t]||(m[t]={}):(m[t]||{})[_],d=l?y:y[t]||(y[t]={}),f=d[_]||(d[_]={});for(n in l&&(r=t),r)a=((i=!s&&h&&n in h)?h:r)[n],o=p&&i?b(a,m):c&&"function"==typeof a?b(Function.call,a):a,h&&!i&&v(h,n,a),d[n]!=a&&g(d,n,o),c&&f[n]!=a&&(f[n]=a)};m.core=y,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,t.exports=x}),{"./$.core":36,"./$.ctx":37,"./$.global":43,"./$.hide":45,"./$.redefine":62}],42:[(function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}}),{}],43:[(function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),{}],44:[(function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}}),{}],45:[(function(e,t,r){var n=e("./$"),i=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,r){return n.setDesc(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}}),{"./$":57,"./$.descriptors":39,"./$.property-desc":61}],46:[(function(e,t,r){t.exports=e("./$.global").document&&document.documentElement}),{"./$.global":43}],47:[(function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}}),{}],48:[(function(e,t,r){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}}),{"./$.cof":35}],49:[(function(e,t,r){var n=e("./$.iterators"),i=e("./$.wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}}),{"./$.iterators":56,"./$.wks":73}],50:[(function(e,t,r){var n=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}}),{"./$.cof":35}],51:[(function(e,t,r){t.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}}),{}],52:[(function(e,t,r){var a=e("./$.an-object");t.exports=function(t,e,r,n){try{return n?e(a(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}}}),{"./$.an-object":30}],53:[(function(e,t,r){"use strict";var n=e("./$"),i=e("./$.property-desc"),a=e("./$.set-to-string-tag"),o={};e("./$.hide")(o,e("./$.wks")("iterator"),(function(){return this})),t.exports=function(e,t,r){e.prototype=n.create(o,{next:i(1,r)}),a(e,t+" Iterator")}}),{"./$":57,"./$.hide":45,"./$.property-desc":61,"./$.set-to-string-tag":63,"./$.wks":73}],54:[(function(e,t,r){"use strict";var g=e("./$.library"),v=e("./$.export"),b=e("./$.redefine"),_=e("./$.hide"),x=e("./$.has"),w=e("./$.iterators"),D=e("./$.iter-create"),S=e("./$.set-to-string-tag"),R=e("./$").getProto,P=e("./$.wks")("iterator"),E=!([].keys&&"next"in[].keys()),A="@@iterator",M="values",I=function(){return this};t.exports=function(e,t,r,n,i,a,o){D(r,t,n);var s,l,u=function(e){if(!E&&e in d)return d[e];switch(e){case"keys":case M:return function(){return new r(this,e)}}return function(){return new r(this,e)}},c=t+" Iterator",p=i==M,h=!1,d=e.prototype,f=d[P]||d[A]||i&&d[i],m=f||u(i);if(f){var y=R(m.call(new e));S(y,c,!0),!g&&x(d,A)&&_(y,P,I),p&&f.name!==M&&(h=!0,m=function(){return f.call(this)})}if(g&&!o||!E&&!h&&d[P]||_(d,P,m),w[t]=m,w[c]=I,i)if(s={values:p?m:u(M),keys:a?m:u("keys"),entries:p?u("entries"):m},o)for(l in s)l in d||b(d,l,s[l]);else v(v.P+v.F*(E||h),t,s);return s}}),{"./$":57,"./$.export":41,"./$.has":44,"./$.hide":45,"./$.iter-create":53,"./$.iterators":56,"./$.library":58,"./$.redefine":62,"./$.set-to-string-tag":63,"./$.wks":73}],55:[(function(e,t,r){var a=e("./$.wks")("iterator"),o=!1;try{var n=[7][a]();n.return=function(){o=!0},Array.from(n,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:r=!0}},n[a]=function(){return i},e(n)}catch(e){}return r}}),{"./$.wks":73}],56:[(function(e,t,r){t.exports={}}),{}],57:[(function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}}),{}],58:[(function(e,t,r){t.exports=!1}),{}],59:[(function(e,t,r){var f=e("./$"),m=e("./$.to-object"),y=e("./$.iobject");t.exports=e("./$.fails")((function(){var e=Object.assign,t={},r={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(e){r[e]=e})),7!=e({},t)[n]||Object.keys(e({},r)).join("")!=i}))?function(e,t){for(var r=m(e),n=arguments,i=n.length,a=1,o=f.getKeys,s=f.getSymbols,l=f.isEnum;i>a;)for(var u,c=y(n[a++]),p=s?o(c).concat(s(c)):o(c),h=p.length,d=0;h>d;)l.call(c,u=p[d++])&&(r[u]=c[u]);return r}:Object.assign}),{"./$":57,"./$.fails":42,"./$.iobject":48,"./$.to-object":71}],60:[(function(e,t,r){var i=e("./$.export"),a=e("./$.core"),o=e("./$.fails");t.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],n={};n[e]=t(r),i(i.S+i.F*o((function(){r(1)})),"Object",n)}}),{"./$.core":36,"./$.export":41,"./$.fails":42}],61:[(function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}}),{}],62:[(function(e,t,r){var i=e("./$.global"),a=e("./$.hide"),o=e("./$.uid")("src"),n="toString",s=Function[n],l=(""+s).split(n);e("./$.core").inspectSource=function(e){return s.call(e)},(t.exports=function(e,t,r,n){"function"==typeof r&&(r.hasOwnProperty(o)||a(r,o,e[t]?""+e[t]:l.join(String(t))),r.hasOwnProperty("name")||a(r,"name",t)),e===i?e[t]=r:(n||delete e[t],a(e,t,r))})(Function.prototype,n,(function(){return"function"==typeof this&&this[o]||s.call(this)}))}),{"./$.core":36,"./$.global":43,"./$.hide":45,"./$.uid":72}],63:[(function(e,t,r){var n=e("./$").setDesc,i=e("./$.has"),a=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}}),{"./$":57,"./$.has":44,"./$.wks":73}],64:[(function(e,t,r){var n=e("./$.global"),i="__core-js_shared__",a=n[i]||(n[i]={});t.exports=function(e){return a[e]||(a[e]={})}}),{"./$.global":43}],65:[(function(e,t,r){var l=e("./$.to-integer"),u=e("./$.defined");t.exports=function(s){return function(e,t){var r,n,i=String(u(e)),a=l(t),o=i.length;return a<0||a>=o?s?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===o||(n=i.charCodeAt(a+1))<56320||n>57343?s?i.charAt(a):r:s?i.slice(a,a+2):n-56320+(r-55296<<10)+65536}}}),{"./$.defined":38,"./$.to-integer":68}],66:[(function(e,t,r){var n=e("./$.export"),i=e("./$.defined"),a=e("./$.fails"),o="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",s="["+o+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(e,t){var r={};r[e]=t(p),n(n.P+n.F*a((function(){return!!o[e]()||"​"!="​"[e]()})),"String",r)},p=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};t.exports=c}),{"./$.defined":38,"./$.export":41,"./$.fails":42}],67:[(function(e,t,r){var n=e("./$.to-integer"),i=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}}),{"./$.to-integer":68}],68:[(function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}}),{}],69:[(function(e,t,r){var n=e("./$.iobject"),i=e("./$.defined");t.exports=function(e){return n(i(e))}}),{"./$.defined":38,"./$.iobject":48}],70:[(function(e,t,r){var n=e("./$.to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}}),{"./$.to-integer":68}],71:[(function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}}),{"./$.defined":38}],72:[(function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}}),{}],73:[(function(e,t,r){var n=e("./$.shared")("wks"),i=e("./$.uid"),a=e("./$.global").Symbol;t.exports=function(e){return n[e]||(n[e]=a&&a[e]||(a||i)("Symbol."+e))}}),{"./$.global":43,"./$.shared":64,"./$.uid":72}],74:[(function(e,t,r){var n=e("./$.classof"),i=e("./$.wks")("iterator"),a=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}}),{"./$.classof":34,"./$.core":36,"./$.iterators":56,"./$.wks":73}],75:[(function(e,t,r){"use strict";var n,o=e("./$"),i=e("./$.export"),a=e("./$.descriptors"),s=e("./$.property-desc"),l=e("./$.html"),u=e("./$.dom-create"),c=e("./$.has"),p=e("./$.cof"),h=e("./$.invoke"),d=e("./$.fails"),f=e("./$.an-object"),m=e("./$.a-function"),y=e("./$.is-object"),g=e("./$.to-object"),v=e("./$.to-iobject"),b=e("./$.to-integer"),_=e("./$.to-index"),x=e("./$.to-length"),w=e("./$.iobject"),D=e("./$.uid")("__proto__"),S=e("./$.array-methods"),R=e("./$.array-includes")(!1),P=Object.prototype,E=Array.prototype,A=E.slice,M=E.join,I=o.setDesc,O=o.getDesc,C=o.setDescs,T={};a||(n=!d((function(){return 7!=I(u("div"),"a",{get:function(){return 7}}).a})),o.setDesc=function(e,t,r){if(n)try{return I(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(f(e)[t]=r.value),e},o.getDesc=function(e,t){if(n)try{return O(e,t)}catch(e){}if(c(e,t))return s(!P.propertyIsEnumerable.call(e,t),e[t])},o.setDescs=C=function(e,t){f(e);for(var r,n=o.getKeys(t),i=n.length,a=0;i>a;)o.setDesc(e,r=n[a++],t[r]);return e}),i(i.S+i.F*!a,"Object",{getOwnPropertyDescriptor:o.getDesc,defineProperty:o.setDesc,defineProperties:C});var k="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),L=k.concat("length","prototype"),N=k.length,z=function(){var e,t=u("iframe"),r=N;for(t.style.display="none",l.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),z=e.F;r--;)delete z.prototype[k[r]];return z()},j=function(a,o){return function(e){var t,r=v(e),n=0,i=[];for(t in r)t!=D&&c(r,t)&&i.push(t);for(;o>n;)c(r,t=a[n++])&&(~R(i,t)||i.push(t));return i}},F=function(){};i(i.S,"Object",{getPrototypeOf:o.getProto=o.getProto||function(e){return e=g(e),c(e,D)?e[D]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?P:null},getOwnPropertyNames:o.getNames=o.getNames||j(L,L.length),create:o.create=o.create||function(e,t){var r;return null!==e?(F.prototype=f(e),r=new F,F.prototype=null,r[D]=e):r=z(),void 0===t?r:C(r,t)},keys:o.getKeys=o.getKeys||j(k,N)});i(i.P,"Function",{bind:function(t){var r=m(this),n=A.call(arguments,1),i=function(){var e=n.concat(A.call(arguments));return this instanceof i?(function(e,t,r){if(!(t in T)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";T[t]=Function("F,a","return new F("+n.join(",")+")")}return T[t](e,r)})(r,e.length,e):h(r,e,t)};return y(r.prototype)&&(i.prototype=r.prototype),i}}),i(i.P+i.F*d((function(){l&&A.call(l)})),"Array",{slice:function(e,t){var r=x(this.length),n=p(this);if(t=void 0===t?r:t,"Array"==n)return A.call(this,e,t);for(var i=_(e,r),a=_(t,r),o=x(a-i),s=Array(o),l=0;l<o;l++)s[l]="String"==n?this.charAt(i+l):this[i+l];return s}}),i(i.P+i.F*(w!=Object),"Array",{join:function(e){return M.call(w(this),void 0===e?",":e)}}),i(i.S,"Array",{isArray:e("./$.is-array")});var V=function(o){return function(e,t){m(e);var r=w(this),n=x(r.length),i=o?n-1:0,a=o?-1:1;if(arguments.length<2)for(;;){if(i in r){t=r[i],i+=a;break}if(i+=a,o?i<0:n<=i)throw TypeError("Reduce of empty array with no initial value")}for(;o?i>=0:n>i;i+=a)i in r&&(t=e(t,r[i],i,this));return t}},G=function(t){return function(e){return t(this,e,arguments[1])}};i(i.P,"Array",{forEach:o.each=o.each||G(S(0)),map:G(S(1)),filter:G(S(2)),some:G(S(3)),every:G(S(4)),reduce:V(!1),reduceRight:V(!0),indexOf:G(R),lastIndexOf:function(e,t){var r=v(this),n=x(r.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,b(t))),i<0&&(i=x(n+i));i>=0;i--)if(i in r&&r[i]===e)return i;return-1}}),i(i.S,"Date",{now:function(){return+new Date}});var B=function(e){return e>9?e:"0"+e};i(i.P+i.F*(d((function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()}))||!d((function(){new Date(NaN).toISOString()}))),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+B(e.getUTCMonth()+1)+"-"+B(e.getUTCDate())+"T"+B(e.getUTCHours())+":"+B(e.getUTCMinutes())+":"+B(e.getUTCSeconds())+"."+(r>99?r:"0"+B(r))+"Z"}})}),{"./$":57,"./$.a-function":28,"./$.an-object":30,"./$.array-includes":31,"./$.array-methods":32,"./$.cof":35,"./$.descriptors":39,"./$.dom-create":40,"./$.export":41,"./$.fails":42,"./$.has":44,"./$.html":46,"./$.invoke":47,"./$.iobject":48,"./$.is-array":50,"./$.is-object":51,"./$.property-desc":61,"./$.to-index":67,"./$.to-integer":68,"./$.to-iobject":69,"./$.to-length":70,"./$.to-object":71,"./$.uid":72}],76:[(function(e,t,r){"use strict";var n=e("./$.export"),i=e("./$.array-methods")(5),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./$.add-to-unscopables")(a)}),{"./$.add-to-unscopables":29,"./$.array-methods":32,"./$.export":41}],77:[(function(e,t,r){"use strict";var d=e("./$.ctx"),n=e("./$.export"),f=e("./$.to-object"),m=e("./$.iter-call"),y=e("./$.is-array-iter"),g=e("./$.to-length"),v=e("./core.get-iterator-method");n(n.S+n.F*!e("./$.iter-detect")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,n,i,a=f(e),o="function"==typeof this?this:Array,s=arguments,l=s.length,u=l>1?s[1]:void 0,c=void 0!==u,p=0,h=v(a);if(c&&(u=d(u,l>2?s[2]:void 0,2)),void 0==h||o==Array&&y(h))for(r=new o(t=g(a.length));t>p;p++)r[p]=c?u(a[p],p):a[p];else for(i=h.call(a),r=new o;!(n=i.next()).done;p++)r[p]=c?m(i,u,[n.value,p],!0):n.value;return r.length=p,r}})}),{"./$.ctx":37,"./$.export":41,"./$.is-array-iter":49,"./$.iter-call":52,"./$.iter-detect":55,"./$.to-length":70,"./$.to-object":71,"./core.get-iterator-method":74}],78:[(function(e,t,r){var n=e("./$.export");n(n.S+n.F,"Object",{assign:e("./$.object-assign")})}),{"./$.export":41,"./$.object-assign":59}],79:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("freeze",(function(t){return function(e){return t&&n(e)?t(e):e}}))}),{"./$.is-object":51,"./$.object-sap":60}],80:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))}),{"./$.is-object":51,"./$.object-sap":60}],81:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("isFrozen",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))}),{"./$.is-object":51,"./$.object-sap":60}],82:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("isSealed",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))}),{"./$.is-object":51,"./$.object-sap":60}],83:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("preventExtensions",(function(t){return function(e){return t&&n(e)?t(e):e}}))}),{"./$.is-object":51,"./$.object-sap":60}],84:[(function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))}),{"./$.is-object":51,"./$.object-sap":60}],85:[(function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))}),{"./$.iter-define":54,"./$.string-at":65}],86:[(function(e,t,r){"use strict";e("./$.string-trim")("trim",(function(e){return function(){return e(this,3)}}))}),{"./$.string-trim":66}],87:[(function(e,t,r){var n;n=this,(function(e){"use strict";var s=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},t=function(a){var r;return 1===a.length&&(r=a,a=function(e,t){return s(r(e),t)}),{left:function(e,t,r,n){for(null==r&&(r=0),null==n&&(n=e.length);r<n;){var i=r+n>>>1;a(e[i],t)<0?r=i+1:n=i}return r},right:function(e,t,r,n){for(null==r&&(r=0),null==n&&(n=e.length);r<n;){var i=r+n>>>1;a(e[i],t)>0?n=i:r=i+1}return r}}};var r=t(s),m=r.right,n=r.left;function c(e,t){return[e,t]}var u=function(e){return null===e?NaN:+e},i=function(e,t){var r,n,i=e.length,a=0,o=-1,s=0,l=0;if(null==t)for(;++o<i;)isNaN(r=u(e[o]))||(l+=(n=r-s)*(r-(s+=n/++a)));else for(;++o<i;)isNaN(r=u(t(e[o],o,e)))||(l+=(n=r-s)*(r-(s+=n/++a)));if(a>1)return l/(a-1)},a=function(e,t){var r=i(e,t);return r?Math.sqrt(r):r},o=function(e,t){var r,n,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(r=e[o])&&r>=r)for(n=i=r;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),i<r&&(i=r))}else for(;++o<a;)if(null!=(r=t(e[o],o,e))&&r>=r)for(n=i=r;++o<a;)null!=(r=t(e[o],o,e))&&(n>r&&(n=r),i<r&&(i=r));return[n,i]},l=Array.prototype,p=l.slice,h=l.map,y=function(e){return function(){return e}},g=function(e){return e},v=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a},d=Math.sqrt(50),f=Math.sqrt(10),b=Math.sqrt(2);function _(e,t,r){var n=(t-e)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=d?10:a>=f?5:a>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=d?10:a>=f?5:a>=b?2:1)}function x(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=d?i*=10:a>=f?i*=5:a>=b&&(i*=2),t<e?-i:i}var w=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},D=function(e,t,r){if(null==r&&(r=u),n=e.length){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e);return o+(+r(e[a+1],a+1,e)-o)*(i-a)}},S=function(e,t){var r,n,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(r=e[a])&&r>=r)for(n=r;++a<i;)null!=(r=e[a])&&n>r&&(n=r)}else for(;++a<i;)if(null!=(r=t(e[a],a,e))&&r>=r)for(n=r;++a<i;)null!=(r=t(e[a],a,e))&&n>r&&(n=r);return n},R=function(e){if(!(i=e.length))return[];for(var t=-1,r=S(e,P),n=new Array(r);++t<r;)for(var i,a=-1,o=n[t]=new Array(i);++a<i;)o[a]=e[a][t];return n};function P(e){return e.length}e.bisect=m,e.bisectRight=m,e.bisectLeft=n,e.ascending=s,e.bisector=t,e.cross=function(e,t,r){var n,i,a,o,s=e.length,l=t.length,u=new Array(s*l);for(null==r&&(r=c),n=a=0;n<s;++n)for(o=e[n],i=0;i<l;++i,++a)u[a]=r(o,t[i]);return u},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.deviation=a,e.extent=o,e.histogram=function(){var h=g,d=o,f=w;function t(e){var t,r,n=e.length,i=new Array(n);for(t=0;t<n;++t)i[t]=h(e[t],t,e);var a=d(i),o=a[0],s=a[1],l=f(i,o,s);Array.isArray(l)||(l=x(o,s,l),l=v(Math.ceil(o/l)*l,Math.floor(s/l)*l,l));for(var u=l.length;l[0]<=o;)l.shift(),--u;for(;l[u-1]>s;)l.pop(),--u;var c,p=new Array(u+1);for(t=0;t<=u;++t)(c=p[t]=[]).x0=t>0?l[t-1]:o,c.x1=t<u?l[t]:s;for(t=0;t<n;++t)o<=(r=i[t])&&r<=s&&p[m(l,r,0,u)].push(e[t]);return p}return t.value=function(e){return arguments.length?(h="function"===typeof e?e:y(e),t):h},t.domain=function(e){return arguments.length?(d="function"===typeof e?e:y([e[0],e[1]]),t):d},t.thresholds=function(e){return arguments.length?(f="function"===typeof e?e:Array.isArray(e)?y(p.call(e)):y(e),t):f},t},e.thresholdFreedmanDiaconis=function(e,t,r){return e=h.call(e,u).sort(s),Math.ceil((r-t)/(2*(D(e,.75)-D(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,r){return Math.ceil((r-t)/(3.5*a(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=w,e.max=function(e,t){var r,n,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(r=e[a])&&r>=r)for(n=r;++a<i;)null!=(r=e[a])&&r>n&&(n=r)}else for(;++a<i;)if(null!=(r=t(e[a],a,e))&&r>=r)for(n=r;++a<i;)null!=(r=t(e[a],a,e))&&r>n&&(n=r);return n},e.mean=function(e,t){var r,n=e.length,i=n,a=-1,o=0;if(null==t)for(;++a<n;)isNaN(r=u(e[a]))?--i:o+=r;else for(;++a<n;)isNaN(r=u(t(e[a],a,e)))?--i:o+=r;if(i)return o/i},e.median=function(e,t){var r,n=e.length,i=-1,a=[];if(null==t)for(;++i<n;)isNaN(r=u(e[i]))||a.push(r);else for(;++i<n;)isNaN(r=u(t(e[i],i,e)))||a.push(r);return D(a.sort(s),.5)},e.merge=function(e){for(var t,r,n,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(r=new Array(o);--i>=0;)for(t=(n=e[i]).length;--t>=0;)r[--o]=n[t];return r},e.min=S,e.pairs=function(e,t){null==t&&(t=c);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return a},e.permute=function(e,t){for(var r=t.length,n=new Array(r);r--;)n[r]=e[t[r]];return n},e.quantile=D,e.range=v,e.scan=function(e,t){if(r=e.length){var r,n,i=0,a=0,o=e[a];for(null==t&&(t=s);++i<r;)(t(n=e[i],o)<0||0!==t(o,o))&&(o=n,a=i);return 0===t(o,o)?a:void 0}},e.shuffle=function(e,t,r){for(var n,i,a=(null==r?e.length:r)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,n=e[a+t],e[a+t]=e[i+t],e[i+t]=n;return e},e.sum=function(e,t){var r,n=e.length,i=-1,a=0;if(null==t)for(;++i<n;)(r=+e[i])&&(a+=r);else for(;++i<n;)(r=+t(e[i],i,e))&&(a+=r);return a},e.ticks=function(e,t,r){var n,i,a,o,s=-1;if(r=+r,(e=+e)===(t=+t)&&r>0)return[e];if((n=t<e)&&(i=e,e=t,t=i),0===(o=_(e,t,r))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;return n&&a.reverse(),a},e.tickIncrement=_,e.tickStep=x,e.transpose=R,e.variance=i,e.zip=function(){return R(arguments)},Object.defineProperty(e,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],88:[(function(e,t,r){var n;n=this,(function(e){"use strict";var r="$";function s(){}function y(e,t){var r=new s;if(e instanceof s)e.each((function(e,t){r.set(t,e)}));else if(Array.isArray(e)){var n,i=-1,a=e.length;if(null==t)for(;++i<a;)r.set(i,e[i]);else for(;++i<a;)r.set(t(n=e[i],i,e),n)}else if(e)for(var o in e)r.set(o,e[o]);return r}s.prototype=y.prototype={constructor:s,has:function(e){return r+e in this},get:function(e){return this[r+e]},set:function(e,t){return this[r+e]=t,this},remove:function(e){var t=r+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===r&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===r&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===r&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===r&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===r&&++e;return e},empty:function(){for(var e in this)if(e[0]===r)return!1;return!0},each:function(e){for(var t in this)t[0]===r&&e(this[t],t.slice(1),this)}};function n(){return{}}function i(e,t,r){e[t]=r}function a(){return y()}function l(e,t,r){e.set(t,r)}function o(){}var t=y.prototype;function u(e,t){var r=new o;if(e instanceof o)e.each((function(e){r.add(e)}));else if(e){var n=-1,i=e.length;if(null==t)for(;++n<i;)r.add(e[n]);else for(;++n<i;)r.add(t(e[n],n,e))}return r}o.prototype=u.prototype={constructor:o,has:t.has,add:function(e){return this[r+(e+="")]=e,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each};e.nest=function(){var h,d,t,f=[],o=[];function m(e,r,n,i){if(r>=f.length)return null!=h&&e.sort(h),null!=d?d(e):e;for(var t,a,o,s=-1,l=e.length,u=f[r++],c=y(),p=n();++s<l;)(o=c.get(t=u(a=e[s])+""))?o.push(a):c.set(t,[a]);return c.each((function(e,t){i(p,t,m(e,r,n,i))})),p}return t={object:function(e){return m(e,0,n,i)},map:function(e){return m(e,0,a,l)},entries:function(e){return (function r(e,n){if(++n>f.length)return e;var i,a=o[n-1];return null!=d&&n>=f.length?i=e.entries():(i=[],e.each((function(e,t){i.push({key:t,values:r(e,n)})}))),null!=a?i.sort((function(e,t){return a(e.key,t.key)})):i})(m(e,0,a,l),0)},key:function(e){return f.push(e),t},sortKeys:function(e){return o[f.length-1]=e,t},sortValues:function(e){return h=e,t},rollup:function(e){return d=e,t}}},e.set=u,e.map=y,e.keys=function(e){var t=[];for(var r in e)t.push(r);return t},e.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},e.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t},Object.defineProperty(e,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],89:[(function(e,t,r){var n;n=this,(function(e){"use strict";var t=function(e,t,r){e.prototype=t.prototype=r,r.constructor=e};function r(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function u(){}var n=1/.7,i="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3})$/,l=/^#([0-9a-f]{6})$/,c=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),p=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),h=new RegExp("^rgba\\("+[i,i,i,a]+"\\)$"),d=new RegExp("^rgba\\("+[o,o,o,a]+"\\)$"),f=new RegExp("^hsl\\("+[a,o,o]+"\\)$"),m=new RegExp("^hsla\\("+[a,o,o,a]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(e){var t;return e=(e+"").trim().toLowerCase(),(t=s.exec(e))?new w((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=l.exec(e))?v(parseInt(t[1],16)):(t=c.exec(e))?new w(t[1],t[2],t[3],1):(t=p.exec(e))?new w(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?b(t[1],t[2],t[3],t[4]):(t=d.exec(e))?b(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=f.exec(e))?S(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?S(t[1],t[2]/100,t[3]/100,t[4]):y.hasOwnProperty(e)?v(y[e]):"transparent"===e?new w(NaN,NaN,NaN,0):null}function v(e){return new w(e>>16&255,e>>8&255,255&e,1)}function b(e,t,r,n){return n<=0&&(e=t=r=NaN),new w(e,t,r,n)}function _(e){return e instanceof u||(e=g(e)),e?new w((e=e.rgb()).r,e.g,e.b,e.opacity):new w}function x(e,t,r,n){return 1===arguments.length?_(e):new w(e,t,r,null==n?1:n)}function w(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function D(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function S(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new P(e,t,r,n)}function R(e,t,r,n){return 1===arguments.length?(function(e){if(e instanceof P)return new P(e.h,e.s,e.l,e.opacity);if(e instanceof u||(e=g(e)),!e)return new P;if(e instanceof P)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new P(o,s,l,e.opacity)})(e):new P(e,t,r,null==n?1:n)}function P(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function E(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}t(u,g,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),t(w,x,r(u,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new w(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new w(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+D(this.r)+D(this.g)+D(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),t(P,R,r(u,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new P(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new P(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new w(E(e>=240?e-240:e+120,i,n),E(e,i,n),E(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var A=Math.PI/180,M=180/Math.PI,I=.96422,O=1,C=.82521,T=4/29,k=6/29,L=3*k*k,N=k*k*k;function z(e){if(e instanceof F)return new F(e.l,e.a,e.b,e.opacity);if(e instanceof W){if(isNaN(e.h))return new F(e.l,0,0,e.opacity);var t=e.h*A;return new F(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof w||(e=_(e));var r,n,i=U(e.r),a=U(e.g),o=U(e.b),s=V((.2225045*i+.7168786*a+.0606169*o)/O);return i===a&&a===o?r=n=s:(r=V((.4360747*i+.3850649*a+.1430804*o)/I),n=V((.0139322*i+.0971045*a+.7141733*o)/C)),new F(116*s-16,500*(r-s),200*(s-n),e.opacity)}function j(e,t,r,n){return 1===arguments.length?z(e):new F(e,t,r,null==n?1:n)}function F(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function V(e){return e>N?Math.pow(e,1/3):e/L+T}function G(e){return e>k?e*e*e:L*(e-T)}function B(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function U(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function H(e){if(e instanceof W)return new W(e.h,e.c,e.l,e.opacity);if(e instanceof F||(e=z(e)),0===e.a&&0===e.b)return new W(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*M;return new W(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function q(e,t,r,n){return 1===arguments.length?H(e):new W(e,t,r,null==n?1:n)}function W(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}t(F,j,r(u,{brighter:function(e){return new F(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new F(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return new w(B(3.1338561*(t=I*G(t))-1.6168667*(e=O*G(e))-.4906146*(r=C*G(r))),B(-.9787684*t+1.9161415*e+.033454*r),B(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),t(W,q,r(u,{brighter:function(e){return new W(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new W(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return z(this).rgb()}}));var Y=1.78277,Z=-.29227,X=-.90649,$=1.97294,K=$*X,J=$*Y,Q=Y*Z- -.14861*X;function ee(e,t,r,n){return 1===arguments.length?(function(e){if(e instanceof te)return new te(e.h,e.s,e.l,e.opacity);e instanceof w||(e=_(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(Q*n+K*t-J*r)/(Q+K-J),a=n-i,o=($*(r-i)-Z*a)/X,s=Math.sqrt(o*o+a*a)/($*i*(1-i)),l=s?Math.atan2(o,a)*M-120:NaN;return new te(l<0?l+360:l,s,i,e.opacity)})(e):new te(e,t,r,null==n?1:n)}function te(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}t(te,ee,r(u,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new te(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new te(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*A,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new w(255*(t+r*(-.14861*n+Y*i)),255*(t+r*(Z*n+X*i)),255*(t+r*($*n)),this.opacity)}})),e.color=g,e.rgb=x,e.hsl=R,e.lab=j,e.hcl=q,e.lch=function(e,t,r,n){return 1===arguments.length?H(e):new W(r,t,e,null==n?1:n)},e.gray=function(e,t){return new F(e,0,0,null==t?1:t)},e.cubehelix=ee,Object.defineProperty(e,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],90:[(function(e,t,r){var n;n=this,(function(t){"use strict";var s=function(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]},u=function(e){return(e=s(Math.abs(e)))?e[1]:NaN},r=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function R(e){return new n(e)}function n(e){if(!(t=r.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}R.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var P,i,a=function(e,t){var r=s(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")},E={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return a(100*e,t)},r:a,s:function(e,t){var r=s(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(P=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+s(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},c=function(e){return e},A=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],o=function(e){var t,s,l,w=e.grouping&&e.thousands?(s=e.grouping,l=e.thousands,function(e,t){for(var r=e.length,n=[],i=0,a=s[0],o=0;r>0&&a>0&&(o+a+1>t&&(a=Math.max(1,t-o)),n.push(e.substring(r-=a,r+a)),!((o+=a+1)>t));)a=s[i=(i+1)%s.length];return n.reverse().join(l)}):c,n=e.currency,D=e.decimal,S=e.numerals?(t=e.numerals,function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}):c,i=e.percent||"%";function o(e){var u=(e=R(e)).fill,c=e.align,p=e.sign,t=e.symbol,h=e.zero,d=e.width,f=e.comma,m=e.precision,y=e.trim,g=e.type;"n"===g?(f=!0,g="g"):E[g]||(null==m&&(m=12),y=!0,g="g"),(h||"0"===u&&"="===c)&&(h=!0,u="0",c="=");var v="$"===t?n[0]:"#"===t&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===t?n[1]:/[%p]/.test(g)?i:"",_=E[g],x=/[defgprs%]/.test(g);function r(e){var t,r,n,i=v,a=b;if("c"===g)a=_(e)+a,e="";else{var o=(e=+e)<0;if(e=_(Math.abs(e),m),y&&(e=(function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(i>0){if(!+e[n])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e})(e)),o&&0===+e&&(o=!1),i=(o?"("===p?p:"-":"-"===p||"("===p?"":p)+i,a=("s"===g?A[8+P/3]:"")+a+(o&&"("===p?")":""),x)for(t=-1,r=e.length;++t<r;)if(48>(n=e.charCodeAt(t))||n>57){a=(46===n?D+e.slice(t+1):e.slice(t))+a,e=e.slice(0,t);break}}f&&!h&&(e=w(e,1/0));var s=i.length+e.length+a.length,l=s<d?new Array(d-s+1).join(u):"";switch(f&&h&&(e=w(l+e,l.length?d-a.length:1/0),l=""),c){case"<":e=i+e+a+l;break;case"=":e=i+l+e+a;break;case"^":e=l.slice(0,s=l.length>>1)+i+e+a+l.slice(s);break;default:e=l+i+e+a}return S(e)}return m=null==m?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),r.toString=function(){return e+""},r}return{format:o,formatPrefix:function(e,t){var r=o(((e=R(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(u(t)/3))),i=Math.pow(10,-n),a=A[8+n/3];return function(e){return r(i*e)+a}}}};function e(e){return i=o(e),t.format=i.format,t.formatPrefix=i.formatPrefix,i}e({decimal:".",thousands:",",grouping:[3],currency:["$",""]});t.formatDefaultLocale=e,t.formatLocale=o,t.formatSpecifier=R,t.precisionFixed=function(e){return Math.max(0,-u(Math.abs(e)))},t.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(t)/3)))-u(Math.abs(e)))},t.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u(t)-u(e))+1},Object.defineProperty(t,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],91:[(function(e,t,r){var n,i;n=this,i=function(e,l){"use strict";function u(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}var t=function(o){var s=o.length-1;return function(e){var t=e<=0?e=0:e>=1?s-(e=1):Math.floor(e*s),r=o[t],n=o[t+1],i=t>0?o[t-1]:2*r-n,a=t<s-1?o[t+2]:2*n-r;return u((e-t/s)*s,i,r,n,a)}},r=function(o){var s=o.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),r=o[(t+s-1)%s],n=o[t%s],i=o[(t+1)%s],a=o[(t+2)%s];return u((e-t/s)*s,r,n,i,a)}},o=function(e){return function(){return e}};function n(t,r){return function(e){return t+e*r}}function i(e,t){var r=t-e;return r?n(e,r>180||r<-180?r-360*Math.round(r/360):r):o(isNaN(e)?t:e)}function a(a){return 1===(a=+a)?c:function(e,t){return t-e?(r=e,n=t,i=a,r=Math.pow(r,i),n=Math.pow(n,i)-r,i=1/i,function(e){return Math.pow(r+e*n,i)}):o(isNaN(e)?t:e);var r,n,i}}function c(e,t){var r=t-e;return r?n(e,r):o(isNaN(e)?t:e)}var s=(function e(t){var o=a(t);function r(t,e){var r=o((t=l.rgb(t)).r,(e=l.rgb(e)).r),n=o(t.g,e.g),i=o(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=n(e),t.b=i(e),t.opacity=a(e),t+""}}return r.gamma=e,r})(1);function p(s){return function(e){var t,r,n=e.length,i=new Array(n),a=new Array(n),o=new Array(n);for(t=0;t<n;++t)r=l.rgb(e[t]),i[t]=r.r||0,a[t]=r.g||0,o[t]=r.b||0;return i=s(i),a=s(a),o=s(o),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=o(e),r+""}}}var h=p(t),d=p(r),f=function(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),o=new Array(n);for(r=0;r<i;++r)a[r]=R(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=a[r](e);return o}},m=function(t,r){var n=new Date;return r-=t=+t,function(e){return n.setTime(t+r*e),n}},g=function(t,r){return r-=t=+t,function(e){return t+r*e}},y=function(e,t){var r,n={},i={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=R(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}},v=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(v.source,"g");var _,x,w,D,S=function(e,n){var t,r,i,a,o,s=v.lastIndex=b.lastIndex=0,l=-1,u=[],c=[];for(e+="",n+="";(t=v.exec(e))&&(r=b.exec(n));)(i=r.index)>s&&(i=n.slice(s,i),u[l]?u[l]+=i:u[++l]=i),(t=t[0])===(r=r[0])?u[l]?u[l]+=r:u[++l]=r:(u[++l]=null,c.push({i:l,x:g(t,r)})),s=b.lastIndex;return s<n.length&&(i=n.slice(s),u[l]?u[l]+=i:u[++l]=i),u.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(a=n,function(){return a}):(n=c.length,function(e){for(var t,r=0;r<n;++r)u[(t=c[r]).i]=t.x(e);return u.join("")})},R=function(e,t){var r,n=typeof t;return null==t||"boolean"===n?o(t):("number"===n?g:"string"===n?(r=l.color(t))?(t=r,s):S:t instanceof l.color?s:t instanceof Date?m:Array.isArray(t)?f:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?y:g)(e,t)},P=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},A=function(e,t,r,n,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*P,skewX:Math.atan(l)*P,scaleX:o,scaleY:s}};function M(h,d,f,m){function y(e){return e.length?e.pop()+" ":""}return function(e,t){var r,n,i,a,o,s,l,u,c=[],p=[];return e=h(e),t=h(t),(function(e,t,r,n,i,a){if(e!==r||t!==n){var o=i.push("translate(",null,d,null,f);a.push({i:o-4,x:g(e,r)},{i:o-2,x:g(t,n)})}else(r||n)&&i.push("translate("+r+d+n+f)})(e.translateX,e.translateY,t.translateX,t.translateY,c,p),r=e.rotate,n=t.rotate,i=c,a=p,r!==n?(r-n>180?n+=360:n-r>180&&(r+=360),a.push({i:i.push(y(i)+"rotate(",null,m)-2,x:g(r,n)})):n&&i.push(y(i)+"rotate("+n+m),o=e.skewX,s=t.skewX,l=c,u=p,o!==s?u.push({i:l.push(y(l)+"skewX(",null,m)-2,x:g(o,s)}):s&&l.push(y(l)+"skewX("+s+m),(function(e,t,r,n,i,a){if(e!==r||t!==n){var o=i.push(y(i)+"scale(",null,",",null,")");a.push({i:o-4,x:g(e,r)},{i:o-2,x:g(t,n)})}else 1===r&&1===n||i.push(y(i)+"scale("+r+","+n+")")})(e.scaleX,e.scaleY,t.scaleX,t.scaleY,c,p),e=t=null,function(e){for(var t,r=-1,n=p.length;++r<n;)c[(t=p[r]).i]=t.x(e);return c.join("")}}}var I=M((function(e){return"none"===e?E:(_||(_=document.createElement("DIV"),x=document.documentElement,w=document.defaultView),_.style.transform=e,e=w.getComputedStyle(x.appendChild(_),null).getPropertyValue("transform"),x.removeChild(_),e=e.slice(7,-1).split(","),A(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),O=M((function(e){return null==e?E:(D||(D=document.createElementNS("http://www.w3.org/2000/svg","g")),D.setAttribute("transform",e),(e=D.transform.baseVal.consolidate())?(e=e.matrix,A(e.a,e.b,e.c,e.d,e.e,e.f)):E)}),", ",")",")"),C=Math.SQRT2;function T(e){return((e=Math.exp(e))+1/e)/2}function k(o){return function(t,e){var r=o((t=l.hsl(t)).h,(e=l.hsl(e)).h),n=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=r(e),t.s=n(e),t.l=i(e),t.opacity=a(e),t+""}}}var L=k(i),N=k(c);function z(o){return function(t,e){var r=o((t=l.hcl(t)).h,(e=l.hcl(e)).h),n=c(t.c,e.c),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=r(e),t.c=n(e),t.l=i(e),t.opacity=a(e),t+""}}}var j=z(i),F=z(c);function V(s){return (function e(o){function t(t,e){var r=s((t=l.cubehelix(t)).h,(e=l.cubehelix(e)).h),n=c(t.s,e.s),i=c(t.l,e.l),a=c(t.opacity,e.opacity);return function(e){return t.h=r(e),t.s=n(e),t.l=i(Math.pow(e,o)),t.opacity=a(e),t+""}}return o=+o,t.gamma=e,t})(1)}var G=V(i),B=V(c);e.interpolate=R,e.interpolateArray=f,e.interpolateBasis=t,e.interpolateBasisClosed=r,e.interpolateDate=m,e.interpolateNumber=g,e.interpolateObject=y,e.interpolateRound=function(t,r){return r-=t=+t,function(e){return Math.round(t+r*e)}},e.interpolateString=S,e.interpolateTransformCss=I,e.interpolateTransformSvg=O,e.interpolateZoom=function(e,t){var r,o,s=e[0],l=e[1],u=e[2],n=t[0],i=t[1],a=t[2],c=n-s,p=i-l,h=c*c+p*p;if(h<1e-12)o=Math.log(a/u)/C,r=function(e){return[s+e*c,l+e*p,u*Math.exp(C*e*o)]};else{var d=Math.sqrt(h),f=(a*a-u*u+4*h)/(2*u*2*d),m=(a*a-u*u-4*h)/(2*a*2*d),y=Math.log(Math.sqrt(f*f+1)-f),g=Math.log(Math.sqrt(m*m+1)-m);o=(g-y)/C,r=function(e){var t,r,n=e*o,i=T(y),a=u/(2*d)*(i*(r=C*n+y,((r=Math.exp(2*r))-1)/(r+1))-(t=y,((t=Math.exp(t))-1/t)/2));return[s+a*c,l+a*p,u*i/T(C*n+y)]}}return r.duration=1e3*o,r},e.interpolateRgb=s,e.interpolateRgbBasis=h,e.interpolateRgbBasisClosed=d,e.interpolateHsl=L,e.interpolateHslLong=N,e.interpolateLab=function(t,e){var r=c((t=l.lab(t)).l,(e=l.lab(e)).l),n=c(t.a,e.a),i=c(t.b,e.b),a=c(t.opacity,e.opacity);return function(e){return t.l=r(e),t.a=n(e),t.b=i(e),t.opacity=a(e),t+""}},e.interpolateHcl=j,e.interpolateHclLong=F,e.interpolateCubehelix=G,e.interpolateCubehelixLong=B,e.piecewise=function(e,t){for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}},e.quantize=function(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r},Object.defineProperty(e,"__esModule",{value:!0})},"object"===typeof r&&"undefined"!==typeof t?i(r,e("d3-color")):i(n.d3=n.d3||{},n.d3)}),{"d3-color":89}],92:[(function(e,t,r){var n;n=this,(function(e){"use strict";var r=[].slice,a={};function t(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function i(t){if(!t._start)try{!(function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,r=e._tasks[t],n=r.length-1,i=r[n];r[n]=o(e,t),--e._waiting,++e._active,r=i.apply(null,r),e._tasks[t]&&(e._tasks[t]=r||a)}})(t)}catch(e){if(t._tasks[t._ended+t._active-1])s(t,e);else if(!t._data)throw e}}function o(r,n){return function(e,t){r._tasks[n]&&(--r._active,++r._ended,(r._tasks[n]=null)==r._error&&(null!=e?s(r,e):(r._data[n]=t,r._waiting?i(r):l(r))))}}function s(e,t){var r,n=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;--n>=0;)if((r=e._tasks[n])&&(e._tasks[n]=null,r.abort))try{r.abort()}catch(t){}e._active=NaN,l(e)}function l(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function n(e){if(null==e)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new t(e)}t.prototype=n.prototype={constructor:t,defer:function(e){if("function"!==typeof e)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=r.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),i(this),this},abort:function(){return null==this._error&&s(this,new Error("abort")),this},await:function(r){if("function"!==typeof r)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,t){r.apply(null,[e].concat(t))},l(this),this},awaitAll:function(e){if("function"!==typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,l(this),this}},e.queue=n,Object.defineProperty(e,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],93:[(function(e,t,r){var n,i;n=this,i=function(e,S,l,R,u,t,r){"use strict";var n=Array.prototype,P=n.map,p=n.slice,c={name:"implicit"};function f(n){var a=l.map(),o=[],i=c;function s(e){var t=e+"",r=a.get(t);if(!r){if(i!==c)return i;a.set(t,r=o.push(e))}return n[(r-1)%n.length]}return n=null==n?[]:p.call(n),s.domain=function(e){if(!arguments.length)return o.slice();o=[],a=l.map();for(var t,r,n=-1,i=e.length;++n<i;)a.has(r=(t=e[n])+"")||a.set(r,o.push(t));return s},s.range=function(e){return arguments.length?(n=p.call(e),s):n.slice()},s.unknown=function(e){return arguments.length?(i=e,s):i},s.copy=function(){return f().domain(o).range(n).unknown(i)},s}function i(){var a,o,e=f().unknown(void 0),s=e.domain,l=e.range,u=[0,1],c=!1,p=0,h=0,d=.5;function t(){var e=s().length,t=u[1]<u[0],r=u[t-0],n=u[1-t];a=(n-r)/Math.max(1,e-p+2*h),c&&(a=Math.floor(a)),r+=(n-r-a*(e-p))*d,o=a*(1-p),c&&(r=Math.round(r),o=Math.round(o));var i=S.range(e).map((function(e){return r+a*e}));return l(t?i.reverse():i)}return delete e.unknown,e.domain=function(e){return arguments.length?(s(e),t()):s()},e.range=function(e){return arguments.length?(u=[+e[0],+e[1]],t()):u.slice()},e.rangeRound=function(e){return u=[+e[0],+e[1]],c=!0,t()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(e){return arguments.length?(c=!!e,t()):c},e.padding=function(e){return arguments.length?(p=h=Math.max(0,Math.min(1,e)),t()):p},e.paddingInner=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),t()):p},e.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},e.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),t()):d},e.copy=function(){return i().domain(s()).range(u).round(c).paddingInner(p).paddingOuter(h).align(d)},t()}function a(e){return function(){return e}}function h(e){return+e}var d=[0,1];function E(t,r){return(r-=t=+t)?function(e){return(e-t)/r}:a(r)}function m(e,t,r,n){var i=e[0],a=e[1],o=t[0],s=t[1];return o=a<i?(i=r(a,i),n(s,o)):(i=r(i,a),n(o,s)),function(e){return o(i(e))}}function y(r,e,t,n){var i=Math.min(r.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=t(r[s],r[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var t=S.bisect(r,e,1,i)-1;return o[t](a[t](e))}}function A(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function M(t,r){var n,a,o,s=d,l=d,u=R.interpolate,c=!1;function i(){return n=Math.min(s.length,l.length)>2?y:m,a=o=null,e}function e(e){return(a||(a=n(s,l,c?(i=t,function(t,r){var n=i(t=+t,r=+r);return function(e){return e<=t?0:e>=r?1:n(e)}}):t,u)))(+e);var i}return e.invert=function(e){return(o||(o=n(l,s,E,c?(i=r,function(t,r){var n=i(t=+t,r=+r);return function(e){return e<=0?t:e>=1?r:n(e)}}):r)))(+e);var i},e.domain=function(e){return arguments.length?(s=P.call(e,h),i()):s.slice()},e.range=function(e){return arguments.length?(l=p.call(e),i()):l.slice()},e.rangeRound=function(e){return l=p.call(e),u=R.interpolateRound,i()},e.clamp=function(e){return arguments.length?(c=!!e,i()):c},e.interpolate=function(e){return arguments.length?(u=e,i()):u},i()}function g(s){var l=s.domain;return s.ticks=function(e){var t=l();return S.ticks(t[0],t[t.length-1],null==e?10:e)},s.tickFormat=function(e,t){return (function(e,t,r){var n,i=e[0],a=e[e.length-1],o=S.tickStep(i,a,null==t?10:t);switch((r=u.formatSpecifier(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(a));return null!=r.precision||isNaN(n=u.precisionPrefix(o,s))||(r.precision=n),u.formatPrefix(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(n=u.precisionRound(o,Math.max(Math.abs(i),Math.abs(a))))||(r.precision=n-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(n=u.precisionFixed(o))||(r.precision=n-2*("%"===r.type))}return u.format(r)})(l(),e,t)},s.nice=function(e){null==e&&(e=10);var t,r=l(),n=0,i=r.length-1,a=r[n],o=r[i];return o<a&&(t=a,a=o,o=t,t=n,n=i,i=t),(t=S.tickIncrement(a,o,e))>0?(a=Math.floor(a/t)*t,o=Math.ceil(o/t)*t,t=S.tickIncrement(a,o,e)):t<0&&(a=Math.ceil(a*t)/t,o=Math.floor(o*t)/t,t=S.tickIncrement(a,o,e)),t>0?(r[n]=Math.floor(a/t)*t,r[i]=Math.ceil(o/t)*t,l(r)):t<0&&(r[n]=Math.ceil(a*t)/t,r[i]=Math.floor(o*t)/t,l(r)),s},s}function I(e,t){var r,n=0,i=(e=e.slice()).length-1,a=e[n],o=e[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),e[n]=t.floor(a),e[i]=t.ceil(o),e}function o(t,r){return(r=Math.log(r/t))?function(e){return Math.log(e/t)/r}:a(r)}function s(t,r){return t<0?function(e){return-Math.pow(-r,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(r,e)*Math.pow(t,1-e)}}function v(e){return isFinite(e)?+("1e"+e):e<0?0:e}function b(t){return 10===t?v:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function _(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function x(t){return function(e){return-t(-e)}}function w(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function D(){var n=1,e=M((function(t,r){return(r=w(r,n)-(t=w(t,n)))?function(e){return(w(e,n)-t)/r}:a(r)}),(function(t,r){return r=w(r,n)-(t=w(t,n)),function(e){return w(t+r*e,1/n)}})),t=e.domain;return e.exponent=function(e){return arguments.length?(n=+e,t(t())):n},e.copy=function(){return A(e,D().exponent(n))},g(e)}var O=1e3,C=60*O,T=60*C,k=24*T,L=7*k,N=30*k,z=365*k;function j(e){return new Date(e)}function F(e){return e instanceof Date?+e:+new Date(+e)}function V(o,t,r,n,i,a,s,l,u){var c=M(E,R.interpolateNumber),p=c.invert,h=c.domain,d=u(".%L"),f=u(":%S"),m=u("%I:%M"),y=u("%I %p"),g=u("%a %d"),v=u("%b %d"),b=u("%B"),_=u("%Y"),x=[[s,1,O],[s,5,5*O],[s,15,15*O],[s,30,30*O],[a,1,C],[a,5,5*C],[a,15,15*C],[a,30,30*C],[i,1,T],[i,3,3*T],[i,6,6*T],[i,12,12*T],[n,1,k],[n,2,2*k],[r,1,L],[t,1,N],[t,3,3*N],[o,1,z]];function w(e){return(s(e)<e?d:a(e)<e?f:i(e)<e?m:n(e)<e?y:t(e)<e?r(e)<e?g:v:o(e)<e?b:_)(e)}function D(e,t,r,n){if(null==e&&(e=10),"number"===typeof e){var i=Math.abs(r-t)/e,a=S.bisector((function(e){return e[2]})).right(x,i);e=a===x.length?(n=S.tickStep(t/z,r/z,e),o):a?(n=(a=x[i/x[a-1][2]<x[a][2]/i?a-1:a])[1],a[0]):(n=Math.max(S.tickStep(t,r,e),1),l)}return null==n?e:e.every(n)}return c.invert=function(e){return new Date(p(e))},c.domain=function(e){return arguments.length?h(P.call(e,F)):h().map(j)},c.ticks=function(e,t){var r,n=h(),i=n[0],a=n[n.length-1],o=a<i;return o&&(r=i,i=a,a=r),r=(r=D(e,i,a,t))?r.range(i,a+1):[],o?r.reverse():r},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e,t){var r=h();return(e=D(e,r[0],r[r.length-1],t))?h(I(r,e)):c},c.copy=function(){return A(c,V(o,t,r,n,i,a,s,l,u))},c}e.scaleBand=i,e.scalePoint=function(){return (function e(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(r())},t})(i().paddingInner(1))},e.scaleIdentity=function e(){var t=[0,1];function r(e){return+e}return(r.invert=r).domain=r.range=function(e){return arguments.length?(t=P.call(e,h),r):t.slice()},r.copy=function(){return e().domain(t)},g(r)},e.scaleLinear=function e(){var t=M(E,R.interpolateNumber);return t.copy=function(){return A(t,e())},g(t)},e.scaleLog=function e(){var t=M(o,s).domain([1,10]),h=t.domain,d=10,f=_(10),m=b(10);function r(){return f=_(d),m=b(d),h()[0]<0&&(f=x(f),m=x(m)),t}return t.base=function(e){return arguments.length?(d=+e,r()):d},t.domain=function(e){return arguments.length?(h(e),r()):h()},t.ticks=function(e){var t,r=h(),n=r[0],i=r[r.length-1];(t=i<n)&&(l=n,n=i,i=l);var a,o,s,l=f(n),u=f(i),c=null==e?10:+e,p=[];if(!(d%1)&&u-l<c){if(l=Math.round(l)-1,u=Math.round(u)+1,n>0){for(;l<u;++l)for(o=1,a=m(l);o<d;++o)if(!((s=a*o)<n)){if(s>i)break;p.push(s)}}else for(;l<u;++l)for(o=d-1,a=m(l);o>=1;--o)if(!((s=a*o)<n)){if(s>i)break;p.push(s)}}else p=S.ticks(l,u,Math.min(u-l,c)).map(m);return t?p.reverse():p},t.tickFormat=function(e,r){if(null==r&&(r=10===d?".0e":","),"function"!==typeof r&&(r=u.format(r)),e===1/0)return r;null==e&&(e=10);var n=Math.max(1,d*e/t.ticks().length);return function(e){var t=e/m(Math.round(f(e)));return t*d<d-.5&&(t*=d),t<=n?r(e):""}},t.nice=function(){return h(I(h(),{floor:function(e){return m(Math.floor(f(e)))},ceil:function(e){return m(Math.ceil(f(e)))}}))},t.copy=function(){return A(t,e().base(d))},t},e.scaleOrdinal=f,e.scaleImplicit=c,e.scalePow=D,e.scaleSqrt=function(){return D().exponent(.5)},e.scaleQuantile=function e(){var i=[],r=[],n=[];function a(){var e=0,t=Math.max(1,r.length);for(n=new Array(t-1);++e<t;)n[e-1]=S.quantile(i,e/t);return o}function o(e){if(!isNaN(e=+e))return r[S.bisect(n,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?n[t-1]:i[0],t<n.length?n[t]:i[i.length-1]]},o.domain=function(e){if(!arguments.length)return i.slice();i=[];for(var t,r=0,n=e.length;r<n;++r)null==(t=e[r])||isNaN(t=+t)||i.push(t);return i.sort(S.ascending),a()},o.range=function(e){return arguments.length?(r=p.call(e),a()):r.slice()},o.quantiles=function(){return n.slice()},o.copy=function(){return e().domain(i).range(r)},o},e.scaleQuantize=function e(){var r=0,n=1,i=1,a=[.5],o=[0,1];function t(e){if(e<=e)return o[S.bisect(a,e,0,i)]}function s(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*n-(e-i)*r)/(i+1);return t}return t.domain=function(e){return arguments.length?(r=+e[0],n=+e[1],s()):[r,n]},t.range=function(e){return arguments.length?(i=(o=p.call(e)).length-1,s()):o.slice()},t.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=i?[a[i-1],n]:[a[t-1],a[t]]},t.copy=function(){return e().domain([r,n]).range(o)},g(t)},e.scaleThreshold=function e(){var r=[.5],n=[0,1],t=1;function i(e){if(e<=e)return n[S.bisect(r,e,0,t)]}return i.domain=function(e){return arguments.length?(r=p.call(e),t=Math.min(r.length,n.length-1),i):r.slice()},i.range=function(e){return arguments.length?(n=p.call(e),t=Math.min(r.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},i.copy=function(){return e().domain(r).range(n)},i},e.scaleTime=function(){return V(t.timeYear,t.timeMonth,t.timeWeek,t.timeDay,t.timeHour,t.timeMinute,t.timeSecond,t.timeMillisecond,r.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},e.scaleUtc=function(){return V(t.utcYear,t.utcMonth,t.utcWeek,t.utcDay,t.utcHour,t.utcMinute,t.utcSecond,t.utcMillisecond,r.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},e.scaleSequential=function e(r){var n=0,i=1,a=!1;function t(e){var t=(e-n)/(i-n);return r(a?Math.max(0,Math.min(1,t)):t)}return t.domain=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.clamp=function(e){return arguments.length?(a=!!e,t):a},t.interpolator=function(e){return arguments.length?(r=e,t):r},t.copy=function(){return e(r).domain([n,i]).clamp(a)},g(t)},Object.defineProperty(e,"__esModule",{value:!0})},"object"===typeof r&&"undefined"!==typeof t?i(r,e("d3-array"),e("d3-collection"),e("d3-interpolate"),e("d3-format"),e("d3-time"),e("d3-time-format")):i(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3,n.d3)}),{"d3-array":94,"d3-collection":88,"d3-format":90,"d3-interpolate":91,"d3-time":97,"d3-time-format":96}],94:[(function(e,t,r){arguments[4][87][0].apply(r,arguments)}),{dup:87}],95:[(function(e,t,r){var n;n=this,(function(a){"use strict";var n="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e}function s(e){var t=o(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===n&&e.documentElement.namespaceURI===n?e.createElement(r):e.createElementNS(t,r)}})(t)}function t(){}function p(e){return null==e?t:function(){return this.querySelector(e)}}function r(){return[]}function c(e){return null==e?r:function(){return this.querySelectorAll(e)}}var e=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var l=document.documentElement;if(!l.matches){var u=l.webkitMatchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector;e=function(e){return function(){return u.call(this,e)}}}}var h=e;function d(e){return new Array(e.length)}function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var m="$";function w(e,t,r,n,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new f(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function D(e,t,r,n,i,a,o){var s,l,u,c={},p=t.length,h=a.length,d=new Array(p);for(s=0;s<p;++s)(l=t[s])&&(d[s]=u=m+o.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<h;++s)(l=c[u=m+o.call(e,a[s],s,a)])?((n[s]=l).__data__=a[s],c[u]=null):r[s]=new f(e,a[s]);for(s=0;s<p;++s)(l=t[s])&&c[d[s]]===l&&(i[s]=l)}function y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function v(e,t){return e.style.getPropertyValue(t)||g(e).getComputedStyle(e,null).getPropertyValue(t)}function b(e){return e.trim().split(/^|\s+/)}function _(e){return e.classList||new x(e)}function x(e){this._node=e,this._names=b(e.getAttribute("class")||"")}function S(e,t){for(var r=_(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function R(e,t){for(var r=_(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function P(){this.textContent=""}function E(){this.innerHTML=""}function A(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I(){return null}function O(){var e=this.parentNode;e&&e.removeChild(this)}function C(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function T(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}x.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var k={};(a.event=null,"undefined"!==typeof document)&&("onmouseenter"in document.documentElement||(k={mouseenter:"mouseover",mouseleave:"mouseout"}));function L(r,e,t){return r=N(r,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||r.call(this,e)}}function N(r,n,i){return function(e){var t=a.event;a.event=e;try{r.call(this,this.__data__,n,i)}finally{a.event=t}}}function z(a){return function(){var e=this.__on;if(e){for(var t,r=0,n=-1,i=e.length;r<i;++r)t=e[r],a.type&&t.type!==a.type||t.name!==a.name?e[++n]=t:this.removeEventListener(t.type,t.listener,t.capture);++n?e.length=n:delete this.__on}}}function j(l,u,c){var p=k.hasOwnProperty(l.type)?L:N;return function(e,t,r){var n,i=this.__on,a=p(u,t,r);if(i)for(var o=0,s=i.length;o<s;++o)if((n=i[o]).type===l.type&&n.name===l.name)return this.removeEventListener(n.type,n.listener,n.capture),this.addEventListener(n.type,n.listener=a,n.capture=c),void(n.value=u);this.addEventListener(l.type,a,c),n={type:l.type,name:l.name,value:u,listener:a,capture:c},i?i.push(n):this.__on=[n]}}function F(e,t,r){var n=g(e),i=n.CustomEvent;"function"===typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}var V=[null];function G(e,t){this._groups=e,this._parents=t}function B(){return new G([[document.documentElement]],V)}function U(e){return"string"===typeof e?new G([[document.querySelector(e)]],[document.documentElement]):new G([[e]],V)}G.prototype=B.prototype={constructor:G,select:function(e){"function"!==typeof e&&(e=p(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=t[i],l=s.length,u=n[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new G(n,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=c(e));for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var o,s=t[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(n.push(e.call(o,o.__data__,u,s)),i.push(o));return new G(n,i)},filter:function(e){"function"!==typeof e&&(e=h(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new G(n,this._parents)},data:function(e,t){if(!e)return f=new Array(this.size()),c=-1,this.each((function(e){f[++c]=e})),f;var r,n=t?D:w,i=this._parents,a=this._groups;"function"!==typeof e&&(r=e,e=function(){return r});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var p=i[c],h=a[c],d=h.length,f=e.call(p,p&&p.__data__,c,i),m=f.length,y=l[c]=new Array(m),g=s[c]=new Array(m);n(p,h,y,g,u[c]=new Array(d),f,t);for(var v,b,_=0,x=0;_<m;++_)if(v=y[_]){for(_>=x&&(x=_+1);!(b=g[x])&&++x<m;);v._next=b||null}}return(s=new G(s,i))._enter=l,s._exit=u,s},enter:function(){return new G(this._enter||this._groups.map(d),this._parents)},exit:function(){return new G(this._exit||this._groups.map(d),this._parents)},merge:function(e){for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var l,u=t[s],c=r[s],p=u.length,h=o[s]=new Array(p),d=0;d<p;++d)(l=u[d]||c[d])&&(h[d]=l);for(;s<n;++s)o[s]=t[s];return new G(o,this._parents)},order:function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},sort:function(r){function e(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}r||(r=y);for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a){for(var o,s=t[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new G(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,a=t[r],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var r=o(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"===typeof t?r.local?function(t,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:r.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(r,t))},style:function(e,t,r){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"===typeof t?function(t,r,n){return function(){var e=r.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,n)}}:function(e,t,r){return function(){this.style.setProperty(e,t,r)}})(e,t,null==r?"":r)):v(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"===typeof t?function(t,r){return function(){var e=r.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var r=b(e+"");if(arguments.length<2){for(var n=_(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"===typeof t?function(e,t){return function(){(t.apply(this,arguments)?S:R)(this,e)}}:t?function(e){return function(){S(this,e)}}:function(e){return function(){R(this,e)}})(r,t))},text:function(e){return arguments.length?this.each(null==e?P:("function"===typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?E:("function"===typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(A)},lower:function(){return this.each(M)},append:function(e){var t="function"===typeof e?e:s(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var r="function"===typeof e?e:s(e),n=null==t?I:"function"===typeof t?t:p(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(O)},clone:function(e){return this.select(e?T:C)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,r){var n,i,a=(e+"").trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})),o=a.length;if(!(arguments.length<2)){for(s=t?j:z,null==r&&(r=!1),n=0;n<o;++n)this.each(s(a[n],t,r));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(n=0,l=s[u];n<o;++n)if((i=a[n]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?function(e,t){return function(){return F(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return F(this,e,t)}})(e,t))}};var H=0;function q(){return new W}function W(){this._="@"+(++H).toString(36)}function Y(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function Z(e,t){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}W.prototype=q.prototype={constructor:W,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},a.create=function(e){return U(s(e).call(document.documentElement))},a.creator=s,a.local=q,a.matcher=h,a.mouse=function(e){var t=Y();return t.changedTouches&&(t=t.changedTouches[0]),Z(e,t)},a.namespace=o,a.namespaces=i,a.clientPoint=Z,a.select=U,a.selectAll=function(e){return"string"===typeof e?new G([document.querySelectorAll(e)],[document.documentElement]):new G([null==e?[]:e],V)},a.selection=B,a.selector=p,a.selectorAll=c,a.style=v,a.touch=function(e,t,r){arguments.length<3&&(r=t,t=Y().changedTouches);for(var n,i=0,a=t?t.length:0;i<a;++i)if((n=t[i]).identifier===r)return Z(e,n);return null},a.touches=function(e,t){null==t&&(t=Y().touches);for(var r=0,n=t?t.length:0,i=new Array(n);r<n;++r)i[r]=Z(e,t[r]);return i},a.window=g,a.customEvent=function(e,t,r,n){var i=a.event;e.sourceEvent=a.event,a.event=e;try{return t.apply(r,n)}finally{a.event=i}},Object.defineProperty(a,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],96:[(function(e,t,r){var n,i;n=this,i=function(t,R){"use strict";function P(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function E(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function A(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function r(e){var n=e.dateTime,i=e.date,a=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=I(t),c=O(t),p=I(r),h=O(r),d=I(o),f=O(o),m=I(s),y=O(s),g=I(l),v=O(l),b={a:function(e){return o[e.getDay()]},A:function(e){return r[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:K,e:K,f:re,H:J,I:Q,j:ee,L:te,m:ne,M:ie,p:function(e){return t[+(e.getHours()>=12)]},Q:Ce,s:Te,S:ae,u:oe,U:se,V:le,w:ue,W:ce,x:null,X:null,y:pe,Y:he,Z:de,"%":Oe},_={a:function(e){return o[e.getUTCDay()]},A:function(e){return r[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:fe,e:fe,f:be,H:me,I:ye,j:ge,L:ve,m:_e,M:xe,p:function(e){return t[+(e.getUTCHours()>=12)]},Q:Ce,s:Te,S:we,u:De,U:Se,V:Re,w:Pe,W:Ee,x:null,X:null,y:Ae,Y:Me,Z:Ie,"%":Oe},x={a:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=f[n[0].toLowerCase()],r+n[0].length):-1},A:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=h[n[0].toLowerCase()],r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=v[n[0].toLowerCase()],r+n[0].length):-1},B:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=y[n[0].toLowerCase()],r+n[0].length):-1},c:function(e,t,r){return S(e,n,t,r)},d:G,e:G,f:Y,H:U,I:U,j:B,L:W,m:V,M:H,p:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.p=c[n[0].toLowerCase()],r+n[0].length):-1},Q:X,s:$,S:q,u:T,U:k,V:L,w:C,W:N,x:function(e,t,r){return S(e,i,t,r)},X:function(e,t,r){return S(e,a,t,r)},y:j,Y:z,Z:F,"%":Z};function w(l,u){return function(e){var t,r,n,i=[],a=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===l.charCodeAt(a)&&(i.push(l.slice(o,a)),null!=(r=M[t=l.charAt(++a)])?t=l.charAt(++a):r="e"===t?" ":"0",(n=u[t])&&(t=n(e,r)),i.push(t),o=a+1);return i.push(l.slice(o,a)),i.join("")}}function D(i,a){return function(e){var t,r,n=A(1900);if(S(n,i,e+="",0)!=e.length)return null;if("Q"in n)return new Date(n.Q);if("p"in n&&(n.H=n.H%12+12*n.p),"V"in n){if(n.V<1||n.V>53)return null;"w"in n||(n.w=1),n.d="Z"in n?(t=(r=(t=E(A(n.y))).getUTCDay())>4||0===r?R.utcMonday.ceil(t):R.utcMonday(t),t=R.utcDay.offset(t,7*(n.V-1)),n.y=t.getUTCFullYear(),n.m=t.getUTCMonth(),t.getUTCDate()+(n.w+6)%7):(t=(r=(t=a(A(n.y))).getDay())>4||0===r?R.timeMonday.ceil(t):R.timeMonday(t),t=R.timeDay.offset(t,7*(n.V-1)),n.y=t.getFullYear(),n.m=t.getMonth(),t.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),r="Z"in n?E(A(n.y)).getUTCDay():a(A(n.y)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(r+5)%7:n.w+7*n.U-(r+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,E(n)):a(n)}}function S(e,t,r,n){for(var i,a,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in M?t.charAt(o++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return b.x=w(i,b),b.X=w(a,b),b.c=w(n,b),_.x=w(i,_),_.X=w(a,_),_.c=w(n,_),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=D(e+="",P);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=D(e,E);return t.toString=function(){return e},t}}}var n,M={"-":"",_:" ",0:"0"},i=/^\s*\d+/,a=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function l(e){return e.replace(o,"\\$&")}function I(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function O(e){for(var t={},r=-1,n=e.length;++r<n;)t[e[r].toLowerCase()]=r;return t}function C(e,t,r){var n=i.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function T(e,t,r){var n=i.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function k(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function L(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function N(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function z(e,t,r){var n=i.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function j(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function F(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function V(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function G(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function B(e,t,r){var n=i.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function U(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function H(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function q(e,t,r){var n=i.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function W(e,t,r){var n=i.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Y(e,t,r){var n=i.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Z(e,t,r){var n=a.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function X(e,t,r){var n=i.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function $(e,t,r){var n=i.exec(t.slice(r));return n?(e.Q=1e3*+n[0],r+n[0].length):-1}function K(e,t){return s(e.getDate(),t,2)}function J(e,t){return s(e.getHours(),t,2)}function Q(e,t){return s(e.getHours()%12||12,t,2)}function ee(e,t){return s(1+R.timeDay.count(R.timeYear(e),e),t,3)}function te(e,t){return s(e.getMilliseconds(),t,3)}function re(e,t){return te(e,t)+"000"}function ne(e,t){return s(e.getMonth()+1,t,2)}function ie(e,t){return s(e.getMinutes(),t,2)}function ae(e,t){return s(e.getSeconds(),t,2)}function oe(e){var t=e.getDay();return 0===t?7:t}function se(e,t){return s(R.timeSunday.count(R.timeYear(e),e),t,2)}function le(e,t){var r=e.getDay();return e=r>=4||0===r?R.timeThursday(e):R.timeThursday.ceil(e),s(R.timeThursday.count(R.timeYear(e),e)+(4===R.timeYear(e).getDay()),t,2)}function ue(e){return e.getDay()}function ce(e,t){return s(R.timeMonday.count(R.timeYear(e),e),t,2)}function pe(e,t){return s(e.getFullYear()%100,t,2)}function he(e,t){return s(e.getFullYear()%1e4,t,4)}function de(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+s(t/60|0,"0",2)+s(t%60,"0",2)}function fe(e,t){return s(e.getUTCDate(),t,2)}function me(e,t){return s(e.getUTCHours(),t,2)}function ye(e,t){return s(e.getUTCHours()%12||12,t,2)}function ge(e,t){return s(1+R.utcDay.count(R.utcYear(e),e),t,3)}function ve(e,t){return s(e.getUTCMilliseconds(),t,3)}function be(e,t){return ve(e,t)+"000"}function _e(e,t){return s(e.getUTCMonth()+1,t,2)}function xe(e,t){return s(e.getUTCMinutes(),t,2)}function we(e,t){return s(e.getUTCSeconds(),t,2)}function De(e){var t=e.getUTCDay();return 0===t?7:t}function Se(e,t){return s(R.utcSunday.count(R.utcYear(e),e),t,2)}function Re(e,t){var r=e.getUTCDay();return e=r>=4||0===r?R.utcThursday(e):R.utcThursday.ceil(e),s(R.utcThursday.count(R.utcYear(e),e)+(4===R.utcYear(e).getUTCDay()),t,2)}function Pe(e){return e.getUTCDay()}function Ee(e,t){return s(R.utcMonday.count(R.utcYear(e),e),t,2)}function Ae(e,t){return s(e.getUTCFullYear()%100,t,2)}function Me(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function Ie(){return"+0000"}function Oe(){return"%"}function Ce(e){return+e}function Te(e){return Math.floor(+e/1e3)}function e(e){return n=r(e),t.timeFormat=n.format,t.timeParse=n.parse,t.utcFormat=n.utcFormat,t.utcParse=n.utcParse,n}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var u="%Y-%m-%dT%H:%M:%S.%LZ";var c=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(u);var p=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:t.utcParse(u);t.timeFormatDefaultLocale=e,t.timeFormatLocale=r,t.isoFormat=c,t.isoParse=p,Object.defineProperty(t,"__esModule",{value:!0})},"object"===typeof r&&"undefined"!==typeof t?i(r,e("d3-time")):i(n.d3=n.d3||{},n.d3)}),{"d3-time":97}],97:[(function(e,t,r){var n;n=this,(function(e){"use strict";var i=new Date,l=new Date;function u(a,o,r,n){function s(e){return a(e=new Date(+e)),e}return(s.floor=s).ceil=function(e){return a(e=new Date(e-1)),o(e,1),a(e),e},s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,r){var n,i=[];if(e=s.ceil(e),r=null==r?1:Math.floor(r),!(e<t)||!(r>0))return i;for(;i.push(n=new Date(+e)),o(e,r),a(e),n<e&&e<t;);return i},s.filter=function(r){return u((function(e){if(e>=e)for(;a(e),!r(e);)e.setTime(e-1)}),(function(e,t){if(e>=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!r(e););else for(;--t>=0;)for(;o(e,1),!r(e););}))},r&&(s.count=function(e,t){return i.setTime(+e),l.setTime(+t),a(i),a(l),Math.floor(r(i,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(n?function(e){return n(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}var t=u((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));t.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?u((function(e){e.setTime(Math.floor(e/r)*r)}),(function(e,t){e.setTime(+e+t*r)}),(function(e,t){return(t-e)/r})):t:null};var r=t.range,n=u((function(e){e.setTime(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()})),a=n.range,o=u((function(e){e.setTime(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()})),s=o.range,c=u((function(e){var t=6e4*e.getTimezoneOffset()%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((+e-t)/36e5)+t)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()})),p=c.range,h=u((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1})),d=h.range;function f(t){return u((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var m=f(0),y=f(1),g=f(2),v=f(3),b=f(4),_=f(5),x=f(6),w=m.range,D=y.range,S=g.range,R=v.range,P=b.range,E=_.range,A=x.range,M=u((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),I=M.range,O=u((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));O.every=function(r){return isFinite(r=Math.floor(r))&&r>0?u((function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t*r)})):null};var C=O.range,T=u((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()})),k=T.range,L=u((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()})),N=L.range,z=u((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1})),j=z.range;function F(t){return u((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var V=F(0),G=F(1),B=F(2),U=F(3),H=F(4),q=F(5),W=F(6),Y=V.range,Z=G.range,X=B.range,$=U.range,K=H.range,J=q.range,Q=W.range,ee=u((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),te=ee.range,re=u((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));re.every=function(r){return isFinite(r=Math.floor(r))&&r>0?u((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})):null};var ne=re.range;e.timeInterval=u,e.timeMillisecond=t,e.timeMilliseconds=r,e.utcMillisecond=t,e.utcMilliseconds=r,e.timeSecond=n,e.timeSeconds=a,e.utcSecond=n,e.utcSeconds=a,e.timeMinute=o,e.timeMinutes=s,e.timeHour=c,e.timeHours=p,e.timeDay=h,e.timeDays=d,e.timeWeek=m,e.timeWeeks=w,e.timeSunday=m,e.timeSundays=w,e.timeMonday=y,e.timeMondays=D,e.timeTuesday=g,e.timeTuesdays=S,e.timeWednesday=v,e.timeWednesdays=R,e.timeThursday=b,e.timeThursdays=P,e.timeFriday=_,e.timeFridays=E,e.timeSaturday=x,e.timeSaturdays=A,e.timeMonth=M,e.timeMonths=I,e.timeYear=O,e.timeYears=C,e.utcMinute=T,e.utcMinutes=k,e.utcHour=L,e.utcHours=N,e.utcDay=z,e.utcDays=j,e.utcWeek=V,e.utcWeeks=Y,e.utcSunday=V,e.utcSundays=Y,e.utcMonday=G,e.utcMondays=Z,e.utcTuesday=B,e.utcTuesdays=X,e.utcWednesday=U,e.utcWednesdays=$,e.utcThursday=H,e.utcThursdays=K,e.utcFriday=q,e.utcFridays=J,e.utcSaturday=W,e.utcSaturdays=Q,e.utcMonth=ee,e.utcMonths=te,e.utcYear=re,e.utcYears=ne,Object.defineProperty(e,"__esModule",{value:!0})})("object"===typeof r&&"undefined"!==typeof t?r:n.d3=n.d3||{})}),{}],98:[(function(e,r,n){(function(s){var e,t;e=this,t=function(){"use strict";var e,t,r=[];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function y(e,t,r){y.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function g(e,t){g.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function v(e,t){v.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function b(e,t,r){b.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function _(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function x(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"===typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function w(n,i,a,o,e,t,s){s=s||[];var l=(e=e||[]).slice(0);if("undefined"!==typeof t){if(o){if("function"===typeof o&&o(l,t))return;if("object"===typeof o){if(o.prefilter&&o.prefilter(l,t))return;if(o.normalize){var r=o.normalize(l,t,n,i);r&&(n=r[0],i=r[1])}}}l.push(t)}"regexp"===x(n)&&"regexp"===x(i)&&(n=n.toString(),i=i.toString());var u=typeof n,c=typeof i,p="undefined"!==u||s&&s[s.length-1].lhs&&s[s.length-1].lhs.hasOwnProperty(t),h="undefined"!==c||s&&s[s.length-1].rhs&&s[s.length-1].rhs.hasOwnProperty(t);if(!p&&h)a(new g(l,i));else if(!h&&p)a(new v(l,n));else if(x(n)!==x(i))a(new y(l,n,i));else if("date"===x(n)&&n-i!==0)a(new y(l,n,i));else if("object"===u&&null!==n&&null!==i)if(s.filter((function(e){return e.lhs===n})).length)n!==i&&a(new y(l,n,i));else{if(s.push({lhs:n,rhs:i}),Array.isArray(n)){var d;n.length;for(d=0;d<n.length;d++)d>=i.length?a(new b(l,d,new v(void 0,n[d]))):w(n[d],i[d],a,o,l,d,s);for(;d<i.length;)a(new b(l,d,new g(void 0,i[d++])))}else{var f=Object.keys(n),m=Object.keys(i);f.forEach((function(e,t){var r=m.indexOf(e);r>=0?(w(n[e],i[e],a,o,l,e,s),m=_(m,r)):w(n[e],void 0,a,o,l,e,s)})),m.forEach((function(e){w(void 0,i[e],a,o,l,e,s)}))}s.length=s.length-1}else n!==i&&("number"===u&&isNaN(n)&&isNaN(i)||a(new y(l,n,i)))}function a(e,t,r,n){return n=n||[],w(e,t,(function(e){e&&n.push(e)}),r),n.length?n:void 0}function o(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,i=-1,a=r.path?r.path.length-1:0;++i<a;)"undefined"===typeof n[r.path[i]]&&(n[r.path[i]]="number"===typeof r.path[i]?[]:{}),n=n[r.path[i]];switch(r.kind){case"A":!(function e(t,r,n){if(n.path&&n.path.length){var i,a=t[r],o=n.path.length-1;for(i=0;i<o;i++)a=a[n.path[i]];switch(n.kind){case"A":e(a[n.path[i]],n.index,n.item);break;case"D":delete a[n.path[i]];break;case"E":case"N":a[n.path[i]]=n.rhs}}else switch(n.kind){case"A":e(t[r],n.index,n.item);break;case"D":t=_(t,r);break;case"E":case"N":t[r]=n.rhs}return t})(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}return e="object"===typeof s&&s?s:"undefined"!==typeof window?window:{},(t=e.DeepDiff)&&r.push((function(){"undefined"!==typeof t&&e.DeepDiff===a&&(e.DeepDiff=t,t=void 0)})),n(y,i),n(g,i),n(v,i),n(b,i),Object.defineProperties(a,{diff:{value:a,enumerable:!0},observableDiff:{value:w,enumerable:!0},applyDiff:{value:function(t,r,n){t&&r&&w(t,r,(function(e){n&&!n(t,r,e)||o(t,r,e)}))},enumerable:!0},applyChange:{value:o,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,i,a=e;for(i=r.path.length-1,n=0;n<i;n++)"undefined"===typeof a[r.path[n]]&&(a[r.path[n]]={}),a=a[r.path[n]];switch(r.kind){case"A":!(function e(t,r,n){if(n.path&&n.path.length){var i,a=t[r],o=n.path.length-1;for(i=0;i<o;i++)a=a[n.path[i]];switch(n.kind){case"A":e(a[n.path[i]],n.index,n.item);break;case"D":case"E":a[n.path[i]]=n.lhs;break;case"N":delete a[n.path[i]]}}else switch(n.kind){case"A":e(t[r],n.index,n.item);break;case"D":case"E":t[r]=n.lhs;break;case"N":t=_(t,r)}return t})(a[r.path[n]],r.index,r.item);break;case"D":case"E":a[r.path[n]]=r.lhs;break;case"N":delete a[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!==typeof t},enumerable:!0},noConflict:{value:function(){return r&&(r.forEach((function(e){e()})),r=null),a},enumerable:!0}}),a},"object"===typeof n&&"undefined"!==typeof r?r.exports=t():e.DeepDiff=t()}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],99:[(function(e,t,r){var n,i;n=this,i=function(){return function r(n,t){var e=Array.isArray(t),i=e&&[]||{};return e?(n=n||[],i=i.concat(n),t.forEach((function(e,t){"undefined"===typeof i[t]?i[t]=e:"object"===typeof e?i[t]=r(n[t],e):-1===n.indexOf(e)&&i.push(e)}))):(n&&"object"===typeof n&&Object.keys(n).forEach((function(e){i[e]=n[e]})),Object.keys(t).forEach((function(e){"object"===typeof t[e]&&t[e]&&n[e]?i[e]=r(n[e],t[e]):i[e]=t[e]}))),i}},"object"===typeof r?t.exports=i():n.deepmerge=i()}),{}],100:[(function(e,t,r){var n=e("is-function");t.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this);"[object Array]"===i.call(e)?(function(e,t,r){for(var n=0,i=e.length;n<i;n++)a.call(e,n)&&t.call(r,e[n],n,e)})(e,t,r):"string"===typeof e?(function(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)})(e,t,r):(function(e,t,r){for(var n in e)a.call(e,n)&&t.call(r,e[n],n,e)})(e,t,r)};var i=Object.prototype.toString,a=Object.prototype.hasOwnProperty}),{"is-function":106}],101:[(function(i,a,e){(function(e){var t,r="undefined"!==typeof e?e:"undefined"!==typeof window?window:{},n=i("min-document");"undefined"!==typeof document?t=document:(t=r["__GLOBAL_DOCUMENT_CACHE@4"])||(t=r["__GLOBAL_DOCUMENT_CACHE@4"]=n),a.exports=t}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{"min-document":14}],102:[(function(e,r,t){(function(e){var t;t="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},r.exports=t}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],103:[(function(e,t,r){var l=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(t),n=2;r===1/0;n*=2)r=Math.log(Math.pow(2,e/n))/Math.log(t)*n;var i=r-Math.floor(r),a="";for(n=0;n<Math.floor(r);n++){a=Math.floor(Math.random()*t).toString(t)+a}if(i){var o=Math.pow(t,i);a=Math.floor(Math.random()*o).toString(t)+a}var s=parseInt(a,t);return s!==1/0&&s>=Math.pow(2,e)?l(e,t):a};l.rack=function(n,i,a){var r=function(e){var t=0;do{if(t++>10){if(!a)throw new Error("too many ID collisions, use more bits");n+=a}var r=l(n,i)}while(Object.hasOwnProperty.call(o,r));return o[r]=e,r},o=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=n||128,r.base=i||16,r}}),{}],104:[(function(e,t,r){r.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,d=e[t+p];for(p+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+p],p+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+p],p+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},r.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=c?(s=0,o=c):o+p>=1?(s=(t*l-1)*Math.pow(2,i),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=f,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=f,o/=256,u-=8);e[r+d-f]|=128*m}}),{}],105:[(function(e,t,r){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||"function"===typeof(t=e).readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))||!!e._isBuffer);var t}}),{}],106:[(function(e,t,r){t.exports=function(e){var t=n.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString}),{}],107:[(function(e,t,r){function i(n,i){var a=[],o=[];return null==i&&(i=function(e,t){return a[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,a.indexOf(t)).join(".")+"]"}),function(e,t){if(a.length>0){var r=a.indexOf(this);~r?a.splice(r+1):a.push(this),~r?o.splice(r,1/0,e):o.push(e),~a.indexOf(t)&&(t=i.call(this,e,t))}else a.push(t);return null==n?t:n.call(this,e,t)}}(t.exports=function(e,t,r,n){return JSON.stringify(e,i(t,n),r)}).getSerialize=i}),{}],108:[(function(e,i,t){(function(e){var a=NaN,o="[object Symbol]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,r="object"==typeof self&&self&&self.Object===Object&&self,n=t||r||Function("return this")(),h=Object.prototype.toString,v=Math.max,b=Math.min,_=function(){return n.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(r=t)&&"object"==typeof r&&h.call(t)==o)return a;var t,r;if(x(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=x(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var i=u.test(e);return i||c.test(e)?p(e.slice(2),i?2:8):l.test(e)?a:+e}i.exports=function(n,i,e){var a,o,s,l,u,c,p=0,h=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function f(e){var t=a,r=o;return a=o=void 0,p=e,l=n.apply(r,t)}function m(e){var t=e-c;return void 0===c||t>=i||t<0||d&&e-p>=s}function y(){var e,t,r=_();if(m(r))return g(r);u=setTimeout(y,(t=i-((e=r)-c),d?b(t,s-(e-p)):t))}function g(e){return u=void 0,t&&a?f(e):(a=o=void 0,l)}function r(){var e,t=_(),r=m(t);if(a=arguments,o=this,c=t,r){if(void 0===u)return p=e=c,u=setTimeout(y,i),h?f(e):l;if(d)return u=setTimeout(y,i),f(c)}return void 0===u&&(u=setTimeout(y,i)),l}return i=w(i)||0,x(e)&&(h=!!e.leading,s=(d="maxWait"in e)?v(w(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==u&&clearTimeout(u),a=c=o=u=void(p=0)},r.flush=function(){return void 0===u?l:g(_())},r}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],109:[(function(e,Qe,et){(function(e){var n="__lodash_hash_undefined__",_=1,g=2,r=9007199254740991,v="[object Arguments]",b="[object Array]",i="[object AsyncFunction]",x="[object Boolean]",w="[object Date]",D="[object Error]",a="[object Function]",o="[object GeneratorFunction]",S="[object Map]",R="[object Number]",s="[object Null]",P="[object Object]",l="[object Promise]",u="[object Proxy]",E="[object RegExp]",A="[object Set]",M="[object String]",I="[object Symbol]",c="[object Undefined]",p="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",h=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,t={};t["[object Float32Array]"]=t["[object Float64Array]"]=t["[object Int8Array]"]=t["[object Int16Array]"]=t["[object Int32Array]"]=t["[object Uint8Array]"]=t["[object Uint8ClampedArray]"]=t["[object Uint16Array]"]=t["[object Uint32Array]"]=!0,t[v]=t[b]=t[O]=t[x]=t[C]=t[w]=t[D]=t[a]=t[S]=t[R]=t[P]=t[E]=t[A]=t[M]=t[p]=!1;var f="object"==typeof e&&e&&e.Object===Object&&e,m="object"==typeof self&&self&&self.Object===Object&&self,y=f||m||Function("return this")(),T="object"==typeof et&&et&&!et.nodeType&&et,k=T&&"object"==typeof Qe&&Qe&&!Qe.nodeType&&Qe,L=k&&k.exports===T,N=L&&f.process,z=(function(){try{return N&&N.binding&&N.binding("util")}catch(e){}})(),j=z&&z.isTypedArray;function F(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function V(e){var r=-1,n=Array(e.size);return e.forEach((function(e,t){n[++r]=[t,e]})),n}function G(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var B,U,H,q=Array.prototype,W=Function.prototype,Y=Object.prototype,Z=y["__core-js_shared__"],X=W.toString,$=Y.hasOwnProperty,K=(B=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",J=Y.toString,Q=RegExp("^"+X.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=L?y.Buffer:void 0,te=y.Symbol,re=y.Uint8Array,ne=Y.propertyIsEnumerable,ie=q.splice,ae=te?te.toStringTag:void 0,oe=Object.getOwnPropertySymbols,se=ee?ee.isBuffer:void 0,le=(U=Object.keys,H=Object,function(e){return U(H(e))}),ue=ze(y,"DataView"),ce=ze(y,"Map"),pe=ze(y,"Promise"),he=ze(y,"Set"),de=ze(y,"WeakMap"),fe=ze(Object,"create"),me=Ge(ue),ye=Ge(ce),ge=Ge(pe),ve=Ge(he),be=Ge(de),_e=te?te.prototype:void 0,xe=_e?_e.valueOf:void 0;function we(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Re(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Se;++t<r;)this.add(e[t])}function Pe(e){var t=this.__data__=new De(e);this.size=t.size}function Ee(e,t){var r=He(e),n=!r&&Ue(e),i=!r&&!n&&qe(e),a=!r&&!n&&!i&&Ke(e),o=r||n||i||a,s=o?(function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n})(e.length,String):[],l=s.length;for(var u in e)!t&&!$.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ve(u,l))||s.push(u);return s}function Ae(e,t){for(var r=e.length;r--;)if(Be(e[r][0],t))return r;return-1}function Me(e){return null==e?void 0===e?c:s:ae&&ae in Object(e)?(function(e){var t=$.call(e,ae),r=e[ae];try{var n=!(e[ae]=void 0)}catch(e){}var i=J.call(e);n&&(t?e[ae]=r:delete e[ae]);return i})(e):(t=e,J.call(t));var t}function Ie(e){return Xe(e)&&Me(e)==v}function Oe(e,t,r,n,i){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!==e&&t!==t:(function(e,t,r,n,i,a){var o=He(e),s=He(t),l=o?b:Fe(e),u=s?b:Fe(t),c=(l=l==v?P:l)==P,p=(u=u==v?P:u)==P,h=l==u;if(h&&qe(e)){if(!qe(t))return!1;c=!(o=!0)}if(h&&!c)return a||(a=new Pe),o||Ke(e)?ke(e,t,r,n,i,a):(function(e,t,r,n,i,a,o){switch(r){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!a(new re(e),new re(t)));case x:case w:case R:return Be(+e,+t);case D:return e.name==t.name&&e.message==t.message;case E:case M:return e==t+"";case S:var s=V;case A:var l=n&_;if(s||(s=G),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=g,o.set(e,t);var c=ke(s(e),s(t),n,i,a,o);return o.delete(e),c;case I:if(xe)return xe.call(e)==xe.call(t)}return!1})(e,t,l,r,n,i,a);if(!(r&_)){var d=c&&$.call(e,"__wrapped__"),f=p&&$.call(t,"__wrapped__");if(d||f){var m=d?e.value():e,y=f?t.value():t;return a||(a=new Pe),i(m,y,r,n,a)}}return!!h&&(a||(a=new Pe),(function(e,t,r,n,i,a){var o=r&_,s=Le(e),l=s.length,u=Le(t).length;if(l!=u&&!o)return!1;for(var c=l;c--;){var p=s[c];if(!(o?p in t:$.call(t,p)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var d=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){p=s[c];var m=e[p],y=t[p];if(n)var g=o?n(y,m,p,t,e,a):n(m,y,p,e,t,a);if(!(void 0===g?m===y||i(m,y,r,n,a):g)){d=!1;break}f||(f="constructor"==p)}if(d&&!f){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(e),a.delete(t),d})(e,t,r,n,i,a))})(e,t,r,n,Oe,i))}function Ce(e){return!(!Ze(e)||(t=e,K&&K in t))&&(We(e)?Q:h).test(Ge(e));var t}function Te(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Y,t!==n)return le(e);var t,r,n,i=[];for(var a in Object(e))$.call(e,a)&&"constructor"!=a&&i.push(a);return i}function ke(e,t,n,i,a,o){var r=n&_,s=e.length,l=t.length;if(s!=l&&!(r&&l>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,p=!0,h=n&g?new Re:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var d=e[c],f=t[c];if(i)var m=r?i(f,d,c,t,e,o):i(d,f,c,e,t,o);if(void 0!==m){if(m)continue;p=!1;break}if(h){if(!F(t,(function(e,t){if(r=t,!h.has(r)&&(d===e||a(d,e,n,i,o)))return h.push(t);var r}))){p=!1;break}}else if(d!==f&&!a(d,f,n,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function Le(e){return r=je,n=Je(t=e),He(t)?n:(function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e})(n,r(t));var t,r,n}function Ne(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ze(e,t){var r,n,i=(n=t,null==(r=e)?void 0:r[n]);return Ce(i)?i:void 0}we.prototype.clear=function(){this.__data__=fe?fe(null):{},this.size=0},we.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},we.prototype.get=function(e){var t=this.__data__;if(fe){var r=t[e];return r===n?void 0:r}return $.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:$.call(t,e)},we.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fe&&void 0===t?n:t,this},De.prototype.clear=function(){this.__data__=[],this.size=0},De.prototype.delete=function(e){var t=this.__data__,r=Ae(t,e);return!(r<0)&&(r==t.length-1?t.pop():ie.call(t,r,1),--this.size,!0)},De.prototype.get=function(e){var t=this.__data__,r=Ae(t,e);return r<0?void 0:t[r][1]},De.prototype.has=function(e){return Ae(this.__data__,e)>-1},De.prototype.set=function(e,t){var r=this.__data__,n=Ae(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Se.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ce||De),string:new we}},Se.prototype.delete=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Se.prototype.get=function(e){return Ne(this,e).get(e)},Se.prototype.has=function(e){return Ne(this,e).has(e)},Se.prototype.set=function(e,t){var r=Ne(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Re.prototype.add=Re.prototype.push=function(e){return this.__data__.set(e,n),this},Re.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.clear=function(){this.__data__=new De,this.size=0},Pe.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof De){var n=r.__data__;if(!ce||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Se(n)}return r.set(e,t),this.size=r.size,this};var je=oe?function(t){return null==t?[]:(t=Object(t),(function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a})(oe(t),(function(e){return ne.call(t,e)})))}:function(){return[]},Fe=Me;function Ve(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Ge(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Be(e,t){return e===t||e!==e&&t!==t}(ue&&Fe(new ue(new ArrayBuffer(1)))!=C||ce&&Fe(new ce)!=S||pe&&Fe(pe.resolve())!=l||he&&Fe(new he)!=A||de&&Fe(new de)!=p)&&(Fe=function(e){var t=Me(e),r=t==P?e.constructor:void 0,n=r?Ge(r):"";if(n)switch(n){case me:return C;case ye:return S;case ge:return l;case ve:return A;case be:return p}return t});var Ue=Ie(function(){return arguments}())?Ie:function(e){return Xe(e)&&$.call(e,"callee")&&!ne.call(e,"callee")},He=Array.isArray;var qe=se||function(){return!1};function We(e){if(!Ze(e))return!1;var t=Me(e);return t==a||t==o||t==i||t==u}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var $e,Ke=j?($e=j,function(e){return $e(e)}):function(e){return Xe(e)&&Ye(e.length)&&!!t[Me(e)]};function Je(e){return null!=(t=e)&&Ye(t.length)&&!We(t)?Ee(e):Te(e);var t}Qe.exports=function(e,t){return Oe(e,t)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],110:[(function(e,t,r){t.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}}),{}],111:[(function(e,Dt,St){(function(e){var t="Expected a function",n="__lodash_hash_undefined__",g=1,_=2,r=1/0,i=9007199254740991,v="[object Arguments]",b="[object Array]",x="[object Boolean]",w="[object Date]",D="[object Error]",a="[object Function]",o="[object GeneratorFunction]",S="[object Map]",R="[object Number]",P="[object Object]",s="[object Promise]",E="[object RegExp]",A="[object Set]",M="[object String]",I="[object Symbol]",l="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,p=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[v]=y[b]=y[O]=y[x]=y[C]=y[w]=y[D]=y[a]=y[S]=y[R]=y[P]=y[E]=y[A]=y[M]=y[l]=!1;var T="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,L=T||k||Function("return this")(),N="object"==typeof St&&St&&!St.nodeType&&St,z=N&&"object"==typeof Dt&&Dt&&!Dt.nodeType&&Dt,j=z&&z.exports===N&&T.process,F=(function(){try{return j&&j.binding("util")}catch(e){}})(),V=F&&F.isTypedArray;function G(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function B(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function U(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(t){return function(e){return t(e)}}function q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var r=-1,n=Array(e.size);return e.forEach((function(e,t){n[++r]=[t,e]})),n}function Y(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Z,X,$,K=Array.prototype,J=Function.prototype,Q=Object.prototype,ee=L["__core-js_shared__"],te=(Z=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",re=J.toString,ne=Q.hasOwnProperty,ie=Q.toString,ae=RegExp("^"+re.call(ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=L.Symbol,se=L.Uint8Array,le=Q.propertyIsEnumerable,ue=K.splice,ce=oe?oe.isConcatSpreadable:void 0,pe=(X=Object.keys,$=Object,function(e){return X($(e))}),he=Math.max,de=$e(L,"DataView"),fe=$e(L,"Map"),me=$e(L,"Promise"),ye=$e(L,"Set"),ge=$e(L,"WeakMap"),ve=$e(Object,"create"),be=ot(de),_e=ot(fe),xe=ot(me),we=ot(ye),De=ot(ge),Se=oe?oe.prototype:void 0,Re=Se?Se.valueOf:void 0,Pe=Se?Se.toString:void 0;function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Me(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ie(e){var t=-1,r=e?e.length:0;for(this.__data__=new Me;++t<r;)this.add(e[t])}function Oe(e){this.__data__=new Ae(e)}function Ce(e,t){var r=dt(e)||ht(e)?(function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n})(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!ne.call(e,a)||i&&("length"==a||Qe(a,n))||r.push(a);return r}function Te(e,t){for(var r=e.length;r--;)if(pt(e[r][0],t))return r;return-1}Ee.prototype.clear=function(){this.__data__=ve?ve(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(ve){var r=t[e];return r===n?void 0:r}return ne.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:ne.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?n:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,r=Te(t,e);return!(r<0)&&(r==t.length-1?t.pop():ue.call(t,r,1),!0)},Ae.prototype.get=function(e){var t=this.__data__,r=Te(t,e);return r<0?void 0:t[r][1]},Ae.prototype.has=function(e){return Te(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var r=this.__data__,n=Te(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Me.prototype.clear=function(){this.__data__={hash:new Ee,map:new(fe||Ae),string:new Ee}},Me.prototype.delete=function(e){return Xe(this,e).delete(e)},Me.prototype.get=function(e){return Xe(this,e).get(e)},Me.prototype.has=function(e){return Xe(this,e).has(e)},Me.prototype.set=function(e,t){return Xe(this,e).set(e,t),this},Ie.prototype.add=Ie.prototype.push=function(e){return this.__data__.set(e,n),this},Ie.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.clear=function(){this.__data__=new Ae},Oe.prototype.delete=function(e){return this.__data__.delete(e)},Oe.prototype.get=function(e){return this.__data__.get(e)},Oe.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ae){var n=r.__data__;if(!fe||n.length<199)return n.push([e,t]),this;r=this.__data__=new Me(n)}return r.set(e,t),this};var ke,Le,Ne=(ke=function(e,t){return e&&je(e,t,xt)},function(e,t){if(null==e)return e;if(!ft(e))return ke(e,t);for(var r=e.length,n=Le?r:-1,i=Object(e);(Le?n--:++n<r)&&!1!==t(i[n],n,i););return e});var ze,je=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[ze?o:++n];if(!1===t(i[s],s,i))break}return e};function Fe(e,t){for(var r=0,n=(t=tt(t,e)?[t]:We(t)).length;null!=e&&r<n;)e=e[at(t[r++])];return r&&r==n?e:void 0}function Ve(e,t){return null!=e&&t in Object(e)}function Ge(e,t,r,n,i){return e===t||(null==e||null==t||!gt(e)&&!vt(t)?e!==e&&t!==t:(function(e,t,r,n,i,a){var o=dt(e),s=dt(t),l=b,u=b;o||(l=(l=Ke(e))==v?P:l);s||(u=(u=Ke(t))==v?P:u);var c=l==P&&!q(e),p=u==P&&!q(t),h=l==u;if(h&&!c)return a||(a=new Oe),o||_t(e)?Ze(e,t,r,n,i,a):(function(e,t,r,n,i,a,o){switch(r){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!n(new se(e),new se(t)));case x:case w:case R:return pt(+e,+t);case D:return e.name==t.name&&e.message==t.message;case E:case M:return e==t+"";case S:var s=W;case A:var l=a&_;if(s||(s=Y),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;a|=g,o.set(e,t);var c=Ze(s(e),s(t),n,i,a,o);return o.delete(e),c;case I:if(Re)return Re.call(e)==Re.call(t)}return!1})(e,t,l,r,n,i,a);if(!(i&_)){var d=c&&ne.call(e,"__wrapped__"),f=p&&ne.call(t,"__wrapped__");if(d||f){var m=d?e.value():e,y=f?t.value():t;return a||(a=new Oe),r(m,y,n,i,a)}}return!!h&&(a||(a=new Oe),(function(e,t,r,n,i,a){var o=i&_,s=xt(e),l=s.length,u=xt(t).length;if(l!=u&&!o)return!1;for(var c=l;c--;){var p=s[c];if(!(o?p in t:ne.call(t,p)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var d=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){p=s[c];var m=e[p],y=t[p];if(n)var g=o?n(y,m,p,t,e,a):n(m,y,p,e,t,a);if(!(void 0===g?m===y||r(m,y,n,i,a):g)){d=!1;break}f||(f="constructor"==p)}if(d&&!f){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(e),a.delete(t),d})(e,t,r,n,i,a))})(e,t,Ge,r,n,i))}function Be(e){return!(!gt(e)||(t=e,te&&te in t))&&(mt(e)||q(e)?ae:f).test(ot(e));var t}function Ue(e){return"function"==typeof e?e:null==e?wt:"object"==typeof e?dt(e)?(function(l,u){if(tt(l)&&rt(u))return nt(at(l),u);return function(e){var t,r,n,i,a,o,s=(r=l,void 0===(i=null==(t=e)?void 0:Fe(t,r))?n:i);return void 0===s&&s===u?(o=l,null!=(a=e)&&(function(e,t,r){t=tt(t,e)?[t]:We(t);for(var n,i=-1,a=t.length;++i<a;){var o=at(t[i]);if(!(n=null!=e&&r(e,o)))break;e=e[o]}return n||!!(a=e?e.length:0)&&yt(a)&&Qe(o,a)&&(dt(e)||ht(e))})(a,o,Ve)):Ge(u,s,void 0,g|_)}})(e[0],e[1]):(function(t){var r=(function(e){var t=xt(e),r=t.length;for(;r--;){var n=t[r],i=e[n];t[r]=[n,i,rt(i)]}return t})(t);if(1==r.length&&r[0][2])return nt(r[0][0],r[0][1]);return function(e){return e===t||(function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=r[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var p=new Oe;if(n)var h=n(u,c,l,e,t,p);if(!(void 0===h?Ge(c,u,n,g|_,p):h))return!1}}return!0})(e,t,r)}})(e):tt(t=e)?(n=at(t),function(e){return null==e?void 0:e[n]}):(r=t,function(e){return Fe(e,r)});var t,r,n}function He(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Q,t!==n)return pe(e);var t,r,n,i=[];for(var a in Object(e))ne.call(e,a)&&"constructor"!=a&&i.push(a);return i}function qe(e,n,r){var t,i,a,o,s=-1;return n=G(n.length?n:[wt],H(Ue)),(function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e})((i=function(t,e,r){return{criteria:G(n,(function(e){return e(t)})),index:++s,value:t}},a=-1,o=ft(t=e)?Array(t.length):[],Ne(t,(function(e,t,r){o[++a]=i(e,t,r)})),o),(function(e,t){return (function(e,t,r){var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;for(;++n<o;){var l=Ye(i[n],a[n]);if(l){if(n>=s)return l;var u=r[n];return l*("desc"==u?-1:1)}}return e.index-t.index})(e,t,r)}))}function We(e){return dt(e)?e:it(e)}function Ye(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e===e,a=bt(e),o=void 0!==t,s=null===t,l=t===t,u=bt(t);if(!s&&!u&&!a&&e>t||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}function Ze(e,t,r,n,i,a){var o=i&_,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var c=-1,p=!0,h=i&g?new Ie:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var d=e[c],f=t[c];if(n)var m=o?n(f,d,c,t,e,a):n(d,f,c,e,t,a);if(void 0!==m){if(m)continue;p=!1;break}if(h){if(!U(t,(function(e,t){if(!h.has(t)&&(d===e||r(d,e,n,i,a)))return h.add(t)}))){p=!1;break}}else if(d!==f&&!r(d,f,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Xe(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function $e(e,t){var r,n,i=(n=t,null==(r=e)?void 0:r[n]);return Be(i)?i:void 0}var Ke=function(e){return ie.call(e)};function Je(e){return dt(e)||ht(e)||!!(ce&&e&&e[ce])}function Qe(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}function et(e,t,r){if(!gt(r))return!1;var n=typeof t;return!!("number"==n?ft(r)&&Qe(t,r.length):"string"==n&&t in r)&&pt(r[t],e)}function tt(e,t){if(dt(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!bt(e))||(c.test(e)||!u.test(e)||null!=t&&e in Object(t))}function rt(e){return e===e&&!gt(e)}function nt(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}}(de&&Ke(new de(new ArrayBuffer(1)))!=C||fe&&Ke(new fe)!=S||me&&Ke(me.resolve())!=s||ye&&Ke(new ye)!=A||ge&&Ke(new ge)!=l)&&(Ke=function(e){var t=ie.call(e),r=t==P?e.constructor:void 0,n=r?ot(r):void 0;if(n)switch(n){case be:return C;case _e:return S;case xe:return s;case we:return A;case De:return l}return t});var it=ct((function(e){var t;e=null==(t=e)?"":(function(e){if("string"==typeof e)return e;if(bt(e))return Pe?Pe.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t})(t);var i=[];return p.test(e)&&i.push(""),e.replace(h,(function(e,t,r,n){i.push(r?n.replace(d,"$1"):t||e)})),i}));function at(e){if("string"==typeof e||bt(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function ot(e){if(null!=e){try{return re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var st,lt,ut=(st=function(e,t){if(null==e)return[];var r=t.length;return r>1&&et(e,t[0],t[1])?t=[]:r>2&&et(t[0],t[1],t[2])&&(t=[t[0]]),qe(e,(function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=Je),a||(a=[]);++o<s;){var l=t[o];r>0&&n(l)?r>1?e(l,r-1,n,i,a):B(a,l):i||(a[a.length]=l)}return a})(t,1),[])},lt=he(void 0===lt?st.length-1:lt,0),function(){for(var e=arguments,t=-1,r=he(e.length-lt,0),n=Array(r);++t<r;)n[t]=e[lt+t];t=-1;for(var i=Array(lt+1);++t<lt;)i[t]=e[t];return i[lt]=n,(function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)})(st,this,i)});function ct(i,a){if("function"!=typeof i||a&&"function"!=typeof a)throw new TypeError(t);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=o.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return o.cache=r.set(t,n),n};return o.cache=new(ct.Cache||Me),o}function pt(e,t){return e===t||e!==e&&t!==t}function ht(e){return vt(t=e)&&ft(t)&&ne.call(e,"callee")&&(!le.call(e,"callee")||ie.call(e)==v);var t}ct.Cache=Me;var dt=Array.isArray;function ft(e){return null!=e&&yt(e.length)&&!mt(e)}function mt(e){var t=gt(e)?ie.call(e):"";return t==a||t==o}function yt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function gt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function vt(e){return!!e&&"object"==typeof e}function bt(e){return"symbol"==typeof e||vt(e)&&ie.call(e)==I}var _t=V?H(V):function(e){return vt(e)&&yt(e.length)&&!!y[ie.call(e)]};function xt(e){return ft(e)?Ce(e):He(e)}function wt(e){return e}Dt.exports=ut}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],112:[(function(e,i,t){(function(e){var v="Expected a function",a=NaN,o="[object Symbol]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,r="object"==typeof self&&self&&self.Object===Object&&self,n=t||r||Function("return this")(),h=Object.prototype.toString,b=Math.max,_=Math.min,x=function(){return n.Date.now()};function d(n,i,e){var a,o,s,l,u,c,p=0,h=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError(v);function f(e){var t=a,r=o;return a=o=void 0,p=e,l=n.apply(r,t)}function m(e){var t=e-c;return void 0===c||t>=i||t<0||d&&e-p>=s}function y(){var e,t,r=x();if(m(r))return g(r);u=setTimeout(y,(t=i-((e=r)-c),d?_(t,s-(e-p)):t))}function g(e){return u=void 0,t&&a?f(e):(a=o=void 0,l)}function r(){var e,t=x(),r=m(t);if(a=arguments,o=this,c=t,r){if(void 0===u)return p=e=c,u=setTimeout(y,i),h?f(e):l;if(d)return u=setTimeout(y,i),f(c)}return void 0===u&&(u=setTimeout(y,i)),l}return i=D(i)||0,w(e)&&(h=!!e.leading,s=(d="maxWait"in e)?b(D(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==u&&clearTimeout(u),a=c=o=u=void(p=0)},r.flush=function(){return void 0===u?l:g(x())},r}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(r=t)&&"object"==typeof r&&h.call(t)==o)return a;var t,r;if(w(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=w(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var i=u.test(e);return i||c.test(e)?p(e.slice(2),i?2:8):l.test(e)?a:+e}i.exports=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(v);return w(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),d(e,t,{leading:n,maxWait:t,trailing:i})}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],113:[(function(e,t,r){t.exports=function(e){var t="";return e.gt?t+="("+e.gt:e.gte&&(t+="["+e.gte),t+=",",e.lt?t+=e.lt+")":e.lte&&(t+=e.lte+"]"),t}}),{}],114:[(function(e,t,d){(function(a){function l(e,t){return Object.hasOwnProperty.call(e,t)}function o(e){return void 0!==e&&""!==e}function l(e,t){return Object.hasOwnProperty.call(e,t)}function t(e,t){return Object.hasOwnProperty.call(e,t)&&t}d.compare=function(e,t){if(a.isBuffer(e)){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=e[n]-t[n];if(i)return i}return e.length-t.length}return e<t?-1:e>t?1:0};var r=d.lowerBoundKey=function(e){return t(e,"gt")||t(e,"gte")||t(e,"min")||(e.reverse?t(e,"end"):t(e,"start"))||void 0},s=d.lowerBound=function(e){var t=r(e);return t&&e[t]};d.lowerBoundInclusive=function(e){return!l(e,"gt")},d.upperBoundInclusive=function(e){return!(l(e,"lt")||!e.minEx)};var u=d.lowerBoundExclusive=function(e){return!(!l(e,"gt")&&!e.minEx)},c=d.upperBoundExclusive=function(e){return!!l(e,"lt")},n=d.upperBoundKey=function(e){return t(e,"lt")||t(e,"lte")||t(e,"max")||(e.reverse?t(e,"start"):t(e,"end"))||void 0},p=d.upperBound=function(e){var t=n(e);return t&&e[t]};function h(e){return e}d.toLtgt=function(e,t,r,n,i){t=t||{},r=r||h;var a=arguments.length>3,o=d.lowerBoundKey(e),s=d.upperBoundKey(e);return o?"gt"===o?t.gt=r(e.gt,!1):t.gte=r(e[o],!1):a&&(t.gte=r(n,!1)),s?"lt"===s?t.lt=r(e.lt,!0):t.lte=r(e[s],!0):a&&(t.lte=r(i,!0)),null!=e.reverse&&(t.reverse=!!e.reverse),l(t,"max")&&delete t.max,l(t,"min")&&delete t.min,l(t,"start")&&delete t.start,l(t,"end")&&delete t.end,t},d.contains=function(e,t,r){r=r||d.compare;var n=s(e);if(o(n)&&((i=r(t,n))<0||0===i&&u(e)))return!1;var i,a=p(e);if(o(a)&&((i=r(t,a))>0||0===i&&c(e)))return!1;return!0},d.filter=function(t,r){return function(e){return d.contains(t,e,r)}}}).call(this,{isBuffer:e("../is-buffer/index.js")})}),{"../is-buffer/index.js":105}],115:[(function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}})();var i=(function(){function e(){!(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.state={panStart:{x:0,y:0},scale:1},this.touchStart=this.touchStart.bind(this),this.touchMove=this.touchMove.bind(this)}return n(e,[{key:"touchStart",value:function(e){if(2===e.touches.length){e.stopImmediatePropagation(),e.preventDefault();var t=0,r=0;[].forEach.call(e.touches,(function(e){t+=e.screenX,r+=e.screenY})),this.state.panStart.x=t/e.touches.length,this.state.panStart.y=r/e.touches.length}}},{key:"touchMove",value:function(e){if(2===e.touches.length){this.state.scale===e.scale&&(e.stopImmediatePropagation(),e.preventDefault()),this.state.scale=e.scale;var t=0,r=0;[].forEach.call(e.touches,(function(e){t+=e.screenX,r+=e.screenY}));var n=t/e.touches.length-this.state.panStart.x,i=r/e.touches.length-this.state.panStart.y;this.state.panStart.x=t/e.touches.length,this.state.panStart.y=r/e.touches.length,this.map.panBy([n/-1,i/-1],{animate:!1})}}},{key:"onAdd",value:function(e){return this.map=e,this.container=document.createElement("div"),this.map.getContainer().addEventListener("touchstart",this.touchStart,!1),this.map.getContainer().addEventListener("touchmove",this.touchMove,!1),"ontouchstart"in document.documentElement&&e.dragPan.disable(),this.container}},{key:"onRemove",value:function(){this.map.getContainer().removeEventListener("touchstart",this.touchStart),this.map.getContainer().removeEventListener("touchmove",this.touchMove),this.map=void 0}}]),e})();r.default=i}),{}],116:[(function(e,t,r){var n,i;n=this,i=function(){"use strict";var i,a,o;function e(e,t){if(i)if(a){var r="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",n={};i(n),(o=t(n)).workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"}))}else a=t;else i=t}return e(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var o=r;function r(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=n}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var r,n,i,a,o;for(void 0===t&&(t=1e-6),i=e,o=0;o<8;o++){if(a=this.sampleCurveX(i)-e,Math.abs(a)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=e)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(a=this.sampleCurveX(i),Math.abs(a-e)<t)return i;e>a?r=i:n=i,i=.5*(n-r)+r}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var c=function(e,t,r){this.column=e,this.row=t,this.zoom=r};c.prototype.clone=function(){return new c(this.column,this.row,this.zoom)},c.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},c.prototype.sub=function(e){return this.clone()._sub(e)},c.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},c.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this};var y=n;function n(e,t){this.x=e,this.y=t}function h(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!h(e[r],t[r]))return!1;return!0}if("object"!=typeof e||null===e||null===t)return e===t;if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!h(e[n],t[n]))return!1;return!0}function i(e,t,r,n){var i=new o(e,t,r,n);return function(e){return i.solve(e)}}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,i=r*this.x+t*this.y;return this.x=n,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.x+r*(this.x-t.x)-n*(this.y-t.y),a=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e};var a=i(.25,.1,.25,1);function m(e,t,r){return Math.min(r,Math.max(t,e))}function l(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var a=i[n];for(var o in a)e[o]=a[o]}return e}var s=1;function u(){return s++}function p(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function d(e,t){return-1!==e.indexOf(t,e.length-t.length)}function f(e,t,r){var n={};for(var i in e)n[i]=t.call(r||this,e[i],i,e);return n}function g(e,t,r){var n={};for(var i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n}function v(e){return Array.isArray(e)?e.map(v):"object"==typeof e&&e?f(e,v):e}var b={};function _(e){b[e]||("undefined"!=typeof console&&console.warn(e),b[e]=!0)}function x(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function w(e){for(var t=0,r=0,n=e.length,i=n-1,a=void 0,o=void 0;r<n;i=r++)a=e[r],t+=((o=e[i]).x-a.x)*(a.y+o.y);return t}var D=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),S=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,R=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,P={now:D,frame:function(e){var t=S(e);return{cancel:function(){return R(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)},resolveURL:function(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var E=self.document.createElement("img");E.onload=function(){P.supportsWebp=!0},E.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var A={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(A);var M=(function(n){function e(e,t,r){n.call(this,e),this.status=t,this.url=r,this.name=this.constructor.name,this.message=e}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e})(Error);function I(e){var t=new self.XMLHttpRequest;for(var r in t.open(e.method||"GET",e.url,!0),e.headers)t.setRequestHeader(r,e.headers[r]);return t.withCredentials="include"===e.credentials,t}var O=function(t,r){var n=I(t);return n.responseType="arraybuffer",n.onerror=function(){r(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return r(new Error("http status 200 returned without content."));(n.status>=200&&n.status<300||0===n.status)&&n.response?r(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):r(new M(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}};function C(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function T(e,t,r){if(r&&r[e]){var n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}var k=function(e,t){void 0===t&&(t={}),l(this,t),this.type=e},L=(function(r){function e(e,t){void 0===t&&(t={}),r.call(this,"error",l({error:e},t))}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e})(k),N=function(){};N.prototype.on=function(e,t){return this._listeners=this._listeners||{},C(e,t,this._listeners),this},N.prototype.off=function(e,t){return T(e,t,this._listeners),T(e,t,this._oneTimeListeners),this},N.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},C(e,t,this._oneTimeListeners),this},N.prototype.fire=function(e){"string"==typeof e&&(e=new k(e,arguments[1]||{}));var t=e.type;if(this.listens(t)){for(var r=0,n=(e.target=this)._listeners&&this._listeners[t]?this._listeners[t].slice():[];r<n.length;r+=1)n[r].call(this,e);for(var i=0,a=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];i<a.length;i+=1){var o=a[i];T(t,o,this._oneTimeListeners),o.call(this,e)}var s=this._eventedParent;s&&(l(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(e))}else e instanceof L&&console.error(e.error);return this},N.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)};var z={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!(N.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this})},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},j=function(e,t,r,n){this.message=(e?e+": ":"")+r,n&&(this.identifier=n),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)};function F(e){var t=e.key,r=e.value;return r?[new j(t,r,"constants have been deprecated as of v8")]:[]}function V(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var a=i[n];for(var o in a)e[o]=a[o]}return e}function G(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function B(e){return Array.isArray(e)?e.map(B):G(e)}var U=(function(r){function e(e,t){r.call(this,t),this.message=t,this.key=e}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e})(Error),H=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,n=t;r<n.length;r+=1){var i=n[r],a=i[0],o=i[1];this.bindings[a]=o}};H.prototype.concat=function(e){return new H(this,e)},H.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},H.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var q={kind:"null"},W={kind:"number"},Y={kind:"string"},Z={kind:"boolean"},X={kind:"color"},$={kind:"object"},K={kind:"value"},J={kind:"collator"},Q={kind:"formatted"};function ee(e,t){return{kind:"array",itemType:e,N:t}}function te(e){if("array"!==e.kind)return e.kind;var t=te(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}var re=[q,W,Y,Z,X,Q,$,ee(K)];function ne(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ne(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,n=re;r<n.length;r+=1)if(!ne(n[r],t))return null}return"Expected "+te(e)+" but found "+te(t)+" instead."}var ie=t((function(e,t){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return e<0?0:e>1?1:e}function m(e){return"%"===e[e.length-1]?f(parseFloat(e)/100*255):f(parseInt(e))}function y(e){return"%"===e[e.length-1]?r(parseFloat(e)/100):r(parseFloat(e))}function g(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in d)return d[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var a=r.substr(0,n),o=r.substr(n+1,i-(n+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=y(o.pop());case"rgb":return 3!==o.length?null:[m(o[0]),m(o[1]),m(o[2]),s];case"hsla":if(4!==o.length)return null;s=y(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=y(o[1]),c=y(o[2]),p=c<=.5?c*(u+1):c+u-c*u,h=2*c-p;return[f(255*g(h,p,l+1/3)),f(255*g(h,p,l)),f(255*g(h,p,l-1/3)),s];default:return null}}return null}}catch(e){}})).parseCSSColor,ae=function(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n};ae.parse=function(e){if(e){if(e instanceof ae)return e;if("string"==typeof e){var t=ie(e);if(t)return new ae(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},ae.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],n=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(n)+","+i+")"},ae.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]},ae.black=new ae(0,0,0,1),ae.white=new ae(1,1,1,1),ae.transparent=new ae(0,0,0,0),ae.red=new ae(1,0,0,1);var oe=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oe.prototype.compare=function(e,t){return this.collator.compare(e,t)},oe.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var se=function(e,t,r){this.text=e,this.scale=t,this.fontStack=r},le=function(e){this.sections=e};function ue(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[e,t,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ce(e){if(null===e)return q;if("string"==typeof e)return Y;if("boolean"==typeof e)return Z;if("number"==typeof e)return W;if(e instanceof ae)return X;if(e instanceof oe)return J;if(e instanceof le)return Q;if(Array.isArray(e)){for(var t,r=e.length,n=0,i=e;n<i.length;n+=1){var a=ce(i[n]);if(t){if(t===a)continue;t=K;break}t=a}return ee(t||K,r)}return $}function pe(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ae||e instanceof le?e.toString():JSON.stringify(e)}le.fromString=function(e){return new le([new se(e,null,null)])},le.prototype.toString=function(){return this.sections.map((function(e){return e.text})).join("")},le.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),e.push(i)}return e};var he=function(e,t){this.type=e,this.value=t};he.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!(function e(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof ae)return!0;if(t instanceof oe)return!0;if(t instanceof le)return!0;if(Array.isArray(t)){for(var r=0,n=t;r<n.length;r+=1)if(!e(n[r]))return!1;return!0}if("object"!=typeof t)return!1;for(var i in t)if(!e(t[i]))return!1;return!0})(e[1]))return t.error("invalid value");var r=e[1],n=ce(r),i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new he(n,r)},he.prototype.evaluate=function(){return this.value},he.prototype.eachChild=function(){},he.prototype.possibleOutputs=function(){return[this.value]},he.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ae?["rgba"].concat(this.value.toArray()):this.value instanceof le?this.value.serialize():this.value};var de=function(e){this.name="ExpressionEvaluationError",this.message=e};de.prototype.toJSON=function(){return this.message};var fe={string:Y,number:W,boolean:Z,object:$},me=function(e,t){this.type=e,this.args=t};me.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,n=1,i=e[0];if("array"===i){var a,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in fe)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=fe[s],n++}else a=K;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],n++}r=ee(a,o)}else r=fe[i];for(var l=[];n<e.length;n++){var u=t.parse(e[n],n,K);if(!u)return null;l.push(u)}return new me(r,l)},me.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!ne(this.type,ce(r)))return r;if(t===this.args.length-1)throw new de("Expected value to be of type "+te(this.type)+", but found "+te(ce(r))+" instead.")}return null},me.prototype.eachChild=function(e){this.args.forEach(e)},me.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})));var e},me.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var ye=function(e){this.type=Q,this.sections=e};ye.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var r=[],n=1;n<e.length-1;n+=2){var i=t.parse(e[n],1,K);if(!i)return null;var a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var o=e[n+1];if("object"!=typeof o||Array.isArray(o))return t.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,W)))return null;var l=null;if(o["text-font"]&&!(l=t.parse(o["text-font"],1,ee(Y))))return null;r.push({text:i,scale:s,font:l})}return new ye(r)},ye.prototype.evaluate=function(t){return new le(this.sections.map((function(e){return new se(pe(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)})))},ye.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e(n.text),n.scale&&e(n.scale),n.font&&e(n.font)}},ye.prototype.possibleOutputs=function(){return[void 0]},ye.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.text.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),e.push(i)}return e};var ge={"to-boolean":Z,"to-color":X,"to-number":W,"to-string":Y},ve=function(e,t){this.type=e,this.args=t};ve.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var n=ge[r],i=[],a=1;a<e.length;a++){var o=t.parse(e[a],a,K);if(!o)return null;i.push(o)}return new ve(n,i)},ve.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,n=0,i=this.args;n<i.length;n+=1){if(r=null,(t=i[n].evaluate(e))instanceof ae)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":ue(t[0],t[1],t[2],t[3])))return new ae(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new de(r||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}if("number"!==this.type.kind)return"formatted"===this.type.kind?le.fromString(pe(this.args[0].evaluate(e))):pe(this.args[0].evaluate(e));for(var o=null,s=0,l=this.args;s<l.length;s+=1){if(null===(o=l[s].evaluate(e)))return 0;var u=Number(o);if(!isNaN(u))return u}throw new de("Could not convert "+JSON.stringify(o)+" to number.")},ve.prototype.eachChild=function(e){this.args.forEach(e)},ve.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})));var e},ve.prototype.serialize=function(){if("formatted"===this.type.kind)return new ye([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var be=["Unknown","Point","LineString","Polygon"],_e=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};_e.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},_e.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?be[this.feature.type]:this.feature.type:null},_e.prototype.properties=function(){return this.feature&&this.feature.properties||{}},_e.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ae.parse(e)),t};var xe=function(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n};xe.prototype.evaluate=function(e){return this._evaluate(e,this.args)},xe.prototype.eachChild=function(e){this.args.forEach(e)},xe.prototype.possibleOutputs=function(){return[void 0]},xe.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},xe.parse=function(r,e){var t=r[0],n=xe.definitions[t];if(!n)return e.error('Unknown expression "'+t+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=a.filter((function(e){var t=e[0];return!Array.isArray(t)||t.length===r.length-1})),s=null,l=0,u=o;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];s=new Ee(e.registry,e.path,null,e.scope);for(var d=[],f=!1,m=1;m<r.length;m++){var y=r[m],g=Array.isArray(p)?p[m-1]:p.type,v=s.parse(y,1+d.length,g);if(!v){f=!0;break}d.push(v)}if(!f)if(Array.isArray(p)&&p.length!==d.length)s.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var _=Array.isArray(p)?p[b]:p.type,x=d[b];s.concat(b+1).checkSubtype(_,x.type)}if(0===s.errors.length)return new xe(t,i,h,d)}}if(1===o.length)e.errors.push.apply(e.errors,s.errors);else{for(var w=(o.length?o:a).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(te).join(", ")+")":"("+te(t.type)+"...)"})).join(" | "),D=[],S=1;S<r.length;S++){var R=e.parse(r[S],1+D.length);if(!R)return null;D.push(te(R.type))}e.error("Expected arguments of type "+w+", but found ("+D.join(", ")+") instead.")}return null},xe.register=function(e,t){for(var r in xe.definitions=t)e[r]=xe};var we=function(e,t,r){this.type=J,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};function De(e){if(e instanceof xe){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild((function(e){t&&!De(e)&&(t=!1)})),t}function Se(e){if(e instanceof xe&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Se(e)&&(t=!1)})),t}function Re(e,t){if(e instanceof xe&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild((function(e){r&&!Re(e,t)&&(r=!1)})),r}we.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Z);if(!n)return null;var i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Z);if(!i)return null;var a=null;return r.locale&&!(a=t.parse(r.locale,1,Y))?null:new we(n,i,a)},we.prototype.evaluate=function(e){return new oe(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},we.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},we.prototype.possibleOutputs=function(){return[void 0]},we.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Pe=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Pe.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new Pe(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},Pe.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Pe.prototype.eachChild=function(){},Pe.prototype.possibleOutputs=function(){return[void 0]},Pe.prototype.serialize=function(){return["var",this.name]};var Ee=function(e,t,r,n,i){void 0===t&&(t=[]),void 0===n&&(n=new H),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=n,this.errors=i,this.expectedType=r};function Ae(e,t){for(var r,n,i=0,a=e.length-1,o=0;i<=a;){if(r=e[o=Math.floor((i+a)/2)],n=e[o+1],t===r||t>r&&t<n)return o;if(r<t)i=o+1;else{if(!(r>t))throw new de("Input is not a number.");a=o-1}}return Math.max(o-1,0)}Ee.prototype.parse=function(e,t,r,n,i){return void 0===i&&(i={}),t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)},Ee.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new me(t,[e]):"coerce"===r?new ve(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=r(a,o,t.typeAnnotation||"coerce");else a=r(a,o,t.typeAnnotation||"assert")}if(!(a instanceof he)&&(function t(e){if(e instanceof Pe)return t(e.boundExpression);if(e instanceof xe&&"error"===e.name)return!1;if(e instanceof we)return!1;var r=e instanceof ve||e instanceof me,n=!0;return e.eachChild((function(e){n=r?n&&t(e):n&&e instanceof he})),!!n&&(De(e)&&Re(e,["zoom","heatmap-density","line-progress","is-supported-script"]))})(a)){var l=new _e;try{a=new he(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},Ee.prototype.concat=function(e,t,r){var n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new Ee(this.registry,n,t||null,i,this.errors)},Ee.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var n=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new U(n,e))},Ee.prototype.checkSubtype=function(e,t){var r=ne(e,t);return r&&this.error(r),r};var Me=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var n=0,i=r;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};function Ie(e,t,r){return e*(1-r)+t*r}Me.parse=function(e,t){var r=e[1],n=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,1,W)))return null;var i=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),n.unshift(-1/0);for(var o=0;o<n.length;o+=2){var s=n[o],l=n[o+1],u=o+1,c=o+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=t.parse(l,c,a);if(!p)return null;a=a||p.type,i.push([s,p])}return new Me(a,r,i)},Me.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[Ae(t,n)].evaluate(e)},Me.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},Me.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()})));var e},Me.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Oe=Object.freeze({number:Ie,color:function(e,t,r){return new ae(Ie(e.r,t.r,r),Ie(e.g,t.g,r),Ie(e.b,t.b,r),Ie(e.a,t.a,r))},array:function(e,r,n){return e.map((function(e,t){return Ie(e,r[t],n)}))}}),Ce=4/29,Te=6/29,ke=3*Te*Te,Le=Te*Te*Te,Ne=Math.PI/180,ze=180/Math.PI;function je(e){return e>Le?Math.pow(e,1/3):e/ke+Ce}function Fe(e){return e>Te?e*e*e:ke*(e-Ce)}function Ve(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ge(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Be(e){var t=Ge(e.r),r=Ge(e.g),n=Ge(e.b),i=je((.4124564*t+.3575761*r+.1804375*n)/.95047),a=je((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-je((.0193339*t+.119192*r+.9503041*n)/1.08883)),alpha:e.a}}function Ue(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*Fe(t),r=.95047*Fe(r),n=1.08883*Fe(n),new ae(Ve(3.2404542*r-1.5371385*t-.4985314*n),Ve(-.969266*r+1.8760108*t+.041556*n),Ve(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}var He={forward:Be,reverse:Ue,interpolate:function(e,t,r){return{l:Ie(e.l,t.l,r),a:Ie(e.a,t.a,r),b:Ie(e.b,t.b,r),alpha:Ie(e.alpha,t.alpha,r)}}},qe={forward:function(e){var t=Be(e),r=t.l,n=t.a,i=t.b,a=Math.atan2(i,n)*ze;return{h:a<0?a+360:a,c:Math.sqrt(n*n+i*i),l:r,alpha:e.a}},reverse:function(e){var t=e.h*Ne,r=e.c;return Ue({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:(n=e.h,i=t.h-n,n+r*(i>180||i<-180?i-360*Math.round(i/360):i)),c:Ie(e.c,t.c,r),l:Ie(e.l,t.l,r),alpha:Ie(e.alpha,t.alpha,r)};var n,i}},We=Object.freeze({lab:He,hcl:qe}),Ye=function(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Ze(e,t,r,n){var i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}Ye.interpolationFactor=function(e,t,r,n){var i=0;if("exponential"===e.name)i=Ze(t,e.base,r,n);else if("linear"===e.name)i=Ze(t,1,r,n);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new o(a[0],a[1],a[2],a[3]).solve(Ze(t,1,r,n))}return i},Ye.parse=function(e,t){var r=e[0],n=e[1],i=e[2],a=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,W)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=X:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var c=0;c<a.length;c+=2){var p=a[c],h=a[c+1],d=c+3,f=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=t.parse(h,f,u);if(!m)return null;u=u||m.type,l.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Ye(u,r,n,i,l):t.error("Type "+te(u)+" is not interpolatable.")},Ye.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);var a=Ae(t,n),o=t[a],s=t[a+1],l=Ye.interpolationFactor(this.interpolation,n,o,s),u=r[a].evaluate(e),c=r[a+1].evaluate(e);return"interpolate"===this.operator?Oe[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?qe.reverse(qe.interpolate(qe.forward(u),qe.forward(c),l)):He.reverse(He.interpolate(He.forward(u),He.forward(c),l))},Ye.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1)e(r[t])},Ye.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()})));var e},Ye.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var Xe=function(e,t){this.type=e,this.args=t};Xe.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,n=t.expectedType;n&&"value"!==n.kind&&(r=n);for(var i=[],a=0,o=e.slice(1);a<o.length;a+=1){var s=o[a],l=t.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,i.push(l)}var u=n&&i.some((function(e){return ne(n,e.type)}));return new Xe(u?K:r,i)},Xe.prototype.evaluate=function(e){for(var t=null,r=0,n=this.args;r<n.length&&null===(t=n[r].evaluate(e));r+=1);return t},Xe.prototype.eachChild=function(e){this.args.forEach(e)},Xe.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})));var e},Xe.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var $e=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};$e.prototype.evaluate=function(e){return this.result.evaluate(e)},$e.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1)e(r[t][1]);e(this.result)},$e.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],n=1;n<e.length-1;n+=2){var i=e[n];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",n);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=t.parse(e[n+1],n+1);if(!a)return null;r.push([i,a])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return o?new $e(r,o):null},$e.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},$e.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var n=r[t],i=n[0],a=n[1];e.push(i,a.serialize())}return e.push(this.result.serialize()),e};var Ke=function(e,t,r){this.type=e,this.index=t,this.input=r};Ke.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,W),n=t.parse(e[2],2,ee(t.expectedType||K));if(!r||!n)return null;var i=n.type;return new Ke(i.itemType,r,n)},Ke.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new de("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new de("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new de("Array index must be an integer, but found "+t+" instead.");return r[t]},Ke.prototype.eachChild=function(e){e(this.index),e(this.input)},Ke.prototype.possibleOutputs=function(){return[void 0]},Ke.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Je=function(e,t,r,n,i,a){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a};Je.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var i={},a=[],o=2;o<e.length-1;o+=2){var s=e[o],l=e[o+1];Array.isArray(s)||(s=[s]);var u=t.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,ce(h)))return null}else r=ce(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=a.length}var d=t.parse(l,o,n);if(!d)return null;n=n||d.type,a.push(d)}var f=t.parse(e[1],1,K);if(!f)return null;var m=t.parse(e[e.length-1],e.length-1,n);return m?"value"!==f.type.kind&&t.concat(1).checkSubtype(r,f.type)?null:new Je(r,n,f,i,a,m):null},Je.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(ce(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Je.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Je.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()}))).concat(this.otherwise.possibleOutputs());var e},Je.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],n={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i],s=n[t.cases[o]];void 0===s?(n[t.cases[o]]=r.length,r.push([t.cases[o],[o]])):r[s][1].push(o)}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=r;u<c.length;u+=1){var p=c[u],h=p[0],d=p[1];1===d.length?e.push(l(d[0])):e.push(d.map(l)),e.push(t.outputs[h].serialize())}return e.push(this.otherwise.serialize()),e};var Qe=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};function et(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function tt(e,t,r,n){return 0===n.compare(t,r)}function rt(s,l,u){var c="=="!==s&&"!="!==s;return (function(){function o(e,t,r){this.type=Z,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return o.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],n=t.parse(e[1],1,K);if(!n)return null;if(!et(r,n.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+te(n.type)+"'.");var i=t.parse(e[2],2,K);if(!i)return null;if(!et(r,i.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+te(i.type)+"'.");if(n.type.kind!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return t.error("Cannot compare types '"+te(n.type)+"' and '"+te(i.type)+"'.");c&&("value"===n.type.kind&&"value"!==i.type.kind?n=new me(i.type,[n]):"value"!==n.type.kind&&"value"===i.type.kind&&(i=new me(n.type,[i])));var a=null;if(4===e.length){if("string"!==n.type.kind&&"string"!==i.type.kind&&"value"!==n.type.kind&&"value"!==i.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(a=t.parse(e[3],3,J)))return null}return new o(n,i,a)},o.prototype.evaluate=function(e){var t=this.lhs.evaluate(e),r=this.rhs.evaluate(e);if(c&&this.hasUntypedArgument){var n=ce(t),i=ce(r);if(n.kind!==i.kind||"string"!==n.kind&&"number"!==n.kind)throw new de('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+n.kind+", "+i.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var a=ce(t),o=ce(r);if("string"!==a.kind||"string"!==o.kind)return l(e,t,r)}return this.collator?u(e,t,r,this.collator.evaluate(e)):l(e,t,r)},o.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},o.prototype.possibleOutputs=function(){return[!0,!1]},o.prototype.serialize=function(){var t=[s];return this.eachChild((function(e){t.push(e.serialize())})),t},o})()}Qe.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var n=[],i=1;i<e.length-1;i+=2){var a=t.parse(e[i],i,Z);if(!a)return null;var o=t.parse(e[i+1],i+1,r);if(!o)return null;n.push([a,o]),r=r||o.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Qe(r,n,s):null},Qe.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],i=n[0],a=n[1];if(i.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},Qe.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],i=n[0],a=n[1];e(i),e(a)}e(this.otherwise)},Qe.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map((function(e){return e[0],e[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs());var e},Qe.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var nt=rt("==",(function(e,t,r){return t===r}),tt),it=rt("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!tt(0,t,r,n)})),at=rt("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),ot=rt(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),st=rt("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),lt=rt(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0})),ut=function(e){this.type=W,this.input=e};ut.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+te(r.type)+" instead."):new ut(r):null},ut.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new de("Expected value to be of type string or array, but found "+te(ce(t))+" instead.")},ut.prototype.eachChild=function(e){e(this.input)},ut.prototype.possibleOutputs=function(){return[void 0]},ut.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ct={"==":nt,"!=":it,">":ot,"<":at,">=":lt,"<=":st,array:me,at:Ke,boolean:me,case:Qe,coalesce:Xe,collator:we,format:ye,interpolate:Ye,"interpolate-hcl":Ye,"interpolate-lab":Ye,length:ut,let:$e,literal:he,match:Je,number:me,object:me,step:Me,string:me,"to-boolean":ve,"to-color":ve,"to-number":ve,"to-string":ve,var:Pe};function pt(e,t){var r=t[0],n=t[1],i=t[2],a=t[3];r=r.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);var o=a?a.evaluate(e):1,s=ue(r,n,i,o);if(s)throw new de(s);return new ae(r/255*o,n/255*o,i/255*o,o)}function ht(e,t){return e in t}function dt(e,t){var r=t[e];return void 0===r?null:r}function ft(e){return{type:e}}function mt(e){return{result:"success",value:e}}function yt(e){return{result:"error",value:e}}function gt(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function vt(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function bt(e){return!!e.expression&&e.expression.interpolated}function _t(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function xt(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function wt(e){return e}function Dt(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function St(e,t,r,n,i){return Dt(typeof r===i?n[r]:void 0,e.default,t.default)}function Rt(e,t,r){if("number"!==_t(r))return Dt(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var i=At(e.stops,r);return e.stops[i][1]}function Pt(e,t,r){var n=void 0!==e.base?e.base:1;if("number"!==_t(r))return Dt(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];var a,o,s,l,u,c=At(e.stops,r),p=(a=r,o=n,s=e.stops[c][0],l=e.stops[c+1][0]-s,u=a-s,0===l?0:1===o?u/l:(Math.pow(o,u)-1)/(Math.pow(o,l)-1)),h=e.stops[c][1],d=e.stops[c+1][1],f=Oe[t.type]||wt;if(e.colorSpace&&"rgb"!==e.colorSpace){var m=We[e.colorSpace];f=function(e,t){return m.reverse(m.interpolate(m.forward(e),m.forward(t),p))}}return"function"==typeof h.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=h.evaluate.apply(void 0,e),n=d.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==n)return f(r,n,p)}}:f(h,d,p)}function Et(e,t,r){return"color"===t.type?r=ae.parse(r):"formatted"===t.type?r=le.fromString(r.toString()):_t(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Dt(r,e.default,t.default)}function At(e,t){for(var r,n,i=0,a=e.length-1,o=0;i<=a;){if(r=e[o=Math.floor((i+a)/2)][0],n=e[o+1][0],t===r||t>r&&t<n)return o;r<t?i=o+1:r>t&&(a=o-1)}return Math.max(o-1,0)}xe.register(ct,{error:[{kind:"error"},[Y],function(e,t){var r=t[0];throw new de(r.evaluate(e))}],typeof:[Y,[K],function(e,t){return te(ce(t[0].evaluate(e)))}],"to-rgba":[ee(W,4),[X],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[X,[W,W,W],pt],rgba:[X,[W,W,W,W],pt],has:{type:Z,overloads:[[[Y],function(e,t){return ht(t[0].evaluate(e),e.properties())}],[[Y,$],function(e,t){var r=t[0],n=t[1];return ht(r.evaluate(e),n.evaluate(e))}]]},get:{type:K,overloads:[[[Y],function(e,t){return dt(t[0].evaluate(e),e.properties())}],[[Y,$],function(e,t){var r=t[0],n=t[1];return dt(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[K,[Y],function(e,t){return dt(t[0].evaluate(e),e.featureState||{})}],properties:[$,[],function(e){return e.properties()}],"geometry-type":[Y,[],function(e){return e.geometryType()}],id:[K,[],function(e){return e.id()}],zoom:[W,[],function(e){return e.globals.zoom}],"heatmap-density":[W,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[W,[],function(e){return e.globals.lineProgress||0}],"+":[W,ft(W),function(e,t){for(var r=0,n=0,i=t;n<i.length;n+=1)r+=i[n].evaluate(e);return r}],"*":[W,ft(W),function(e,t){for(var r=1,n=0,i=t;n<i.length;n+=1)r*=i[n].evaluate(e);return r}],"-":{type:W,overloads:[[[W,W],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)-n.evaluate(e)}],[[W],function(e,t){return-t[0].evaluate(e)}]]},"/":[W,[W,W],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)/n.evaluate(e)}],"%":[W,[W,W],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)%n.evaluate(e)}],ln2:[W,[],function(){return Math.LN2}],pi:[W,[],function(){return Math.PI}],e:[W,[],function(){return Math.E}],"^":[W,[W,W],function(e,t){var r=t[0],n=t[1];return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[W,[W],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[W,[W],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[W,[W],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[W,[W],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[W,[W],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[W,[W],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[W,[W],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[W,[W],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[W,[W],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[W,[W],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[W,ft(W),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[W,ft(W),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[W,[W],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[W,[W],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[W,[W],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[W,[W],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[Z,[Y,K],function(e,t){var r=t[0],n=t[1];return e.properties()[r.value]===n.value}],"filter-id-==":[Z,[K],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[Z,[Y],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[Z,[Y,K],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Z,[K],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Z,[Y,K],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[Z,[K],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[Z,[Y,K],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Z,[K],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Z,[Y,K],function(e,t){var r=t[0],n=t[1],i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Z,[K],function(e,t){var r=t[0],n=e.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[Z,[K],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Z,[],function(e){return null!==e.id()}],"filter-type-in":[Z,[ee(Y)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Z,[ee(K)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Z,[Y,ee(K)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Z,[Y,ee(K)],function(e,t){var r=t[0],n=t[1];return (function(e,t,r,n){for(;r<=n;){var i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1})(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Z,overloads:[[[Z,Z],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)&&n.evaluate(e)}],[ft(Z),function(e,t){for(var r=0,n=t;r<n.length;r+=1)if(!n[r].evaluate(e))return!1;return!0}]]},any:{type:Z,overloads:[[[Z,Z],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)||n.evaluate(e)}],[ft(Z),function(e,t){for(var r=0,n=t;r<n.length;r+=1)if(n[r].evaluate(e))return!0;return!1}]]},"!":[Z,[Z],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Z,[Y],function(e,t){var r=t[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[Y,[Y],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Y,[Y],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Y,ft(K),function(t,e){return e.map((function(e){return pe(e.evaluate(t))})).join("")}],"resolved-locale":[Y,[J],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Mt=function(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new _e,this._defaultValue="color"===(r=t).type&&xt(r.default)?new ae(0,0,0,0):"color"===r.type?ae.parse(r.default)||null:void 0===r.default?null:r.default,this._enumValues="enum"===t.type?t.values:null};function It(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ct}function Ot(e,t){var r,n,i=new Ee(ct,[],(n={color:X,string:Y,number:W,enum:Y,boolean:Z,formatted:Q},"array"===(r=t).type?ee(n[r.value]||K,r.length):n[r.type])),a=i.parse(e,void 0,void 0,void 0,"string"===t.type?{typeAnnotation:"coerce"}:void 0);return a?mt(new Mt(a,t)):yt(i.errors)}Mt.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this.expression.evaluate(this._evaluator)},Mt.prototype.evaluate=function(e,t,r){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new de("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Ct=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Se(t.expression)};Ct.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},Ct.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)};var Tt=function(e,t,r){this.kind=e,this.zoomStops=r.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Se(t.expression),r instanceof Ye&&(this._interpolationType=r.interpolation)};function kt(e,t){if("error"===(e=Ot(e,t)).result)return e;var r=e.value.expression,n=De(r);if(!n&&!gt(t))return yt([new U("","data expressions not supported")]);var i=Re(r,["zoom"]);if(!i&&!vt(t))return yt([new U("","zoom expressions not supported")]);var a=(function r(e){var n=null;if(e instanceof $e)n=r(e.result);else if(e instanceof Xe)for(var t=0,i=e.args;t<i.length;t+=1){var a=i[t];if(n=r(a))break}else(e instanceof Me||e instanceof Ye)&&e.input instanceof xe&&"zoom"===e.input.name&&(n=e);return n instanceof U||e.eachChild((function(e){var t=r(e);t instanceof U?n=t:!n&&t?n=new U("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&t&&n!==t&&(n=new U("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n})(r);return a||i?a instanceof U?yt([a]):a instanceof Ye&&!bt(t)?yt([new U("",'"interpolate" expressions cannot be used with this property')]):mt(a?new Tt(n?"camera":"composite",e.value,a):new Ct(n?"constant":"source",e.value)):yt([new U("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Tt.prototype.evaluateWithoutErrorHandling=function(e,t,r){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r)},Tt.prototype.evaluate=function(e,t,r){return this._styleExpression.evaluate(e,t,r)},Tt.prototype.interpolationFactor=function(e,t,r){return this._interpolationType?Ye.interpolationFactor(this._interpolationType,e,t,r):0};var Lt=function(e,t){this._parameters=e,this._specification=t,V(this,(function e(n,i){var a,o,s,t="color"===i.type,r=n.stops&&"object"==typeof n.stops[0][0],l=r||void 0!==n.property,u=r||!l,c=n.type||(bt(i)?"exponential":"interval");if(t&&((n=V({},n)).stops&&(n.stops=n.stops.map((function(e){return[e[0],ae.parse(e[1])]}))),n.default?n.default=ae.parse(n.default):n.default=ae.parse(i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!We[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);if("exponential"===c)a=Pt;else if("interval"===c)a=Rt;else if("categorical"===c){a=St,o=Object.create(null);for(var p=0,h=n.stops;p<h.length;p+=1){var d=h[p];o[d[0]]=d[1]}s=typeof n.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');a=Et}if(r){for(var f={},m=[],y=0;y<n.stops.length;y++){var g=n.stops[y],v=g[0].zoom;void 0===f[v]&&(f[v]={zoom:v,type:n.type,property:n.property,default:n.default,stops:[]},m.push(v)),f[v].stops.push([g[0].value,g[1]])}for(var b=[],_=0,x=m;_<x.length;_+=1){var w=x[_];b.push([f[w].zoom,e(f[w],i)])}return{kind:"composite",interpolationFactor:Ye.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:b.map((function(e){return e[0]})),evaluate:function(e,t){var r=e.zoom;return Pt({stops:b,base:n.base},i,r).evaluate(r,t)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?Ye.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==n.base?n.base:1}):function(){return 0},zoomStops:n.stops.map((function(e){return e[0]})),evaluate:function(e){var t=e.zoom;return a(n,i,t,o,s)}}:{kind:"source",evaluate:function(e,t){var r=t&&t.properties?t.properties[n.property]:void 0;return void 0===r?Dt(n.default,i.default):a(n,i,r,o,s)}}})(this._parameters,this._specification))};function Nt(e,t){if(xt(e))return new Lt(e,t);if(It(e)){var r=kt(e,t);if("error"===r.result)throw new Error(r.value.map((function(e){return e.key+": "+e.message})).join(", "));return r.value}var n=e;return"string"==typeof e&&"color"===t.type&&(n=ae.parse(e)),{kind:"constant",evaluate:function(){return n}}}function zt(e){var t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=_t(r);if("object"!==l)return[new j(t,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],p=n[c]||n["*"],h=void 0;if(i[c])h=i[c];else if(n[c])h=sr;else if(i["*"])h=i["*"];else{if(!n["*"]){s.push(new j(t,r[u],'unknown property "'+u+'"'));continue}h=sr}s=s.concat(h({key:(t?t+".":t)+u,value:r[u],valueSpec:p,style:a,styleSpec:o,object:r,objectKey:u},r))}for(var d in n)i[d]||n[d].required&&void 0===n[d].default&&void 0===r[d]&&s.push(new j(t,r,'missing required property "'+d+'"'));return s}function jt(e){var t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||sr;if("array"!==_t(t))return[new j(a,t,"array expected, "+_t(t)+" found")];if(r.length&&t.length!==r.length)return[new j(a,t,"array length "+r.length+" expected, length "+t.length+" found")];if(r["min-length"]&&t.length<r["min-length"])return[new j(a,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")];var s={type:r.value};i.$version<7&&(s.function=r.function),"object"===_t(r.value)&&(s=r.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:n,styleSpec:i,key:a+"["+u+"]"}));return l}function Ft(e){var t=e.key,r=e.value,n=e.valueSpec,i=_t(r);return"number"!==i?[new j(t,r,"number expected, "+i+" found")]:"minimum"in n&&r<n.minimum?[new j(t,r,r+" is less than the minimum value "+n.minimum)]:"maximum"in n&&r>n.maximum?[new j(t,r,r+" is greater than the maximum value "+n.maximum)]:[]}function Vt(e){var o,s,i,l=e.valueSpec,u=G(e.value.type),c={},t="categorical"!==u&&void 0===e.value.property,r=!t,a="array"===_t(e.value.stops)&&"array"===_t(e.value.stops[0])&&"object"===_t(e.value.stops[0][0]),n=zt({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===u)return[new j(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;return t=t.concat(jt({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===_t(r)&&0===r.length&&t.push(new j(e.key,r,"array must have at least one stop")),t},default:function(e){return sr({key:e.key,value:e.value,valueSpec:l,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===u&&t&&n.push(new j(e.key,e.value,'missing required property "property"')),"identity"===u||e.value.stops||n.push(new j(e.key,e.value,'missing required property "stops"')),"exponential"===u&&e.valueSpec.expression&&!bt(e.valueSpec)&&n.push(new j(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(r&&!gt(e.valueSpec)?n.push(new j(e.key,e.value,"property functions not supported")):t&&!vt(e.valueSpec)&&n.push(new j(e.key,e.value,"zoom functions not supported"))),"categorical"!==u&&!a||void 0!==e.value.property||n.push(new j(e.key,e.value,'"property" property is required')),n;function p(e){var t=[],r=e.value,n=e.key;if("array"!==_t(r))return[new j(n,r,"array expected, "+_t(r)+" found")];if(2!==r.length)return[new j(n,r,"array length 2 expected, length "+r.length+" found")];if(a){if("object"!==_t(r[0]))return[new j(n,r,"object expected, "+_t(r[0])+" found")];if(void 0===r[0].zoom)return[new j(n,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new j(n,r,"object stop key must have value")];if(i&&i>G(r[0].zoom))return[new j(n,r[0].zoom,"stop zoom values must appear in ascending order")];G(r[0].zoom)!==i&&(i=G(r[0].zoom),s=void 0,c={}),t=t.concat(zt({key:n+"[0]",value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ft,value:h}}))}else t=t.concat(h({key:n+"[0]",value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return t.concat(sr({key:n+"[1]",value:r[1],valueSpec:l,style:e.style,styleSpec:e.styleSpec}))}function h(e,t){var r=_t(e.value),n=G(e.value),i=null!==e.value?e.value:t;if(o){if(r!==o)return[new j(e.key,i,r+" stop domain type must match previous stop domain type "+o)]}else o=r;if("number"!==r&&"string"!==r&&"boolean"!==r)return[new j(e.key,i,"stop domain value must be a number, string, or boolean")];if("number"===r||"categorical"===u)return"categorical"!==u||"number"!==r||isFinite(n)&&Math.floor(n)===n?"categorical"!==u&&"number"===r&&void 0!==s&&n<s?[new j(e.key,i,"stop domain values must appear in ascending order")]:(s=n,"categorical"===u&&n in c?[new j(e.key,i,"stop domain values must be unique")]:(c[n]=!0,[])):[new j(e.key,i,"integer expected, found "+n)];var a="number expected, "+r+" found";return gt(l)&&void 0===u&&(a+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new j(e.key,i,a)]}}function Gt(t){var e=("property"===t.expressionContext?kt:Ot)(B(t.value),t.valueSpec);return"error"===e.result?e.value.map((function(e){return new j(""+t.key+e.key,t.value,e.message)})):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new j(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||Se(e.value._styleExpression.expression)?[]:[new j(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function Bt(e){var t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(G(r))&&i.push(new j(t,r,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(n.values).indexOf(G(r))&&i.push(new j(t,r,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(r)+" found")),i}function Ut(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var n=r[t];if(!Ut(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Lt.deserialize=function(e){return new Lt(e._parameters,e._specification)};var Ht={type:"boolean",default:!(Lt.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qt(e){if(null===e||void 0===e)return function(){return!0};Ut(e)||(e=Yt(e));var r=Ot(e,Ht);if("error"===r.result)throw new Error(r.value.map((function(e){return e.key+": "+e.message})).join(", "));return function(e,t){return r.value.evaluate(e,t)}}function Wt(e,t){return e<t?-1:e>t?1:0}function Yt(e){if(!e)return!0;var t,r=e[0];return e.length<=1?"any"!==r:"=="===r?Zt(e[1],e[2],"=="):"!="===r?Kt(Zt(e[1],e[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Zt(e[1],e[2],r):"any"===r?(t=e.slice(1),["any"].concat(t.map(Yt))):"all"===r?["all"].concat(e.slice(1).map(Yt)):"none"===r?["all"].concat(e.slice(1).map(Yt).map(Kt)):"in"===r?Xt(e[1],e.slice(2)):"!in"===r?Kt(Xt(e[1],e.slice(2))):"has"===r?$t(e[1]):"!has"!==r||Kt($t(e[1]))}function Zt(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function Xt(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Wt)]]:["filter-in-small",e,["literal",t]]}}function $t(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Kt(e){return["!",e]}function Jt(e){return Ut(B(e.value))?Gt(V({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):(function e(t){var r=t.value,n=t.key;if("array"!==_t(r))return[new j(n,r,"array expected, "+_t(r)+" found")];var i,a=t.styleSpec,o=[];if(r.length<1)return[new j(n,r,"filter array must have at least 1 element")];switch(o=o.concat(Bt({key:n+"[0]",value:r[0],valueSpec:a.filter_operator,style:t.style,styleSpec:t.styleSpec})),G(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===G(r[1])&&o.push(new j(n,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&o.push(new j(n,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(i=_t(r[1]))&&o.push(new j(n+"[1]",r[1],"string expected, "+i+" found"));for(var s=2;s<r.length;s++)i=_t(r[s]),"$type"===G(r[1])?o=o.concat(Bt({key:n+"["+s+"]",value:r[s],valueSpec:a.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new j(n+"["+s+"]",r[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)o=o.concat(e({key:n+"["+l+"]",value:r[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=_t(r[1]),2!==r.length?o.push(new j(n,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==i&&o.push(new j(n+"[1]",r[1],"string expected, "+i+" found"))}return o})(e)}function Qt(e,t){var r=e.key,n=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return sr({key:r,value:a,valueSpec:i.transition,style:n,styleSpec:i});var u,c=e.valueSpec||s[o];if(!c)return[new j(r,a,'unknown property "'+o+'"')];if("string"===_t(a)&&gt(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new j(r,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===o&&n&&!n.glyphs&&p.push(new j(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&xt(B(a))&&"identity"===G(a.type)&&p.push(new j(r,a,'"text-font" does not support identity functions'))),p.concat(sr({key:e.key,value:a,valueSpec:c,style:n,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function er(e){return Qt(e,"paint")}function tr(e){return Qt(e,"layout")}function rr(e){var t=[],r=e.value,n=e.key,i=e.style,a=e.styleSpec;r.type||r.ref||t.push(new j(n,r,'either "type" or "ref" is required'));var o,s=G(r.type),l=G(r.ref);if(r.id)for(var u=G(r.id),c=0;c<e.arrayIndex;c++){var p=i.layers[c];G(p.id)===u&&t.push(new j(n,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(e){e in r&&t.push(new j(n,r[e],'"'+e+'" is prohibited for ref layers'))})),i.layers.forEach((function(e){G(e.id)===l&&(o=e)})),o?o.ref?t.push(new j(n,r.ref,"ref cannot reference another ref layer")):s=G(o.type):t.push(new j(n,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var h=i.sources&&i.sources[r.source],d=h&&G(h.type);h?"vector"===d&&"raster"===s?t.push(new j(n,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===d&&"raster"!==s?t.push(new j(n,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==d||r["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new j(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===d&&h.lineMetrics||t.push(new j(n,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new j(n,r,'layer "'+r.id+'" must specify a "source-layer"')):t.push(new j(n,r.source,'source "'+r.source+'" not found'))}else t.push(new j(n,r,'missing required property "source"'));return t=t.concat(zt({key:n,value:r,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return sr({key:n+".type",value:r.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:Jt,layout:function(e){return zt({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return tr(V({layerType:s},e))}}})},paint:function(e){return zt({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return er(V({layerType:s},e))}}})}}}))}function nr(e){var t=e.value,r=e.key,n=e.styleSpec,i=e.style;if(!t.type)return[new j(r,t,'"type" is required')];var a=G(t.type),o=[];switch(a){case"vector":case"raster":case"raster-dem":if(o=o.concat(zt({key:r,value:t,valueSpec:n["source_"+a.replace("-","_")],style:e.style,styleSpec:n})),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&o.push(new j(r+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":return zt({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n});case"video":return zt({key:r,value:t,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return zt({key:r,value:t,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return o.push(new j(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),o;default:return Bt({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function ir(e){var t=e.value,r=e.styleSpec,n=r.light,i=e.style,a=[],o=_t(t);if(void 0===t)return a;if("object"!==o)return a.concat([new j("light",t,"object expected, "+o+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=l&&n[l[1]]&&n[l[1]].transition?a.concat(sr({key:s,value:t[s],valueSpec:r.transition,style:i,styleSpec:r})):n[s]?a.concat(sr({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r})):a.concat([new j(s,t[s],'unknown property "'+s+'"')])}return a}function ar(e){var t=e.value,r=e.key,n=_t(t);return"string"!==n?[new j(r,t,"string expected, "+n+" found")]:[]}var or={"*":function(){return[]},array:jt,boolean:function(e){var t=e.value,r=e.key,n=_t(t);return"boolean"!==n?[new j(r,t,"boolean expected, "+n+" found")]:[]},number:Ft,color:function(e){var t=e.key,r=e.value,n=_t(r);return"string"!==n?[new j(t,r,"color expected, "+n+" found")]:null===ie(r)?[new j(t,r,'color expected, "'+r+'" found')]:[]},constants:F,enum:Bt,filter:Jt,function:Vt,layer:rr,object:zt,source:nr,light:ir,string:ar,formatted:function(e){return 0===ar(e).length?[]:Gt(e)}};function sr(e){var t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&xt(G(t))?Vt(e):r.expression&&It(B(t))?Gt(e):r.type&&or[r.type]?or[r.type](e):zt(V({},e,{valueSpec:r.type?n[r.type]:r}))}function lr(e){var t=e.value,r=e.key,n=ar(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new j(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new j(r,t,'"glyphs" url must include a "{range}" token'))),n}function ur(e,t){t=t||z;var r=[];return r=r.concat(sr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:lr,"*":function(){return[]}}})),e.constants&&(r=r.concat(F({key:"constants",value:e.constants,style:e,styleSpec:t}))),cr(r)}function cr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function pr(e){return function(){return cr(e.apply(this,arguments))}}ur.source=pr(nr),ur.light=pr(ir),ur.layer=pr(rr),ur.filter=pr(Jt),ur.paintProperty=pr(er),ur.layoutProperty=pr(tr);var hr=ur,dr=ur.light,fr=ur.paintProperty,mr=ur.layoutProperty;function yr(e,t){var r=!1;if(t&&t.length)for(var n=0,i=t;n<i.length;n+=1){var a=i[n];e.fire(new L(new Error(a.message))),r=!0}return r}var gr=br,vr=3;function br(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],r=i[2],this.d=t+2*r;for(var a=0;a<this.d*this.d;a++){var o=i[vr+a],s=i[vr+a+1];n.push(o===s?null:i.subarray(o,s))}var l=i[vr+n.length],u=i[vr+n.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var p=r/t*e;this.min=-p,this.max=e+p}br.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},br.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},br.prototype._insertCell=function(e,t,r,n,i,a){this.cells[i].push(a)},br.prototype.query=function(e,t,r,n){var i=this.min,a=this.max;if(e<=i&&t<=i&&a<=r&&a<=n)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(e,t,r,n,this._queryCell,o,{}),o},br.prototype._queryCell=function(e,t,r,n,i,a,o){var s=this.cells[i];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===o[p]){var h=4*p;e<=u[h+2]&&t<=u[h+3]&&r>=u[h+0]&&n>=u[h+1]?(o[p]=!0,a.push(l[p])):o[p]=!1}}},br.prototype._forEachCell=function(e,t,r,n,i,a,o){for(var s=this._convertToCellCoord(e),l=this._convertToCellCoord(t),u=this._convertToCellCoord(r),c=this._convertToCellCoord(n),p=s;p<=u;p++)for(var h=l;h<=c;h++){var d=this.d*h+p;if(i.call(this,e,t,r,n,d,a,o))return}},br.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},br.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=vr+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[vr+o]=a,i.set(s,a),a+=s.length}return i[vr+e.length]=a,i.set(this.keys,a),a+=this.keys.length,i[vr+e.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var _r=self.ImageData,xr={};function wr(e,t,r){void 0===r&&(r={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),xr[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}for(var Dr in wr("Object",Object),gr.serialize=function(e,t){var r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},gr.deserialize=function(e){return new gr(e.buffer)},wr("Grid",gr),wr("Color",ae),wr("Error",Error),wr("StylePropertyFunction",Lt),wr("StyleExpression",Mt,{omit:["_evaluator"]}),wr("ZoomDependentExpression",Tt),wr("ZoomConstantExpression",Ct),wr("CompoundExpression",xe,{omit:["_evaluate"]}),ct)ct[Dr]._classRegistryKey||wr("Expression_"+Dr,ct[Dr]);function Sr(e,t){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return t&&t.push(r.buffer),r}if(e instanceof _r)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var n=[],i=0,a=e;i<a.length;i+=1){var o=a[i];n.push(Sr(o,t))}return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(xr[l].omit.indexOf(c)>=0)){var p=e[c];u[c]=xr[l].shallow.indexOf(c)>=0?p:Sr(p,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}function Rr(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof _r)return e;if(Array.isArray(e))return e.map(Rr);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);var t=e.$name||"Object",r=xr[t].klass;if(!r)throw new Error("can't deserialize unregistered class "+t);if(r.deserialize)return r.deserialize(e);for(var n=Object.create(r.prototype),i=0,a=Object.keys(e);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=e[o];n[o]=xr[t].shallow.indexOf(o)>=0?s:Rr(s)}}return n}var Pr=function(){this.first=!0},Er={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Ar(e){for(var t=0,r=e;t<r.length;t+=1)if(Mr(r[t].charCodeAt(0)))return!0;return!1}function Mr(e){return 746===e||747===e||!(e<4352)&&(!!Er["Bopomofo Extended"](e)||!!Er.Bopomofo(e)||!(!Er["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!Er["CJK Compatibility Ideographs"](e)||!!Er["CJK Compatibility"](e)||!!Er["CJK Radicals Supplement"](e)||!!Er["CJK Strokes"](e)||!(!Er["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||!!Er["CJK Unified Ideographs Extension A"](e)||!!Er["CJK Unified Ideographs"](e)||!!Er["Enclosed CJK Letters and Months"](e)||!!Er["Hangul Compatibility Jamo"](e)||!!Er["Hangul Jamo Extended-A"](e)||!!Er["Hangul Jamo Extended-B"](e)||!!Er["Hangul Jamo"](e)||!!Er["Hangul Syllables"](e)||!!Er.Hiragana(e)||!!Er["Ideographic Description Characters"](e)||!!Er.Kanbun(e)||!!Er["Kangxi Radicals"](e)||!!Er["Katakana Phonetic Extensions"](e)||!(!Er.Katakana(e)||12540===e)||!(!Er["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Er["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!Er["Unified Canadian Aboriginal Syllabics"](e)||!!Er["Unified Canadian Aboriginal Syllabics Extended"](e)||!!Er["Vertical Forms"](e)||!!Er["Yijing Hexagram Symbols"](e)||!!Er["Yi Syllables"](e)||!!Er["Yi Radicals"](e))}function Ir(e){return!(Mr(e)||(t=e,Er["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Er["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Er["Letterlike Symbols"](t)||Er["Number Forms"](t)||Er["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Er["Control Pictures"](t)&&9251!==t||Er["Optical Character Recognition"](t)||Er["Enclosed Alphanumerics"](t)||Er["Geometric Shapes"](t)||Er["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Er["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Er["CJK Symbols and Punctuation"](t)||Er.Katakana(t)||Er["Private Use Area"](t)||Er["CJK Compatibility Forms"](t)||Er["Small Form Variants"](t)||Er["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}var Or,Cr=!(Pr.prototype.update=function(e,t){var r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}),Tr=null,kr=!1,Lr=new N,Nr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return kr||null!=Nr.applyArabicShaping}},zr=function(e,t){this.zoom=e,this.transition=t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pr,{})};zr.prototype.isSupportedScript=function(e){return (function(e,t){for(var r=0,n=e;r<n.length;r+=1)if(i=n[r].charCodeAt(0),!t&&(i>=1424&&i<=2303||Er["Arabic Presentation Forms-A"](i)||Er["Arabic Presentation Forms-B"](i))||(i>=2304&&i<=3583||i>=3840&&i<=4255||Er.Khmer(i)))return!1;var i;return!0})(e,Nr.isLoaded())},zr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},zr.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}};var jr=function(e,t){this.property=e,this.value=t,this.expression=Nt(void 0===t?e.specification.default:t,e.specification)};jr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},jr.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var Fr=function(e){this.property=e,this.value=new jr(e,void 0)};Fr.prototype.transitioned=function(e,t){return new Gr(this.property,this.value,t,l({},e.transition,this.transition),e.now)},Fr.prototype.untransitioned=function(){return new Gr(this.property,this.value,null,{},0)};var Vr=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Vr.prototype.getValue=function(e){return v(this._values[e].value.value)},Vr.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fr(this._values[e].property)),this._values[e].value=new jr(this._values[e].property,null===t?void 0:v(t))},Vr.prototype.getTransition=function(e){return v(this._values[e].transition)},Vr.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Fr(this._values[e].property)),this._values[e].transition=v(t)||void 0},Vr.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i);var a=this.getTransition(n);void 0!==a&&(e[n+"-transition"]=a)}return e},Vr.prototype.transitioned=function(e,t){for(var r=new Br(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].transitioned(e,t._values[a])}return r},Vr.prototype.untransitioned=function(){for(var e=new Br(this._properties),t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t];e._values[n]=this._values[n].untransitioned()}return e};var Gr=function(e,t,r,n,i){this.property=e,this.value=t,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)};Gr.prototype.possiblyEvaluate=function(e){var t=e.now||0,r=this.value.possiblyEvaluate(e),n=this.prior;if(n){if(t>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(t<this.begin)return n.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(e),r,(function(e){if(i<=0)return 0;if(i>=1)return 1;var t=i*i,r=t*i;return 4*(i<.5?r:3*(i-t)+r-.75)})())}return r};var Br=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Br.prototype.possiblyEvaluate=function(e){for(var t=new qr(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},Br.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var r=t[e];if(this._values[r].prior)return!0}return!1};var Ur=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Ur.prototype.getValue=function(e){return v(this._values[e].value)},Ur.prototype.setValue=function(e,t){this._values[e]=new jr(this._values[e].property,null===t?void 0:v(t))},Ur.prototype.serialize=function(){for(var e={},t=0,r=Object.keys(this._values);t<r.length;t+=1){var n=r[t],i=this.getValue(n);void 0!==i&&(e[n]=i)}return e},Ur.prototype.possiblyEvaluate=function(e){for(var t=new qr(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var Hr=function(e,t,r){this.property=e,this.value=t,this.parameters=r};Hr.prototype.isConstant=function(){return"constant"===this.value.kind},Hr.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Hr.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var qr=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};qr.prototype.get=function(e){return this._values[e]};var Wr=function(e){this.specification=e};Wr.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Wr.prototype.interpolate=function(e,t,r){var n=Oe[this.specification.type];return n?n(e,t,r):e};var Yr=function(e){this.specification=e};Yr.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new Hr(this,{kind:"constant",value:e.expression.evaluate(t)},t):new Hr(this,e.expression,t)},Yr.prototype.interpolate=function(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Hr(this,{kind:"constant",value:void 0},e.parameters);var n=Oe[this.specification.type];return n?new Hr(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e},Yr.prototype.evaluate=function(e,t,r,n){return"constant"===e.kind?e.value:e.evaluate(t,r,n)};var Zr=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.possiblyEvaluate=function(e,t){if(void 0===e.value)return new Hr(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var r=e.expression.evaluate(t),n=this._calculate(r,r,r,t);return new Hr(this,{kind:"constant",value:n},t)}if("camera"!==e.expression.kind)return new Hr(this,e.expression,t);var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Hr(this,{kind:"constant",value:i},t)},t.prototype.evaluate=function(e,t,r,n){if("source"!==e.kind)return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value;var i=e.evaluate(t,r,n);return this._calculate(i,i,i,t)},t.prototype._calculate=function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}},t.prototype.interpolate=function(e){return e},t})(Yr),Xr=function(e){this.specification=e};Xr.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"!==e.expression.kind)return this._calculate(e.expression.evaluate(new zr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new zr(Math.floor(t.zoom),t)),e.expression.evaluate(new zr(Math.floor(t.zoom+1),t)),t);var r=e.expression.evaluate(t);return this._calculate(r,r,r,t)}},Xr.prototype._calculate=function(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}},Xr.prototype.interpolate=function(e){return e};var $r=function(e){this.specification=e};$r.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},$r.prototype.interpolate=function(){return!1};var Kr=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var r=e[t],n=this.defaultPropertyValues[t]=new jr(r,void 0),i=this.defaultTransitionablePropertyValues[t]=new Fr(r);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}};wr("DataDrivenProperty",Yr),wr("DataConstantProperty",Wr),wr("CrossFadedDataDrivenProperty",Zr),wr("CrossFadedProperty",Xr),wr("ColorRampProperty",$r);var Jr=(function(i){function e(e,t){if(i.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Ur(t.layout)),t.paint)){for(var r in this._transitionablePaint=new Vr(t.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},e.prototype.setLayoutProperty=function(e,t,r){if(null!==t&&void 0!==t){var n="layers."+this.id+".layout."+e;if(this._validate(mr,n,e,t,r))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},e.prototype.getPaintProperty=function(e){return d(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},e.prototype.setPaintProperty=function(e,t,r){if(null!==t&&void 0!==t){var n="layers."+this.id+".paint."+e;if(this._validate(fr,n,e,t,r))return!1}if(d(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var i=this._transitionablePaint._values[e],a="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,o=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||o||a},e.prototype._handleSpecialPaintPropertyUpdate=function(e){},e.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},e.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),g(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},e.prototype._validate=function(e,t,r,n,i){return(!i||!1!==i.validate)&&yr(this,e.call(hr,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:z,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Hr&&gt(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},e})(N),Qr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},en=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},tn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function rn(e,a){void 0===a&&(a=1);var o=0,s=0;return{members:e.map((function(e){var t,r=(t=e.type,Qr[t].BYTES_PER_ELEMENT),n=o=nn(o,Math.max(a,r)),i=e.components||1;return s=Math.max(s,r),o+=r*i,{name:e.name,type:e.type,components:i,offset:n}})),size:nn(o,Math.max(s,a)),alignment:a}}function nn(e,t){return Math.ceil(e/t)*t}tn.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},tn.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},tn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},tn.prototype.clear=function(){this.length=0},tn.prototype.resize=function(e){this.reserve(e),this.length=e},tn.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},tn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var an=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var r=this.length;this.resize(r+1);var n=2*r;return this.int16[n+0]=e,this.int16[n+1]=t,r},t.prototype.emplace=function(e,t,r){var n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e},t})(tn);an.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",an);var on=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n){var i=this.length;this.resize(i+1);var a=4*i;return this.int16[a+0]=e,this.int16[a+1]=t,this.int16[a+2]=r,this.int16[a+3]=n,i},t.prototype.emplace=function(e,t,r,n,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,e},t})(tn);on.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",on);var sn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=i,this.int16[s+5]=a,o},t.prototype.emplace=function(e,t,r,n,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e},t})(tn);sn.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",sn);var ln=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=r,this.int16[u+3]=n,this.uint8[c+8]=i,this.uint8[c+9]=a,this.uint8[c+10]=o,this.uint8[c+11]=s,l},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l){var u=6*e,c=12*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+3]=i,this.uint8[c+8]=a,this.uint8[c+9]=o,this.uint8[c+10]=s,this.uint8[c+11]=l,e},t})(tn);ln.prototype.bytesPerElement=12,wr("StructArrayLayout4i4ub12",ln);var un=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.uint16[u+0]=e,this.uint16[u+1]=t,this.uint16[u+2]=r,this.uint16[u+3]=n,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=s,l},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=r,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,e},t})(tn);un.prototype.bytesPerElement=16,wr("StructArrayLayout8ui16",un);var cn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=r,this.int16[u+3]=n,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=s,l},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l){var u=8*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+3]=i,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,e},t})(tn);cn.prototype.bytesPerElement=16,wr("StructArrayLayout4i4ui16",cn);var pn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r){var n=this.length;this.resize(n+1);var i=3*n;return this.float32[i+0]=e,this.float32[i+1]=t,this.float32[i+2]=r,n},t.prototype.emplace=function(e,t,r,n){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e},t})(tn);pn.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",pn);var hn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var r=1*t;return this.uint32[r+0]=e,t},t.prototype.emplace=function(e,t){var r=1*e;return this.uint32[r+0]=t,e},t})(tn);hn.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",hn);var dn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s,l,u,c){var p=this.length;this.resize(p+1);var h=12*p,d=6*p;return this.int16[h+0]=e,this.int16[h+1]=t,this.int16[h+2]=r,this.int16[h+3]=n,this.int16[h+4]=i,this.int16[h+5]=a,this.uint32[d+3]=o,this.uint16[h+8]=s,this.uint16[h+9]=l,this.int16[h+10]=u,this.int16[h+11]=c,p},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l,u,c,p){var h=12*e,d=6*e;return this.int16[h+0]=t,this.int16[h+1]=r,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=a,this.int16[h+5]=o,this.uint32[d+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,e},t})(tn);dn.prototype.bytesPerElement=24,wr("StructArrayLayout6i1ul2ui2i24",dn);var fn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=i,this.int16[s+5]=a,o},t.prototype.emplace=function(e,t,r,n,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e},t})(tn);fn.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",fn);var mn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var r=this.length;this.resize(r+1);var n=4*r;return this.uint8[n+0]=e,this.uint8[n+1]=t,r},t.prototype.emplace=function(e,t,r){var n=4*e;return this.uint8[n+0]=t,this.uint8[n+1]=r,e},t})(tn);mn.prototype.bytesPerElement=4,wr("StructArrayLayout2ub4",mn);var yn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=20*f,y=10*f,g=40*f;return this.int16[m+0]=e,this.int16[m+1]=t,this.uint16[m+2]=r,this.uint16[m+3]=n,this.uint32[y+2]=i,this.uint32[y+3]=a,this.uint32[y+4]=o,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[y+7]=c,this.float32[y+8]=p,this.uint8[g+36]=h,this.uint8[g+37]=d,f},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f){var m=20*e,y=10*e,g=40*e;return this.int16[m+0]=t,this.int16[m+1]=r,this.uint16[m+2]=n,this.uint16[m+3]=i,this.uint32[y+2]=a,this.uint32[y+3]=o,this.uint32[y+4]=s,this.uint16[m+10]=l,this.uint16[m+11]=u,this.uint16[m+12]=c,this.float32[y+7]=p,this.float32[y+8]=h,this.uint8[g+36]=d,this.uint8[g+37]=f,e},t})(tn);yn.prototype.bytesPerElement=40,wr("StructArrayLayout2i2ui3ul3ui2f2ub40",yn);var gn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d){var f=this.length;this.resize(f+1);var m=16*f,y=8*f;return this.int16[m+0]=e,this.int16[m+1]=t,this.int16[m+2]=r,this.int16[m+3]=n,this.uint16[m+4]=i,this.uint16[m+5]=a,this.uint16[m+6]=o,this.uint16[m+7]=s,this.uint16[m+8]=l,this.uint16[m+9]=u,this.uint16[m+10]=c,this.uint16[m+11]=p,this.uint16[m+12]=h,this.uint32[y+7]=d,f},t.prototype.emplace=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f){var m=16*e,y=8*e;return this.int16[m+0]=t,this.int16[m+1]=r,this.int16[m+2]=n,this.int16[m+3]=i,this.uint16[m+4]=a,this.uint16[m+5]=o,this.uint16[m+6]=s,this.uint16[m+7]=l,this.uint16[m+8]=u,this.uint16[m+9]=c,this.uint16[m+10]=p,this.uint16[m+11]=h,this.uint16[m+12]=d,this.uint32[y+7]=f,e},t})(tn);gn.prototype.bytesPerElement=32,wr("StructArrayLayout4i9ui1ul32",gn);var vn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var r=1*t;return this.float32[r+0]=e,t},t.prototype.emplace=function(e,t){var r=1*e;return this.float32[r+0]=t,e},t})(tn);vn.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",vn);var bn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r){var n=this.length;this.resize(n+1);var i=3*n;return this.int16[i+0]=e,this.int16[i+1]=t,this.int16[i+2]=r,n},t.prototype.emplace=function(e,t,r,n){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e},t})(tn);bn.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",bn);var _n=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r){var n=this.length;this.resize(n+1);var i=2*n,a=4*n;return this.uint32[i+0]=e,this.uint16[a+2]=t,this.uint16[a+3]=r,n},t.prototype.emplace=function(e,t,r,n){var i=2*e,a=4*e;return this.uint32[i+0]=t,this.uint16[a+2]=r,this.uint16[a+3]=n,e},t})(tn);_n.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",_n);var xn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r){var n=this.length;this.resize(n+1);var i=3*n;return this.uint16[i+0]=e,this.uint16[i+1]=t,this.uint16[i+2]=r,n},t.prototype.emplace=function(e,t,r,n){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e},t})(tn);xn.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",xn);var wn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var r=this.length;this.resize(r+1);var n=2*r;return this.uint16[n+0]=e,this.uint16[n+1]=t,r},t.prototype.emplace=function(e,t,r){var n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e},t})(tn);wn.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",wn);var Dn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var r=1*t;return this.uint16[r+0]=e,t},t.prototype.emplace=function(e,t){var r=1*e;return this.uint16[r+0]=t,e},t})(tn);Dn.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",Dn);var Sn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var r=this.length;this.resize(r+1);var n=2*r;return this.float32[n+0]=e,this.float32[n+1]=t,r},t.prototype.emplace=function(e,t,r){var n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e},t})(tn);Sn.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",Sn);var Rn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,r,n){var i=this.length;this.resize(i+1);var a=4*i;return this.float32[a+0]=e,this.float32[a+1]=t,this.float32[a+2]=r,this.float32[a+3]=n,i},t.prototype.emplace=function(e,t,r,n,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,e},t})(tn);Rn.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",Rn);var Pn=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},r.anchorPoint.get=function(){return new y(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,r),t})(en);Pn.prototype.size=24;var En=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(e){return new Pn(this,e)},t})(dn);wr("CollisionBoxArray",En);var An=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},r.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},r.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,r),t})(en);An.prototype.size=40;var Mn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(e){return new An(this,e)},t})(yn);wr("PlacedSymbolArray",Mn);var In=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},r.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.horizontalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},r.key.get=function(){return this._structArray.uint16[this._pos2+4]},r.key.set=function(e){this._structArray.uint16[this._pos2+4]=e},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},r.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+5]=e},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},r.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+6]=e},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},r.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.featureIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},r.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},r.numGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+10]=e},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},r.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+11]=e},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},r.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},r.crossTileID.set=function(e){this._structArray.uint32[this._pos4+7]=e},Object.defineProperties(t.prototype,r),t})(en);In.prototype.size=32;var On=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(e){return new In(this,e)},t})(gn);wr("SymbolInstanceArray",On);var Cn=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,r),t})(en);Cn.prototype.size=4;var Tn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new Cn(this,e)},t})(vn);wr("GlyphOffsetArray",Tn);var kn=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(e){this._structArray.int16[this._pos2+0]=e},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(e){this._structArray.int16[this._pos2+1]=e},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,r),t})(en);kn.prototype.size=6;var Ln=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new kn(this,e)},t})(bn);wr("SymbolLineVertexArray",Ln);var Nn=(function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,r),t})(en);Nn.prototype.size=8;var zn=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.get=function(e){return new Nn(this,e)},t})(_n);wr("FeatureIndexArray",zn);var jn=rn([{name:"a_pos",components:2,type:"Int16"}],4),Fn=jn.members,Vn=(jn.size,jn.alignment,function(e){void 0===e&&(e=[]),this.segments=e});Vn.prototype.prepareSegment=function(e,t,r){var n=this.segments[this.segments.length-1];return e>Vn.MAX_VERTEX_ARRAY_LENGTH&&_("Max vertices per segment is "+Vn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!n||n.vertexLength+e>Vn.MAX_VERTEX_ARRAY_LENGTH)&&(n={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(n)),n},Vn.prototype.get=function(){return this.segments},Vn.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var r=t[e];for(var n in r.vaos)r.vaos[n].destroy()}},Vn.simpleSegment=function(e,t,r,n){return new Vn([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{}}])},Vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",Vn);var Gn=function(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)},Bn=function(){this.ids=[],this.positions=[],this.indexed=!1};function Un(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}Bn.prototype.add=function(e,t,r,n){this.ids.push(e),this.positions.push(t,r,n)},Bn.prototype.getPositions=function(e){for(var t=0,r=this.ids.length-1;t<r;){var n=t+r>>1;this.ids[n]>=e?r=n:t=n+1}for(var i=[];this.ids[t]===e;){var a=this.positions[3*t],o=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:a,start:o,end:s}),t++}return i},Bn.serialize=function(e,t){var r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return (function e(t,r,n,i){if(!(n>=i)){for(var a=t[n+i>>1],o=n-1,s=i+1;;){for(;t[++o]<a;);for(;t[--s]>a;);if(o>=s)break;Un(t,o,s),Un(r,3*o,3*s),Un(r,3*o+1,3*s+1),Un(r,3*o+2,3*s+2)}e(t,r,n,s),e(t,r,s+1,i)}})(r,n,0,r.length-1),t.push(r.buffer,n.buffer),{ids:r,positions:n}},Bn.deserialize=function(e){var t=new Bn;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},wr("FeaturePositionMap",Bn);var Hn=function(e,t){this.gl=e.gl,this.location=t},qn=(function(r){function e(e,t){r.call(this,e,t),this.current=0}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},e})(Hn),Wn=(function(r){function e(e,t){r.call(this,e,t),this.current=0}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},e})(Hn),Yn=(function(r){function e(e,t){r.call(this,e,t),this.current=[0,0]}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},e})(Hn),Zn=(function(r){function e(e,t){r.call(this,e,t),this.current=[0,0,0]}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},e})(Hn),Xn=(function(r){function e(e,t){r.call(this,e,t),this.current=[0,0,0,0]}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},e})(Hn),$n=(function(r){function e(e,t){r.call(this,e,t),this.current=ae.transparent}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},e})(Hn),Kn=new Float32Array(16),Jn=(function(r){function e(e,t){r.call(this,e,t),this.current=Kn}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},e})(Hn);function Qn(e){return[Gn(255*e.r,255*e.g),Gn(255*e.b,255*e.a)]}var ei=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map((function(e){return"u_"+e})),this.type=r,this.maxValue=-1/0};ei.prototype.defines=function(){return this.names.map((function(e){return"#define HAS_UNIFORM_u_"+e}))},ei.prototype.setConstantPatternPositions=function(){},ei.prototype.populatePaintArray=function(){},ei.prototype.updatePaintArray=function(){},ei.prototype.upload=function(){},ei.prototype.destroy=function(){},ei.prototype.setUniforms=function(e,t,r,n){t.set(n.constantOr(this.value))},ei.prototype.getBinding=function(e,t){return"color"===this.type?new $n(e,t):new Wn(e,t)},ei.serialize=function(e){var t=e.value,r=e.names,n=e.type;return{value:Sr(t),names:r,type:n}},ei.deserialize=function(e){var t=e.value,r=e.names,n=e.type;return new ei(Rr(t),r,n)};var ti=function(e,t,r){this.value=e,this.names=t,this.uniformNames=this.names.map((function(e){return"u_"+e})),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};ti.prototype.defines=function(){return this.names.map((function(e){return"#define HAS_UNIFORM_u_"+e}))},ti.prototype.populatePaintArray=function(){},ti.prototype.updatePaintArray=function(){},ti.prototype.upload=function(){},ti.prototype.destroy=function(){},ti.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},ti.prototype.setUniforms=function(e,t,r,n,i){var a=this.patternPositions;"u_pattern_to"===i&&a.patternTo&&t.set(a.patternTo),"u_pattern_from"===i&&a.patternFrom&&t.set(a.patternFrom)},ti.prototype.getBinding=function(e,t){return new Xn(e,t)};var ri=function(e,t,r,n){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map((function(e){return"a_"+e})),this.maxValue=-1/0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new n};ri.prototype.defines=function(){return[]},ri.prototype.setConstantPatternPositions=function(){},ri.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,n=r.length;r.reserve(e);var i=this.expression.evaluate(new zr(0),t,{});if("color"===this.type)for(var a=Qn(i),o=n;o<e;o++)r.emplaceBack(a[0],a[1]);else{for(var s=n;s<e;s++)r.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},ri.prototype.updatePaintArray=function(e,t,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},r,n);if("color"===this.type)for(var o=Qn(a),s=e;s<t;s++)i.emplace(s,o[0],o[1]);else{for(var l=e;l<t;l++)i.emplace(l,a);this.maxValue=Math.max(this.maxValue,a)}},ri.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ri.prototype.setUniforms=function(e,t){t.set(0)},ri.prototype.getBinding=function(e,t){return new Wn(e,t)};var ni=function(e,t,r,n,i,a){this.expression=e,this.names=t,this.uniformNames=this.names.map((function(e){return"a_"+e+"_t"})),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o};ni.prototype.defines=function(){return[]},ni.prototype.setConstantPatternPositions=function(){},ni.prototype.populatePaintArray=function(e,t){var r=this.paintVertexArray,n=r.length;r.reserve(e);var i=this.expression.evaluate(new zr(this.zoom),t,{}),a=this.expression.evaluate(new zr(this.zoom+1),t,{});if("color"===this.type)for(var o=Qn(i),s=Qn(a),l=n;l<e;l++)r.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var u=n;u<e;u++)r.emplaceBack(i,a);this.maxValue=Math.max(this.maxValue,i,a)}},ni.prototype.updatePaintArray=function(e,t,r,n){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);if("color"===this.type)for(var s=Qn(a),l=Qn(o),u=e;u<t;u++)i.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=e;c<t;c++)i.emplace(c,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},ni.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ni.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ni.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},ni.prototype.setUniforms=function(e,t,r){t.set(this.interpolationFactor(r.zoom))},ni.prototype.getBinding=function(e,t){return new Wn(e,t)};var ii=function(e,t,r,n,i,a,o){this.expression=e,this.names=t,this.type=r,this.uniformNames=this.names.map((function(e){return"a_"+e+"_t"})),this.useIntegerZoom=n,this.zoom=i,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};ii.prototype.defines=function(){return[]},ii.prototype.setConstantPatternPositions=function(){},ii.prototype.populatePaintArray=function(e,t,r){var n=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,a=this.layerId,o=n.length;if(n.reserve(e),i.reserve(e),r&&t.patterns&&t.patterns[a]){var s=t.patterns[a],l=s.min,u=s.mid,c=s.max,p=r[l],h=r[u],d=r[c];if(!p||!h||!d)return;for(var f=o;f<e;f++)n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},ii.prototype.updatePaintArray=function(e,t,r,n,i){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&r.patterns&&r.patterns[s]){var l=r.patterns[s],u=l.min,c=l.mid,p=l.max,h=i[u],d=i[c],f=i[p];if(!h||!d||!f)return;for(var m=e;m<t;m++)a.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),o.emplace(m,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},ii.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ii.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},ii.prototype.setUniforms=function(e,t){t.set(0)},ii.prototype.getBinding=function(e,t){return new Wn(e,t)};var ai=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Bn,this._bufferOffset=0};ai.createDynamic=function(e,t,r){var n,i,a=new ai,o=[];for(var s in e.paint._values)if(r(s)){var l=e.paint.get(s);if(l instanceof Hr&&gt(l.property.specification)){var u=(n=s,i=e.type,{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[n]||[n.replace(i+"-","").replace(/-/g,"_")]),c=l.property.specification.type,p=l.property.useIntegerZoom;if("cross-faded"===l.property.specification["property-type"]||"cross-faded-data-driven"===l.property.specification["property-type"])if("constant"===l.value.kind)a.binders[s]=new ti(l.value.value,u,c),o.push("/u_"+s);else{var h=si(s,c,"source");a.binders[s]=new ii(l.value,u,c,p,t,h,e.id),o.push("/a_"+s)}else if("constant"===l.value.kind)a.binders[s]=new ei(l.value.value,u,c),o.push("/u_"+s);else if("source"===l.value.kind){var d=si(s,c,"source");a.binders[s]=new ri(l.value,u,c,d),o.push("/a_"+s)}else{var f=si(s,c,"composite");a.binders[s]=new ni(l.value,u,c,p,t,f),o.push("/z_"+s)}}}return a.cacheKey=o.sort().join(""),a},ai.prototype.populatePaintArrays=function(e,t,r,n){for(var i in this.binders)this.binders[i].populatePaintArray(e,t,n);void 0!==t.id&&this._featureMap.add(+t.id,r,this._bufferOffset,e),this._bufferOffset=e},ai.prototype.setConstantPatternPositions=function(e,t){for(var r in this.binders)this.binders[r].setConstantPatternPositions(e,t)},ai.prototype.updatePaintArrays=function(e,t,r,n){var i=!1;for(var a in e)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var l=s[o],u=t.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof ei||p instanceof ti)&&!0===p.expression.isStateDependent){var h=r.paint.get(c);p.expression=h.value,p.updatePaintArray(l.start,l.end,u,e[a],n),i=!0}}}return i},ai.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},ai.prototype.getPaintVertexBuffers=function(){return this._buffers},ai.prototype.getUniforms=function(e,t){var r={};for(var n in this.binders)for(var i=this.binders[n],a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];r[s]=i.getBinding(e,t[s])}return r},ai.prototype.setUniforms=function(e,t,r,n){for(var i in this.binders)for(var a=this.binders[i],o=0,s=a.uniformNames;o<s.length;o+=1){var l=s[o];a.setUniforms(e,t[l],n,r.get(i),l)}},ai.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof ii){var i=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&t.push(i)}else(n instanceof ri||n instanceof ni)&&n.paintVertexBuffer&&t.push(n.paintVertexBuffer)}this._buffers=t},ai.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof ri||i instanceof ni)&&i.paintVertexBuffer&&r.push(i.paintVertexBuffer)}this._buffers=r},ai.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var oi=function(e,t,r,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var i=0,a=t;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=ai.createDynamic(o,r,n),this.programConfigurations[o.id].layoutAttributes=e}this.needsUpload=!1};function si(e,t,r){var n={color:{source:Sn,composite:Rn},number:{source:vn,composite:Sn}},i={"line-pattern":{source:un,composite:un},"fill-pattern":{source:un,composite:un},"fill-extrusion-pattern":{source:un,composite:un}}[e];return i&&i[r]||n[t][r]}oi.prototype.populatePaintArrays=function(e,t,r,n){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,r,n);this.needsUpload=!0},oi.prototype.updatePaintArrays=function(e,t,r,n){for(var i=0,a=r;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,t,o,n)||this.needsUpload}},oi.prototype.get=function(e){return this.programConfigurations[e]},oi.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},oi.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},wr("ConstantBinder",ei),wr("CrossFadedConstantBinder",ti),wr("SourceExpressionBinder",ri),wr("CrossFadedCompositeBinder",ii),wr("CompositeExpressionBinder",ni),wr("ProgramConfiguration",ai,{omit:["_buffers"]}),wr("ProgramConfigurationSet",oi);var li=8192,ui=(16,{min:-1*Math.pow(2,15),max:Math.pow(2,15)-1});function ci(e){for(var t=li/e.extent,r=e.loadGeometry(),n=0;n<r.length;n++)for(var i=r[n],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*t),o.y=Math.round(o.y*t),(o.x<ui.min||o.x>ui.max||o.y<ui.min||o.y>ui.max)&&_("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function pi(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}var hi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new an,this.indexArray=new xn,this.segments=new Vn,this.programConfigurations=new oi(Fn,e.layers,e.zoom)};function di(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(xi(i,t))return!0;if(vi(t,i,r))return!0}return!1}function fi(e,t){if(1===e.length&&1===e[0].length)return _i(t,e[0][0]);for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)if(_i(e,n[i]))return!0;for(var a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++)if(_i(t,o[s]))return!0;for(var l=0;l<t.length;l++)if(gi(o,t[l]))return!0}return!1}function mi(e,t,r){for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<e.length;a++){var o=e[a];if(o.length>=3)for(var s=0;s<i.length;s++)if(xi(o,i[s]))return!0;if(yi(o,i,r))return!0}return!1}function yi(e,t,r){if(e.length>1){if(gi(e,t))return!0;for(var n=0;n<t.length;n++)if(vi(t[n],e,r))return!0}for(var i=0;i<e.length;i++)if(vi(e[i],t,r))return!0;return!1}function gi(e,t){if(0===e.length||0===t.length)return!1;for(var r=0;r<e.length-1;r++)for(var n=e[r],i=e[r+1],a=0;a<t.length-1;a++)if(o=n,s=i,l=t[a],u=t[a+1],x(o,l,u)!==x(s,l,u)&&x(o,s,l)!==x(o,s,u))return!0;var o,s,l,u;return!1}function vi(e,t,r){var n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(var i=1;i<t.length;i++)if(bi(e,t[i-1],t[i])<n)return!0;return!1}function bi(e,t,r){var n=t.distSqr(r);if(0===n)return e.distSqr(t);var i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return i<0?e.distSqr(t):i>1?e.distSqr(r):e.distSqr(r.sub(t)._mult(i)._add(t))}function _i(e,t){for(var r,n,i,a=!1,o=0;o<e.length;o++)for(var s=0,l=(r=e[o]).length-1;s<r.length;l=s++)n=r[s],i=r[l],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(a=!a);return a}function xi(e,t){for(var r=!1,n=0,i=e.length-1;n<e.length;i=n++){var a=e[n],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(r=!r)}return r}function wi(e,t,r){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).binders[e].maxValue}function Di(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Si(e,t,r,n,i){if(!t[0]&&!t[1])return e;var a=y.convert(t);"viewport"===r&&a._rotate(-n);for(var o=[],s=0;s<e.length;s++){for(var l=e[s],u=[],c=0;c<l.length;c++)u.push(l[c].sub(a._mult(i)));o.push(u)}return o}hi.prototype.populate=function(e,t){for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var l=ci(a);this.addFeature(a,l,o),t.featureIndex.insert(a,l,o,s,this.index)}}},hi.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},hi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},hi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hi.prototype.addFeature=function(e,t,r){for(var n=0,i=t;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],l=s.x,u=s.y;if(!(l<0||l>=li||u<0||u>=li)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;pi(this.layoutVertexArray,l,u,-1,-1),pi(this.layoutVertexArray,l,u,1,-1),pi(this.layoutVertexArray,l,u,1,1),pi(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{})},wr("CircleBucket",hi,{omit:["layers"]});var Ri={paint:new Kr({"circle-radius":new Yr(z.paint_circle["circle-radius"]),"circle-color":new Yr(z.paint_circle["circle-color"]),"circle-blur":new Yr(z.paint_circle["circle-blur"]),"circle-opacity":new Yr(z.paint_circle["circle-opacity"]),"circle-translate":new Wr(z.paint_circle["circle-translate"]),"circle-translate-anchor":new Wr(z.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wr(z.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wr(z.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yr(z.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yr(z.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yr(z.paint_circle["circle-stroke-opacity"])})},Pi="undefined"!=typeof Float32Array?Float32Array:Array;function Ei(){var e=new Pi(9);return Pi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ai(){var e=new Pi(3);return Pi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Mi(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function Ii(e,t,r){var n=new Pi(3);return n[0]=e,n[1]=t,n[2]=r,n}Math.PI;var Oi,Ci=Mi,Ti=(Oi=Ai(),function(e,t,r,n,i,a){var o,s=void 0;for(t||(t=3),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,s=r;s<o;s+=t)Oi[0]=e[s],Oi[1]=e[s+1],Oi[2]=e[s+2],i(Oi,Oi,a),e[s]=Oi[0],e[s+1]=Oi[1],e[s+2]=Oi[2];return e});function ki(){var e=new Pi(4);return Pi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Li(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o),e}function Ni(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}var zi,ji=(zi=ki(),function(e,t,r,n,i,a){var o,s=void 0;for(t||(t=4),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,s=r;s<o;s+=t)zi[0]=e[s],zi[1]=e[s+1],zi[2]=e[s+2],zi[3]=e[s+3],i(zi,zi,a),e[s]=zi[0],e[s+1]=zi[1],e[s+2]=zi[2],e[s+3]=zi[3];return e});function Fi(){var e=new Pi(4);return Pi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}var Vi;Ai(),Ii(1,0,0),Ii(0,1,0),Fi(),Fi(),Ei(),Vi=new Pi(2),Pi!=Float32Array&&(Vi[0]=0,Vi[1]=0);var Gi=(function(t){function e(e){t.call(this,e,Ri)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createBucket=function(e){return new hi(e)},e.prototype.queryRadius=function(e){var t=e;return wi("circle-radius",this,t)+wi("circle-stroke-width",this,t)+Di(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,a,o,s){for(var l=Si(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:(function(e,t,r){return l.map((function(e){return e.map((function(e){return Bi(e,t,r)}))}))})(0,s,a),h=c?u*o:u,d=0,f=n;d<f.length;d+=1)for(var m=0,y=f[d];m<y.length;m+=1){var g=y[m],v=c?g:Bi(g,s,a),b=h,_=Ni([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=a.cameraToCenterDistance/_[3]),di(p,v,b))return!0}return!1},e})(Jr);function Bi(e,t,r){var n=Ni([],[e.x,e.y,0,1],t);return new y((n[0]/n[3]+1)*r.width*.5,(n[1]/n[3]+1)*r.height*.5)}var Ui=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t})(hi);function Hi(e,t,r,n){var i=t.width,a=t.height;if(n){if(n.length!==i*a*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(i*a*r);return e.width=i,e.height=a,e.data=n,e}function qi(e,t,r){var n=t.width,i=t.height;if(n!==e.width||i!==e.height){var a=Hi({},{width:n,height:i},r);Wi(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=a.data}}function Wi(e,t,r,n,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((r.y+l)*e.width+r.x)*a,c=((n.y+l)*t.width+n.x)*a,p=0;p<i.width*a;p++)s[c+p]=o[u+p];return t}wr("HeatmapBucket",Ui,{omit:["layers"]});var Yi=function(e,t){Hi(this,e,1,t)};Yi.prototype.resize=function(e){qi(this,e,1)},Yi.prototype.clone=function(){return new Yi({width:this.width,height:this.height},new Uint8Array(this.data))},Yi.copy=function(e,t,r,n,i){Wi(e,t,r,n,i,1)};var Zi=function(e,t){Hi(this,e,4,t)};Zi.prototype.resize=function(e){qi(this,e,4)},Zi.prototype.clone=function(){return new Zi({width:this.width,height:this.height},new Uint8Array(this.data))},Zi.copy=function(e,t,r,n,i){Wi(e,t,r,n,i,4)},wr("AlphaImage",Yi),wr("RGBAImage",Zi);var Xi={paint:new Kr({"heatmap-radius":new Yr(z.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yr(z.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wr(z.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $r(z.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wr(z.paint_heatmap["heatmap-opacity"])})};function $i(e,t){for(var r=new Uint8Array(1024),n={},i=0,a=0;i<256;i++,a+=4){n[t]=i/255;var o=e.evaluate(n);r[a+0]=Math.floor(255*o.r/o.a),r[a+1]=Math.floor(255*o.g/o.a),r[a+2]=Math.floor(255*o.b/o.a),r[a+3]=Math.floor(255*o.a)}return new Zi({width:256,height:1},r)}var Ki=(function(t){function e(e){t.call(this,e,Xi),this._updateColorRamp()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createBucket=function(e){return new Ui(e)},e.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=$i(e,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e})(Jr),Ji={paint:new Kr({"hillshade-illumination-direction":new Wr(z.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wr(z.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wr(z.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wr(z.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wr(z.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wr(z.paint_hillshade["hillshade-accent-color"])})},Qi=(function(t){function e(e){t.call(this,e,Ji)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e})(Jr),ea=rn([{name:"a_pos",components:2,type:"Int16"}],4),ta=ea.members,ra=(ea.size,ea.alignment,ia),na=ia;function ia(e,t,r){r=r||2;var n,i,a,o,s,l,u,c=t&&t.length,p=c?t[0]*r:e.length,h=aa(e,0,p,r,!0),d=[];if(!h)return d;if(c&&(h=(function(e,t,r,n){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=aa(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(ma(o));for(s.sort(ha),i=0;i<s.length;i++)da(s[i],r),r=oa(r,r.next);return r})(e,t,h,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(var f=r;f<p;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-n,o-i))?1/u:0}return sa(h,d,r,n,i,u),d}function aa(e,t,r,n,i){var a,o;if(i===Ra(e,t,r,n)>0)for(a=t;a<r;a+=n)o=wa(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=wa(a,e[a],e[a+1],o);return o&&va(o,o.next)&&(Da(o),o=o.next),o}function oa(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!va(n,n.next)&&0!==ga(n.prev,n,n.next))n=n.next;else{if(Da(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function sa(e,t,r,n,i,a,o){if(e){!o&&a&&(function(e,t,r,n){for(var i=e;null===i.z&&(i.z=fa(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==e;);i.prevZ.nextZ=null,i.prevZ=null,(function(e){var t,r,n,i,a,o,s,l,u=1;do{for(r=e,a=e=null,o=0;r;){for(o++,n=r,t=s=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1)})(i)})(e,n,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?ua(e,n,i,a):la(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),Da(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?sa(e=ca(e,t,r),t,r,n,i,a,2):2===o&&pa(e,t,r,n,i,a):sa(oa(e),t,r,n,i,a,1);break}}}function la(e){var t=e.prev,r=e,n=e.next;if(ga(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(ya(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&ga(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ua(e,t,r,n){var i=e.prev,a=e,o=e.next;if(ga(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,p=fa(s,l,t,r,n),h=fa(u,c,t,r,n),d=e.prevZ,f=e.nextZ;d&&d.z>=p&&f&&f.z<=h;){if(d!==e.prev&&d!==e.next&&ya(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&ga(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==e.prev&&f!==e.next&&ya(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&ga(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&ya(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&ga(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&ya(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&ga(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ca(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!va(i,a)&&ba(i,n,n.next,a)&&_a(i,a)&&_a(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),Da(n),Da(n.next),n=e=a),n=n.next}while(n!==e);return n}function pa(e,t,r,n,i,a){var o,s,l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(o=l).next.i!==s.i&&o.prev.i!==s.i&&!(function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&ba(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1})(o,s)&&_a(o,s)&&_a(s,o)&&(function(e,t){for(var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==e;);return n})(o,s))){var c=xa(l,u);return l=oa(l,l.next),c=oa(c,c.next),sa(l,t,r,n,i,a),void sa(c,t,r,n,i,a)}u=u.next}l=l.next}while(l!==e)}function ha(e,t){return e.x-t.x}function da(e,t){if(t=(function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if((o=s)===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var l,u=r,c=r.x,p=r.y,h=1/0;for(n=r.next;n!==u;)i>=n.x&&n.x>=c&&i!==n.x&&ya(a<p?i:o,a,c,p,a<p?o:i,a,n.x,n.y)&&((l=Math.abs(a-n.y)/(i-n.x))<h||l===h&&n.x>r.x)&&_a(n,e)&&(r=n,h=l),n=n.next;return r})(e,t)){var r=xa(t,e);oa(r,r.next)}}function fa(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ma(e){for(var t=e,r=e;t.x<r.x&&(r=t),(t=t.next)!==e;);return r}function ya(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function ga(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function va(e,t){return e.x===t.x&&e.y===t.y}function ba(e,t,r,n){return!!(va(e,t)&&va(r,n)||va(e,n)&&va(r,t))||ga(e,t,r)>0!=ga(e,t,n)>0&&ga(r,n,e)>0!=ga(r,n,t)>0}function _a(e,t){return ga(e.prev,e,e.next)<0?ga(e,t,e.next)>=0&&ga(e,e.prev,t)>=0:ga(e,t,e.prev)<0||ga(e,e.next,t)<0}function xa(e,t){var r=new Sa(e.i,e.x,e.y),n=new Sa(t.i,t.x,t.y),i=e.next,a=t.prev;return(e.next=t).prev=e,(r.next=i).prev=r,(n.next=r).prev=n,(a.next=n).prev=a,n}function wa(e,t,r,n){var i=new Sa(e,t,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function Da(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sa(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ra(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}ia.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(Ra(e,0,a,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;o-=Math.abs(Ra(e,u,c,r))}var p=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,f=n[s+2]*r;p+=Math.abs((e[h]-e[f])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[f+1]-e[h+1]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},ia.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},ra.default=na;var Pa=t((function(e,t){e.exports=(function(){function f(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function a(e,t){return e<t?-1:e>t?1:0}return function(e,t,r,n,i){!(function e(t,r,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,s=r-n+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);e(t,r,Math.max(n,Math.floor(r-s*u/o+c)),Math.min(i,Math.floor(r+(o-s)*u/o+c)),a)}var p=t[r],h=n,d=i;for(f(t,n,r),a(t[i],p)>0&&f(t,n,i);h<d;){for(f(t,h,d),h++,d--;a(t[h],p)<0;)h++;for(;a(t[d],p)>0;)d--}0===a(t[n],p)?f(t,n,d):f(t,++d,i),d<=r&&(n=d+1),r<=d&&(i=d-1)}})(e,t,r||0,n||e.length-1,i||a)}})()}));function Ea(e,t){var r=e.length;if(r<=1)return[e];for(var n,i,a=[],o=0;o<r;o++){var s=w(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(n&&a.push(n),n=[e[o]]):n.push(e[o]))}if(n&&a.push(n),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(Pa(a[l],t,1,a[l].length-1,Aa),a[l]=a[l].slice(0,t));return a}function Aa(e,t){return t.area-e.area}function Ma(e,t,r){for(var n=r.patternDependencies,i=!1,a=0,o=t;a<o.length;a+=1){var s=o[a].paint.get(e+"-pattern");s.isConstant()||(i=!0);var l=s.constantOr(null);l&&(i=!0,n[l.to]=!0,n[l.from]=!0)}return i}function Ia(e,t,r,n,i){for(var a=i.patternDependencies,o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.paint.get(e+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},r,{}),p=u.evaluate({zoom:n},r,{}),h=u.evaluate({zoom:n+1},r,{});a[c]=!0,a[p]=!0,a[h]=!0,r.patterns[l.id]={min:c,mid:p,max:h}}}return r}var Oa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new an,this.indexArray=new xn,this.indexArray2=new wn,this.programConfigurations=new oi(ta,e.layers,e.zoom),this.segments=new Vn,this.segments2=new Vn};Oa.prototype.populate=function(e,t){this.features=[],this.hasPattern=Ma("fill",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var l=ci(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(Ia("fill",this.layers,u,this.zoom,t)):this.addFeature(u,l,o,{}),t.featureIndex.insert(a,l,o,s,this.index)}}},Oa.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},Oa.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,t)}},Oa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Oa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Oa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Oa.prototype.addFeature=function(e,t,r,n){for(var i=0,a=Ea(t,500);i<a.length;i+=1){for(var o=a[i],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],d=[],f=0,m=o;f<m.length;f+=1){var y=m[f];if(0!==y.length){y!==o[0]&&d.push(h.length/2);var g=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),v=g.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(v+y.length-1,v),h.push(y[0].x),h.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),h.push(y[b].x),h.push(y[b].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var _=ra(h,d),x=0;x<_.length;x+=3)this.indexArray.emplaceBack(p+_[x],p+_[x+1],p+_[x+2]);c.vertexLength+=s,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n)},wr("FillBucket",Oa,{omit:["layers","features"]});var Ca={paint:new Kr({"fill-antialias":new Wr(z.paint_fill["fill-antialias"]),"fill-opacity":new Yr(z.paint_fill["fill-opacity"]),"fill-color":new Yr(z.paint_fill["fill-color"]),"fill-outline-color":new Yr(z.paint_fill["fill-outline-color"]),"fill-translate":new Wr(z.paint_fill["fill-translate"]),"fill-translate-anchor":new Wr(z.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zr(z.paint_fill["fill-pattern"])})},Ta=(function(r){function e(e){r.call(this,e,Ca)}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.recalculate=function(e){r.prototype.recalculate.call(this,e);var t=this.paint._values["fill-outline-color"];"constant"===t.value.kind&&void 0===t.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(e){return new Oa(e)},e.prototype.queryRadius=function(){return Di(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,a,o){return fi(Si(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),n)},e})(Jr),ka=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),La=ka.members,Na=(ka.size,ka.alignment,Math.pow(2,13));function za(e,t,r,n,i,a,o,s){e.emplaceBack(t,r,2*Math.floor(n*Na)+o,i*Na*2,a*Na*2,Math.round(s))}var ja=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new sn,this.indexArray=new xn,this.programConfigurations=new oi(La,e.layers,e.zoom),this.segments=new Vn};ja.prototype.populate=function(e,t){this.features=[],this.hasPattern=Ma("fill-extrusion",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var l=ci(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(Ia("fill-extrusion",this.layers,u,this.zoom,t)):this.addFeature(u,l,o,{}),t.featureIndex.insert(a,l,o,s,this.index)}}},ja.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,t)}},ja.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},ja.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ja.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ja.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,La),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ja.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ja.prototype.addFeature=function(e,t,r,n){for(var i=0,a=Ea(t,500);i<a.length;i+=1){for(var o=a[i],s=0,l=0,u=o;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=o;p<h.length;p+=1){var d=h[p];if(0!==d.length&&!((T=d).every((function(e){return e.x<0}))||T.every((function(e){return e.x>li}))||T.every((function(e){return e.y<0}))||T.every((function(e){return e.y>li}))))for(var f=0,m=0;m<d.length;m++){var y=d[m];if(m>=1){var g=d[m-1];if(C=g,!((O=y).x===C.x&&(O.x<0||O.x>li)||O.y===C.y&&(O.y<0||O.y>li))){c.vertexLength+4>Vn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=y.sub(g)._perp()._unit(),b=g.dist(y);f+b>32768&&(f=0),za(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,f),za(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,f),f+=b,za(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,f),za(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,f);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>Vn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],D=c.vertexLength,S=0,R=o;S<R.length;S+=1){var P=R[S];if(0!==P.length){P!==o[0]&&w.push(x.length/2);for(var E=0;E<P.length;E++){var A=P[E];za(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),x.push(A.x),x.push(A.y)}}}for(var M=ra(x,w),I=0;I<M.length;I+=3)this.indexArray.emplaceBack(D+M[I],D+M[I+2],D+M[I+1]);c.primitiveLength+=M.length/3,c.vertexLength+=s}var O,C,T;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n)},wr("FillExtrusionBucket",ja,{omit:["layers","features"]});var Fa={paint:new Kr({"fill-extrusion-opacity":new Wr(z["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yr(z["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wr(z["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wr(z["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zr(z["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yr(z["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yr(z["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wr(z["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Va=(function(t){function e(e){t.call(this,e,Fa)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createBucket=function(e){return new ja(e)},e.prototype.queryRadius=function(){return Di(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,a,o){return fi(Si(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,o),n)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e})(Jr),Ga=rn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ba=Ga.members,Ua=(Ga.size,Ga.alignment,Ha);function Ha(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(qa,this,t)}function qa(e,t,r){1==e?t.id=r.readVarint():2==e?(function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}})(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Wa(e){for(var t,r,n=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],n+=((r=e[o]).x-t.x)*(t.y+r.y);return n}Ha.types=["Unknown","Point","LineString","Polygon"],Ha.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new y(a,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Ha.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(n<=0){var c=e.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,u]},Ha.prototype.toGeoJSON=function(e,t,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=Ha.types[this.type];function c(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+s)/a;e[t]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];c(l=p);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=(function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],a=0;a<t;a++){var o=Wa(e[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&i.push(r),r=[e[a]]):r.push(e[a]))}return r&&i.push(r),i})(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Ya=Za;function Za(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Xa,this,t),this.length=this._features.length}function Xa(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}function $a(e,t,r){if(3===e){var n=new Ya(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}Za.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ua(this._pbf,t,this.extent,this._keys,this._values)};var Ka={VectorTile:function(e,t){this.layers=e.readFields($a,{},t)},VectorTileFeature:Ua,VectorTileLayer:Ya},Ja=Ka.VectorTileFeature.types,Qa=Math.cos(Math.PI/180*37.5),eo=Math.pow(2,14)/.5;function to(e,t,r,n,i,a,o){e.emplaceBack(t.x,t.y,n?1:0,i?1:-1,Math.round(63*r.x)+128,Math.round(63*r.y)+128,1+(0===a?0:a<0?-1:1)|(.5*o&63)<<2,.5*o>>6)}var ro=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new ln,this.indexArray=new xn,this.programConfigurations=new oi(Ba,e.layers,e.zoom),this.segments=new Vn};function no(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(eo-1)}ro.prototype.populate=function(e,t){this.features=[],this.hasPattern=Ma("line",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new zr(this.zoom),a)){var l=ci(a),u={sourceLayerIndex:s,index:o,geometry:l,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(u.id=a.id),this.hasPattern?this.features.push(Ia("line",this.layers,u,this.zoom,t)):this.addFeature(u,l,o,{}),t.featureIndex.insert(a,l,o,s,this.index)}}},ro.prototype.update=function(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)},ro.prototype.addFeatures=function(e,t){for(var r=0,n=this.features;r<n.length;r+=1){var i=n[r],a=i.geometry;this.addFeature(i,a,i.index,t)}},ro.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ro.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ba),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ro.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ro.prototype.addFeature=function(e,t,r,n){for(var i=this.layers[0].layout,a=i.get("line-join").evaluate(e,{}),o=i.get("line-cap"),s=i.get("line-miter-limit"),l=i.get("line-round-limit"),u=0,c=t;u<c.length;u+=1){var p=c[u];this.addLine(p,e,a,o,s,l,r,n)}},ro.prototype.addLine=function(e,t,r,n,i,a,o,s){var l=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===Ja[t.type],c=e.length;c>=2&&e[c-1].equals(e[c-2]);)c--;for(var p=0;p<c-1&&e[p].equals(e[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=(function(e,t,r){for(var n,i,a=0,o=p;o<r-1;o++)n=e[o],i=e[o+1],a+=n.dist(i);return a})(e,0,c)),"bevel"===r&&(i=1.05);var h,d,f,m=li/(512*this.overscaling)*15,y=e[p],g=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),v=n,b=u?"butt":n,_=!(this.distance=0),x=void 0,w=void 0,D=void 0,S=void 0;this.e1=this.e2=this.e3=-1,u&&(h=e[c-2],S=y.sub(h)._unit()._perp());for(var R=p;R<c;R++)if(!(w=u&&R===c-1?e[p+1]:e[R+1])||!e[R].equals(w)){S&&(D=S),h&&(x=h),h=e[R],S=w?w.sub(h)._unit()._perp():D;var P=(D=D||S).add(S);0===P.x&&0===P.y||P._unit();var E=P.x*S.x+P.y*S.y,A=0!==E?1/E:1/0,M=E<Qa&&x&&w;if(M&&R>p){var I=h.dist(x);if(I>2*m){var O=h.sub(h.sub(x)._mult(m/I)._round());this.distance+=O.dist(x),this.addCurrentVertex(O,this.distance,D.mult(1),0,0,!1,g,l),x=O}}var C=x&&w,T=C?r:w?v:b;if(C&&"round"===T&&(A<a?T="miter":A<=2&&(T="fakeround")),"miter"===T&&A>i&&(T="bevel"),"bevel"===T&&(A>2&&(T="flipbevel"),A<i&&(T="miter")),x&&(this.distance+=h.dist(x)),"miter"===T)P._mult(A),this.addCurrentVertex(h,this.distance,P,0,0,!1,g,l);else if("flipbevel"===T){if(A>100)P=S.clone().mult(-1);else{var k=D.x*S.y-D.y*S.x>0?-1:1,L=A*D.add(S).mag()/D.sub(S).mag();P._perp()._mult(L*k)}this.addCurrentVertex(h,this.distance,P,0,0,!1,g,l),this.addCurrentVertex(h,this.distance,P.mult(-1),0,0,!1,g,l)}else if("bevel"===T||"fakeround"===T){var N=D.x*S.y-D.y*S.x>0,z=-Math.sqrt(A*A-1);if(N?(f=0,d=z):(d=0,f=z),_||this.addCurrentVertex(h,this.distance,D,d,f,!1,g,l),"fakeround"===T){for(var j=Math.floor(8*(.5-(E-.5))),F=void 0,V=0;V<j;V++)F=S.mult((V+1)/(j+1))._add(D)._unit(),this.addPieSliceVertex(h,this.distance,F,N,g,l);this.addPieSliceVertex(h,this.distance,P,N,g,l);for(var G=j-1;G>=0;G--)F=D.mult((G+1)/(j+1))._add(S)._unit(),this.addPieSliceVertex(h,this.distance,F,N,g,l)}w&&this.addCurrentVertex(h,this.distance,S,-d,-f,!1,g,l)}else"butt"===T?(_||this.addCurrentVertex(h,this.distance,D,0,0,!1,g,l),w&&this.addCurrentVertex(h,this.distance,S,0,0,!1,g,l)):"square"===T?(_||(this.addCurrentVertex(h,this.distance,D,1,1,!1,g,l),this.e1=this.e2=-1),w&&this.addCurrentVertex(h,this.distance,S,-1,-1,!1,g,l)):"round"===T&&(_||(this.addCurrentVertex(h,this.distance,D,0,0,!1,g,l),this.addCurrentVertex(h,this.distance,D,1,1,!0,g,l),this.e1=this.e2=-1),w&&(this.addCurrentVertex(h,this.distance,S,-1,-1,!0,g,l),this.addCurrentVertex(h,this.distance,S,0,0,!1,g,l)));if(M&&R<c-1){var B=h.dist(w);if(B>2*m){var U=h.add(w.sub(h)._mult(m/B)._round());this.distance+=U.dist(h),this.addCurrentVertex(U,this.distance,S.mult(1),0,0,!1,g,l),h=U}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,s)}},ro.prototype.addCurrentVertex=function(e,t,r,n,i,a,o,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(t=no(t,s)),l=r.clone(),n&&l._sub(r.perp()._mult(n)),to(u,e,l,a,!1,n,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=r.mult(-1),i&&l._sub(r.perp()._mult(i)),to(u,e,l,a,!0,-i,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>eo/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,r,n,i,a,o))},ro.prototype.addPieSliceVertex=function(e,t,r,n,i,a){r=r.mult(n?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(t=no(t,a)),to(o,e,r,!1,n,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},wr("LineBucket",ro,{omit:["layers","features"]});var io=new Kr({"line-cap":new Wr(z.layout_line["line-cap"]),"line-join":new Yr(z.layout_line["line-join"]),"line-miter-limit":new Wr(z.layout_line["line-miter-limit"]),"line-round-limit":new Wr(z.layout_line["line-round-limit"])}),ao={paint:new Kr({"line-opacity":new Yr(z.paint_line["line-opacity"]),"line-color":new Yr(z.paint_line["line-color"]),"line-translate":new Wr(z.paint_line["line-translate"]),"line-translate-anchor":new Wr(z.paint_line["line-translate-anchor"]),"line-width":new Yr(z.paint_line["line-width"]),"line-gap-width":new Yr(z.paint_line["line-gap-width"]),"line-offset":new Yr(z.paint_line["line-offset"]),"line-blur":new Yr(z.paint_line["line-blur"]),"line-dasharray":new Xr(z.paint_line["line-dasharray"]),"line-pattern":new Zr(z.paint_line["line-pattern"]),"line-gradient":new $r(z.paint_line["line-gradient"])}),layout:io},oo=new(function(i){function e(){i.apply(this,arguments)}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.possiblyEvaluate=function(e,t){return t=new zr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),i.prototype.possiblyEvaluate.call(this,e,t)},e.prototype.evaluate=function(e,t,r,n){return t=l({},t,{zoom:Math.floor(t.zoom)}),i.prototype.evaluate.call(this,e,t,r,n)},e}(Yr))(ao.paint.properties["line-width"].specification);oo.useIntegerZoom=!0;var so=(function(t){function e(e){t.call(this,e,ao)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},e.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=$i(e,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=oo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(e){return new ro(e)},e.prototype.queryRadius=function(e){var t=e,r=lo(wi("line-width",this,t),wi("line-gap-width",this,t)),n=wi("line-offset",this,t);return r/2+Math.abs(n)+Di(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(e,t,r,n,i,a,o){var s=Si(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,o),l=o/2*lo(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),u=this.paint.get("line-offset").evaluate(t,r);return u&&(n=(function(e,t){for(var r=[],n=new y(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var l=a[s-1],u=a[s],c=a[s+1],p=0===s?n:u.sub(l)._unit()._perp(),h=s===a.length-1?n:c.sub(u)._unit()._perp(),d=p._add(h)._unit(),f=d.x*h.x+d.y*h.y;d._mult(1/f),o.push(d._mult(t)._add(u))}r.push(o)}return r})(n,u*o)),mi(s,n,l)},e})(Jr);function lo(e,t){return t>0?t+2*e:e}var uo=rn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),co=rn([{name:"a_projected_pos",components:3,type:"Float32"}],4),po=(rn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),rn([{name:"a_placed",components:2,type:"Uint8"}],4)),ho=(rn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),fo=rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function mo(e,i,a){return e.sections.forEach((function(e){var t,r,n;e.text=(t=e.text,r=a,"uppercase"===(n=i.layout.get("text-transform").evaluate(r,{}))?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),Nr.applyArabicShaping&&(t=Nr.applyArabicShaping(t)),t)})),e}rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),rn([{type:"Float32",name:"offsetX"}]),rn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yo={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},go=(function(i){function e(e,t,r,n){i.call(this,e,t),this.angle=r,void 0!==n&&(this.segment=n)}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e})(y);wr("Anchor",go);function vo(e,t){var r=t.expression;if("constant"===r.kind)return{functionType:"constant",layoutSize:r.evaluate(new zr(e+1))};if("source"===r.kind)return{functionType:"source"};for(var n=r.zoomStops,i=0;i<n.length&&n[i]<=e;)i++;for(var a=i=Math.max(0,i-1);a<n.length&&n[a]<e+1;)a++;a=Math.min(n.length-1,a);var o={min:n[i],max:n[a]};return"composite"===r.kind?{functionType:"composite",zoomRange:o,propertyValue:t.value}:{functionType:"camera",layoutSize:r.evaluate(new zr(e+1)),zoomRange:o,sizeRange:{min:r.evaluate(new zr(o.min)),max:r.evaluate(new zr(o.max))},propertyValue:t.value}}var bo=Ka.VectorTileFeature.types,_o=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xo(e,t,r,n,i,a,o,s){e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0)}function wo(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}var Do=function(e){this.layoutVertexArray=new cn,this.indexArray=new xn,this.programConfigurations=e,this.segments=new Vn,this.dynamicLayoutVertexArray=new pn,this.opacityVertexArray=new hn,this.placedSymbolArray=new Mn};Do.prototype.upload=function(e,t,r,n){r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,uo.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,co.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,_o,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e)},Do.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wr("SymbolBuffers",Do);var So=function(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new Vn,this.collisionVertexArray=new mn};So.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,po.members,!0)},So.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wr("CollisionBuffers",So);var Ro=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vo(this.zoom,t["text-size"]),this.iconSizeData=vo(this.zoom,t["icon-size"]);var r=this.layers[0].layout,n="viewport-y"===r.get("symbol-z-order");this.sortFeaturesByY=n&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),this.sourceID=e.sourceID};Ro.prototype.createArrays=function(){this.text=new Do(new oi(uo.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Do(new oi(uo.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new So(fn,ho.members,wn),this.collisionCircle=new So(fn,fo.members,xn),this.glyphOffsetArray=new Tn,this.lineVertexArray=new Ln,this.symbolInstances=new On},Ro.prototype.calculateGlyphDependencies=function(e,t,r,n){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,r&&n){var a=yo[e.charAt(i)];a&&(t[a.charCodeAt(0)]=!0)}},Ro.prototype.populate=function(e,t){var r=this.layers[0],n=r.layout,i=n.get("text-font"),a=n.get("text-field"),o=n.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),l="constant"!==o.value.kind||o.value.value&&o.value.value.length>0;if(this.features=[],s||l){for(var u=t.iconDependencies,c=t.glyphDependencies,p=new zr(this.zoom),h=0,d=e;h<d.length;h+=1){var f=d[h],m=f.feature,y=f.index,g=f.sourceLayerIndex;if(r._featureFilter(p,m)){var v=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",m);v=mo(b instanceof le?b:le.fromString(b),r,m)}var _=void 0;if(l&&(_=r.getValueAndResolveTokens("icon-image",m)),v||_){var x={text:v,icon:_,index:y,sourceLayerIndex:g,geometry:ci(m),properties:m.properties,type:bo[m.type]};if(void 0!==m.id&&(x.id=m.id),this.features.push(x),_&&(u[_]=!0),v)for(var w=i.evaluate(m,{}).join(","),D="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),S=0,R=v.sections;S<R.length;S+=1){var P=R[S],E=Ar(v.toString()),A=P.fontStack||w,M=c[A]=c[A]||{};this.calculateGlyphDependencies(P.text,M,D,E)}}}}"line"===n.get("symbol-placement")&&(this.features=(function(t){var i={},a={},o=[],r=0;function e(e){o.push(t[e]),r++}function n(e,t,r){var n=a[e];return delete a[e],a[t]=n,o[n].geometry[0].pop(),o[n].geometry[0]=o[n].geometry[0].concat(r[0]),n}function s(e,t,r){var n=i[t];return delete i[t],i[e]=n,o[n].geometry[0].shift(),o[n].geometry[0]=r[0].concat(o[n].geometry[0]),n}function l(e,t,r){var n=r?t[0][t[0].length-1]:t[0][0];return e+":"+n.x+":"+n.y}for(var u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text?c.text.toString():null;if(h){var d=l(h,p),f=l(h,p,!0);if(d in a&&f in i&&a[d]!==i[f]){var m=s(d,f,p),y=n(d,f,o[m].geometry);delete i[d],delete a[f],a[l(h,o[y].geometry,!0)]=y,o[m].geometry=null}else d in a?n(d,f,p):f in i?s(d,f,p):(e(u),i[d]=r-1,a[f]=r-1)}else e(u)}return o.filter((function(e){return e.geometry}))})(this.features))}},Ro.prototype.update=function(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))},Ro.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Ro.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ro.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ro.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Ro.prototype.addToLineVertexArray=function(e,t){var r=this.lineVertexArray.length;if(void 0!==e.segment){for(var n=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},Ro.prototype.addSymbols=function(e,t,r,n,i,a,o,s,l,u){for(var c=e.indexArray,p=e.layoutVertexArray,h=e.dynamicLayoutVertexArray,d=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),f=this.glyphOffsetArray.length,m=d.vertexLength,y=0,g=t;y<g.length;y+=1){var v=g[y],b=v.tl,_=v.tr,x=v.bl,w=v.br,D=v.tex,S=d.vertexLength,R=v.glyphOffset[1];xo(p,s.x,s.y,b.x,R+b.y,D.x,D.y,r),xo(p,s.x,s.y,_.x,R+_.y,D.x+D.w,D.y,r),xo(p,s.x,s.y,x.x,R+x.y,D.x,D.y+D.h,r),xo(p,s.x,s.y,w.x,R+w.y,D.x+D.w,D.y+D.h,r),wo(h,s,0),c.emplaceBack(S,S+1,S+2),c.emplaceBack(S+1,S+2,S+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,f,this.glyphOffsetArray.length-f,m,l,u,s.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,a,a.index,{})},Ro.prototype._addCollisionDebugVertex=function(e,t,r,n,i,a){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))},Ro.prototype.addCollisionDebugVertices=function(e,t,r,n,i,a,o,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=o.anchorX,d=o.anchorY;if(this._addCollisionDebugVertex(c,p,a,h,d,new y(e,t)),this._addCollisionDebugVertex(c,p,a,h,d,new y(r,t)),this._addCollisionDebugVertex(c,p,a,h,d,new y(r,n)),this._addCollisionDebugVertex(c,p,a,h,d,new y(e,n)),l.vertexLength+=4,s){var f=i.indexArray;f.emplaceBack(u,u+1,u+2),f.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var m=i.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}},Ro.prototype.addDebugCollisionBoxes=function(e,t,r){for(var n=e;n<t;n++){var i=this.collisionBoxArray.get(n),a=i.x1,o=i.y1,s=i.x2,l=i.y2,u=i.radius>0;this.addCollisionDebugVertices(a,o,s,l,u?this.collisionCircle:this.collisionBox,i.anchorPoint,r,u)}},Ro.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},Ro.prototype._deserializeCollisionBoxesForSymbol=function(e,t,r,n,i){for(var a={},o=t;o<r;o++){var s=e.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=n;l<i;l++){var u=e.get(l);if(0===u.radius){a.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},a.iconFeatureIndex=u.featureIndex;break}}return a},Ro.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex))}},Ro.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ro.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ro.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Ro.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Ro.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),r=t.vertexStartIndex+4*t.numGlyphs,n=t.vertexStartIndex;n<r;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Ro.prototype.sortFeatures=function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var t=[],r=0;r<this.symbolInstances.length;r++)t.push(r);for(var n=Math.sin(e),i=Math.cos(e),a=[],o=[],s=0;s<this.symbolInstances.length;s++){var l=this.symbolInstances.get(s);a.push(0|Math.round(n*l.anchorX+i*l.anchorY)),o.push(l.featureIndex)}t.sort((function(e,t){return a[e]-a[t]||o[t]-o[e]})),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,c=t;u<c.length;u+=1){var p=c[u],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(p);if(d.numGlyphs){var f=d.vertexStartIndex;this.icon.indexArray.emplaceBack(f,f+1,f+2),this.icon.indexArray.emplaceBack(f+1,f+2,f+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wr("SymbolBucket",Ro,{omit:["layers","collisionBoxArray","features","compareText"]}),Ro.MAX_GLYPHS=65535,Ro.addDynamicAttributes=wo;var Po=new Kr({"symbol-placement":new Wr(z.layout_symbol["symbol-placement"]),"symbol-spacing":new Wr(z.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wr(z.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new Wr(z.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wr(z.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wr(z.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wr(z.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wr(z.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yr(z.layout_symbol["icon-size"]),"icon-text-fit":new Wr(z.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wr(z.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yr(z.layout_symbol["icon-image"]),"icon-rotate":new Yr(z.layout_symbol["icon-rotate"]),"icon-padding":new Wr(z.layout_symbol["icon-padding"]),"icon-keep-upright":new Wr(z.layout_symbol["icon-keep-upright"]),"icon-offset":new Yr(z.layout_symbol["icon-offset"]),"icon-anchor":new Yr(z.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wr(z.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wr(z.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wr(z.layout_symbol["text-rotation-alignment"]),"text-field":new Yr(z.layout_symbol["text-field"]),"text-font":new Yr(z.layout_symbol["text-font"]),"text-size":new Yr(z.layout_symbol["text-size"]),"text-max-width":new Yr(z.layout_symbol["text-max-width"]),"text-line-height":new Wr(z.layout_symbol["text-line-height"]),"text-letter-spacing":new Yr(z.layout_symbol["text-letter-spacing"]),"text-justify":new Yr(z.layout_symbol["text-justify"]),"text-anchor":new Yr(z.layout_symbol["text-anchor"]),"text-max-angle":new Wr(z.layout_symbol["text-max-angle"]),"text-rotate":new Yr(z.layout_symbol["text-rotate"]),"text-padding":new Wr(z.layout_symbol["text-padding"]),"text-keep-upright":new Wr(z.layout_symbol["text-keep-upright"]),"text-transform":new Yr(z.layout_symbol["text-transform"]),"text-offset":new Yr(z.layout_symbol["text-offset"]),"text-allow-overlap":new Wr(z.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wr(z.layout_symbol["text-ignore-placement"]),"text-optional":new Wr(z.layout_symbol["text-optional"])}),Eo={paint:new Kr({"icon-opacity":new Yr(z.paint_symbol["icon-opacity"]),"icon-color":new Yr(z.paint_symbol["icon-color"]),"icon-halo-color":new Yr(z.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yr(z.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yr(z.paint_symbol["icon-halo-blur"]),"icon-translate":new Wr(z.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wr(z.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yr(z.paint_symbol["text-opacity"]),"text-color":new Yr(z.paint_symbol["text-color"]),"text-halo-color":new Yr(z.paint_symbol["text-halo-color"]),"text-halo-width":new Yr(z.paint_symbol["text-halo-width"]),"text-halo-blur":new Yr(z.paint_symbol["text-halo-blur"]),"text-translate":new Wr(z.paint_symbol["text-translate"]),"text-translate-anchor":new Wr(z.paint_symbol["text-translate-anchor"])}),layout:Po},Ao=(function(t){function e(e){t.call(this,e,Eo)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(e,t){var r,n=this.layout.get(e).evaluate(t,{}),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||It(i.value)?n:(r=t.properties,n.replace(/{([^{}]+)}/g,(function(e,t){return t in r?String(r[t]):""})))},e.prototype.createBucket=function(e){return new Ro(e)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e})(Jr),Mo={paint:new Kr({"background-color":new Wr(z.paint_background["background-color"]),"background-pattern":new Xr(z.paint_background["background-pattern"]),"background-opacity":new Wr(z.paint_background["background-opacity"])})},Io=(function(t){function e(e){t.call(this,e,Mo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e})(Jr),Oo={paint:new Kr({"raster-opacity":new Wr(z.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wr(z.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wr(z.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wr(z.paint_raster["raster-brightness-max"]),"raster-saturation":new Wr(z.paint_raster["raster-saturation"]),"raster-contrast":new Wr(z.paint_raster["raster-contrast"]),"raster-resampling":new Wr(z.paint_raster["raster-resampling"]),"raster-fade-duration":new Wr(z.paint_raster["raster-fade-duration"])})},Co=(function(t){function e(e){t.call(this,e,Oo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e})(Jr),To=(function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},e.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e)},e})(Jr),ko={circle:Gi,heatmap:Ki,hillshade:Qi,fill:Ta,"fill-extrusion":Va,line:so,symbol:Ao,background:Io,raster:Co};function Lo(e){for(var t=0,r=0,n=0,i=e;n<i.length;n+=1){var a=i[n];t+=a.w*a.h,r=Math.max(r,a.w)}e.sort((function(e,t){return t.h-e.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],h=o.length-1;h>=0;h--){var d=o[h];if(!(p.w>d.w||p.h>d.h)){if(p.x=d.x,p.y=d.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===d.w&&p.h===d.h){var f=o.pop();h<o.length&&(o[h]=f)}else p.h===d.h?(d.x+=p.w,d.w-=p.w):(p.w===d.w||o.push({x:d.x+p.w,y:d.y,w:d.w-p.w,h:p.h}),d.y+=p.h,d.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}var No=function(e,t){var r=t.pixelRatio;this.paddedRect=e,this.pixelRatio=r},zo={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zo.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zo.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zo.tlbr.get=function(){return this.tl.concat(this.br)},zo.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(No.prototype,zo);var jo=function(e,t){var r={},n={},i=[];for(var a in e){var o=e[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),r[a]=new No(s,o)}for(var l in t){var u=t[l],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};i.push(c),n[l]=new No(c,u)}var p=Lo(i),h=p.w,d=p.h,f=new Zi({width:h||1,height:d||1});for(var m in e){var y=e[m],g=r[m].paddedRect;Zi.copy(y.data,f,{x:0,y:0},{x:g.x+1,y:g.y+1},y.data)}for(var v in t){var b=t[v],_=n[v].paddedRect,x=_.x+1,w=_.y+1,D=b.data.width,S=b.data.height;Zi.copy(b.data,f,{x:0,y:0},{x:x,y:w},b.data),Zi.copy(b.data,f,{x:0,y:S-1},{x:x,y:w-1},{width:D,height:1}),Zi.copy(b.data,f,{x:0,y:0},{x:x,y:w+S},{width:D,height:1}),Zi.copy(b.data,f,{x:D-1,y:0},{x:x-1,y:w},{width:1,height:S}),Zi.copy(b.data,f,{x:0,y:0},{x:x+D,y:w},{width:1,height:S})}this.image=f,this.iconPositions=r,this.patternPositions=n};wr("ImagePosition",No),wr("ImageAtlas",jo);var Fo=self.HTMLImageElement,Vo=self.HTMLCanvasElement,Go=self.HTMLVideoElement,Bo=self.ImageData,Uo=function(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)};Uo.prototype.update=function(e,t){var r=e.width,n=e.height,i=!this.size||this.size[0]!==r||this.size[1]!==n,a=this.context,o=a.gl;this.useMipmap=Boolean(t&&t.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),i?(this.size=[r,n],e instanceof Fo||e instanceof Vo||e instanceof Go||e instanceof Bo?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,e.data)):e instanceof Fo||e instanceof Vo||e instanceof Go||e instanceof Bo?o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,n,o.RGBA,o.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},Uo.prototype.bind=function(e,t,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)},Uo.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Uo.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ho=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,h=r?-1:1,d=e[t+p];for(p+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+p],p+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+p],p+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},qo=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=c?(s=0,o=c):o+p>=1?(s=(t*l-1)*Math.pow(2,i),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=f,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=f,o/=256,u-=8);e[r+d-f]|=128*m},Wo=Yo;function Yo(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function Zo(e){return e.type===Yo.Bytes?e.readVarint()+e.pos:e.pos+1}function Xo(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function $o(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function Ko(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function Jo(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function Qo(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function es(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function ts(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function rs(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function ns(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function is(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function as(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function os(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function ss(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function ls(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Yo.Varint=0,Yo.Fixed64=1,Yo.Bytes=2,Yo.Fixed32=5,Yo.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,e(i,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=os(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ls(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=os(this.buf,this.pos)+4294967296*os(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=os(this.buf,this.pos)+4294967296*ls(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ho(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ho(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:(function(e,t,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return Xo(e,n,t);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return Xo(e,n,t);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return Xo(e,n,t);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return Xo(e,n,t);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return Xo(e,n,t);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return Xo(e,n,t);throw new Error("Expected varint not more than 10 bytes")})(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=(function(e,t,r){for(var n="",i=t;i<r;){var a,o,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n})(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=Zo(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=Zo(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Yo.Varint)for(;this.buf[this.pos++]>127;);else if(t===Yo.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Yo.Fixed32)this.pos+=4;else{if(t!==Yo.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),ss(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),ss(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),ss(this.buf,-1&e,this.pos),ss(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),ss(this.buf,-1&e,this.pos),ss(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?(function(e,t){var r,n,i,a,o,s,l;if(u>=0?(r=u%4294967296|0,n=u/4294967296|0):(n=~(-u/4294967296),4294967295^(r=~(-u%4294967296))?r=r+1|0:n=n+1|(r=0)),u>=0x10000000000000000||u<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),s=r,(l=t).buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos]=127&s,o=(7&(i=n))<<4,(a=t).buf[a.pos++]|=o|((i>>>=3)?128:0),i&&(a.buf[a.pos++]=127&i|((i>>>=7)?128:0),i&&(a.buf[a.pos++]=127&i|((i>>>=7)?128:0),i&&(a.buf[a.pos++]=127&i|((i>>>=7)?128:0),i&&(a.buf[a.pos++]=127&i|((i>>>=7)?128:0),i&&(a.buf[a.pos++]=127&i)))))})(0,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=(function(e,t,r){for(var n,i,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);e[r++]=n<128?n:(e[r++]=n<2048?n>>6|192:(e[r++]=n<65536?n>>12|224:(e[r++]=n>>18|240,n>>12&63|128),n>>6&63|128),63&n|128)}return r})(this.buf,e,this.pos);var r=this.pos-t;r>=128&&$o(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),qo(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),qo(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&$o(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Yo.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,Ko,t)},writePackedSVarint:function(e,t){this.writeMessage(e,Jo,t)},writePackedBoolean:function(e,t){this.writeMessage(e,ts,t)},writePackedFloat:function(e,t){this.writeMessage(e,Qo,t)},writePackedDouble:function(e,t){this.writeMessage(e,es,t)},writePackedFixed32:function(e,t){this.writeMessage(e,rs,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,ns,t)},writePackedFixed64:function(e,t){this.writeMessage(e,is,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,as,t)},writeBytesField:function(e,t){this.writeTag(e,Yo.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Yo.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Yo.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Yo.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Yo.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Yo.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Yo.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Yo.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Yo.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Yo.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var us=3;function cs(e,t,r){1===e&&r.readMessage(ps,t)}function ps(e,t,r){if(3===e){var n=r.readMessage(hs,{}),i=n.id,a=n.bitmap,o=n.width,s=n.height,l=n.left,u=n.top,c=n.advance;t.push({id:i,bitmap:new Yi({width:o+2*us,height:s+2*us},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}}function hs(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}var ds=us,fs=function(e,t,r){this.target=e,this.parent=t,this.mapId=r,this.callbacks={},this.callbackID=0,p(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function ms(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}fs.prototype.send=function(e,t,r,n){var i=r?this.mapId+":"+this.callbackID++:null;r&&(this.callbacks[i]=r);var a=[];this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:e,id:String(i),data:Sr(t,a)},a)},fs.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var a=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?Sr(e):null,data:Sr(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(Rr(r.error)):t&&t(null,Rr(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,Rr(r.data),a);else if(void 0!==r.id&&this.parent.getWorkerSource){var o=r.type.split("."),s=Rr(r.data);this.parent.getWorkerSource(r.sourceMapId,o[0],s.source)[o[1]](s,a)}else this.parent[r.type](Rr(r.data))}},fs.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var ys=function(e,t,r){this.z=e,this.x=t,this.y=r,this.key=bs(0,e,t,r)};ys.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ys.prototype.url=function(e,t){var r,n,i,a,o,s=(r=this.x,n=this.y,i=this.z,a=ms(256*r,256*(n=Math.pow(2,i)-n-1),i),o=ms(256*(r+1),256*(n+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),l=(function(e,t,r){for(var n,i="",a=e;a>0;a--)i+=(t&(n=1<<a-1)?1:0)+(r&n?2:0);return i})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)};var gs=function(e,t){this.wrap=e,this.canonical=t,this.key=bs(e,t.z,t.x,t.y)},vs=function(e,t,r,n,i){this.overscaledZ=e,this.wrap=t,this.canonical=new ys(r,+n,+i),this.key=bs(t,e,n,i)};function bs(e,t,r,n){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*n+r)+t}vs.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},vs.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new vs(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vs(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},vs.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},vs.prototype.children=function(e){if(this.overscaledZ>=e)return[new vs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new vs(t,this.wrap,t,r,n),new vs(t,this.wrap,t,r+1,n),new vs(t,this.wrap,t,r,n+1),new vs(t,this.wrap,t,r+1,n+1)]},vs.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},vs.prototype.wrapped=function(){return new vs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},vs.prototype.unwrapTo=function(e){return new vs(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},vs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},vs.prototype.toUnwrapped=function(){return new gs(this.wrap,this.canonical)},vs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},vs.prototype.toCoordinate=function(){return new c(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},wr("CanonicalTileID",ys),wr("OverscaledTileID",vs,{omit:["posMatrix"]});var _s=function(e,t,r){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return _('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=t.height;this.border=Math.max(Math.ceil(t.height/2),1),this.stride=this.dim+2*this.border,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,a="terrarium"===r?this._unpackTerrarium:this._unpackMapbox,o=0;o<n;o++)for(var s=0;s<n;s++){var l=4*(o*n+s);this.set(s,o,a(i[l],i[l+1],i[l+2]))}for(var u=0;u<n;u++)this.set(-1,u,this.get(0,u)),this.set(n,u,this.get(n-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,n,this.get(u,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))};_s.prototype.set=function(e,t,r){this.data[this._idx(e,t)]=r+65536},_s.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},_s.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},_s.prototype._unpackMapbox=function(e,t,r){return(256*e*256+256*t+r)/10-1e4},_s.prototype._unpackTerrarium=function(e,t,r){return 256*e+t+r/256-32768},_s.prototype.getPixels=function(){return new Zi({width:this.dim+2*this.border,height:this.dim+2*this.border},new Uint8Array(this.data.buffer))},_s.prototype.backfillBorder=function(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var n=t*this.dim,i=t*this.dim+this.dim,a=r*this.dim,o=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=o-1;break;case 1:o=a+1}for(var s=m(n,-this.border,this.dim+this.border),l=m(i,-this.border,this.dim+this.border),u=m(a,-this.border,this.dim+this.border),c=m(o,-this.border,this.dim+this.border),p=-t*this.dim,h=-r*this.dim,d=u;d<c;d++)for(var f=s;f<l;f++)this.set(f,d,e.get(f+p,d+h))},wr("DEMData",_s);var xs=rn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ws=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}};ws.prototype.encode=function(e){return this._stringToNumber[e]},ws.prototype.decode=function(e){return this._numberToString[e]};var Ds=function(e,t,r,n){this.type="Feature",(this._vectorTileFeature=e)._z=t,e._x=r,e._y=n,this.properties=e.properties,null!=e.id&&(this.id=e.id)},Ss={geometry:{configurable:!0}};Ss.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ss.geometry.set=function(e){this._geometry=e},Ds.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Ds.prototype,Ss);var Rs=function(){this.state={},this.stateChanges={}};Rs.prototype.updateState=function(e,t,r){var n=String(t);this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},l(this.stateChanges[e][n],r)},Rs.prototype.getState=function(e,t){var r=String(t),n=this.state[e]||{},i=this.stateChanges[e]||{};return l({},n[r],i[r])},Rs.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Rs.prototype.coalesceChanges=function(e,t){var r={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var i={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),l(this.state[n][a],this.stateChanges[n][a]),i[a]=this.state[n][a];r[n]=i}if(this.stateChanges={},0!==Object.keys(r).length)for(var o in e)e[o].setFeatureState(r,t)};var Ps=function(e,t,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new gr(li,16,0),this.featureIndexArray=r||new zn};function Es(e,t){return t-e}Ps.prototype.insert=function(e,t,r,n,i){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);for(var o=0;o<t.length;o++){for(var s=t[o],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}l[0]<li&&l[1]<li&&l[2]>=0&&l[3]>=0&&this.grid.insert(a,l[0],l[1],l[2],l[3])}},Ps.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ka.VectorTile(new Wo(this.rawTileData)).layers,this.sourceLayerCoder=new ws(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ps.prototype.query=function(i,a,o){var s=this;this.loadVTLayers();for(var l=i.params||{},u=li/i.tileSize/i.scale,c=qt(l.filter),p=i.queryGeometry,e=i.queryPadding*u,t=1/0,r=1/0,n=-1/0,h=-1/0,d=0;d<p.length;d++)for(var f=p[d],m=0;m<f.length;m++){var y=f[m];t=Math.min(t,y.x),r=Math.min(r,y.y),n=Math.max(n,y.x),h=Math.max(h,y.y)}var g=this.grid.query(t-e,r-e,n+e,h+e);g.sort(Es);for(var v,b={},_=function(e){var t=g[e];if(t!==v){v=t;var r=s.featureIndexArray.get(t),n=null;s.loadMatchingFeature(b,r.bucketIndex,r.sourceLayerIndex,r.featureIndex,c,l.layers,a,(function(e,t){n||(n=ci(e));var r={};return e.id&&(r=o.getState(t.sourceLayer||"_geojsonTileLayer",e.id)),t.queryIntersectsFeature(p,e,r,n,s.z,i.transform,u,i.posMatrix)}))}},x=0;x<g.length;x++)_(x);return b},Ps.prototype.loadMatchingFeature=function(e,t,r,n,i,a,o,s){var l=this.bucketLayerIDs[t];if(!a||(function(e,t){for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1})(a,l)){var u=this.sourceLayerCoder.decode(r),c=this.vtLayers[u].feature(n);if(i(new zr(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(a&&a.indexOf(h)<0)){var d=o[h];if(d&&(!s||s(c,d))){var f=new Ds(c,this.z,this.x,this.y);f.layer=d.serialize();var m=e[h];void 0===m&&(m=e[h]=[]),m.push({featureIndex:n,feature:f})}}}}},Ps.prototype.lookupSymbolFeatures=function(e,t,r,n,i,a){var o={};this.loadVTLayers();for(var s=qt(n),l=0,u=e;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(o,t,r,c,s,i,a)}return o},Ps.prototype.hasLayer=function(e){for(var t=0,r=this.bucketLayerIDs;t<r.length;t+=1)for(var n=0,i=r[t];n<i.length;n+=1)if(e===i[n])return!0;return!1},wr("FeatureIndex",Ps,{omit:["rawTileData","sourceLayerCoder"]});var As=function(e,t){this.tileID=e,this.uid=u(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};As.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<P.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},As.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},As.prototype.loadVectorData=function(e,t,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var n in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=(function(e,t){var r={};if(!t)return r;for(var n=0,i=e;n<i.length;n+=1){var a=i[n],o=a.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==o.length){a.layers=o,a.stateDependentLayers=o.filter((function(e){return e.isStateDependent()}));for(var s=0,l=o;s<l.length;s+=1)r[l[s].id]=a}}return r})(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[n];if(i instanceof Ro){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(a).queryRadius(o))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new En},As.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},As.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},As.prototype.getBucket=function(e){return this.buckets[e.id]},As.prototype.upload=function(e){for(var t in this.buckets){var r=this.buckets[t];r.uploadPending()&&r.upload(e)}var n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Uo(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Uo(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},As.prototype.queryRenderedFeatures=function(e,t,r,n,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,scale:n,tileSize:this.tileSize,posMatrix:s,transform:a,params:i,queryPadding:this.queryPadding*o},e,t):{}},As.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),n=t?t.sourceLayer:"",i=r._geojsonTileLayer||r[n];if(i)for(var a=qt(t&&t.filter),o=this.tileID.canonical,s=o.z,l=o.x,u=o.y,c={z:s,x:l,y:u},p=0;p<i.length;p++){var h=i.feature(p);if(a(new zr(this.tileID.overscaledZ),h)){var d=new Ds(h,s,l,u);d.tile=c,e.push(d)}}}},As.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},As.prototype.setMask=function(e,t){if(!h(this.mask,e)&&(this.mask=e,this.clearMask(),!h(e,{0:!0}))){var r=new on,n=new xn;this.segments=new Vn,this.segments.prepareSegment(0,r,n);for(var i=Object.keys(e),a=0;a<i.length;a++){var o=e[i[a]],s=li>>o.z,l=new y(o.x*s,o.y*s),u=new y(l.x+s,l.y+s),c=this.segments.prepareSegment(4,r,n);r.emplaceBack(l.x,l.y,l.x,l.y),r.emplaceBack(u.x,l.y,u.x,l.y),r.emplaceBack(l.x,u.y,l.x,u.y),r.emplaceBack(u.x,u.y,u.x,u.y);var p=c.vertexLength;n.emplaceBack(p,p+1,p+2),n.emplaceBack(p+1,p+2,p+3),c.vertexLength+=4,c.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(r,xs.members),this.maskedIndexBuffer=t.createIndexBuffer(n)}},As.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},As.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},As.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var r=(function(e){var a={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,t,r,n){var i=r||n;return a[t]=!i||i.toLowerCase(),""})),a["max-age"]){var t=parseInt(a["max-age"],10);isNaN(t)?delete a["max-age"]:a["max-age"]=t}return a})(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=n+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},As.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},As.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var r=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=r[a],s=e[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(n).queryRadius(i))))}}},As.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},As.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()},As.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},As.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=P.now()+e};var Ms={horizontal:1,vertical:2,horizontalOnly:3},Is=function(){this.text="",this.sectionIndex=[],this.sections=[]};Is.fromFeature=function(e,t){for(var r=new Is,n=0;n<e.sections.length;n++){var i=e.sections[n];r.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),r.text+=i.text;for(var a=0;a<i.text.length;a++)r.sectionIndex.push(n)}return r},Is.prototype.length=function(){return this.text.length},Is.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Is.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Is.prototype.verticalizePunctuation=function(){this.text=(function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r+1)||null,i=e.charCodeAt(r-1)||null;n&&Ir(n)&&!yo[e[r+1]]||i&&Ir(i)&&!yo[e[r-1]]||!yo[e[r]]?t+=e[r]:t+=yo[e[r]]}return t})(this.text)},Is.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Os[this.text.charCodeAt(t)];t++)e++;for(var r=this.text.length,n=this.text.length-1;n>=0&&n>=e&&Os[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)},Is.prototype.substring=function(e,t){var r=new Is;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r},Is.prototype.toString=function(){return this.text},Is.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce((function(e,t){return Math.max(e,r.sections[t].scale)}),0)};var Os={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cs={};function Ts(e,t,r,n){var i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function ks(e,t,r,n,i,a){for(var o=null,s=Ts(t,r,i,a),l=0,u=n;l<u.length;l+=1){var c=u[l],p=Ts(t-c.x,r,i,a)+c.badness;p<=s&&(o=c,s=p)}return{index:e,x:t,priorBreak:o,badness:s}}function Ls(e,t,r,n){if(!r)return[];if(!e)return[];for(var i,a=[],o=(function(e,t,r,n){for(var i=0,a=0;a<e.length();a++){var o=e.getSection(a),s=n[o.fontStack],l=s&&s[e.getCharCode(a)];l&&(i+=l.metrics.advance*o.scale+t)}return i/Math.max(1,Math.ceil(i/r))})(e,t,r,n),s=0,l=0;l<e.length();l++){var u=e.getSection(l),c=e.getCharCode(l),p=n[u.fontStack],h=p&&p[c];h&&!Os[c]&&(s+=h.metrics.advance*u.scale+t),l<e.length()-1&&(Cs[c]||!((i=c)<11904)&&(Er["Bopomofo Extended"](i)||Er.Bopomofo(i)||Er["CJK Compatibility Forms"](i)||Er["CJK Compatibility Ideographs"](i)||Er["CJK Compatibility"](i)||Er["CJK Radicals Supplement"](i)||Er["CJK Strokes"](i)||Er["CJK Symbols and Punctuation"](i)||Er["CJK Unified Ideographs Extension A"](i)||Er["CJK Unified Ideographs"](i)||Er["Enclosed CJK Letters and Months"](i)||Er["Halfwidth and Fullwidth Forms"](i)||Er.Hiragana(i)||Er["Ideographic Description Characters"](i)||Er["Kangxi Radicals"](i)||Er["Katakana Phonetic Extensions"](i)||Er.Katakana(i)||Er["Vertical Forms"](i)||Er["Yi Radicals"](i)||Er["Yi Syllables"](i)))&&a.push(ks(l+1,s,o,a,(d=c,f=e.getCharCode(l+1),m=void 0,m=0,10===d&&(m-=1e4),40!==d&&65288!==d||(m+=50),41!==f&&65289!==f||(m+=50),m),!1))}var d,f,m;return (function e(t){return t?e(t.priorBreak).concat(t.index):[]})(ks(e.length(),s,o,a,0,!0))}function Ns(e){var t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function zs(e,t,r,n,i){if(i){var a=e[n],o=t[a.fontStack],s=o&&o[a.glyph];if(s)for(var l=s.metrics.advance*a.scale,u=(e[n].x+l)*i,c=r;c<=n;c++)e[c].x-=u}}Cs[10]=!0,Cs[32]=!0,Cs[38]=!0,Cs[40]=!0,Cs[41]=!0,Cs[43]=!0,Cs[45]=!0,Cs[47]=!0,Cs[173]=!0,Cs[183]=!0,Cs[8203]=!0,Cs[8208]=!0,Cs[8211]=!0,Cs[8231]=!0,e.createCommonjsModule=t,e.Point=y,e.window=self,e.browser=P,e.uuid=function(){return (function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)})()},e.validateUuid=function(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e.storageAvailable=function(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}},e.warnOnce=_,e.postData=function(e,t,r){var n=I(l(e,{method:"POST"}));return n.onerror=function(){r(new Error(n.statusText))},n.onload=function(){n.status>=200&&n.status<300?r(null,n.response):r(new M(n.statusText,n.status,e.url))},n.send(t),{cancel:function(){return n.abort()}}},e.getJSON=function(t,r){var n=I(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){r(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return r(e)}r(null,e)}else 401===n.status&&t.url.match(/mapbox.com/)?r(new M(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url)):r(new M(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},e.getImage=function(e,a){return O(e,(function(e,t){if(e)a(e);else if(t){var r=new self.Image,n=self.URL||self.webkitURL;r.onload=function(){a(null,r),n.revokeObjectURL(r.src)},r.onerror=function(){return a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new self.Blob([new Uint8Array(t.data)],{type:"image/png"});r.cacheControl=t.cacheControl,r.expires=t.expires,r.src=t.data.byteLength?n.createObjectURL(i):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}))},e.ResourceType=A,e.RGBAImage=Zi,e.potpack=Lo,e.ImagePosition=No,e.Texture=Uo,e.getArrayBuffer=O,e.parseGlyphPBF=function(e){return new Wo(e).readFields(cs,[])},e.isChar=Er,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var i=e.length,a=new Array(e.length),o=null;e.forEach((function(e,r){t(e,(function(e,t){e&&(o=e),a[r]=t,0==--i&&n(o,a)}))}))},e.AlphaImage=Yi,e.styleSpec=z,e.endsWith=d,e.extend=l,e.sphericalToCartesian=function(e){var t=e[0],r=e[1],n=e[2];return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n)}},e.Evented=N,e.validateStyle=hr,e.validateLight=dr,e.emitValidationErrors=yr,e.Color=ae,e.number=Ie,e.Properties=Kr,e.Transitionable=Vr,e.Transitioning=Br,e.PossiblyEvaluated=qr,e.DataConstantProperty=Wr,e.uniqueId=u,e.Actor=fs,e.pick=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n];i in e&&(r[i]=e[i])}return r},e.wrap=function(e,t,r){var n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i},e.clamp=m,e.Event=k,e.ErrorEvent=L,e.OverscaledTileID=vs,e.EXTENT=li,e.getCoordinatesCenter=function(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),r=Math.min(r,e[a].row),n=Math.max(n,e[a].column),i=Math.max(i,e[a].row);var o=n-t,s=i-r,l=Math.max(o,s),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new c((t+n)/2,(r+i)/2,0).zoomTo(u)},e.CanonicalTileID=ys,e.StructArrayLayout4i8=on,e.rasterBoundsAttributes=xs,e.SegmentVector=Vn,e.getVideo=function(e,t){var r,n,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var a=0;a<e.length;a++){var o=self.document.createElement("source");r=e[a],n=void 0,(n=self.document.createElement("a")).href=r,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=e[a],i.appendChild(o)}return{cancel:function(){}}},e.ValidationError=j,e.bindAll=p,e.isEqual=h,e.Tile=As,e.Coordinate=c,e.keysDifference=function(e,t){var r=[];for(var n in e)n in t||r.push(n);return r},e.SourceFeatureState=Rs,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.create=function(){var e=new Pi(16);return Pi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],d=t[11],f=t[12],m=t[13],y=t[14],g=t[15],v=r*s-n*o,b=r*l-i*o,_=r*u-a*o,x=n*l-i*s,w=n*u-a*s,D=i*u-a*l,S=c*m-p*f,R=c*y-h*f,P=c*g-d*f,E=p*y-h*m,A=p*g-d*m,M=h*g-d*y,I=v*M-b*A+_*E+x*P-w*R+D*S;return I?(I=1/I,e[0]=(s*M-l*A+u*E)*I,e[1]=(i*A-n*M-a*E)*I,e[2]=(m*D-y*w+g*x)*I,e[3]=(h*w-p*D-d*x)*I,e[4]=(l*P-o*M-u*R)*I,e[5]=(r*M-i*P+a*R)*I,e[6]=(y*_-f*D-g*b)*I,e[7]=(c*D-h*_+d*b)*I,e[8]=(o*A-s*P+u*S)*I,e[9]=(n*P-r*A-a*S)*I,e[10]=(f*w-m*_+g*v)*I,e[11]=(p*_-c*w-d*v)*I,e[12]=(s*R-o*E-l*S)*I,e[13]=(r*E-n*R+i*S)*I,e[14]=(m*b-f*x-y*v)*I,e[15]=(c*x-p*b+h*v)*I,e):null},e.multiply=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],m=t[12],y=t[13],g=t[14],v=t[15],b=r[0],_=r[1],x=r[2],w=r[3];return e[0]=b*n+_*s+x*p+w*m,e[1]=b*i+_*l+x*h+w*y,e[2]=b*a+_*u+x*d+w*g,e[3]=b*o+_*c+x*f+w*v,b=r[4],_=r[5],x=r[6],w=r[7],e[4]=b*n+_*s+x*p+w*m,e[5]=b*i+_*l+x*h+w*y,e[6]=b*a+_*u+x*d+w*g,e[7]=b*o+_*c+x*f+w*v,b=r[8],_=r[9],x=r[10],w=r[11],e[8]=b*n+_*s+x*p+w*m,e[9]=b*i+_*l+x*h+w*y,e[10]=b*a+_*u+x*d+w*g,e[11]=b*o+_*c+x*f+w*v,b=r[12],_=r[13],x=r[14],w=r[15],e[12]=b*n+_*s+x*p+w*m,e[13]=b*i+_*l+x*h+w*y,e[14]=b*a+_*u+x*d+w*g,e[15]=b*o+_*c+x*f+w*v,e},e.translate=function(e,t,r){var n=r[0],i=r[1],a=r[2],o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,p=void 0,h=void 0,d=void 0,f=void 0,m=void 0,y=void 0,g=void 0;return e[15]=t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],p=t[5],h=t[6],d=t[7],f=t[8],m=t[9],y=t[10],g=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=p,e[6]=h,e[7]=d,e[8]=f,e[9]=m,e[10]=y,e[11]=g,e[12]=o*n+c*i+f*a+t[12],e[13]=s*n+p*i+m*a+t[13],e[14]=l*n+h*i+y*a+t[14],u*n+d*i+g*a+t[15]),e},e.scale=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*n,e[5]=o*i+c*n,e[6]=s*i+p*n,e[7]=l*i+h*n,e[8]=u*i-a*n,e[9]=c*i-o*n,e[10]=p*i-s*n,e[11]=h*i-l*n,e},e.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*n,e[1]=o*i+c*n,e[2]=s*i+p*n,e[3]=l*i+h*n,e[4]=u*i-a*n,e[5]=c*i-o*n,e[6]=p*i-s*n,e[7]=h*i-l*n,e},e.perspective=function(e,t,r,n,i){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,e[14]=null!=i&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,2*i*n*o):(e[10]=-1,-2*n),e},e.ortho=function(e,t,r,n,i,a,o){var s=1/(t-r),l=1/(n-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(o+a)*u,e[15]=1,e},e.create$1=ki,e.normalize=Li,e.transformMat4=Ni,e.forEach=ji,e.getSizeData=vo,e.evaluateSizeForFeature=function(e,t,r){var n=t;return"source"===e.functionType?r.lowerSize/256:"composite"===e.functionType?Ie(r.lowerSize/256,r.upperSize/256,n.uSizeT):n.uSize},e.evaluateSizeForZoom=function(e,t,r){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var n=e.propertyValue,i=e.zoomRange,a=e.sizeRange,o=m(Nt(n,r.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+o*(a.max-a.min)}}var s=e.propertyValue,l=e.zoomRange;return{uSizeT:m(Nt(s,r.specification).interpolationFactor(t,l.min,l.max),0,1),uSize:0}},e.SIZE_PACK_FACTOR=256,e.addDynamicAttributes=wo,e.properties=Eo,e.WritingMode=Ms,e.multiPolygonIntersectsBufferedPoint=di,e.multiPolygonIntersectsMultiPolygon=fi,e.multiPolygonIntersectsBufferedMultiLine=mi,e.polygonIntersectsPolygon=function(e,t){for(var r=0;r<e.length;r++)if(xi(t,e[r]))return!0;for(var n=0;n<t.length;n++)if(xi(e,t[n]))return!0;return!!gi(e,t)},e.distToSegmentSquared=bi,e.SymbolInstanceArray=On,e.StyleLayer=Jr,e.createStyleLayer=function(e){return"custom"===e.type?new To(e):new ko[e.type](e)},e.clone=v,e.filterObject=g,e.mapObject=f,e.registerForPluginAvailability=function(e){return Tr?e({pluginURL:Tr,completionCallback:Or}):Lr.once("pluginAvailable",e),e},e.evented=Lr,e.ZoomHistory=Pr,e.validateCustomStyleLayer=function(e){var t=[],r=e.id;return void 0===r&&t.push({message:"layers."+r+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+r+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),t},e.createLayout=rn,e.ProgramConfiguration=ai,e.Uniform1i=qn,e.Uniform1f=Wn,e.Uniform2f=Yn,e.Uniform4f=Xn,e.Uniform3f=Zn,e.UniformMatrix4f=Jn,e.create$2=Ei,e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.create$3=Ai,e.length=Mi,e.fromValues=Ii,e.normalize$1=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.cross=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=i*l-a*s,e[1]=a*o-n*l,e[2]=n*s-i*o,e},e.transformMat3=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},e.len=Ci,e.forEach$1=Ti,e.UniformColor=$n,e.StructArrayLayout2i4=an,e.StructArrayLayout2ui4=wn,e.StructArrayLayout3ui6=xn,e.StructArrayLayout1ui2=Dn,e.UnwrappedTileID=gs,e.create$4=function(){var e=new Pi(4);return Pi!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.rotate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=n*-s+a*l,e[3]=i*-s+o*l,e},e.ease=a,e.bezier=i,e.EvaluationParameters=zr,e.setRTLTextPlugin=function(e,t){if(Cr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Cr=!0,Tr=P.resolveURL(e),Or=function(e){e?(Cr=!1,Tr=null,t&&t(e)):kr=!0},Lr.fire(new k("pluginAvailable",{pluginURL:Tr,completionCallback:Or}))},e.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},e.featureFilter=qt,e.Anchor=go,e.GLYPH_PBF_BORDER=ds,e.shapeText=function(e,t,r,n,i,a,o,s,l,u,c){var p=Is.fromFeature(e,r);c===Ms.vertical&&p.verticalizePunctuation();var h,d=[],f={positionedGlyphs:d,text:p,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c},m=Nr.processBidirectionalText,y=Nr.processStyledBidirectionalText;if(m&&1===p.sections.length){h=[];for(var g=0,v=m(p.toString(),Ls(p,s,n,t));g<v.length;g+=1){var b=v[g],_=new Is;_.text=b,_.sections=p.sections;for(var x=0;x<b.length;x++)_.sectionIndex.push(0);h.push(_)}}else if(y){h=[];for(var w=0,D=y(p.text,p.sectionIndex,Ls(p,s,n,t));w<D.length;w+=1){var S=D[w],R=new Is;R.text=S[0],R.sectionIndex=S[1],R.sections=p.sections,h.push(R)}}else h=(function(e,t){for(var r=[],n=e.text,i=0,a=0,o=t;a<o.length;a+=1){var s=o[a];r.push(e.substring(i,s)),i=s}return i<n.length&&r.push(e.substring(i,n.length)),r})(p,Ls(p,s,n,t));return (function(e,t,c,r,n,i,a,o,s){for(var l=0,u=-17,p=0,h=e.positionedGlyphs,d="right"===i?1:"left"===i?0:.5,f=0,m=c;f<m.length;f+=1){var y=m[f];y.trim();var g=y.getMaxScale();if(y.length()){for(var v=h.length,b=0;b<y.length();b++){var _=y.getSection(b),x=y.getCharCode(b),w=24*(g-_.scale),D=t[_.fontStack],S=D&&D[x];S&&(Mr(x)&&a!==Ms.horizontal?(h.push({glyph:x,x:l,y:w,vertical:!0,scale:_.scale,fontStack:_.fontStack}),l+=s*_.scale+o):(h.push({glyph:x,x:l,y:u+w,vertical:!1,scale:_.scale,fontStack:_.fontStack}),l+=S.metrics.advance*_.scale+o))}if(h.length!==v){var R=l-o;p=Math.max(R,p),zs(h,t,v,h.length-1,d)}l=0,u+=r*g}else u+=r}var P=Ns(n),E=P.horizontalAlign,A=P.verticalAlign;!(function(e,t,r,n,i,a,o){for(var s=(d-E)*p,l=(-A*c.length+.5)*a,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l})(h,0,0,0,0,r);var M=u- -17;e.top+=-A*M,e.bottom=e.top+M,e.left+=-E*p,e.right=e.left+p})(f,t,h,i,a,o,c,s,u),!!d.length&&(f.text=f.text.toString(),f)},e.shapeIcon=function(e,t,r){var n=Ns(r),i=n.horizontalAlign,a=n.verticalAlign,o=t[0],s=t[1],l=o-e.displaySize[0]*i,u=l+e.displaySize[0],c=s-e.displaySize[1]*a;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}},e.allowsVerticalWritingMode=Ar,e.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1)if(n=r[t].charCodeAt(0),Er.Arabic(n)||Er["Arabic Supplement"](n)||Er["Arabic Extended-A"](n)||Er["Arabic Presentation Forms-A"](n)||Er["Arabic Presentation Forms-B"](n))return!1;var n;return!0},e.classifyRings=Ea,e.SymbolBucket=Ro,e.register=wr,e.FeatureIndex=Ps,e.CollisionBoxArray=En,e.DictionaryCoder=ws,e.LineBucket=ro,e.FillBucket=Oa,e.FillExtrusionBucket=ja,e.ImageAtlas=jo,e.mvt=Ka,e.Protobuf=Wo,e.DEMData=_s,e.vectorTile=Ka,e.Point$1=y,e.pbf=Wo,e.plugin=Nr})),e(0,(function(se){function l(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",n=0,i=e;n<i.length;n+=1)r+=l(i[n])+",";return r+"]"}for(var a=Object.keys(e).sort(),o="{",s=0;s<a.length;s++)o+=JSON.stringify(a[s])+":"+l(e[a[s]])+",";return o+"}"}function v(e){for(var t="",r=0,n=se.refProperties;r<n.length;r+=1)t+="/"+l(e[n[r]]);return t}var r=function(e){e&&this.replace(e)};function le(e,t,r,n,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-r/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<r/2;){var c=e[o-1],p=e[o],h=e[o+1];if(!h)return!1;var d=c.angleTo(p)-p.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return!1;o++,s+=p.dist(h)}return!0}function ue(e){for(var t=0,r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function ce(e,t,r){return e?.6*t*r:0}function pe(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function he(e,t,r,n,i,a){for(var o=ce(r,i,a),s=pe(r,n)*a,l=0,u=ue(e)/2,c=0;c<e.length-1;c++){var p=e[c],h=e[c+1],d=p.dist(h);if(l+d>u){var f=(u-l)/d,m=se.number(p.x,h.x,f),y=se.number(p.y,h.y,f),g=new se.Anchor(m,y,h.angleTo(p),c);return g._round(),!o||le(e,g,s,o,t)?g:void 0}l+=d}}r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(e,t){for(var r=this,n=0,i=e;n<i.length;n+=1){var a=i[n];r._layerConfigs[a.id]=a;var o=r._layers[a.id]=se.createStyleLayer(a);o._featureFilter=se.featureFilter(o.filter)}for(var s=0,l=t;s<l.length;s+=1){var u=l[s];delete r._layerConfigs[u],delete r._layers[u]}this.familiesBySource={};for(var c=0,p=(function(e){for(var t={},r=0;r<e.length;r++){var n=v(e[r]),i=t[n];i||(i=t[n]=[]),i.push(e[r])}var a=[];for(var o in t)a.push(t[o]);return a})(se.values(this._layerConfigs));c<p.length;c+=1){var h=p[c].map((function(e){return r._layers[e.id]})),d=h[0];if("none"!==d.visibility){var f=d.source||"",m=r.familiesBySource[f];m||(m=r.familiesBySource[f]={});var y=d.sourceLayer||"_geojsonTileLayer",g=m[y];g||(g=m[y]=[]),g.push(h)}}};var de=function(e,t,r,n,i,a,o,s,l,u,c,p){var h=o.top*s-l,d=o.bottom*s+l,f=o.left*s-l,m=o.right*s+l;if(this.boxStartIndex=e.length,u){var y=d-h,g=m-f;y>0&&(y=Math.max(10*s,y),this._addLineCollisionCircles(e,t,r,r.segment,g,y,n,i,a,c))}else{if(p){var v=new se.Point(f,h),b=new se.Point(m,h),_=new se.Point(f,d),x=new se.Point(m,d),w=p*Math.PI/180;v._rotate(w),b._rotate(w),_._rotate(w),x._rotate(w),f=Math.min(v.x,b.x,_.x,x.x),m=Math.max(v.x,b.x,_.x,x.x),h=Math.min(v.y,b.y,_.y,x.y),d=Math.max(v.y,b.y,_.y,x.y)}e.emplaceBack(r.x,r.y,f,h,m,d,n,i,a,0,0)}this.boxEndIndex=e.length};de.prototype._addLineCollisionCircles=function(e,t,r,n,i,a,o,s,l,u){var c=a/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(u)/Math.LN2,d=Math.floor(p*h/2),f=-a/2,m=r,y=n+1,g=f,v=-i/2,b=v-i/4;do{if(--y<0){if(g>v)return;y=0;break}g-=t[y].dist(m),m=t[y]}while(g>b);for(var _=t[y].dist(t[y+1]),x=-d;x<p+d;x++){var w=x*c,D=v+w;if(w<0&&(D+=w),w>i&&(D+=w-i),!(D<g)){for(;g+_<D;){if(g+=_,++y+1>=t.length)return;_=t[y].dist(t[y+1])}var S=D-g,R=t[y],P=t[y+1].sub(R)._unit()._mult(S)._add(R)._round(),E=Math.abs(D-f)<c?0:.8*(D-f);e.emplaceBack(P.x,P.y,-a/2,-a/2,a/2,a/2,o,s,l,a/2,E)}}};var _=n,e=n;function n(e,t){if(!(this instanceof n))return new n(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function i(e,t){return e<t?-1:e>t?1:0}function fe(e,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);for(var n=1/0,i=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<n)&&(n=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>o)&&(o=u.y)}var c=a-n,p=o-i,h=Math.min(c,p),d=h/2,f=new _(null,x);if(0===h)return new se.Point(n,i);for(var m=n;m<a;m+=h)for(var y=i;y<o;y+=h)f.push(new w(m+d,y+d,d,e));for(var g=(function(e){for(var t=0,r=0,n=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var l=i[a],u=i[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,n+=(l.y+u.y)*c,t+=3*c}return new w(r/t,n/t,0,e)})(e),v=f.length;f.length;){var b=f.pop();(b.d>g.d||!g.d)&&(g=b,r&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,v)),b.max-g.d<=t||(d=b.h/2,f.push(new w(b.p.x-d,b.p.y-d,d,e)),f.push(new w(b.p.x+d,b.p.y-d,d,e)),f.push(new w(b.p.x-d,b.p.y+d,d,e)),f.push(new w(b.p.x+d,b.p.y+d,d,e)),v+=4)}return r&&(console.log("num probes: "+v),console.log("best distance: "+g.d)),g.p}function x(e,t){return t.max-e.max}function w(e,t,r,n){this.p=new se.Point(e,t),this.h=r,this.d=(function(e,t){for(var r=!1,n=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(r=!r),n=Math.min(n,se.distToSegmentSquared(e,u,c))}return(r?1:-1)*Math.sqrt(n)})(this.p,n),this.max=this.d+this.h*Math.SQRT2}n.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,a=t[i];if(r(n,a)>=0)break;t[e]=a,e=i}t[e]=n},_down:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var a=1+(e<<1),o=a+1,s=t[a];if(o<this.length&&r(t[o],s)<0&&(s=t[a=o]),r(s,i)>=0)break;t[e]=s,e=a}t[e]=i}},_.default=e;var t=se.createCommonjsModule((function(e){e.exports=function(e,t){var r,n,i,a,o,s,l,u;for(r=3&e.length,n=e.length-r,i=t,o=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),me=t,a=t,o=se.createCommonjsModule((function(e){e.exports=function(e,t){for(var r,n=e.length,i=t^n,a=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}));function A(e,t,r,n,i,a){e.createArrays();var o=512*e.overscaling;e.tilePixelRatio=se.EXTENT/o,e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.functionType){var c=e.textSizeData.zoomRange,p=c.min,h=c.max;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new se.EvaluationParameters(p)),l["text-size"].possiblyEvaluate(new se.EvaluationParameters(h))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,f=d.min,m=d.max;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new se.EvaluationParameters(f)),l["icon-size"].possiblyEvaluate(new se.EvaluationParameters(m))]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new se.EvaluationParameters(e.zoom+1)),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new se.EvaluationParameters(e.zoom+1)),u.textMaxSize=l["text-size"].possiblyEvaluate(new se.EvaluationParameters(18));for(var y=24*s.get("text-line-height"),g="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),v=s.get("text-keep-upright"),b=0,_=e.features;b<_.length;b+=1){var x=_[b],w=s.get("text-font").evaluate(x,{}).join(","),D=r,S={},R=x.text;if(R){var P=R.toString(),E=s.get("text-offset").evaluate(x,{}).map((function(e){return 24*e})),A=24*s.get("text-letter-spacing").evaluate(x,{}),M=se.allowsLetterSpacing(P)?A:0,I=s.get("text-anchor").evaluate(x,{}),O=s.get("text-justify").evaluate(x,{}),C="point"===s.get("symbol-placement")?24*s.get("text-max-width").evaluate(x,{}):0;S.horizontal=se.shapeText(R,t,w,C,y,I,O,M,E,24,se.WritingMode.horizontal),se.allowsVerticalWritingMode(P)&&g&&v&&(S.vertical=se.shapeText(R,t,w,C,y,I,O,M,E,24,se.WritingMode.vertical))}var T=void 0;if(x.icon){var k=n[x.icon];k&&(T=se.shapeIcon(i[x.icon],s.get("icon-offset").evaluate(x,{}),s.get("icon-anchor").evaluate(x,{})),void 0===e.sdfIcons?e.sdfIcons=k.sdf:e.sdfIcons!==k.sdf&&se.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),k.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(S.horizontal||T)&&L(e,x,S,T,D,u)}a&&e.generateCollisionDebugBuffers()}function L(r,n,i,a,o,s){var e=s.layoutTextSize.evaluate(n,{}),t=s.layoutIconSize.evaluate(n,{}),l=s.textMaxSize.evaluate(n,{});void 0===l&&(l=e);var u,c,p,h,d,f,m,y,g,v,b,_,x,w=r.layers[0].layout,D=w.get("text-offset").evaluate(n,{}),S=w.get("icon-offset").evaluate(n,{}),R=e/24,P=r.tilePixelRatio*R,E=r.tilePixelRatio*l/24,A=r.tilePixelRatio*t,M=r.tilePixelRatio*w.get("symbol-spacing"),I=w.get("text-padding")*r.tilePixelRatio,O=w.get("icon-padding")*r.tilePixelRatio,C=w.get("text-max-angle")/180*Math.PI,T="map"===w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement"),k="map"===w.get("icon-rotation-alignment")&&"point"!==w.get("symbol-placement"),L=w.get("symbol-placement"),N=M/2,z=function(e,t){t.x<0||t.x>=se.EXTENT||t.y<0||t.y>=se.EXTENT||(function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f,m,y,g,v,b,_){var x,w,D=e.addToLineVertexArray(t,r),S=0,R=0,P=0,E=me(n.horizontal?n.horizontal.text:""),A=[];if(n.horizontal){var M=a.layout.get("text-rotate").evaluate(v,{});x=new de(o,r,t,s,l,u,n.horizontal,c,p,h,e.overscaling,M),R+=ge(e,t,n.horizontal,a,h,v,d,D,n.vertical?se.WritingMode.horizontal:se.WritingMode.horizontalOnly,A,b,_),n.vertical&&(P+=ge(e,t,n.vertical,a,h,v,d,D,se.WritingMode.vertical,A,b,_))}var I=x?x.boxStartIndex:e.collisionBoxArray.length,O=x?x.boxEndIndex:e.collisionBoxArray.length;if(i){var C=(function(e,t,r,n,i,a){var o,s,l,u,c=t.image,p=r.layout,h=t.top-1/c.pixelRatio,d=t.left-1/c.pixelRatio,f=t.bottom+1/c.pixelRatio,m=t.right+1/c.pixelRatio;if("none"!==p.get("icon-text-fit")&&i){var y=m-d,g=f-h,v=p.get("text-size").evaluate(a,{})/24,b=i.left*v,_=i.right*v,x=i.top*v,w=_-b,D=i.bottom*v-x,S=p.get("icon-text-fit-padding")[0],R=p.get("icon-text-fit-padding")[1],P=p.get("icon-text-fit-padding")[2],E=p.get("icon-text-fit-padding")[3],A="width"===p.get("icon-text-fit")?.5*(D-g):0,M="height"===p.get("icon-text-fit")?.5*(w-y):0,I="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?w:y,O="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?D:g;o=new se.Point(b+M-E,x+A-S),s=new se.Point(b+M+R+I,x+A-S),l=new se.Point(b+M+R+I,x+A+P+O),u=new se.Point(b+M-E,x+A+P+O)}else o=new se.Point(d,h),s=new se.Point(m,h),l=new se.Point(m,f),u=new se.Point(d,f);var C=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(C){var T=Math.sin(C),k=Math.cos(C),L=[k,-T,T,k];o._matMult(L),s._matMult(L),u._matMult(L),l._matMult(L)}return[{tl:o,tr:s,bl:u,br:l,tex:c.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]})(0,i,a,0,n.horizontal,v),T=a.layout.get("icon-rotate").evaluate(v,{});w=new de(o,r,t,s,l,u,i,f,m,!1,e.overscaling,T),S=4*C.length;var k=e.iconSizeData,L=null;"source"===k.functionType?(L=[se.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(v,{})])[0]>ye&&se.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===k.functionType&&((L=[se.SIZE_PACK_FACTOR*_.compositeIconSizes[0].evaluate(v,{}),se.SIZE_PACK_FACTOR*_.compositeIconSizes[1].evaluate(v,{})])[0]>ye||L[1]>ye)&&se.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,C,L,g,y,v,!1,t,D.lineStartIndex,D.lineLength)}var N=w?w.boxStartIndex:e.collisionBoxArray.length,z=w?w.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=se.SymbolBucket.MAX_GLYPHS&&se.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(t.x,t.y,A.length>0?A[0]:-1,A.length>1?A[1]:-1,E,I,O,N,z,s,R,P,S,0)})(r,t,e,i,a,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,P,I,T,D,A,O,k,S,n,o,s)};if("line"===L)for(var j=0,F=(function(e,t,r,n,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,u=0;u<s.length-1;u++){var c=s[u],p=s[u+1];c.x<0&&p.x<0||(c.x<0?c=new se.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round():p.x<0&&(p=new se.Point(0,c.y+(p.y-c.y)*((0-c.x)/(p.x-c.x)))._round()),c.y<0&&p.y<0||(c.y<0?c=new se.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round():p.y<0&&(p=new se.Point(c.x+(p.x-c.x)*((0-c.y)/(p.y-c.y)),0)._round()),c.x>=n&&p.x>=n||(c.x>=n?c=new se.Point(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round():p.x>=n&&(p=new se.Point(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round()),c.y>=i&&p.y>=i||(c.y>=i?c=new se.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new se.Point(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],a.push(l)),l.push(p)))))}return a})(n.geometry,0,0,se.EXTENT,se.EXTENT);j<F.length;j+=1)for(var V=F[j],G=0,B=(u=V,c=M,p=C,h=i.vertical||i.horizontal,d=a,f=24,m=E,y=r.overscaling,g=se.EXTENT,void 0,v=ce(h,f,m),b=pe(h,d),_=b*m,x=0===u[0].x||u[0].x===g||0===u[0].y||u[0].y===g,c-_<c/4&&(c=_+c/4),(function e(t,r,n,i,a,o,s,l,u){for(var c=o/2,p=ue(t),h=0,d=r-n,f=[],m=0;m<t.length-1;m++){for(var y=t[m],g=t[m+1],v=y.dist(g),b=g.angleTo(y);d+n<h+v;){var _=((d+=n)-h)/v,x=se.number(y.x,g.x,_),w=se.number(y.y,g.y,_);if(x>=0&&x<u&&w>=0&&w<u&&d-c>=0&&d+c<=p){var D=new se.Anchor(x,w,b,m);D._round(),i&&!le(t,D,o,i,a)||f.push(D)}}h+=v}return l||f.length||s||(f=e(t,h/2,n,i,a,o,s,!0,u)),f})(u,x?c/2*y%c:(b/2+2*f)*m*y%c,c,v,p,_,x,!1,g));G<B.length;G+=1){var U=B[G],H=i.horizontal;H&&ve(r,H.text,N,U)||z(V,U)}else if("line-center"===L)for(var q=0,W=n.geometry;q<W.length;q+=1){var Y=W[q];if(Y.length>1){var Z=he(Y,C,i.vertical||i.horizontal,a,24,E);Z&&z(Y,Z)}}else if("Polygon"===n.type)for(var X=0,$=se.classifyRings(n.geometry,0);X<$.length;X+=1){var K=$[X],J=fe(K,16);z(K[0],new se.Anchor(J.x,J.y,0))}else if("LineString"===n.type)for(var Q=0,ee=n.geometry;Q<ee.length;Q+=1){var te=ee[Q];z(te,new se.Anchor(te[0].x,te[0].y,0))}else if("Point"===n.type)for(var re=0,ne=n.geometry;re<ne.length;re+=1)for(var ie=0,ae=ne[re];ie<ae.length;ie+=1){var oe=ae[ie];z([oe],new se.Anchor(oe.x,oe.y,0))}}me.murmur3=a,me.murmur2=o;var ye=65535;function ge(e,t,r,n,i,a,o,s,l,u,c,p){var h=(function(e,t,r,n,i,a){for(var o=r.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,s=r.layout.get("text-offset").evaluate(i,{}).map((function(e){return 24*e})),l=t.positionedGlyphs,u=[],c=0;c<l.length;c++){var p=l[c],h=a[p.fontStack],d=h&&h[p.glyph];if(d){var f=d.rect;if(f){var m=se.GLYPH_PBF_BORDER+1,y=d.metrics.advance*p.scale/2,g=n?[p.x+y,p.y]:[0,0],v=n?[0,0]:[p.x+y+s[0],p.y+s[1]],b=(d.metrics.left-m)*p.scale-y+v[0],_=(-d.metrics.top-m)*p.scale+v[1],x=b+f.w*p.scale,w=_+f.h*p.scale,D=new se.Point(b,_),S=new se.Point(x,_),R=new se.Point(b,w),P=new se.Point(x,w);if(n&&p.vertical){var E=new se.Point(-y,y),A=-Math.PI/2,M=new se.Point(5,0);D._rotateAround(A,E)._add(M),S._rotateAround(A,E)._add(M),R._rotateAround(A,E)._add(M),P._rotateAround(A,E)._add(M)}if(o){var I=Math.sin(o),O=Math.cos(o),C=[O,-I,I,O];D._matMult(C),S._matMult(C),R._matMult(C),P._matMult(C)}u.push({tl:D,tr:S,bl:R,br:P,tex:f,writingMode:t.writingMode,glyphOffset:g})}}}return u})(0,r,n,i,a,c),d=e.textSizeData,f=null;return"source"===d.functionType?(f=[se.SIZE_PACK_FACTOR*n.layout.get("text-size").evaluate(a,{})])[0]>ye&&se.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((f=[se.SIZE_PACK_FACTOR*p.compositeTextSizes[0].evaluate(a,{}),se.SIZE_PACK_FACTOR*p.compositeTextSizes[1].evaluate(a,{})])[0]>ye||f[1]>ye)&&se.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,h,f,o,i,a,l,t,s.lineStartIndex,s.lineLength),u.push(e.text.placedSymbolArray.length-1),4*h.length}function ve(e,t,r,n){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(n.dist(a[o])<r)return!0}else i[t]=[];return i[t].push(n),!1}var M=function(e){var t={},r=[];for(var n in e){var i=e[n],a=t[n]={};for(var o in i){var s=i[+o];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var l={x:0,y:0,w:s.bitmap.width+2,h:s.bitmap.height+2};r.push(l),a[o]={rect:l,metrics:s.metrics}}}}var u=se.potpack(r),c=u.w,p=u.h,h=new se.AlphaImage({width:c||1,height:p||1});for(var d in e){var f=e[d];for(var m in f){var y=f[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var g=t[d][m].rect;se.AlphaImage.copy(y.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},y.bitmap)}}}this.image=h,this.positions=t};se.register("GlyphAtlas",M);var p=function(e){this.tileID=new se.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};function I(e,t){for(var r=new se.EvaluationParameters(t),n=0,i=e;n<i.length;n+=1)i[n].recalculate(r)}p.prototype.parse=function(e,t,r,i){var n=this;this.status="parsing",this.data=e,this.collisionBoxArray=new se.CollisionBoxArray;var a=new se.DictionaryCoder(Object.keys(e.layers).sort()),o=new se.FeatureIndex(this.tileID);o.bucketLayerIDs=[];var s,l,u,c,p={},h={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=t.familiesBySource[this.source];for(var f in d){var m=e.layers[f];if(m){1===m.version&&se.warnOnce('Vector tile source "'+n.source+'" layer "'+f+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(f),g=[],v=0;v<m.length;v++){var b=m.feature(v);g.push({feature:b,index:v,sourceLayerIndex:y})}for(var _=0,x=d[f];_<x.length;_+=1){var w=x[_],D=w[0];D.minzoom&&n.zoom<Math.floor(D.minzoom)||D.maxzoom&&n.zoom>=D.maxzoom||"none"!==D.visibility&&(I(w,n.zoom),(p[D.id]=D.createBucket({index:o.bucketLayerIDs.length,layers:w,zoom:n.zoom,pixelRatio:n.pixelRatio,overscaling:n.overscaling,collisionBoxArray:n.collisionBoxArray,sourceLayerIndex:y,sourceID:n.source})).populate(g,h),o.bucketLayerIDs.push(w.map((function(e){return e.id}))))}}}var S=se.mapObject(h.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(S).length?r.send("getGlyphs",{uid:this.uid,stacks:S},(function(e,t){s||(s=e,l=t,E.call(n))})):l={};var R=Object.keys(h.iconDependencies);R.length?r.send("getImages",{icons:R},(function(e,t){s||(s=e,u=t,E.call(n))})):u={};var P=Object.keys(h.patternDependencies);function E(){if(s)return i(s);if(l&&u&&c){var e=new M(l),t=new se.ImageAtlas(u,c);for(var r in p){var n=p[r];n instanceof se.SymbolBucket?(I(n.layers,this.zoom),A(n,l,e.positions,u,t.iconPositions,this.showCollisionBoxes)):n.hasPattern&&(n instanceof se.LineBucket||n instanceof se.FillBucket||n instanceof se.FillExtrusionBucket)&&(I(n.layers,this.zoom),n.addFeatures(h,t.patternPositions))}this.status="done",i(null,{buckets:se.values(p).filter((function(e){return!e.isEmpty()})),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t})}}P.length?r.send("getImages",{icons:P},(function(e,t){s||(s=e,c=t,E.call(n))})):c={},E.call(this)};var s="undefined"!=typeof performance,h={getEntriesByName:function(e){return!!(s&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(s&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,r){return!!(s&&performance&&performance.measure)&&performance.measure(e,t,r)},clearMarks:function(e){return!!(s&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(s&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},u=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},h.mark(this._marks.start)};function c(e,r){var t=se.getArrayBuffer(e.request,(function(e,t){e?r(e):t&&r(null,{vectorTile:new se.mvt.VectorTile(new se.Protobuf(t.data)),rawData:t.data,cacheControl:t.cacheControl,expires:t.expires})}));return function(){t.cancel(),r()}}u.prototype.finish=function(){h.mark(this._marks.end);var e=h.getEntriesByName(this._marks.measure);return 0===e.length&&(h.measure(this._marks.measure,this._marks.start,this._marks.end),e=h.getEntriesByName(this._marks.measure),h.clearMarks(this._marks.start),h.clearMarks(this._marks.end),h.clearMeasures(this._marks.measure)),e},h.Performance=u;var d=function(e,t,r){this.actor=e,this.layerIndex=t,this.loadVectorData=r||c,this.loading={},this.loaded={}};d.prototype.loadTile=function(e,o){var s=this,l=e.uid;this.loading||(this.loading={});var u=!!(e&&e.request&&e.request.collectResourceTiming)&&new h.Performance(e.request),c=this.loading[l]=new p(e);c.abort=this.loadVectorData(e,(function(e,t){if(delete s.loading[l],e||!t)return c.status="done",s.loaded[l]=c,o(e);var r=t.rawData,n={};t.expires&&(n.expires=t.expires),t.cacheControl&&(n.cacheControl=t.cacheControl);var i={};if(u){var a=u.finish();a&&(i.resourceTiming=JSON.parse(JSON.stringify(a)))}c.vectorTile=t.vectorTile,c.parse(t.vectorTile,s.layerIndex,s.actor,(function(e,t){if(e||!t)return o(e);o(null,se.extend({rawTileData:r.slice(0)},t,n,i))})),s.loaded=s.loaded||{},s.loaded[l]=c}))},d.prototype.reloadTile=function(e,n){var t=this.loaded,r=e.uid,i=this;if(t&&t[r]){var a=t[r];a.showCollisionBoxes=e.showCollisionBoxes;var o=function(e,t){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,i.layerIndex,i.actor,r)),n(e,t)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.actor,o):o())}},d.prototype.abortTile=function(e,t){var r=this.loading,n=e.uid;r&&r[n]&&r[n].abort&&(r[n].abort(),delete r[n]),t()},d.prototype.removeTile=function(e,t){var r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()};var f=function(){this.loaded={}};f.prototype.loadTile=function(e,t){var r=e.uid,n=e.encoding,i=e.rawImageData,a=new se.DEMData(r,i,n);this.loaded=this.loaded||{},t(null,this.loaded[r]=a)},f.prototype.removeTile=function(e){var t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]};var m={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function y(e){var t=0;if(e&&e.length>0){t+=Math.abs(g(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(g(e[r]))}return t}function g(e){var t,r,n,i,a,o,s=0,l=e.length;if(l>2){for(o=0;o<l;o++)a=o===l-2?(n=l-2,i=l-1,0):o===l-1?(n=l-1,i=0,1):(i=(n=o)+1,o+2),t=e[n],r=e[i],s+=(b(e[a][0])-b(t[0]))*Math.sin(b(r[1]));s=s*m.RADIUS*m.RADIUS/2}return s}function b(e){return e*Math.PI/180}var D={geometry:function e(t){var r,n=0;switch(t.type){case"Polygon":return y(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)n+=y(t.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)n+=e(t.geometries[r]);return n}},ring:g};function S(t,r){return function(e){return t(e,r)}}function R(e,t){t=!!t,e[0]=P(e[0],t);for(var r=1;r<e.length;r++)e[r]=P(e[r],!t);return e}function P(e,t){return r=e,D.ring(r)>=0===t?e:e.reverse();var r}var E=se.mvt.VectorTileFeature.prototype.toGeoJSON,O=function(e){this._feature=e,this.extent=se.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};O.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],t=0,r=this._feature.geometry;t<r.length;t+=1){var n=r[t];e.push([new se.Point(n[0],n[1])])}return e}for(var i=[],a=0,o=this._feature.geometry;a<o.length;a+=1){for(var s=[],l=0,u=o[a];l<u.length;l+=1){var c=u[l];s.push(new se.Point(c[0],c[1]))}i.push(s)}return i},O.prototype.toGeoJSON=function(e,t,r){return E.call(this,e,t,r)};var C=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=se.EXTENT,this.length=e.length,this._features=e};C.prototype.feature=function(e){return new O(this._features[e])};var T=se.vectorTile.VectorTileFeature,k=N;function N(e,t){this.options=t||{},this.features=e,this.length=e.length}function z(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}N.prototype.feature=function(e){return new z(this.features[e],this.options.extent)},z.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],i=0;i<r.length;i++)n.push(new se.Point$1(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},z.prototype.toGeoJSON=T.prototype.toGeoJSON;var j=G,F=G,V=k;function G(e){var t=new se.pbf;return (function(e,t){for(var r in e.layers)t.writeMessage(3,B,e.layers[r])})(e,t),t.finish()}function B(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,U,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var a=n.values;for(r=0;r<a.length;r++)t.writeMessage(4,Z,a[r])}function U(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,H,e),t.writeVarintField(3,r.type),t.writeMessage(4,Y,r)}function H(e,t){var r=e.feature,n=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in r.properties){var l=a[s];void 0===l&&(n.push(s),l=n.length-1,a[s]=l),t.writeVarint(l);var u=r.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=o[p];void 0===h&&(i.push(u),h=i.length-1,o[p]=h),t.writeVarint(h)}}function q(e,t){return(t<<3)+(7&e)}function W(e){return e<<1^e>>31}function Y(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,a=0,o=r.length,s=0;s<o;s++){var l=r[s],u=1;1===n&&(u=l.length),t.writeVarint(q(1,u));for(var c=3===n?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==n&&t.writeVarint(q(2,c-1));var h=l[p].x-i,d=l[p].y-a;t.writeVarint(W(h)),t.writeVarint(W(d)),i+=h,a+=d}3===n&&t.writeVarint(q(7,1))}}function Z(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function X(e,t,r,n){$(e,r,n),$(t,2*r,2*n),$(t,2*r+1,2*n+1)}function $(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function K(e,t,r,n){var i=e-r,a=t-n;return i*i+a*a}function J(e,t,r,n,i){return new Q(e,t,r,n,i)}function Q(e,t,r,n,i){t=t||ee,r=r||te,i=i||Array,this.nodeSize=n||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var a=0;a<e.length;a++)this.ids[a]=a,this.coords[2*a]=t(e[a]),this.coords[2*a+1]=r(e[a]);!(function e(t,r,n,i,a,o){if(!(a-i<=n)){var s=Math.floor((i+a)/2);!(function e(t,r,n,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,n,Math.max(i,Math.floor(n-l*c/s+p)),Math.min(a,Math.floor(n+(s-l)*c/s+p)),o)}var h=r[2*n+o],d=i,f=a;for(X(t,r,i,n),r[2*a+o]>h&&X(t,r,i,a);d<f;){for(X(t,r,d,f),d++,f--;r[2*d+o]<h;)d++;for(;r[2*f+o]>h;)f--}r[2*i+o]===h?X(t,r,i,f):X(t,r,++f,a),f<=n&&(i=f+1),n<=f&&(a=f-1)}})(t,r,s,i,a,o%2),e(t,r,n,i,s-1,o+1),e(t,r,n,s+1,a,o+1)}})(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function ee(e){return e[0]}function te(e){return e[1]}function re(e){this.options=be(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function ne(e){return{type:"Feature",id:e.id,properties:ie(e),geometry:{type:"Point",coordinates:[(n=e.x,360*(n-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,n}function ie(e){var t=e.numPoints,r=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return be(be({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function ae(e){return e/360+.5}function oe(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function be(e,t){for(var r in t)e[r]=t[r];return e}function _e(e){return e.x}function xe(e){return e.y}function we(e,t,r,n,i,a){var o=i-r,s=a-n;if(0!==o||0!==s){var l=((e-r)*o+(t-n)*s)/(o*o+s*s);l>1?(r=i,n=a):l>0&&(r+=o*l,n+=s*l)}return(o=e-r)*o+(s=t-n)*s}function De(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return (function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)Se(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)Se(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)Se(e,t[n][i])})(i),i}function Se(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Re(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===a)Pe(i,s);else if("MultiPoint"===a)for(var u=0;u<i.length;u++)Pe(i[u],s);else if("LineString"===a)Ee(i,s,o,!1);else if("MultiLineString"===a){if(r.lineMetrics){for(u=0;u<i.length;u++)s=[],Ee(i[u],s,o,!1),e.push(De(l,"LineString",s,t.properties));return}Ae(i,s,o,!1)}else if("Polygon"===a)Ae(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"!==a)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<t.geometry.geometries.length;u++)Re(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n);return}for(u=0;u<i.length;u++){var c=[];Ae(i[u],c,o,!0),s.push(c)}}e.push(De(l,a,s,t.properties))}}function Pe(e,t){t.push(Me(e[0])),t.push(Ie(e[1])),t.push(0)}function Ee(e,t,r,n){for(var i,a,o=0,s=0;s<e.length;s++){var l=Me(e[s][0]),u=Ie(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=n?(i*u-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-a,2))),i=l,a=u}var c=t.length-3;t[2]=1,(function e(t,r,n,i){for(var a,o=i,s=n-r>>1,l=n-r,u=t[r],c=t[r+1],p=t[n],h=t[n+1],d=r+3;d<n;d+=3){var f=we(t[d],t[d+1],u,c,p,h);if(f>o)a=d,o=f;else if(f===o){var m=Math.abs(d-s);m<l&&(a=d,l=m)}}o>i&&(a-r>3&&e(t,r,a,i),t[a+2]=o,n-a>3&&e(t,a,n,i))})(t,0,c,r),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function Ae(e,t,r,n){for(var i=0;i<e.length;i++){var a=[];Ee(e[i],a,r,n),t.push(a)}}function Me(e){return e/360+.5}function Ie(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Oe(e,t,r,n,i,a,o,s){if(n/=t,a>=(r/=t)&&o<n)return e;if(o<r||a>=n)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.type,d=0===i?c.minX:c.minY,f=0===i?c.maxX:c.maxY;if(d>=r&&f<n)l.push(c);else if(!(f<r||d>=n)){var m=[];if("Point"===h||"MultiPoint"===h)Ce(p,m,r,n,i);else if("LineString"===h)Te(p,m,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)Le(p,m,r,n,i,!1);else if("Polygon"===h)Le(p,m,r,n,i,!0);else if("MultiPolygon"===h)for(var y=0;y<p.length;y++){var g=[];Le(p[y],g,r,n,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<m.length;y++)l.push(De(c.id,h,m[y],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(De(c.id,h,m,c.tags))}}}return l.length?l:null}function Ce(e,t,r,n,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=r&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function Te(e,t,r,n,i,a,o){for(var s,l,u=ke(e),c=0===i?ze:je,p=e.start,h=0;h<e.length-3;h+=3){var d=e[h],f=e[h+1],m=e[h+2],y=e[h+3],g=e[h+4],v=0===i?d:f,b=0===i?y:g,_=!1;o&&(s=Math.sqrt(Math.pow(d-y,2)+Math.pow(f-g,2))),v<r?b>=r&&(l=c(u,d,f,y,g,r),o&&(u.start=p+s*l)):v>=n?b<n&&(l=c(u,d,f,y,g,n),o&&(u.start=p+s*l)):Ne(u,d,f,m),b<r&&v>=r&&(l=c(u,d,f,y,g,r),_=!0),b>n&&v<=n&&(l=c(u,d,f,y,g,n),_=!0),!a&&_&&(o&&(u.end=p+s*l),t.push(u),u=ke(e)),o&&(p+=s)}var x=e.length-3;d=e[x],f=e[x+1],m=e[x+2],(v=0===i?d:f)>=r&&v<=n&&Ne(u,d,f,m),x=u.length-3,a&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&Ne(u,u[0],u[1],u[2]),u.length&&t.push(u)}function ke(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Le(e,t,r,n,i,a){for(var o=0;o<e.length;o++)Te(e[o],t,r,n,i,a,!1)}function Ne(e,t,r,n){e.push(t),e.push(r),e.push(n)}function ze(e,t,r,n,i,a){var o=(a-t)/(n-t);return e.push(a),e.push(r+(i-r)*o),e.push(1),o}function je(e,t,r,n,i,a){var o=(a-r)/(i-r);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function Fe(e,t){for(var r=[],n=0;n<e.length;n++){var i,a=e[n],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=Ve(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(Ve(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(Ve(a.geometry[s][u],t));i.push(l)}r.push(De(a.id,o,i,a.tags))}return r}function Ve(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function Ge(e,t){if(e.transformed)return e;var r,n,i,a=1<<e.z,o=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(Be(u[n],u[n+1],t,a,o,s));else for(n=0;n<u.length;n++){var p=[];for(i=0;i<u[n].length;i+=2)p.push(Be(u[n][i],u[n][i+1],t,a,o,s));l.geometry.push(p)}}return e.transformed=!0,e}function Be(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function Ue(e,t,r,n,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,He(o,e[s],a,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),p>o.maxY&&(o.maxY=p)}return o}function He(e,t,r,n){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)qe(o,i,e,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)qe(o,i[s],e,r,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)qe(o,u[s],e,r,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&n.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function qe(e,t,r,n,i,a){var o=n*n;if(n>0&&t.size<(i?o:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>o)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&(function(e,t){for(var r=0,n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var o=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=o,e[i-1-n]=s}})(s,a),e.push(s)}}function We(e,t){var r=(t=this.options=(function(e,t){for(var r in t)e[r]=t[r];return e})(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,i,a,o,s,l,u=(function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)Re(r,e.features[n],t,n);else"Feature"===e.type?Re(r,e,t):Re(r,{geometry:e},t);return r})(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=u,i=t,a=i.buffer/i.extent,o=n,s=Oe(n,1,-1-a,a,0,-1,2,i),l=Oe(n,1,1-a,2+a,0,-1,2,i),(s||l)&&(o=Oe(n,1,-a,1+a,0,-1,2,i)||[],s&&(o=Fe(s,1).concat(o)),l&&(o=o.concat(Fe(l,-1)))),u=o).length&&this.splitTile(u,0,0,0),r&&(u.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ye(e,t,r){return 32*((1<<e)*r+t)+e}function Ze(e,t){var r=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return t(null,null);var i=new C(n.features),a=j(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}j.fromVectorTileJs=F,j.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new k(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return G({layers:r})},j.GeoJSONWrapper=V,We.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(re.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!(Q.prototype={range:function(e,t,r,n){return (function(e,t,r,n,i,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),d=u.pop();if(h-d<=o)for(var f=d;f<=h;f++)s=t[2*f],l=t[2*f+1],s>=r&&s<=i&&l>=n&&l<=a&&c.push(e[f]);else{var m=Math.floor((d+h)/2);s=t[2*m],l=t[2*m+1],s>=r&&s<=i&&l>=n&&l<=a&&c.push(e[m]);var y=(p+1)%2;(0===p?r<=s:n<=l)&&(u.push(d),u.push(m-1),u.push(y)),(0===p?i>=s:a>=l)&&(u.push(m+1),u.push(h),u.push(y))}}return c})(this.ids,this.coords,e,t,r,n,this.nodeSize)},within:function(e,t,r){return (function(e,t,r,n,i,a){for(var o=[0,e.length-1,0],s=[],l=i*i;o.length;){var u=o.pop(),c=o.pop(),p=o.pop();if(c-p<=a)for(var h=p;h<=c;h++)K(t[2*h],t[2*h+1],r,n)<=l&&s.push(e[h]);else{var d=Math.floor((p+c)/2),f=t[2*d],m=t[2*d+1];K(f,m,r,n)<=l&&s.push(e[d]);var y=(u+1)%2;(0===u?r-i<=f:n-i<=m)&&(o.push(p),o.push(d-1),o.push(y)),(0===u?r+i>=f:n+i>=m)&&(o.push(d+1),o.push(c),o.push(y))}}return s})(this.ids,this.coords,e,t,r,this.nodeSize)}}),reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var r="prepare "+e.length+" points";t&&console.time(r),this.points=e;for(var n,i,a=[],o=0;o<e.length;o++)e[o].geometry&&a.push({x:ae((i=e[n=o].geometry.coordinates)[0]),y:oe(i[1]),zoom:1/0,index:n,parentId:-1});this.trees[this.options.maxZoom+1]=J(a,_e,xe,this.options.nodeSize,Float32Array),t&&console.timeEnd(r);for(var s=this.options.maxZoom;s>=this.options.minZoom;s--){var l=+Date.now();a=this._cluster(a,s),this.trees[s]=J(a,_e,xe,this.options.nodeSize,Float32Array),t&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-l)}return t&&console.timeEnd("total time"),this},getClusters:function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){var o=this.getClusters([r,n,180,a],t),s=this.getClusters([-180,n,i,a],t);return o.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=l.range(ae(r),oe(a),ae(i),oe(n)),c=[],p=0;p<u.length;p++){var h=l.points[u[p]];c.push(h.numPoints?ne(h):this.points[h.index])}return c},getChildren:function(e){var t=e>>5,r=e%32,n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var a=i.points[t];if(!a)throw new Error(n);for(var o=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(a.x,a.y,o),l=[],u=0;u<s.length;u++){var c=i.points[s[u]];c.parentId===e&&l.push(c.numPoints?ne(c):this.points[c.index])}if(0===l.length)throw new Error(n);return l},getLeaves:function(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n},getTile:function(e,t,r){var n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options.extent,o=this.options.radius/a,s=(r-o)/i,l=(r+1+o)/i,u={features:[]};return this._addTileFeatures(n.range((t-o)/i,s,(t+1+o)/i,l),n.points,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-o/i,s,1,l),n.points,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,s,o/i,l),n.points,-1,r,i,u),u.features.length?u:null},getClusterExpansionZoom:function(e){for(var t=e%32-1;t<this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},_appendLeaves:function(e,t,r,n,i){for(var a=this.getChildren(t),o=0;o<a.length;o++){var s=a[o].properties;if(s&&s.cluster?i+s.point_count<=n?i+=s.point_count:i=this._appendLeaves(e,s.cluster_id,r,n,i):i<n?i++:e.push(a[o]),e.length===r)break}return i},_addTileFeatures:function(e,t,r,n,i,a){for(var o=0;o<e.length;o++){var s=t[e[o]],l={type:1,geometry:[[Math.round(this.options.extent*(s.x*i-r)),Math.round(this.options.extent*(s.y*i-n))]],tags:s.numPoints?ie(s):this.points[s.index].properties},u=s.numPoints?s.id:this.points[s.index].id;void 0!==u&&(l.id=u),a.features.push(l)}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var r=[],n=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var a=e[i];if(!(a.zoom<=t)){a.zoom=t;var o=this.trees[t+1],s=o.within(a.x,a.y,n),l=a.numPoints||1,u=a.x*l,c=a.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var h=(i<<5)+(t+1),d=0;d<s.length;d++){var f=o.points[s[d]];if(!(f.zoom<=t)){f.zoom=t;var m=f.numPoints||1;u+=f.x*m,c+=f.y*m,l+=m,f.parentId=h,this.options.reduce&&this._accumulate(p,f)}}1===l?r.push(a):(a.parentId=h,r.push({x:u/l,y:c/l,zoom:1/0,id:h,parentId:-1,numPoints:l,properties:p}))}}return r},_accumulate:function(e,t){var r=t.numPoints?t.properties:this.options.map(this.points[t.index].properties);this.options.reduce(e,r)}}),promoteId:null,generateId:!1,debug:0},We.prototype.splitTile=function(e,t,r,n,i,a,o){for(var s=[e,t,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=Ye(t,r,n),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=Ue(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var f=1<<i-t;if(r!==Math.floor(a/f)||n!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var m,y,g,v,b,_,x=.5*l.buffer/l.extent,w=.5-x,D=.5+x,S=1+x;m=y=g=v=null,b=Oe(e,c,r-x,r+D,0,h.minX,h.maxX,l),_=Oe(e,c,r+w,r+S,0,h.minX,h.maxX,l),e=null,b&&(m=Oe(b,c,n-x,n+D,1,h.minY,h.maxY,l),y=Oe(b,c,n+w,n+S,1,h.minY,h.maxY,l),b=null),_&&(g=Oe(_,c,n-x,n+D,1,h.minY,h.maxY,l),v=Oe(_,c,n+w,n+S,1,h.minY,h.maxY,l),_=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(y||[],t+1,2*r,2*n+1),s.push(g||[],t+1,2*r+1,2*n),s.push(v||[],t+1,2*r+1,2*n+1)}}},We.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e,s=Ye(e,t=(t%o+o)%o,r);if(this.tiles[s])return Ge(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,c=t,p=r;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[Ye(u,c,p)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,p),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[s]?Ge(this.tiles[s],i):null):null};var Xe=(function(i){function e(e,t,r){i.call(this,e,t,Ze),r&&(this.loadGeoJSON=r)}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},e.prototype._loadData=function(){var a=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,s=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var l=!!(s&&s.request&&s.request.collectResourceTiming)&&new h.Performance(s.request);this.loadGeoJSON(s,(function(e,t){if(e||!t)return o(e);if("object"!=typeof t)return o(new Error("Input data is not a valid GeoJSON object."));!(function e(t,r){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(S(e,r)),t;case"Feature":return t.geometry=e(t.geometry,r),t;case"Polygon":case"MultiPolygon":return i=r,"Polygon"===(n=t).type?n.coordinates=R(n.coordinates,i):"MultiPolygon"===n.type&&(n.coordinates=n.coordinates.map(S(R,i))),n;default:return t}var n,i})(t,!0);try{a._geoJSONIndex=s.cluster?(r=s.superclusterOptions,new re(r)).load(t.features):new We(t,s.geojsonVtOptions)}catch(e){return o(e)}a.loaded={};var r,n={};if(l){var i=l.finish();i&&(n.resourceTiming={},n.resourceTiming[s.source]=JSON.parse(JSON.stringify(i)))}o(null,n)}))}},e.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},e.prototype.reloadTile=function(e,t){var r=this.loaded,n=e.uid;return r&&r[n]?i.prototype.reloadTile.call(this,e,t):this.loadTile(e,t)},e.prototype.loadGeoJSON=function(e,t){if(e.request)se.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},e.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},e.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},e.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},e})(d),$e=function(e){var r=this;this.self=e,this.actor=new se.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:d,geojson:Xe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(e){if(se.plugin.isLoaded())throw new Error("RTL text plugin already registered.");se.plugin.applyArabicShaping=e.applyArabicShaping,se.plugin.processBidirectionalText=e.processBidirectionalText,se.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return $e.prototype.setLayers=function(e,t,r){this.getLayerIndex(e).replace(t),r()},$e.prototype.updateLayers=function(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()},$e.prototype.loadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).loadTile(t,r)},$e.prototype.loadDEMTile=function(e,t,r){this.getDEMWorkerSource(e,t.source).loadTile(t,r)},$e.prototype.reloadTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).reloadTile(t,r)},$e.prototype.abortTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)},$e.prototype.removeTile=function(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)},$e.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},$e.prototype.removeSource=function(e,t,r){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}},$e.prototype.loadWorkerSource=function(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}},$e.prototype.loadRTLTextPlugin=function(e,t,r){try{se.plugin.isLoaded()||(this.self.importScripts(t),r(se.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){r(e.toString())}},$e.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},$e.prototype.getWorkerSource=function(n,e,t){var i=this;if(this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][e]||(this.workerSources[n][e]={}),!this.workerSources[n][e][t]){var r={send:function(e,t,r){i.actor.send(e,t,r,n)}};this.workerSources[n][e][t]=new this.workerSourceTypes[e](r,this.getLayerIndex(n))}return this.workerSources[n][e][t]},$e.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new f),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new $e(self),$e})),e(0,(function(oe){var r=oe.createCommonjsModule((function(e){function a(e){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e})()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(t=e&&e.failIfMajorPerformanceCaveat,void 0===o[t]&&(o[t]=(r=t,n=document.createElement("canvas"),(i=Object.create(a.webGLContextAttributes)).failIfMajorPerformanceCaveat=r,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i))),o[t]));var t,r,n,i}e.exports?e.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a);var o={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),v={create:function(e,t,r){var n=oe.window.document.createElement(e);return t&&(n.className=t),r&&r.appendChild(n),n},createNS:function(e,t){return oe.window.document.createElementNS(e,t)}},n=oe.window.document?oe.window.document.documentElement.style:null;function e(e){if(!n)return null;for(var t=0;t<e.length;t++)if(e[t]in n)return e[t];return e[0]}var t,i=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);v.disableDrag=function(){n&&i&&(t=n[i],n[i]="none")},v.enableDrag=function(){n&&i&&(n[i]=t)};var a=e(["transform","WebkitTransform"]),o=!(v.setTransform=function(e,t){e.style[a]=t});try{var s=Object.defineProperty({},"passive",{get:function(){o=!0}});oe.window.addEventListener("test",s,s),oe.window.removeEventListener("test",s,s)}catch(oe){o=!1}v.addEventListener=function(e,t,r,n){void 0===n&&(n={}),"passive"in n&&o?e.addEventListener(t,r,n):e.addEventListener(t,r,n.capture)},v.removeEventListener=function(e,t,r,n){void 0===n&&(n={}),"passive"in n&&o?e.removeEventListener(t,r,n):e.removeEventListener(t,r,n.capture)};var l=function(e){e.preventDefault(),e.stopPropagation(),oe.window.removeEventListener("click",l,!0)};v.suppressClick=function(){oe.window.addEventListener("click",l,!0),oe.window.setTimeout((function(){oe.window.removeEventListener("click",l,!0)}),0)},v.mousePos=function(e,t){var r=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new oe.Point(t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop)},v.touchPos=function(e,t){for(var r=e.getBoundingClientRect(),n=[],i="touchend"===t.type?t.changedTouches:t.touches,a=0;a<i.length;a++)n.push(new oe.Point(i[a].clientX-r.left-e.clientLeft,i[a].clientY-r.top-e.clientTop));return n},v.mouseButton=function(e){return void 0!==oe.window.InstallTrigger&&2===e.button&&e.ctrlKey&&oe.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},v.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var h={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},u="See https://www.mapbox.com/api-documentation/#access-tokens";function c(e,t){var r=g(h.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"/"!==r.path&&(e.path=""+r.path+e.path),!h.REQUIRE_ACCESS_TOKEN)return b(e);if(!(t=t||h.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+u);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+u);return e.params.push("access_token="+t),b(e)}function p(e){return 0===e.indexOf("mapbox:")}var m=function(e,t,r,n){var i=g(e);return p(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+r,c(i,n)):(i.path+=""+t+r,b(i))},d=/(\.(png|jpg)\d*)(?=$)/,f=function(e,t,r){if(!t||!p(t))return e;var n=g(e),i=oe.browser.devicePixelRatio>=2||512===r?"@2x":"",a=oe.browser.supportsWebp?".webp":"$1";return n.path=n.path.replace(d,""+i+a),(function(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(h.ACCESS_TOKEN||""))})(n.params),b(n)},y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function g(e){var t=e.match(y);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function b(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var _=function(){this.eventData={anonId:null,lastSuccess:null,accessToken:h.ACCESS_TOKEN},this.queue=[],this.pending=!1,this.pendingRequest=null};_.prototype.postTurnstileEvent=function(e){h.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return/(mapbox\.c)(n|om)/i.test(e)}))&&this.queueRequest(Date.now())},_.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()},_.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var r="mapbox.turnstileEventData:"+(h.ACCESS_TOKEN||""),n=oe.storageAvailable("localStorage"),e=!!this.eventData.accessToken&&this.eventData.accessToken!==h.ACCESS_TOKEN;if(e&&(this.eventData.anonId=this.eventData.lastSuccess=null),(!this.eventData.anonId||!this.eventData.lastSuccess)&&n)try{var i=oe.window.localStorage.getItem(r);i&&(this.eventData=JSON.parse(i))}catch(t){oe.warnOnce("Unable to read from LocalStorage")}oe.validateUuid(this.eventData.anonId)||(this.eventData.anonId=oe.uuid(),e=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;e=e||l>=1||l<-1||o.getDate()!==s.getDate()}if(!e)return this.processRequests();var u=g(h.EVENTS_URL);u.params.push("access_token="+(h.ACCESS_TOKEN||""));var c={url:b(u),headers:{"Content-Type":"text/plain"}},p=JSON.stringify([{event:"appUserTurnstile",created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.50.0","enabled.telemetry":!1,userId:this.eventData.anonId}]);this.pendingRequest=oe.postData(c,p,(function(e){if(t.pendingRequest=null,!e){if(t.eventData.lastSuccess=a,t.eventData.accessToken=h.ACCESS_TOKEN,n)try{oe.window.localStorage.setItem(r,JSON.stringify(t.eventData))}catch(e){oe.warnOnce("Unable to write to LocalStorage")}t.processRequests()}}))}};var x=new _,w=x.postTurnstileEvent.bind(x),D=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new oe.RGBAImage({width:1,height:1}),this.dirty=!0};D.prototype.isLoaded=function(){return this.loaded},D.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e)){for(var t=0,r=this.requestors;t<r.length;t+=1){var n=r[t],i=n.ids,a=n.callback;this._notify(i,a)}this.requestors=[]}},D.prototype.getImage=function(e){return this.images[e]},D.prototype.addImage=function(e,t){this.images[e]=t},D.prototype.removeImage=function(e){delete this.images[e],delete this.patterns[e]},D.prototype.listImages=function(){return Object.keys(this.images)},D.prototype.getImages=function(e,t){var r=!0;if(!this.isLoaded())for(var n=0,i=e;n<i.length;n+=1){var a=i[n];this.images[a]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},D.prototype._notify=function(e,t){for(var r={},n=0,i=e;n<i.length;n+=1){var a=i[n],o=this.images[a];o&&(r[a]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf})}t(null,r)},D.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},D.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var r=this.getImage(e);if(!r)return null;var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new oe.ImagePosition(n,r);return this.patterns[e]={bin:n,position:i},this._updatePatternAtlas(),i},D.prototype.bind=function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe.Texture(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},D.prototype._updatePatternAtlas=function(){var e=[];for(var t in this.patterns)e.push(this.patterns[t].bin);var r=oe.potpack(e),n=r.w,i=r.h,a=this.atlasImage;for(var o in a.resize({width:n||1,height:i||1}),this.patterns){var s=this.patterns[o].bin,l=s.x+1,u=s.y+1,c=this.images[o].data,p=c.width,h=c.height;oe.RGBAImage.copy(c,a,{x:0,y:0},{x:l,y:u},{width:p,height:h}),oe.RGBAImage.copy(c,a,{x:0,y:h-1},{x:l,y:u-1},{width:p,height:1}),oe.RGBAImage.copy(c,a,{x:0,y:0},{x:l,y:u+h},{width:p,height:1}),oe.RGBAImage.copy(c,a,{x:p-1,y:0},{x:l-1,y:u},{width:1,height:h}),oe.RGBAImage.copy(c,a,{x:0,y:0},{x:l+p,y:u},{width:1,height:h})}this.dirty=!0};var S=P,R=1e20;function P(e,t,r,n,i,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=a||"normal",this.radius=r||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function E(e,t,r,n,i,a,o){for(var s=0;s<t;s++){for(var l=0;l<r;l++)n[l]=e[l*t+s];for(A(n,i,a,o,r),l=0;l<r;l++)e[l*t+s]=i[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)n[s]=e[l*t+s];for(A(n,i,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function A(e,t,r,n,i){n[r[0]=0]=-R,n[1]=+R;for(var a=1,o=0;a<i;a++){for(var s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=n[o];)o--,s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);r[++o]=a,n[o]=s,n[o+1]=+R}for(o=a=0;a<i;a++){for(;n[o+1]<a;)o++;t[a]=(a-r[o])*(a-r[o])+e[r[o]]}}P.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var i=t.data[4*n+3]/255;this.gridOuter[n]=1===i?0:0===i?R:Math.pow(Math.max(0,.5-i),2),this.gridInner[n]=1===i?R:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(E(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),E(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var a=this.gridOuter[n]-this.gridInner[n];r[n]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return r};var M=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};M.prototype.setURL=function(e){this.url=e},M.prototype.getGlyphs=function(e,u){var l=this,t=[];for(var r in e)for(var n=0,i=e[r];n<i.length;n+=1){var a=i[n];t.push({stack:r,id:a})}oe.asyncAll(t,(function(e,r){var n=e.stack,i=e.id,a=l.entries[n];a||(a=l.entries[n]={glyphs:{},requests:{}});var t=a.glyphs[i];if(void 0===t)if(t=l._tinySDF(a,n,i))r(null,{stack:n,id:i,glyph:t});else{var o=Math.floor(i/256);if(256*o>65535)r(new Error("glyphs > 65535 not supported"));else{var s=a.requests[o];s||(s=a.requests[o]=[],M.loadGlyphRange(n,o,l.url,l.requestTransform,(function(e,t){if(t)for(var r in t)a.glyphs[+r]=t[+r];for(var n=0,i=s;n<i.length;n+=1)(0,i[n])(e,t);delete a.requests[o]}))),s.push((function(e,t){e?r(e):t&&r(null,{stack:n,id:i,glyph:t[i]||null})}))}}else r(null,{stack:n,id:i,glyph:t})}),(function(e,t){if(e)u(e);else if(t){for(var r={},n=0,i=t;n<i.length;n+=1){var a=i[n],o=a.stack,s=a.id,l=a.glyph;(r[o]||(r[o]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}u(null,r)}}))},M.prototype._tinySDF=function(e,t,r){var n=this.localIdeographFontFamily;if(n&&(oe.isChar["CJK Unified Ideographs"](r)||oe.isChar["Hangul Syllables"](r))){var i=e.tinySDF;if(!i){var a="400";/bold/i.test(t)?a="900":/medium/i.test(t)?a="500":/light/i.test(t)&&(a="200"),i=e.tinySDF=new M.TinySDF(24,3,8,.25,n,a)}return{id:r,bitmap:new oe.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=function(e,t,r,n,o){var i=256*t,a=i+255,s=n(function(e,t){if(!p(e))return e;var r=g(e);return r.path="/fonts/v1"+r.path,c(r,t)}(r).replace("{fontstack}",e).replace("{range}",i+"-"+a),oe.ResourceType.Glyphs);oe.getArrayBuffer(s,(function(e,t){if(e)o(e);else if(t){for(var r={},n=0,i=oe.parseGlyphPBF(t.data);n<i.length;n+=1){var a=i[n];r[a.id]=a}o(null,r)}}))},M.TinySDF=S;var I=function(){this.specification=oe.styleSpec.light.position};I.prototype.possiblyEvaluate=function(e,t){return oe.sphericalToCartesian(e.expression.evaluate(t))},I.prototype.interpolate=function(e,t,r){return{x:oe.number(e.x,t.x,r),y:oe.number(e.y,t.y,r),z:oe.number(e.z,t.z,r)}};var O=new oe.Properties({anchor:new oe.DataConstantProperty(oe.styleSpec.light.anchor),position:new I,color:new oe.DataConstantProperty(oe.styleSpec.light.color),intensity:new oe.DataConstantProperty(oe.styleSpec.light.intensity)}),C=(function(t){function e(e){t.call(this),this._transitionable=new oe.Transitionable(O),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(e){if(!this._validate(oe.validateLight,e))for(var t in e){var r=e[t];oe.endsWith(t,"-transition")?this._transitionable.setTransition(t.slice(0,-"-transition".length),r):this._transitionable.setValue(t,r)}},e.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},e.prototype._validate=function(e,t){return oe.emitValidationErrors(this,e.call(oe.validateStyle,oe.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:oe.styleSpec})))},e})(oe.Evented),T=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};T.prototype.getDash=function(e,t){var r=e.join(",")+String(t);return this.positions[r]||(this.positions[r]=this.addDash(e,t)),this.positions[r]},T.prototype.addDash=function(e,t){var r=t?7:0,n=2*r+1;if(this.nextRow+n>this.height)return oe.warnOnce("LineAtlas out of space"),null;for(var i=0,a=0;a<e.length;a++)i+=e[a];for(var o=this.width/i,s=o/2,l=e.length%2==1,u=-r;u<=r;u++)for(var c=this.nextRow+r+u,p=this.width*c,h=l?-e[e.length-1]:0,d=e[0],f=1,m=0;m<this.width;m++){for(;d<m/o;)h=d,d+=e[f],l&&f===e.length-1&&(d+=e[0]),f++;var y=Math.abs(m-h*o),g=Math.abs(m-d*o),v=Math.min(y,g),b=f%2==1,_=void 0;if(t){var x=r?u/r*(s+1):0;if(b){var w=s-Math.abs(x);_=Math.sqrt(v*v+w*w)}else _=s-Math.sqrt(v*v+x*x)}else _=(b?1:-1)*v;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,_+128))}var D={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:i};return this.nextRow+=n,this.dirty=!0,D},T.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var k=function e(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=oe.uniqueId();for(var n=this.workerPool.acquire(this.id),i=0;i<n.length;i++){var a=n[i],o=new e.Actor(a,r,this.id);o.name="Worker "+i,this.actors.push(o)}};function L(e,t,n){var r=function(e,t){if(e)return n(e);if(t){var r=oe.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(r.vectorLayers=t.vector_layers,r.vectorLayerIds=r.vectorLayers.map((function(e){return e.id}))),n(null,r)}};return e.url?oe.getJSON(t(function(e,t){if(!p(e))return e;var r=g(e);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),c(r,t)}(e.url),oe.ResourceType.Source),r):oe.browser.frame((function(){return r(null,e)}))}k.prototype.broadcast=function(r,n,e){e=e||function(){},oe.asyncAll(this.actors,(function(e,t){e.send(r,n,t)}),e)},k.prototype.send=function(e,t,r,n){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(e,t,r),n},k.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},k.Actor=oe.Actor;var N=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};N.prototype.wrap=function(){return new N(oe.wrap(this.lng,-180,180),this.lat)},N.prototype.toArray=function(){return[this.lng,this.lat]},N.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},N.prototype.toBounds=function(e){var t=360*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return new z(new N(this.lng-r,this.lat-t),new N(this.lng+r,this.lat+t))},N.convert=function(e){if(e instanceof N)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new N(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new N(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var z=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};z.prototype.setNorthEast=function(e){return this._ne=e instanceof N?new N(e.lng,e.lat):N.convert(e),this},z.prototype.setSouthWest=function(e){return this._sw=e instanceof N?new N(e.lng,e.lat):N.convert(e),this},z.prototype.extend=function(e){var t,r,n=this._sw,i=this._ne;if(e instanceof N)r=t=e;else{if(!(e instanceof z))return Array.isArray(e)?e.every(Array.isArray)?this.extend(z.convert(e)):this.extend(N.convert(e)):this;if(t=e._sw,r=e._ne,!t||!r)return this}return n||i?(n.lng=Math.min(t.lng,n.lng),n.lat=Math.min(t.lat,n.lat),i.lng=Math.max(r.lng,i.lng),i.lat=Math.max(r.lat,i.lat)):(this._sw=new N(t.lng,t.lat),this._ne=new N(r.lng,r.lat)),this},z.prototype.getCenter=function(){return new N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},z.prototype.getSouthWest=function(){return this._sw},z.prototype.getNorthEast=function(){return this._ne},z.prototype.getNorthWest=function(){return new N(this.getWest(),this.getNorth())},z.prototype.getSouthEast=function(){return new N(this.getEast(),this.getSouth())},z.prototype.getWest=function(){return this._sw.lng},z.prototype.getSouth=function(){return this._sw.lat},z.prototype.getEast=function(){return this._ne.lng},z.prototype.getNorth=function(){return this._ne.lat},z.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},z.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},z.prototype.isEmpty=function(){return!(this._sw&&this._ne)},z.convert=function(e){return!e||e instanceof z?e:new z(e)};var j=function(e,t,r){this.bounds=z.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=r||24};j.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},j.prototype.contains=function(e){var t=Math.floor(this.lngX(this.bounds.getWest(),e.z)),r=Math.floor(this.latY(this.bounds.getNorth(),e.z)),n=Math.ceil(this.lngX(this.bounds.getEast(),e.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),e.z));return e.x>=t&&e.x<n&&e.y>=r&&e.y<i},j.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},j.prototype.latY=function(e,t){var r=oe.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),n=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+r)/(1-r))*-n};var F=(function(i){function e(e,t,r,n){if(i.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,oe.extend(this,oe.pick(t,["url","scheme","tileSize"])),this._options=oe.extend({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.load=function(){var r=this;this.fire(new oe.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._transformRequest,(function(e,t){r._tileJSONRequest=null,e?r.fire(new oe.ErrorEvent(e)):t&&(oe.extend(r,t),t.bounds&&(r.tileBounds=new j(t.bounds,r.minzoom,r.maxzoom)),w(t.tiles),r.fire(new oe.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new oe.Event("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return oe.extend({},this._options)},e.prototype.loadTile=function(r,n){var e=f(r.tileID.canonical.url(this.tiles,this.scheme),this.url),t={request:this.map._transformRequest(e,oe.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:oe.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function i(e,t){return r.aborted?n(null):e&&404!==e.status?n(e):(t&&t.resourceTiming&&(r.resourceTiming=t.resourceTiming),this.map._refreshExpiredTiles&&t&&r.setExpiryData(t),r.loadVectorData(t,this.map.painter),n(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}t.request.collectResourceTiming=this._collectResourceTiming,void 0===r.workerID||"expired"===r.state?r.workerID=this.dispatcher.send("loadTile",t,i.bind(this)):"loading"===r.state?r.reloadCallback=n:this.dispatcher.send("reloadTile",t,i.bind(this),r.workerID)},e.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},e.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},e.prototype.hasTransition=function(){return!1},e})(oe.Evented),V=(function(i){function e(e,t,r,n){i.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=oe.extend({},t),oe.extend(this,oe.pick(t,["url","scheme","tileSize"]))}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.load=function(){var r=this;this.fire(new oe.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._transformRequest,(function(e,t){r._tileJSONRequest=null,e?r.fire(new oe.ErrorEvent(e)):t&&(oe.extend(r,t),t.bounds&&(r.tileBounds=new j(t.bounds,r.minzoom,r.maxzoom)),w(t.tiles),r.fire(new oe.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new oe.Event("data",{dataType:"source",sourceDataType:"content"})))}))},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return oe.extend({},this._options)},e.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.loadTile=function(i,a){var o=this,e=f(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=oe.getImage(this.map._transformRequest(e,oe.ResourceType.Tile),(function(e,t){if(delete i.request,i.aborted)i.state="unloaded",a(null);else if(e)i.state="errored",a(e);else if(t){o.map._refreshExpiredTiles&&i.setExpiryData(t),delete t.cacheControl,delete t.expires;var r=o.map.painter.context,n=r.gl;i.texture=o.map.painter.getTileTexture(t.width),i.texture?i.texture.update(t,{useMipmap:!0}):(i.texture=new oe.Texture(r,t,n.RGBA,{useMipmap:!0}),i.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),i.state="loaded",a(null)}}))},e.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},e.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},e.prototype.hasTransition=function(){return!1},e})(oe.Evented),G=(function(i){function e(e,t,r,n){i.call(this,e,t,r,n),this.type="raster-dem",this.maxzoom=22,this._options=oe.extend({},t),this.encoding=t.encoding||"mapbox"}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function(i,a){var e=f(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=oe.getImage(this.map._transformRequest(e,oe.ResourceType.Tile),function(e,t){if(delete i.request,i.aborted)i.state="unloaded",a(null);else if(e)i.state="errored",a(e);else if(t){this.map._refreshExpiredTiles&&i.setExpiryData(t),delete t.cacheControl,delete t.expires;var r=oe.browser.getImageData(t),n={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:r,encoding:this.encoding};i.workerID&&"expired"!==i.state||(i.workerID=this.dispatcher.send("loadDEMTile",n,function(e,t){e&&(i.state="errored",a(e)),t&&(i.dem=t,i.needsHillshadePrepare=!0,i.state="loaded",a(null))}.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)},e.prototype._getNeighboringTiles=function(e){var t=e.canonical,r=Math.pow(2,t.z),n=(t.x-1+r)%r,i=0===t.x?e.wrap-1:e.wrap,a=(t.x+1+r)%r,o=t.x+1===r?e.wrap+1:e.wrap,s={};return s[new oe.OverscaledTileID(e.overscaledZ,i,t.z,n,t.y).key]={backfilled:!1},s[new oe.OverscaledTileID(e.overscaledZ,o,t.z,a,t.y).key]={backfilled:!1},t.y>0&&(s[new oe.OverscaledTileID(e.overscaledZ,i,t.z,n,t.y-1).key]={backfilled:!1},s[new oe.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new oe.OverscaledTileID(e.overscaledZ,o,t.z,a,t.y-1).key]={backfilled:!1}),t.y+1<r&&(s[new oe.OverscaledTileID(e.overscaledZ,i,t.z,n,t.y+1).key]={backfilled:!1},s[new oe.OverscaledTileID(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new oe.OverscaledTileID(e.overscaledZ,o,t.z,a,t.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},e})(V),B=(function(a){function e(e,t,r,n){a.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(n),this._data=t.data,this._options=oe.extend({},t),this._collectResourceTiming=t.collectResourceTiming,this._resourceTiming=[],void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution);var i=oe.EXTENT/this.tileSize;this.workerOptions=oe.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*i,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*i,extent:oe.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:void 0!==t.clusterMaxZoom?Math.min(t.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:oe.EXTENT,radius:(t.clusterRadius||50)*i,log:!1}},t.workerOptions)}return a&&(e.__proto__=a),((e.prototype=Object.create(a&&a.prototype)).constructor=e).prototype.load=function(){var r=this;this.fire(new oe.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)r.fire(new oe.ErrorEvent(e));else{var t={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(t.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new oe.Event("data",t))}}))},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new oe.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)r.fire(new oe.ErrorEvent(e));else{var t={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(t.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new oe.Event("data",t))}})),this},e.prototype.getClusterExpansionZoom=function(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},e.prototype.getClusterChildren=function(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},e.prototype.getClusterLeaves=function(e,t,r,n){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n,this.workerID),this},e.prototype._updateWorkerData=function(r){var n=this,i=oe.extend({},this.workerOptions),e=this._data;"string"==typeof e?(i.request=this.map._transformRequest(oe.browser.resolveURL(e),oe.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(e),this.workerID=this.dispatcher.send(this.type+".loadData",i,(function(e,t){n._removed||t&&t.abandoned||(n._loaded=!0,t&&t.resourceTiming&&t.resourceTiming[n.id]&&(n._resourceTiming=t.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:i.source},null,n.workerID),r(e))}),this.workerID)},e.prototype.loadTile=function(r,n){var i=this,a=void 0===r.workerID?"loadTile":"reloadTile",e={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:oe.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};r.workerID=this.dispatcher.send(a,e,(function(e,t){return r.unloadVectorData(),r.aborted?n(null):e?n(e):(r.loadVectorData(t,i.map.painter,"reloadTile"===a),n(null))}),this.workerID)},e.prototype.abortTile=function(e){e.aborted=!0},e.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},e.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},e.prototype.serialize=function(){return oe.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e})(oe.Evented),U=(function(i){function e(e,t,r,n){i.call(this),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(n),this.options=t}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.load=function(r,n){var i=this;this.fire(new oe.Event("dataloading",{dataType:"source"})),this.url=this.options.url,oe.getImage(this.map._transformRequest(this.url,oe.ResourceType.Image),(function(e,t){e?i.fire(new oe.ErrorEvent(e)):t&&(i.image=oe.browser.getImageData(t),r&&(i.coordinates=r),n&&n(),i._finishLoading())}))},e.prototype.updateImage=function(e){var t=this;return this.image&&e.url&&(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null}))),this},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new oe.Event("data",{dataType:"source",sourceDataType:"metadata"})))},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,r=e.map((function(e){return t.transform.locationCoordinate(N.convert(e)).zoomTo(0)})),n=this.centerCoord=oe.getCoordinatesCenter(r);n.column=Math.floor(n.column),n.row=Math.floor(n.row),this.tileID=new oe.CanonicalTileID(n.zoom,n.column,n.row),this.minzoom=this.maxzoom=n.zoom;var i=r.map((function(e){var t=e.zoomTo(n.zoom);return new oe.Point(Math.round((t.column-n.column)*oe.EXTENT),Math.round((t.row-n.row)*oe.EXTENT))}));return this._boundsArray=new oe.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,oe.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,oe.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,oe.EXTENT,oe.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new oe.Event("data",{dataType:"source",sourceDataType:"content"})),this},e.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,t=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,oe.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=oe.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new oe.Texture(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e).buckets={}:e.state="errored",t(null)},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e})(oe.Evented),H=(function(i){function e(e,t,r,n){i.call(this,e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.load=function(){var r=this,e=this.options;this.urls=[];for(var t=0,n=e.urls;t<n.length;t+=1){var i=n[t];r.urls.push(r.map._transformRequest(i,oe.ResourceType.Source).url)}oe.getVideo(this.urls,(function(e,t){e?r.fire(new oe.ErrorEvent(e)):t&&(r.video=t,r.video.loop=!0,r.video.addEventListener("playing",(function(){r.map.triggerRepaint()})),r.map&&r.video.play(),r._finishLoading())}))},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,t=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,oe.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=oe.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new oe.Texture(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e})(U),q=(function(i){function e(e,t,r,n){i.call(this,e,t,r,n),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new oe.ErrorEvent(new oe.ValidationError("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new oe.ErrorEvent(new oe.ValidationError("sources."+e,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new oe.ErrorEvent(new oe.ValidationError("sources."+e,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof oe.window.HTMLCanvasElement||this.fire(new oe.ErrorEvent(new oe.ValidationError("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new oe.ErrorEvent(new oe.ValidationError("sources."+e,null,'missing required property "canvas"'))),this.options=t,this.animate=void 0===t.animate||t.animate}return i&&(e.__proto__=i),((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof oe.window.HTMLCanvasElement?this.options.canvas:oe.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new oe.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,r=t.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,oe.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=oe.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe.Texture(t,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},e.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var r=t[e];if(isNaN(r)||r<=0)return!0}return!1},e})(U),W={vector:F,raster:V,"raster-dem":G,geojson:B,video:H,image:U,canvas:q};function Y(r,e,t,n,i){var a=i.maxPitchScaleFactor(),o=r.tilesIn(t,a);o.sort(Z);for(var y=[],s=0,l=o;s<l.length;s+=1){var u=l[s];y.push({wrappedTileID:u.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(e,r._state,u.queryGeometry,u.scale,n,i,a,r.transform.calculatePosMatrix(u.tileID.toUnwrapped()))})}var c=(function(e){for(var t={},r={},n=0,i=y;n<i.length;n+=1){var a=i[n],o=a.queryResults,s=a.wrappedTileID,l=r[s]=r[s]||{};for(var u in o)for(var c=o[u],p=l[u]=l[u]||{},h=t[u]=t[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return t})();for(var p in c)c[p].forEach((function(e){var t=r.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=t}));return c}function Z(e,t){var r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}var X=function(e,t){this.max=e,this.onRemove=t,this.reset()};X.prototype.reset=function(){for(var e in this.data)for(var t=0,r=this.data[e];t<r.length;t+=1){var n=r[t];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},X.prototype.add=function(e,t,r){var n=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==r&&(a.timeout=setTimeout((function(){n.remove(e,a)}),r)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},X.prototype.has=function(e){return e.wrapped().key in this.data},X.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},X.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},X.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},X.prototype.remove=function(e,t){if(!this.has(e))return this;var r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this},X.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var $=function(e,t,r){var n=(this.context=e).gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};$.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},$.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},$.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var K={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},J=function(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n;var i=(this.context=e).gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};J.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},J.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},J.prototype.enableAttributes=function(e,t){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],i=t.attributes[n.name];void 0!==i&&e.enableVertexAttribArray(i)}},J.prototype.setVertexAttribPointers=function(e,t,r){for(var n=0;n<this.attributes.length;n++){var i=this.attributes[n],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[K[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}},J.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var Q=function(e){this.context=e,this.default=oe.Color.transparent,this.current=this.default,this.dirty=!1};Q.prototype.get=function(){return this.current},Q.prototype.setDefault=function(){this.set(this.default)},Q.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!0!==this.dirty||(this.context.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)};var ee=function(e){this.context=e,this.default=1,this.current=this.default,this.dirty=!1};ee.prototype.get=function(){return this.current},ee.prototype.setDefault=function(){this.set(this.default)},ee.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.clearDepth(e),this.current=e,this.dirty=!1)};var te=function(e){this.context=e,this.default=0,this.current=this.default,this.dirty=!1};te.prototype.get=function(){return this.current},te.prototype.setDefault=function(){this.set(this.default)},te.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.clearStencil(e),this.current=e,this.dirty=!1)};var re=function(e){this.context=e,this.default=[!0,!0,!0,!0],this.current=this.default,this.dirty=!1};re.prototype.get=function(){return this.current},re.prototype.setDefault=function(){this.set(this.default)},re.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!0!==this.dirty||(this.context.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)};var ne=function(e){this.context=e,this.default=!0,this.current=this.default,this.dirty=!1};ne.prototype.get=function(){return this.current},ne.prototype.setDefault=function(){this.set(this.default)},ne.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.depthMask(e),this.current=e,this.dirty=!1)};var ie=function(e){this.context=e,this.default=255,this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.setDefault=function(){this.set(this.default)},ie.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.stencilMask(e),this.current=e,this.dirty=!1)};var ae=function(e){this.context=e,this.default={func:e.gl.ALWAYS,ref:0,mask:255},this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.setDefault=function(){this.set(this.default)},ae.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask&&!0!==this.dirty||(this.context.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)};var se=function(e){this.context=e;var t=this.context.gl;this.default=[t.KEEP,t.KEEP,t.KEEP],this.current=this.default,this.dirty=!1};se.prototype.get=function(){return this.current},se.prototype.setDefault=function(){this.set(this.default)},se.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&!0!==this.dirty||(this.context.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)};var le=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};le.prototype.get=function(){return this.current},le.prototype.setDefault=function(){this.set(this.default)},le.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}};var ue=function(e){this.context=e,this.default=[0,1],this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.setDefault=function(){this.set(this.default)},ue.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!0!==this.dirty||(this.context.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)};var ce=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};ce.prototype.get=function(){return this.current},ce.prototype.setDefault=function(){this.set(this.default)},ce.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}};var pe=function(e){this.context=e,this.default=e.gl.LESS,this.current=this.default,this.dirty=!1};pe.prototype.get=function(){return this.current},pe.prototype.setDefault=function(){this.set(this.default)},pe.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.depthFunc(e),this.current=e,this.dirty=!1)};var he=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};he.prototype.get=function(){return this.current},he.prototype.setDefault=function(){this.set(this.default)},he.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}};var de=function(e){this.context=e;var t=this.context.gl;this.default=[t.ONE,t.ZERO],this.current=this.default,this.dirty=!1};de.prototype.get=function(){return this.current},de.prototype.setDefault=function(){this.set(this.default)},de.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&!0!==this.dirty||(this.context.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)};var fe=function(e){this.context=e,this.default=oe.Color.transparent,this.current=this.default,this.dirty=!1};fe.prototype.get=function(){return this.current},fe.prototype.setDefault=function(){this.set(this.default)},fe.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a&&!0!==this.dirty||(this.context.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)};var me=function(e){this.context=e,this.default=this.context.gl.FUNC_ADD,this.current=this.default,this.dirty=!1};me.prototype.get=function(){return this.current},me.prototype.setDefault=function(){this.set(this.default)},me.prototype.set=function(e){e===this.current&&!0!==this.dirty||(this.context.gl.blendEquation(e),this.current=e,this.dirty=!1)};var ye=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};ye.prototype.get=function(){return this.current},ye.prototype.setDefault=function(){this.set(this.default)},ye.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}};var ge=function(e){this.context=e;var t=this.context.gl;this.default=t.BACK,this.current=this.default,this.dirty=!1};ge.prototype.get=function(){return this.current},ge.prototype.setDefault=function(){this.set(this.default)},ge.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.cullFace(e),this.current=e,this.dirty=!1)};var ve=function(e){this.context=e;var t=this.context.gl;this.default=t.CCW,this.current=this.default,this.dirty=!1};ve.prototype.get=function(){return this.current},ve.prototype.setDefault=function(){this.set(this.default)},ve.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.frontFace(e),this.current=e,this.dirty=!1)};var be=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};be.prototype.get=function(){return this.current},be.prototype.setDefault=function(){this.set(this.default)},be.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.useProgram(e),this.current=e,this.dirty=!1)};var _e=function(e){this.context=e,this.default=e.gl.TEXTURE0,this.current=this.default,this.dirty=!1};_e.prototype.get=function(){return this.current},_e.prototype.setDefault=function(){this.set(this.default)},_e.prototype.set=function(e){this.current===e&&!0!==this.dirty||(this.context.gl.activeTexture(e),this.current=e,this.dirty=!1)};var xe=function(e){this.context=e;var t=this.context.gl;this.default=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.current=this.default,this.dirty=!1};xe.prototype.get=function(){return this.current},xe.prototype.setDefault=function(){this.set(this.default)},xe.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&!0!==this.dirty||(this.context.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)};var we=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};we.prototype.get=function(){return this.current},we.prototype.setDefault=function(){this.set(this.default)},we.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}};var De=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};De.prototype.get=function(){return this.current},De.prototype.setDefault=function(){this.set(this.default)},De.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}};var Se=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};Se.prototype.get=function(){return this.current},Se.prototype.setDefault=function(){this.set(this.default)},Se.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}};var Re=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};Re.prototype.get=function(){return this.current},Re.prototype.setDefault=function(){this.set(this.default)},Re.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}};var Pe=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};Pe.prototype.get=function(){return this.current},Pe.prototype.setDefault=function(){this.set(this.default)},Pe.prototype.set=function(e){var t=this.context.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1};var Ee=function(e){this.context=e,this.default=null,this.current=this.default,this.dirty=!1};Ee.prototype.get=function(){return this.current},Ee.prototype.setDefault=function(){this.set(this.default)},Ee.prototype.set=function(e){(this.current!==e&&this.context.extVertexArrayObject||!0===this.dirty)&&(this.context.extVertexArrayObject.bindVertexArrayOES(e),this.current=e,this.dirty=!1)};var Ae=function(e){this.context=e,this.default=4,this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.setDefault=function(){this.set(this.default)},Ae.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}};var Me=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};Me.prototype.get=function(){return this.current},Me.prototype.setDefault=function(){this.set(this.default)},Me.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}};var Ie=function(e){this.context=e,this.default=!1,this.current=this.default,this.dirty=!1};Ie.prototype.get=function(){return this.current},Ie.prototype.setDefault=function(){this.set(this.default)},Ie.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}};var Oe=function(e,t){this.context=e,this.default=null,this.current=this.default,this.dirty=!1,this.parent=t};Oe.prototype.get=function(){return this.current};var Ce=(function(r){function e(e,t){r.call(this,e,t),this.dirty=!1}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.setDefault=function(){this.set(this.default)},e.prototype.set=function(e){if(this.dirty||this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e})(Oe),Te=(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.setDefault=function(){this.set(this.default)},t.prototype.set=function(e){if(this.current!==e||!0===this.dirty){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t})(Oe),ke=function(e,t,r){this.context=e,this.width=t,this.height=r;var n=e.gl,i=this.framebuffer=n.createFramebuffer();this.colorAttachment=new Ce(e,i),this.depthAttachment=new Te(e,i)};ke.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var r=this.depthAttachment.get();r&&e.deleteRenderbuffer(r),e.deleteFramebuffer(this.framebuffer)};var Le=function(e,t,r){this.func=e,this.mask=t,this.range=r};Le.ReadOnly=!1,Le.ReadWrite=!0,Le.disabled=new Le(519,Le.ReadOnly,[0,1]);var Ne=function(e,t,r,n,i,a){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=a};Ne.disabled=new Ne({func:519,mask:0},0,0,7680,7680,7680);var ze=function(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r};ze.disabled=new ze(ze.Replace=[1,0],oe.Color.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,oe.Color.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],oe.Color.transparent,[!0,!0,!0,!0]);var je=function(e,t,r){this.enable=e,this.mode=t,this.frontFace=r};je.disabled=new je(!1,1029,2305),je.backCCW=new je(!0,1029,2305);var Fe=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Q(this),this.clearDepth=new ee(this),this.clearStencil=new te(this),this.colorMask=new re(this),this.depthMask=new ne(this),this.stencilMask=new ie(this),this.stencilFunc=new ae(this),this.stencilOp=new se(this),this.stencilTest=new le(this),this.depthRange=new ue(this),this.depthTest=new ce(this),this.depthFunc=new pe(this),this.blend=new he(this),this.blendFunc=new de(this),this.blendColor=new fe(this),this.blendEquation=new me(this),this.cullFace=new ye(this),this.cullFaceSide=new ge(this),this.frontFace=new ve(this),this.program=new be(this),this.activeTexture=new _e(this),this.viewport=new xe(this),this.bindFramebuffer=new we(this),this.bindRenderbuffer=new De(this),this.bindTexture=new Se(this),this.bindVertexBuffer=new Re(this),this.bindElementBuffer=new Pe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ee(this),this.pixelStoreUnpack=new Ae(this),this.pixelStoreUnpackPremultiplyAlpha=new Me(this),this.pixelStoreUnpackFlipY=new Ie(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Fe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Fe.prototype.createIndexBuffer=function(e,t){return new $(this,e,t)},Fe.prototype.createVertexBuffer=function(e,t,r){return new J(this,e,t,r)},Fe.prototype.createRenderbuffer=function(e,t,r){var n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i},Fe.prototype.createFramebuffer=function(e,t){return new ke(this,e,t)},Fe.prototype.clear=function(e){var t=e.color,r=e.depth,n=this.gl,i=0;t&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(i|=n.DEPTH_BUFFER_BIT,this.clearDepth.set(r),this.depthMask.set(!0)),n.clear(i)},Fe.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Fe.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Fe.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Fe.prototype.setColorMode=function(e){oe.isEqual(e.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Fe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ve=(function(i){function x(e,t,r){var n=this;i.call(this),this.id=e,this.dispatcher=r,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))})),this.on("error",(function(){n._sourceErrored=!0})),this._source=(function(e,t,r,n){var i=new W[t.type](e,t,r,n);if(i.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+i.id);return oe.bindAll(["load","abort","unload","serialize","prepare"],i),i})(e,t,r,this),this._tiles={},this._cache=new X(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new oe.SourceFeatureState}return i&&(x.__proto__=i),((x.prototype=Object.create(i&&i.prototype)).constructor=x).prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},x.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},x.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},x.prototype.getSource=function(){return this._source},x.prototype.pause=function(){this._paused=!0},x.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},x.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},x.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},x.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},x.prototype.serialize=function(){return this._source.serialize()},x.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[t].upload(e)},x.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Be)},x.prototype.getRenderableIds=function(e){var o=this,t=[];for(var r in o._tiles)o._isIdRenderable(+r,e)&&t.push(+r);return e?t.sort((function(e,t){var r=o._tiles[e].tileID,n=o._tiles[t].tileID,i=new oe.Point(r.canonical.x,r.canonical.y)._rotate(o.transform.angle),a=new oe.Point(n.canonical.x,n.canonical.y)._rotate(o.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-i.y||a.x-i.x})):t.sort(Be)},x.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},x.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},x.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},x.prototype._reloadTile=function(e,t){var r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))},x.prototype._tileLoaded=function(e,t,r,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new oe.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=oe.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new oe.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},x.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),r=0;r<t.length;r++){var n=t[r];if(e.neighboringTiles&&e.neighboringTiles[n]){var i=this.getTileByID(n);a(e,i),a(i,e)}}function a(e,t){e.needsHillshadePrepare=!0;var r=t.tileID.canonical.x-e.tileID.canonical.x,n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}},x.prototype.getTile=function(e){return this.getTileByID(e.key)},x.prototype.getTileByID=function(e){return this._tiles[e]},x.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},x.prototype._retainLoadedChildren=function(e,t,r,n){for(var i in this._tiles){var a=this._tiles[i];if(!(n[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>r)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){n[o.key]=o;break}}}},x.prototype.findLoadedParent=function(e,t){for(var r=e.overscaledZ-1;r>=t;r--){var n=e.scaledTo(r);if(!n)return;var i=String(n.key),a=this._tiles[i];if(a&&a.hasData())return a;if(this._cache.has(n))return this._cache.get(n)}},x.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),r=Math.floor(5*t),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},x.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,r=Math.round(t);if(this._prevLng=e,r){var n={};for(var i in this._tiles){var a=this._tiles[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+r),n[a.tileID.key]=a}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},x.prototype.update=function(e){var t=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new oe.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(e){return t._source.hasTile(e)})))):r=[];var n=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),i=Math.max(n-x.maxOverzooming,this._source.minzoom),a=Math.max(n+x.maxUnderzooming,this._source.minzoom),o=this._updateRetainedTiles(r,n);if(Ue(this._source.type)){for(var s={},l={},u=0,c=Object.keys(o);u<c.length;u+=1){var p=c[u],h=o[p],d=t._tiles[p];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=oe.browser.now())){var f=t.findLoadedParent(h,i);f&&(t._addTile(f.tileID),s[f.tileID.key]=f.tileID),l[p]=h}}for(var m in this._retainLoadedChildren(l,n,a,o),s)o[m]||(t._coveredTiles[m]=!0,o[m]=s[m])}for(var y in o)t._tiles[y].clearFadeHold();for(var g=0,v=oe.keysDifference(this._tiles,o);g<v.length;g+=1){var b=v[g],_=t._tiles[b];_.hasSymbolBuckets&&!_.holdingForFade()?_.setHoldDuration(t.map._fadeDuration):_.hasSymbolBuckets&&!_.symbolFadeFinished()||t._removeTile(b)}}},x.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},x.prototype._updateRetainedTiles=function(e,t){for(var r={},n={},i=Math.max(t-x.maxOverzooming,this._source.minzoom),a=Math.max(t+x.maxUnderzooming,this._source.minzoom),o={},s=0,l=e;s<l.length;s+=1){var u=l[s],c=this._addTile(u);r[u.key]=u,c.hasData()||t<this._source.maxzoom&&(o[u.key]=u)}this._retainLoadedChildren(o,t,a,r);for(var p=0,h=e;p<h.length;p+=1){var d=h[p],f=this._tiles[d.key];if(!f.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var g=d.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var v=f.wasRequested(),b=d.overscaledZ-1;b>=i;--b){var _=d.scaledTo(b);if(n[_.key])break;if(n[_.key]=!0,!(f=this.getTile(_))&&v&&(f=this._addTile(_)),f&&(r[_.key]=_,v=f.wasRequested(),f.hasData()))break}}}return r},x.prototype._addTile=function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var r=Boolean(t);return r||(t=new oe.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new oe.Event("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null},x.prototype._setTileReloadTimer=function(e,t){var r=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((function(){r._reloadTile(e,"expired"),delete r._timers[e]}),n))},x.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},x.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},x.prototype.tilesIn=function(e,t){for(var r=[],n=this.getIds(),i=1/0,a=1/0,o=-1/0,s=-1/0,l=e[0].zoom,u=0;u<e.length;u++){var c=e[u];i=Math.min(i,c.column),a=Math.min(a,c.row),o=Math.max(o,c.column),s=Math.max(s,c.row)}for(var p=0;p<n.length;p++){var h=this._tiles[n[p]];if(!h.holdingForFade()){var d=h.tileID,f=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),m=t*h.queryPadding*oe.EXTENT/h.tileSize/f,y=[Ge(d,new oe.Coordinate(i,a,l)),Ge(d,new oe.Coordinate(o,s,l))];if(y[0].x-m<oe.EXTENT&&y[0].y-m<oe.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){for(var g=[],v=0;v<e.length;v++)g.push(Ge(d,e[v]));r.push({tile:h,tileID:d,queryGeometry:[g],scale:f})}}}return r},x.prototype.getVisibleCoordinates=function(e){for(var t=this,r=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),n=0,i=r;n<i.length;n+=1){var a=i[n];a.posMatrix=t.transform.calculatePosMatrix(a.toUnwrapped())}return r},x.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=oe.browser.now())return!0}return!1},x.prototype.setFeatureState=function(e,t,r){e=e||"_geojsonTileLayer",this._state.updateState(e,t,r)},x.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},x})(oe.Evented);function Ge(e,t){var r=t.zoomTo(e.canonical.z);return new oe.Point((r.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*oe.EXTENT,(r.row-e.canonical.y)*oe.EXTENT)}function Be(e,t){return e%32-t%32||t-e}function Ue(e){return"raster"===e||"image"===e||"video"===e}function He(){return new oe.window.Worker(wn.workerUrl)}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;var qe,We=function(){this.active={}};function Ye(e,t){var r={};for(var n in e)"ref"!==n&&(r[n]=e[n]);return oe.refProperties.forEach((function(e){e in t&&(r[e]=t[e])})),r}function Ze(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Ye(e[n],t[e[n].ref]));return e}We.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new He);return this.active[e]=!0,this.workers.slice()},We.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},We.workerCount=Math.max(Math.floor(oe.browser.hardwareConcurrency/2),1);var Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $e(e,t,r){r.push({command:Xe.addSource,args:[e,t[e]]})}function Ke(e,t,r){t.push({command:Xe.removeSource,args:[e]}),r[e]=!0}function Je(e,t,r){var n;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!oe.isEqual(e[r][n],t[r][n]))return!1;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!oe.isEqual(e[r][n],t[r][n]))return!1;return!0}function Qe(e,t,r,n,i,a){var o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(oe.isEqual(e[o],t[o])||r.push({command:a,args:[n,o,t[o],i]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(oe.isEqual(e[o],t[o])||r.push({command:a,args:[n,o,t[o],i]}))}function et(e){return e.id}function tt(e,t){return e[t.id]=t,e}var rt=function(e,t,r){var n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};rt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},rt.prototype.insert=function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},rt.prototype.insertCircle=function(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)},rt.prototype._insertBoxCell=function(e,t,r,n,i,a){this.boxCells[i].push(a)},rt.prototype._insertCircleCell=function(e,t,r,n,i,a){this.circleCells[i].push(a)},rt.prototype._query=function(e,t,r,n,i,a){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return a?o.filter(a):o}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,r,n,this._queryCell,o,h,a),i?o.length>0:o},rt.prototype._queryCircle=function(e,t,r,n,i){var a=e-r,o=e+r,s=t-r,l=t+r;if(o<0||a>this.width||l<0||s>this.height)return!n&&[];var u=[],c={hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,o,l,this._queryCellCircle,u,c,i),n?u.length>0:u},rt.prototype.query=function(e,t,r,n,i){return this._query(e,t,r,n,!1,i)},rt.prototype.hitTest=function(e,t,r,n,i){return this._query(e,t,r,n,!0,i)},rt.prototype.hitTestCircle=function(e,t,r,n){return this._queryCircle(e,t,r,!0,n)},rt.prototype._queryCell=function(e,t,r,n,i,a,o,s){var l=o.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(e<=c[f+2]&&t<=c[f+3]&&r>=c[f+0]&&n>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var b=v[g];if(!l.circle[b]){l.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],e,t,r,n)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var x=y[_],w=y[_+1],D=y[_+2];a.push({key:this.circleKeys[b],x1:x-D,y1:w-D,x2:x+D,y2:w+D})}}}},rt.prototype._queryCellCircle=function(e,t,r,n,i,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[f])))return a.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var g=this.circles,v=0,b=y;v<b.length;v+=1){var _=b[v];if(!u.circle[_]){u.circle[_]=!0;var x=3*_;if(this._circlesCollide(g[x],g[x+1],g[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return a.push(!0),!0}}},rt.prototype._forEachCell=function(e,t,r,n,i,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),h=l;h<=c;h++)for(var d=u;d<=p;d++){var f=this.xCellCount*d+h;if(i.call(this,e,t,r,n,f,a,o,s))return}},rt.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},rt.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},rt.prototype._circlesCollide=function(e,t,r,n,i,a){var o=n-e,s=i-t,l=r+a;return l*l>o*o+s*s},rt.prototype._circleAndRectCollide=function(e,t,r,n,i,a,o){var s=(a-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;var u=(o-i)/2,c=Math.abs(t-(i+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r};var nt=oe.properties.layout;function it(e,t,r,n,i){var a=oe.identity(new Float32Array(16));return t?(oe.identity(a),oe.scale(a,a,[1/i,1/i,1]),r||oe.rotateZ(a,a,n.angle)):(oe.scale(a,a,[n.width/2,-n.height/2,1]),oe.translate(a,a,[1,-1,0]),oe.multiply(a,a,e)),a}function at(e,t){var r=[e.x,e.y,0,1];ft(r,r,t);var n=r[3];return{point:new oe.Point(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function ot(e,t,r,n,i,a,o,s){var l,u,c,p,h=n?e.textSizeData:e.iconSizeData,d=oe.evaluateSizeForZoom(h,r.transform.zoom,nt.properties[n?"text-size":"icon-size"]),f=[256/r.width*2+1,256/r.height*2+1],m=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();for(var y=e.lineVertexArray,g=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,b=!1,_=0;_<g.length;_++){var x=g.get(_);if(x.hidden||x.writingMode===oe.WritingMode.vertical&&!b)dt(x.numGlyphs,m);else{b=!1;var w=[x.anchorX,x.anchorY,0,1];if(oe.transformMat4(w,w,t),u=f,void 0,c=(l=w)[0]/l[3],p=l[1]/l[3],c>=-u[0]&&c<=u[0]&&p>=-u[1]&&p<=u[1]){var D=.5+w[3]/r.transform.cameraToCenterDistance*.5,S=oe.evaluateSizeForFeature(h,d,x),R=o?S*D:S/D,P=new oe.Point(x.anchorX,x.anchorY),E=at(P,i).point,A={},M=ut(x,R,!1,s,t,i,a,e.glyphOffsetArray,y,m,E,P,A,v);b=M.useVertical,(M.notEnoughRoom||b||M.needsFlipping&&ut(x,R,!0,s,t,i,a,e.glyphOffsetArray,y,m,E,P,A,v).notEnoughRoom)&&dt(x.numGlyphs,m)}else dt(x.numGlyphs,m)}}n?e.text.dynamicLayoutVertexBuffer.updateData(m):e.icon.dynamicLayoutVertexBuffer.updateData(m)}function st(e,t,r,n,i,a,o,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(h-1),g=pt(e*m,r,n,i,a,o,s.segment,d,f,l,u,c,p);if(!g)return null;var v=pt(e*y,r,n,i,a,o,s.segment,d,f,l,u,c,p);return v?{first:g,last:v}:null}function lt(e,t,r,n){return e===oe.WritingMode.horizontal&&Math.abs(r.y-t.y)>Math.abs(r.x-t.x)*n?{useVertical:!0}:(e===oe.WritingMode.vertical?t.y<r.y:t.x>r.x)?{needsFlipping:!0}:null}function ut(e,t,r,n,i,a,o,s,l,u,c,p,h,d){var f,m=t/24,y=e.lineOffsetX*t,g=e.lineOffsetY*t;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,_=e.lineStartIndex+e.lineLength,x=st(m,s,y,g,r,c,p,e,l,a,h,!1);if(!x)return{notEnoughRoom:!0};var w=at(x.first.point,o).point,D=at(x.last.point,o).point;if(n&&!r){var S=lt(e.writingMode,w,D,d);if(S)return S}f=[x.first];for(var R=e.glyphStartIndex+1;R<v-1;R++)f.push(pt(m*s.getoffsetX(R),y,g,r,c,p,e.segment,b,_,l,a,h,!1));f.push(x.last)}else{if(n&&!r){var P=at(p,i).point,E=e.lineStartIndex+e.segment+1,A=new oe.Point(l.getx(E),l.gety(E)),M=at(A,i),I=M.signedDistanceFromCamera>0?M.point:ct(p,A,P,1,i),O=lt(e.writingMode,P,I,d);if(O)return O}var C=pt(m*s.getoffsetX(e.glyphStartIndex),y,g,r,c,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,h,!1);if(!C)return{notEnoughRoom:!0};f=[C]}for(var T=0,k=f;T<k.length;T+=1){var L=k[T];oe.addDynamicAttributes(u,L.point,L.angle)}return{}}function ct(e,t,r,n,i){var a=at(e.add(e.sub(t)._unit()),i).point,o=r.sub(a);return r.add(o._mult(n/o.mag()))}function pt(e,t,r,n,i,a,o,s,l,u,c,p,h){var d=n?e-t:e+t,f=d>0?1:-1,m=0;n&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var y=f>0?s+o:s+o+1,g=y,v=i,b=i,_=0,x=0,w=Math.abs(d);_+x<=w;){if((y+=f)<s||y>=l)return null;if(b=v,void 0===(v=p[y])){var D=new oe.Point(u.getx(y),u.gety(y)),S=at(D,c);if(S.signedDistanceFromCamera>0)v=p[y]=S.point;else{var R=y-f;v=ct(0===_?a:new oe.Point(u.getx(R),u.gety(R)),D,b,w-_+1,c)}}_+=x,x=b.dist(v)}var P=(w-_)/x,E=v.sub(b),A=E.mult(P)._add(b);return A._add(E._unit()._perp()._mult(r*f)),{point:A,angle:m+Math.atan2(v.y-b.y,v.x-b.x),tileDistance:h?{prevTileDistance:y-f===g?0:u.gettileUnitDistanceFromAnchor(y-f),lastSegmentViewportDistance:w-_}:null}}var ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dt(e,t){for(var r=0;r<e;r++){var n=t.length;t.resize(n+4),t.float32.set(ht,3*n)}}function ft(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}var mt=function(e,t,r){void 0===t&&(t=new rt(e.width+200,e.height+200,25)),void 0===r&&(r=new rt(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function yt(e,t,r){e[t+4]=r?1:0}function gt(e,t,r){return t*(oe.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}mt.prototype.placeCollisionBox=function(e,t,r,n,i){var a=this.projectAndGetPerspectiveRatio(n,e.anchorPointX,e.anchorPointY),o=r*a.perspectiveRatio,s=e.x1*o+a.point.x,l=e.y1*o+a.point.y,u=e.x2*o+a.point.x,c=e.y2*o+a.point.y;return!this.isInsideGrid(s,l,u,c)||!t&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},mt.prototype.approximateTileDistance=function(e,t,r,n,i){var a=i?1:n/this.pitchfactor,o=e.lastSegmentViewportDistance*r;return e.prevTileDistance+o+(a-1)*o*Math.abs(Math.sin(t))},mt.prototype.placeCollisionCircles=function(e,t,r,n,i,a,o,s,l,u,c,p,h){var d=[],f=this.projectAnchor(l,i.anchorX,i.anchorY),m=s/24,y=i.lineOffsetX*s,g=i.lineOffsetY*s,v=new oe.Point(i.anchorX,i.anchorY),b=st(m,o,y,g,!1,at(v,u).point,v,i,a,u,{},!0),_=!1,x=!1,w=!0,D=f.perspectiveRatio*n,S=1/(n*r),R=0,P=0;b&&(R=this.approximateTileDistance(b.first.tileDistance,b.first.angle,S,f.cameraDistance,p),P=this.approximateTileDistance(b.last.tileDistance,b.last.angle,S,f.cameraDistance,p));for(var E=0;E<e.length;E+=5){var A=e[E],M=e[E+1],I=e[E+2],O=e[E+3];if(!b||O<-R||O>P)yt(e,E,!1);else{var C=this.projectPoint(l,A,M),T=I*D;if(d.length>0){var k=C.x-d[d.length-4],L=C.y-d[d.length-3];if(T*T*2>k*k+L*L&&E+8<e.length){var N=e[E+8];if(N>-R&&N<P){yt(e,E,!1);continue}}}var z=E/5;d.push(C.x,C.y,T,z),yt(e,E,!0);var j=C.x-T,F=C.y-T,V=C.x+T,G=C.y+T;if(w=w&&this.isOffscreen(j,F,V,G),x=x||this.isInsideGrid(j,F,V,G),!t&&this.grid.hitTestCircle(C.x,C.y,T,h)){if(!c)return{circles:[],offscreen:!1};_=!0}}}return{circles:_||!x?[]:d,offscreen:w}},mt.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var t=[],r=1/0,n=1/0,i=-1/0,a=-1/0,o=0,s=e;o<s.length;o+=1){var l=s[o],u=new oe.Point(l.x+100,l.y+100);r=Math.min(r,u.x),n=Math.min(n,u.y),i=Math.max(i,u.x),a=Math.max(a,u.y),t.push(u)}for(var c={},p={},h=0,d=this.grid.query(r,n,i,a).concat(this.ignoredGrid.query(r,n,i,a));h<d.length;h+=1){var f=d[h],m=f.key;if(void 0===c[m.bucketInstanceId]&&(c[m.bucketInstanceId]={}),!c[m.bucketInstanceId][m.featureIndex]){var y=[new oe.Point(f.x1,f.y1),new oe.Point(f.x2,f.y1),new oe.Point(f.x2,f.y2),new oe.Point(f.x1,f.y2)];oe.polygonIntersectsPolygon(t,y)&&(c[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},mt.prototype.insertCollisionBox=function(e,t,r,n,i){var a={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(a,e[0],e[1],e[2],e[3])},mt.prototype.insertCollisionCircles=function(e,t,r,n,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:n,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])},mt.prototype.projectAnchor=function(e,t,r){var n=[t,r,0,1];return ft(n,n,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},mt.prototype.projectPoint=function(e,t,r){var n=[t,r,0,1];return ft(n,n,e),new oe.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},mt.prototype.projectAndGetPerspectiveRatio=function(e,t,r){var n=[t,r,0,1];return ft(n,n,e),{point:new oe.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},mt.prototype.isOffscreen=function(e,t,r,n){return r<100||e>=this.screenRightBoundary||n<100||t>this.screenBottomBoundary},mt.prototype.isInsideGrid=function(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary};var vt=function(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r};vt.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var bt=function(e,t,r,n,i){this.text=new vt(e?e.text:null,t,r,i),this.icon=new vt(e?e.icon:null,t,n,i)};bt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _t=function(e,t,r){this.text=e,this.icon=t,this.skipFade=r},xt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};xt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var wt=function(e,t,r){this.transform=e.clone(),this.collisionIndex=new mt(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new xt(r)};function Dt(e,t,r){e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0),e.emplaceBack(t?1:0,r?1:0)}wt.prototype.placeLayerTile=function(e,t,r,n){var i=t.getBucket(e),a=t.latestFeatureIndex;if(i&&a&&e.id===i.layerIds[0]){var o=t.collisionBoxArray,s=i.layers[0].layout,l=Math.pow(2,this.transform.zoom-t.tileID.overscaledZ),u=t.tileSize/oe.EXTENT,c=this.transform.calculatePosMatrix(t.tileID.toUnwrapped()),p=it(c,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,gt(t,1,this.transform.zoom)),h=it(c,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,gt(t,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new function(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}(i.bucketInstanceId,a,i.sourceLayerIndex,i.index,t.tileID),this.placeLayerBucket(i,c,p,h,l,u,r,t.holdingForFade(),n,o)}},wt.prototype.placeLayerBucket=function(e,t,r,n,i,a,o,s,l,u){var c=e.layers[0].layout,p=oe.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,oe.properties.layout.properties["text-size"]),h=c.get("text-optional"),d=c.get("icon-optional"),f=c.get("text-allow-overlap"),m=c.get("icon-allow-overlap"),y=f&&(m||!e.hasIconData()||d),g=m&&(f||!e.hasTextData()||h),v=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&u&&e.deserializeCollisionBoxes(u);for(var b=0;b<e.symbolInstances.length;b++){var _=e.symbolInstances.get(b);if(!l[_.crossTileID]){if(s){this.placements[_.crossTileID]=new _t(!1,!1,!1);continue}var x=!1,w=!1,D=!0,S=null,R=null,P=null,E=0,A=0,M=e.collisionArrays[b];M.textFeatureIndex&&(E=M.textFeatureIndex),M.textBox&&(x=(S=this.collisionIndex.placeCollisionBox(M.textBox,c.get("text-allow-overlap"),a,t,v.predicate)).box.length>0,D=D&&S.offscreen);var I=M.textCircles;if(I){var O=e.text.placedSymbolArray.get(_.horizontalPlacedTextSymbolIndex),C=oe.evaluateSizeForFeature(e.textSizeData,p,O);R=this.collisionIndex.placeCollisionCircles(I,c.get("text-allow-overlap"),i,a,O,e.lineVertexArray,e.glyphOffsetArray,C,t,r,o,"map"===c.get("text-pitch-alignment"),v.predicate),x=c.get("text-allow-overlap")||R.circles.length>0,D=D&&R.offscreen}M.iconFeatureIndex&&(A=M.iconFeatureIndex),M.iconBox&&(w=(P=this.collisionIndex.placeCollisionBox(M.iconBox,c.get("icon-allow-overlap"),a,t,v.predicate)).box.length>0,D=D&&P.offscreen);var T=h||0===_.numGlyphVertices&&0===_.numVerticalGlyphVertices,k=d||0===_.numIconVertices;T||k?k?T||(w=w&&x):x=w&&x:w=x=w&&x,x&&S&&this.collisionIndex.insertCollisionBox(S.box,c.get("text-ignore-placement"),e.bucketInstanceId,E,v.ID),w&&P&&this.collisionIndex.insertCollisionBox(P.box,c.get("icon-ignore-placement"),e.bucketInstanceId,A,v.ID),x&&R&&this.collisionIndex.insertCollisionCircles(R.circles,c.get("text-ignore-placement"),e.bucketInstanceId,E,v.ID),this.placements[_.crossTileID]=new _t(x||y,w||g,D||e.justReloaded),l[_.crossTileID]=!0}}e.justReloaded=!1},wt.prototype.commit=function(e,t){this.commitTime=t;var r=!1,n=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{};for(var a in this.placements){var o=this.placements[a],s=i[a];r=s?(this.opacities[a]=new bt(s,n,o.text,o.icon),r||o.text!==s.text.placed||o.icon!==s.icon.placed):(this.opacities[a]=new bt(null,n,o.text,o.icon,o.skipFade),r||o.text||o.icon)}for(var l in i){var u=i[l];if(!this.opacities[l]){var c=new bt(u,n,!1,!1);c.isHidden()||(this.opacities[l]=c,r=r||u.text.placed||u.icon.placed)}}r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},wt.prototype.updateLayerOpacities=function(e,t){for(var r={},n=0,i=t;n<i.length;n+=1){var a=i[n],o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}},wt.prototype.updateBucketOpacities=function(e,t,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var n=e.layers[0].layout,i=new bt(null,0,!1,!1,!0),a=n.get("text-allow-overlap"),o=n.get("icon-allow-overlap"),s=new bt(null,0,a&&(o||!e.hasIconData()||n.get("icon-optional")),o&&(a||!e.hasTextData()||n.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(r);for(var l=0;l<e.symbolInstances.length;l++){var u=e.symbolInstances.get(l),c=t[u.crossTileID],p=this.opacities[u.crossTileID];c?p=i:p||(p=s,this.opacities[u.crossTileID]=p),t[u.crossTileID]=!0;var h=u.numGlyphVertices>0||u.numVerticalGlyphVertices>0,d=u.numIconVertices>0;if(h){for(var f=Ot(p.text),m=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,y=0;y<m;y++)e.text.opacityVertexArray.emplaceBack(f);e.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),u.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(d){for(var g=Ot(p.icon),v=0;v<u.numIconVertices/4;v++)e.icon.opacityVertexArray.emplaceBack(g);e.icon.placedSymbolArray.get(l).hidden=p.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var b=e.collisionArrays[l];if(b){b.textBox&&Dt(e.collisionBox.collisionVertexArray,p.text.placed,!1),b.iconBox&&Dt(e.collisionBox.collisionVertexArray,p.icon.placed,!1);var _=b.textCircles;if(_&&e.hasCollisionCircleData())for(var x=0;x<_.length;x+=5){var w=c||0===_[x+4];Dt(e.collisionCircle.collisionVertexArray,p.text.placed,w)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},wt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},wt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},wt.prototype.stillRecent=function(e){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>e},wt.prototype.setStale=function(){this.stale=!0};var St=Math.pow(2,25),Rt=Math.pow(2,24),Pt=Math.pow(2,17),Et=Math.pow(2,16),At=Math.pow(2,9),Mt=Math.pow(2,8),It=Math.pow(2,1);function Ot(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*St+t*Rt+r*Pt+t*Et+r*At+t*Mt+r*It+t}var Ct=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Ct.prototype.continuePlacement=function(e,t,r,n,i){for(;this._currentTileIndex<e.length;){var a=e[this._currentTileIndex];if(t.placeLayerTile(n,a,r,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var Tt=function(e,t,r,n,i,a){this.placement=new wt(e,i,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1};Tt.prototype.isDone=function(){return this._done},Tt.prototype.continuePlacement=function(e,t,r){for(var n=this,i=oe.browser.now(),a=function(){var e=oe.browser.now()-i;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var o=t[e[n._currentPlacementIndex]],s=n.placement.collisionIndex.transform.zoom;if("symbol"===o.type&&(!o.minzoom||o.minzoom<=s)&&(!o.maxzoom||o.maxzoom>s)){if(n._inProgressLayer||(n._inProgressLayer=new Ct),n._inProgressLayer.continuePlacement(r[o.source],n.placement,n._showCollisionBoxes,o,a))return;delete n._inProgressLayer}n._currentPlacementIndex--}this._done=!0},Tt.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement};var kt=512/oe.EXTENT/2,Lt=function(e,t,r){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var n=0;n<t.length;n++){var i=t.get(n),a=i.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};Lt.prototype.getScaledCoordinates=function(e,t){var r=t.canonical.z-this.tileID.canonical.z,n=kt/Math.pow(2,r);return{x:Math.floor((t.canonical.x*oe.EXTENT+e.anchorX)*n),y:Math.floor((t.canonical.y*oe.EXTENT+e.anchorY)*n)}},Lt.prototype.findMatches=function(e,t,r){for(var n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,t),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!r[c.crossTileID]){r[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var Nt=function(){this.maxCrossTileID=0};Nt.prototype.generate=function(){return++this.maxCrossTileID};var zt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};zt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var r in this.indexes){var n=this.indexes[r],i={};for(var a in n){var o=n[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[r]=i}this.lng=e},zt.prototype.addBucket=function(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=r.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Lt(e,t.symbolInstances,t.bucketInstanceId),!0},zt.prototype.removeBucketCrossTileIDs=function(e,t){for(var r in t.indexedSymbolInstances)for(var n=0,i=t.indexedSymbolInstances[r];n<i.length;n+=1){var a=i[n];delete this.usedCrossTileIDs[e][a.crossTileID]}},zt.prototype.removeStaleBuckets=function(e){var t=!1;for(var r in this.indexes){var n=this.indexes[r];for(var i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t};var jt=function(){this.layerIndexes={},this.crossTileIDs=new Nt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};jt.prototype.addLayer=function(e,t,r){var n=this.layerIndexes[e.id];void 0===n&&(n=this.layerIndexes[e.id]=new zt);var i=!1,a={};n.handleWrapJump(r);for(var o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),a[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(a)&&(i=!0),i},jt.prototype.pruneUnusedLayers=function(e){var t={};for(var r in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[r]||delete this.layerIndexes[r]};var Ft=function(e,t){return oe.emitValidationErrors(e,t&&t.filter((function(e){return"source.canvas"!==e.identifier})))},Vt=oe.pick(Xe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Gt=oe.pick(Xe,["setCenter","setZoom","setBearing","setPitch"]),Bt=(function(n){function i(e,t){var a=this;void 0===t&&(t={}),n.call(this),this.map=e,this.dispatcher=new k((qe||(qe=new We),qe),this),this.imageManager=new D,this.glyphManager=new M(e._transformRequest,t.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new jt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new oe.ZoomHistory,this._loaded=!1,this._resetUpdates();var r=this;this._rtlTextPluginCallback=i.registerForPluginAvailability((function(e){for(var t in r.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),r.sourceCaches)r.sourceCaches[t].reload()})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=a.sourceCaches[e.sourceId];if(t){var r=t.getSource();if(r&&r.vectorLayerIds)for(var n in a._layers){var i=a._layers[n];i.source===r.id&&a._validateLayer(i)}}}}))}return n&&(i.__proto__=n),((i.prototype=Object.create(n&&n.prototype)).constructor=i).prototype.loadURL=function(e,t){var r=this;void 0===t&&(t={}),this.fire(new oe.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof t.validate?t.validate:!p(e);e=(function(e,t){if(!p(e))return e;var r=g(e);return r.path="/styles/v1"+r.path,c(r,t)})(e,t.accessToken);var i=this.map._transformRequest(e,oe.ResourceType.Style);this._request=oe.getJSON(i,(function(e,t){r._request=null,e?r.fire(new oe.ErrorEvent(e)):t&&r._load(t,n)}))},i.prototype.loadJSON=function(e,t){var r=this;void 0===t&&(t={}),this.fire(new oe.Event("dataloading",{dataType:"style"})),this._request=oe.browser.frame((function(){r._request=null,r._load(e,!1!==t.validate)}))},i.prototype._load=function(e,t){var n=this;if(!t||!Ft(this,oe.validateStyle(e))){for(var r in this._loaded=!0,(this.stylesheet=e).sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=(function(e,t,p){var h,d,f,r=oe.browser.devicePixelRatio>1?"@2x":"",n=oe.getJSON(t(m(e,r,".json"),oe.ResourceType.SpriteJSON),(function(e,t){n=null,f||(f=e,h=t,a())})),i=oe.getImage(t(m(e,r,".png"),oe.ResourceType.SpriteImage),(function(e,t){i=null,f||(f=e,d=t,a())}));function a(){if(f)p(f);else if(h&&d){var e=oe.browser.getImageData(d),t={};for(var r in h){var n=h[r],i=n.width,a=n.height,o=n.x,s=n.y,l=n.sdf,u=n.pixelRatio,c=new oe.RGBAImage({width:i,height:a});oe.RGBAImage.copy(e,c,{x:o,y:s},{x:0,y:0},{width:i,height:a}),t[r]={data:c,pixelRatio:u,sdf:l}}p(null,t)}}return{cancel:function(){n&&(n.cancel(),n=null),i&&(i.cancel(),i=null)}}})(e.sprite,this.map._transformRequest,(function(e,t){if(n._spriteRequest=null,e)n.fire(new oe.ErrorEvent(e));else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire(new oe.Event("data",{dataType:"style"}))})):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=Ze(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={};for(var a=0,o=i;a<o.length;a+=1){var s=o[a];(s=oe.createStyleLayer(s)).setEventedParent(n,{layer:{id:s.id}}),n._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new C(this.stylesheet.light),this.fire(new oe.Event("data",{dataType:"style"})),this.fire(new oe.Event("style.load"))}},i.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var r=e.sourceLayer;if(r){var n=t.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new oe.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(e){for(var t=[],r=0,n=e;r<n.length;r+=1){var i=n[r],a=this._layers[i];"custom"!==a.type&&t.push(a.serialize())}return t},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){if(this._changed){var t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var n in(t.length||r.length)&&this._updateWorkerLayers(t,r),this._updatedSources){var i=this._updatedSources[n];"reload"===i?this._reloadSource(n):"clear"===i&&this._clearSource(n)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new oe.Event("data",{dataType:"style"}))}for(var o in this.sourceCaches)this.sourceCaches[o].used=!1;for(var s=0,l=this._order;s<l.length;s+=1){var u=l[s],c=this._layers[u];c.recalculate(e),!c.isHidden(e.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},i.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var t=this;if(this._checkLoaded(),Ft(this,oe.validateStyle(e)))return!1;(e=oe.clone(e)).layers=Ze(e.layers);var r=(function(e,t){if(!e)return[{command:Xe.setStyle,args:[t]}];var r=[];try{if(!oe.isEqual(e.version,t.version))return[{command:Xe.setStyle,args:[t]}];oe.isEqual(e.center,t.center)||r.push({command:Xe.setCenter,args:[t.center]}),oe.isEqual(e.zoom,t.zoom)||r.push({command:Xe.setZoom,args:[t.zoom]}),oe.isEqual(e.bearing,t.bearing)||r.push({command:Xe.setBearing,args:[t.bearing]}),oe.isEqual(e.pitch,t.pitch)||r.push({command:Xe.setPitch,args:[t.pitch]}),oe.isEqual(e.sprite,t.sprite)||r.push({command:Xe.setSprite,args:[t.sprite]}),oe.isEqual(e.glyphs,t.glyphs)||r.push({command:Xe.setGlyphs,args:[t.glyphs]}),oe.isEqual(e.transition,t.transition)||r.push({command:Xe.setTransition,args:[t.transition]}),oe.isEqual(e.light,t.light)||r.push({command:Xe.setLight,args:[t.light]});var n={},i=[];!(function(e,t,r,n){var i,a,o,s;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||Ke(i,r,n));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?oe.isEqual(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&Je(e,t,i)?r.push({command:Xe.setGeoJSONSourceData,args:[i,t[i].data]}):(o=t,Ke(a=i,s=r,n),$e(a,o,s))):$e(i,t,r))})(e.sources,t.sources,i,n);var a=[];e.layers&&e.layers.forEach((function(e){n[e.source]?r.push({command:Xe.removeLayer,args:[e.id]}):a.push(e)})),r=r.concat(i),(function(e,t,r){t=t||[];var n,i,a,o,s,l,u,c=(e=e||[]).map(et),p=t.map(et),h=e.reduce(tt,{}),d=t.reduce(tt,{}),f=c.slice(),m=Object.create(null);for(i=n=0;n<c.length;n++)a=c[n],d.hasOwnProperty(a)?i++:(r.push({command:Xe.removeLayer,args:[a]}),f.splice(f.indexOf(a,i),1));for(i=n=0;n<p.length;n++)a=p[p.length-1-n],f[f.length-1-n]!==a&&(h.hasOwnProperty(a)?(r.push({command:Xe.removeLayer,args:[a]}),f.splice(f.lastIndexOf(a,f.length-i),1)):i++,l=f[f.length-n],r.push({command:Xe.addLayer,args:[d[a],l]}),f.splice(f.length-n,0,a),m[a]=!0);for(n=0;n<p.length;n++)if(o=h[a=p[n]],s=d[a],!m[a]&&!oe.isEqual(o,s))if(oe.isEqual(o.source,s.source)&&oe.isEqual(o["source-layer"],s["source-layer"])&&oe.isEqual(o.type,s.type)){for(u in Qe(o.layout,s.layout,r,a,null,Xe.setLayoutProperty),Qe(o.paint,s.paint,r,a,null,Xe.setPaintProperty),oe.isEqual(o.filter,s.filter)||r.push({command:Xe.setFilter,args:[a,s.filter]}),oe.isEqual(o.minzoom,s.minzoom)&&oe.isEqual(o.maxzoom,s.maxzoom)||r.push({command:Xe.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Qe(o[u],s[u],r,a,u.slice(6),Xe.setPaintProperty):oe.isEqual(o[u],s[u])||r.push({command:Xe.setLayerProperty,args:[a,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Qe(o[u],s[u],r,a,u.slice(6),Xe.setPaintProperty):oe.isEqual(o[u],s[u])||r.push({command:Xe.setLayerProperty,args:[a,u,s[u]]}))}else r.push({command:Xe.removeLayer,args:[a]}),l=f[f.lastIndexOf(a)+1],r.push({command:Xe.addLayer,args:[s,l]})})(a,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Xe.setStyle,args:[t]}]}return r})(this.serialize(),e).filter((function(e){return!(e.command in Gt)}));if(0===r.length)return!1;var n=r.filter((function(e){return!(e.command in Vt)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,t){if(this.getImage(e))return this.fire(new oe.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,t),this.fire(new oe.Event("data",{dataType:"style"}))},i.prototype.getImage=function(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new oe.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new oe.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,t,r){var n=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(t.type)>=0)||!this._validate(oe.validateStyle.source,"sources."+e,t,null,r)){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=this.sourceCaches[e]=new Ve(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:i.serialize(),sourceId:e}})),i.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var t in this._layers)if(this._layers[t].source===e)return this.fire(new oe.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+t+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new oe.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},i.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function(e,t,r){this._checkLoaded();var n=e.id;if(this.getLayer(n))this.fire(new oe.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var i;if("custom"===e.type){if(Ft(this,oe.validateCustomStyleLayer(e)))return;i=oe.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=oe.clone(e),e=oe.extend(e,{source:n})),this._validate(oe.validateStyle.layer,"layers."+n,e,{arrayIndex:-1},r))return;i=oe.createStyleLayer(e),this._validateLayer(i),i.setEventedParent(this,{layer:{id:n}})}var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)this.fire(new oe.ErrorEvent(new Error('Layer with id "'+t+'" does not exist on this map.')));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=i,this._removedLayers[n]&&i.source&&"custom"!==i.type){var o=this._removedLayers[n];delete this._removedLayers[n],o.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},i.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==t){var r=this._order.indexOf(e);this._order.splice(r,1);var n=t?this._order.indexOf(t):this._order.length;t&&-1===n?this.fire(new oe.ErrorEvent(new Error('Layer with id "'+t+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(t){t.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],t.onRemove&&t.onRemove(this.map)}else this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(e){return this._layers[e]},i.prototype.setLayerZoomRange=function(e,t,r){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===t&&n.maxzoom===r||(null!=t&&(n.minzoom=t),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,t){this._checkLoaded();var r=this.getLayer(e);if(r){if(!oe.isEqual(r.filter,t))return null===t||void 0===t?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(oe.validateStyle.filter,"layers."+r.id+".filter",t)||(r.filter=oe.clone(t),this._updateLayer(r)))}else this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return oe.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,t,r){this._checkLoaded();var n=this.getLayer(e);n?oe.isEqual(n.getLayoutProperty(t),r)||(n.setLayoutProperty(t,r),this._updateLayer(n)):this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},i.prototype.setPaintProperty=function(e,t,r){this._checkLoaded();var n=this.getLayer(e);n?oe.isEqual(n.getPaintProperty(t),r)||(n.setPaintProperty(t,r)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new oe.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function(e,t){this._checkLoaded();var r=e.source,n=e.sourceLayer,i=this.sourceCaches[r],a=parseInt(e.id,10);void 0!==i?"vector"!==i.getSource().type||n?isNaN(a)||a<0?this.fire(new oe.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):i.setFeatureState(n,a,t):this.fire(new oe.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new oe.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var t=e.source,r=e.sourceLayer,n=this.sourceCaches[t],i=parseInt(e.id,10);if(void 0!==n)if("vector"!==n.getSource().type||r){if(!(isNaN(i)||i<0))return n.getFeatureState(r,i);this.fire(new oe.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new oe.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new oe.ErrorEvent(new Error("The source '"+t+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return oe.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return oe.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:oe.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},i.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenRenderedFeatures=function(e){for(var t=[],r=this._order.length-1;r>=0;r--)for(var n=this._order[r],i=0,a=e;i<a.length;i+=1){var o=a[i][n];if(o)for(var s=0,l=o;s<l.length;s+=1){var u=l[s];t.push(u)}}return t},i.prototype.queryRenderedFeatures=function(e,t,r){t&&t.filter&&this._validate(oe.validateStyle.filter,"queryRenderedFeatures.filter",t.filter);var n={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new oe.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,a=t.layers;i<a.length;i+=1){var o=a[i],s=this._layers[o];if(!s)return this.fire(new oe.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be queried for features."))),[];n[s.source]=!0}}var l=[],u=e.map((function(e){return r.pointCoordinate(e)}));for(var c in this.sourceCaches)t.layers&&!n[c]||l.push(Y(this.sourceCaches[c],this._layers,u,t,r));return this.placement&&l.push(function(l,i,e,u,t,r){for(var c={},p=t.queryRenderedSymbols(e),n=[],a=0,o=Object.keys(p).map(Number);a<o.length;a+=1){var s=o[a];n.push(r[s])}n.sort(Z);for(var h=function(){var i=f[d],e=i.featureIndex.lookupSymbolFeatures(p[i.bucketInstanceId],i.bucketIndex,i.sourceLayerIndex,u.filter,u.layers,l);for(var t in e){var r=c[t]=c[t]||[],n=e[t];n.sort((function(e,t){var r=i.featureSortOrder;if(r){var n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(var a=0,o=n;a<o.length;a+=1){var s=o[a];r.push(s.feature)}}},d=0,f=n;d<f.length;d+=1)h();var m=function(n){c[n].forEach((function(e){var t=l[n],r=i[t.source].getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=r}))};for(var y in c)m(y);return c}(this._layers,this.sourceCaches,e,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},i.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(oe.validateStyle.filter,"querySourceFeatures.filter",t.filter);var r=this.sourceCaches[e];return r?(function(t,e){for(var r=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),n=[],i={},a=0;a<r.length;a++){var o=r[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(n,e))}return n})(r,t):[]},i.prototype.addSourceType=function(e,t,r){return i.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e){this._checkLoaded();var t=this.light.getLight(),r=!1;for(var n in e)if(!oe.isEqual(e[n],t[n])){r=!0;break}if(r){var i={now:oe.browser.now(),transition:oe.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(i)}},i.prototype._validate=function(e,t,r,n,i){return(!i||!1!==i.validate)&&Ft(this,e.call(oe.validateStyle,oe.extend({key:t,style:this.serialize(),value:r,styleSpec:oe.styleSpec},n)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),oe.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function(e,t,r,n){for(var i=!1,a=!1,o={},s=0,l=this._order;s<l.length;s+=1){var u=l[s],c=this._layers[u];if("symbol"===c.type){if(!o[c.source]){var p=this.sourceCaches[c.source];o[c.source]=p.getRenderableIds(!0).map((function(e){return p.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(c,o[c.source],e.center.lng);i=i||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(oe.browser.now()))&&(this.pauseablePlacement=new Tt(e,this._order,d,t,r,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,oe.browser.now()),a=!0),i&&this.pauseablePlacement.placement.setStale()),a||i)for(var f=0,m=this._order;f<m.length;f+=1){var y=m[f],g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,o[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(oe.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function(e,t,r){this.imageManager.getImages(t.icons,r)},i.prototype.getGlyphs=function(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)},i})(oe.Evented);Bt.getSourceType=function(e){return W[e]},Bt.setSourceType=function(e,t){W[e]=t},Bt.registerForPluginAvailability=oe.registerForPluginAvailability;var Ut=oe.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ht={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\nuniform float u_vertical_gradient;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},qt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Wt=function(e){var t=Ht[e],s={};t.fragmentSource=t.fragmentSource.replace(qt,(function(e,t,r,n,i){return s[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"})),t.vertexSource=t.vertexSource.replace(qt,(function(e,t,r,n,i){var a="float"===n?"vec2":"vec4",o=i.match(/color/)?"color":a;return s[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+a+" a_"+i+";\nvarying "+r+" "+n+" "+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+r+" "+a+" a_"+i+";\n#else\nuniform "+r+" "+n+" u_"+i+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = a_"+i+";\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+r+" "+n+" "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+r+" "+n+" "+i+" = u_"+i+";\n#endif\n"}))};for(var Yt in Ht)Wt(Yt);var Zt=Ht,Xt=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Xt.prototype.bind=function(e,t,r,n,i,a,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,r,n,i,a,o,s):(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},Xt.prototype.freshBind=function(e,t,r,n,i,a,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var h=0,d=r;h<d.length;h+=1)d[h].enableAttributes(c,e);a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var f=0,m=r;f<m.length;f+=1){var y=m[f];y.bind(),y.setVertexAttribPointers(c,e,i)}a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),n&&n.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),u.currentNumAttributes=l},Xt.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var $t=function(e,t,r,n,i){var a=e.gl;this.program=a.createProgram();var o=r.defines().concat("#define DEVICE_PIXEL_RATIO "+oe.browser.devicePixelRatio.toFixed(1));i&&o.push("#define OVERDRAW_INSPECTOR;");var s=o.concat(Zt.prelude.fragmentSource,t.fragmentSource).join("\n"),l=o.concat(Zt.prelude.vertexSource,t.vertexSource).join("\n"),u=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(u,s),a.compileShader(u),a.attachShader(this.program,u);var c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)a.bindAttribLocation(this.program,h,p[h].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},f=0;f<this.numAttributes;f++){var m=a.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<y;g++){var v=a.getActiveUniform(this.program,g);v&&(d[v.name]=a.getUniformLocation(this.program,v.name))}this.fixedUniforms=n(e,d),this.binderUniforms=r.getUniforms(e,d)};function Kt(e,t,r){var n=1/gt(r,1,t.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,t.transform.tileZoom)/i,o=a*(r.tileID.canonical.x+r.tileID.wrap*i),s=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[oe.browser.devicePixelRatio,n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}$t.prototype.draw=function(e,t,r,n,i,a,o,s,l,u,c,p,h,d,f,m){var y,g=e.gl;for(var v in e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(a),this.fixedUniforms)this.fixedUniforms[v].set(o[v]);d&&d.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var b=(y={},y[g.LINES]=2,y[g.TRIANGLES]=3,y[g.LINE_STRIP]=1,y)[t],_=0,x=c.get();_<x.length;_+=1){var w=x[_],D=w.vaos||(w.vaos={});(D[s]||(D[s]=new Xt)).bind(e,this,l,d?d.getPaintVertexBuffers():[],u,w.vertexOffset,f,m),g.drawElements(t,w.primitiveLength*b,g.UNSIGNED_SHORT,w.primitiveOffset*b*2)}};var Jt=function(e,t,r){var n=t.style.light,i=n.properties.get("position"),a=[i.x,i.y,i.z],o=oe.create$2();"viewport"===n.properties.get("anchor")&&oe.fromRotation(o,-t.transform.angle),oe.transformMat3(a,a,o);var s=n.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+r}},Qt=function(e){return{u_matrix:e}},er=function(e,t,r,n){return oe.extend(Qt(e),Kt(r,t,n))},tr=function(e,t,r,n){var i,a,o=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var s=gt(r,1,o.zoom);i=!0,a=[s,s]}else i=!1,a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:a}},rr=function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_camera_to_center_distance:new oe.Uniform1f(e,t.u_camera_to_center_distance),u_pixels_to_tile_units:new oe.Uniform1f(e,t.u_pixels_to_tile_units),u_extrude_scale:new oe.Uniform2f(e,t.u_extrude_scale),u_overscale_factor:new oe.Uniform1f(e,t.u_overscale_factor)}},nr=function(e,t){return{u_matrix:e,u_color:t}},ir=function(e){return{u_matrix:e}},ar=function(e,t,r){var n,i,a,o=r.paint.get("hillshade-shadow-color"),s=r.paint.get("hillshade-highlight-color"),l=r.paint.get("hillshade-accent-color"),u=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===r.paint.get("hillshade-illumination-anchor")&&(u-=e.transform.angle),{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),!0),u_image:0,u_latrange:(n=e,i=t.tileID.toCoordinate(),a=new oe.Coordinate(i.column,i.row+1,i.zoom),[n.transform.coordinateLocation(i).lat,n.transform.coordinateLocation(a).lat]),u_light:[r.paint.get("hillshade-exaggeration"),u],u_shadow:o,u_highlight:s,u_accent:l}},or=function(e,t){var r=e.dem.dim,n=oe.create();return oe.ortho(n,0,oe.EXTENT,-oe.EXTENT,0,0,1),oe.translate(n,n,[0,-oe.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[2*r,2*r],u_zoom:e.tileID.overscaledZ,u_maxzoom:t}},sr=function(e,t,r){var n=e.transform;return{u_matrix:ur(e,t,r),u_ratio:1/gt(t,1,n.zoom),u_gl_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}};function lr(e,t){return 1/gt(e,1,t.tileZoom)}function ur(e,t,r){return e.translatePosMatrix(t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var cr=function(e,t,r,n,i,a,o,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}},pr={fillExtrusion:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_lightpos:new oe.Uniform3f(e,t.u_lightpos),u_lightintensity:new oe.Uniform1f(e,t.u_lightintensity),u_lightcolor:new oe.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new oe.Uniform1f(e,t.u_vertical_gradient)}},fillExtrusionPattern:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_lightpos:new oe.Uniform3f(e,t.u_lightpos),u_lightintensity:new oe.Uniform1f(e,t.u_lightintensity),u_lightcolor:new oe.Uniform3f(e,t.u_lightcolor),u_vertical_gradient:new oe.Uniform1f(e,t.u_vertical_gradient),u_height_factor:new oe.Uniform1f(e,t.u_height_factor),u_image:new oe.Uniform1i(e,t.u_image),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new oe.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new oe.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new oe.Uniform4f(e,t.u_scale),u_fade:new oe.Uniform1f(e,t.u_fade)}},extrusionTexture:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_world:new oe.Uniform2f(e,t.u_world),u_image:new oe.Uniform1i(e,t.u_image),u_opacity:new oe.Uniform1f(e,t.u_opacity)}},fill:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix)}},fillPattern:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_image:new oe.Uniform1i(e,t.u_image),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new oe.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new oe.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new oe.Uniform4f(e,t.u_scale),u_fade:new oe.Uniform1f(e,t.u_fade)}},fillOutline:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_world:new oe.Uniform2f(e,t.u_world)}},fillOutlinePattern:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_world:new oe.Uniform2f(e,t.u_world),u_image:new oe.Uniform1i(e,t.u_image),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_pixel_coord_upper:new oe.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new oe.Uniform2f(e,t.u_pixel_coord_lower),u_scale:new oe.Uniform4f(e,t.u_scale),u_fade:new oe.Uniform1f(e,t.u_fade)}},circle:function(e,t){return{u_camera_to_center_distance:new oe.Uniform1f(e,t.u_camera_to_center_distance),u_scale_with_map:new oe.Uniform1i(e,t.u_scale_with_map),u_pitch_with_map:new oe.Uniform1i(e,t.u_pitch_with_map),u_extrude_scale:new oe.Uniform2f(e,t.u_extrude_scale),u_matrix:new oe.UniformMatrix4f(e,t.u_matrix)}},collisionBox:rr,collisionCircle:rr,debug:function(e,t){return{u_color:new oe.UniformColor(e,t.u_color),u_matrix:new oe.UniformMatrix4f(e,t.u_matrix)}},clippingMask:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix)}},heatmap:function(e,t){return{u_extrude_scale:new oe.Uniform1f(e,t.u_extrude_scale),u_intensity:new oe.Uniform1f(e,t.u_intensity),u_matrix:new oe.UniformMatrix4f(e,t.u_matrix)}},heatmapTexture:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_world:new oe.Uniform2f(e,t.u_world),u_image:new oe.Uniform1i(e,t.u_image),u_color_ramp:new oe.Uniform1i(e,t.u_color_ramp),u_opacity:new oe.Uniform1f(e,t.u_opacity)}},hillshade:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_image:new oe.Uniform1i(e,t.u_image),u_latrange:new oe.Uniform2f(e,t.u_latrange),u_light:new oe.Uniform2f(e,t.u_light),u_shadow:new oe.UniformColor(e,t.u_shadow),u_highlight:new oe.UniformColor(e,t.u_highlight),u_accent:new oe.UniformColor(e,t.u_accent)}},hillshadePrepare:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_image:new oe.Uniform1i(e,t.u_image),u_dimension:new oe.Uniform2f(e,t.u_dimension),u_zoom:new oe.Uniform1f(e,t.u_zoom),u_maxzoom:new oe.Uniform1f(e,t.u_maxzoom)}},line:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_ratio:new oe.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new oe.Uniform2f(e,t.u_gl_units_to_pixels)}},lineGradient:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_ratio:new oe.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new oe.Uniform2f(e,t.u_gl_units_to_pixels),u_image:new oe.Uniform1i(e,t.u_image)}},linePattern:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_ratio:new oe.Uniform1f(e,t.u_ratio),u_image:new oe.Uniform1i(e,t.u_image),u_gl_units_to_pixels:new oe.Uniform2f(e,t.u_gl_units_to_pixels),u_scale:new oe.Uniform4f(e,t.u_scale),u_fade:new oe.Uniform1f(e,t.u_fade)}},lineSDF:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_ratio:new oe.Uniform1f(e,t.u_ratio),u_gl_units_to_pixels:new oe.Uniform2f(e,t.u_gl_units_to_pixels),u_patternscale_a:new oe.Uniform2f(e,t.u_patternscale_a),u_patternscale_b:new oe.Uniform2f(e,t.u_patternscale_b),u_sdfgamma:new oe.Uniform1f(e,t.u_sdfgamma),u_image:new oe.Uniform1i(e,t.u_image),u_tex_y_a:new oe.Uniform1f(e,t.u_tex_y_a),u_tex_y_b:new oe.Uniform1f(e,t.u_tex_y_b),u_mix:new oe.Uniform1f(e,t.u_mix)}},raster:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_tl_parent:new oe.Uniform2f(e,t.u_tl_parent),u_scale_parent:new oe.Uniform1f(e,t.u_scale_parent),u_buffer_scale:new oe.Uniform1f(e,t.u_buffer_scale),u_fade_t:new oe.Uniform1f(e,t.u_fade_t),u_opacity:new oe.Uniform1f(e,t.u_opacity),u_image0:new oe.Uniform1i(e,t.u_image0),u_image1:new oe.Uniform1i(e,t.u_image1),u_brightness_low:new oe.Uniform1f(e,t.u_brightness_low),u_brightness_high:new oe.Uniform1f(e,t.u_brightness_high),u_saturation_factor:new oe.Uniform1f(e,t.u_saturation_factor),u_contrast_factor:new oe.Uniform1f(e,t.u_contrast_factor),u_spin_weights:new oe.Uniform3f(e,t.u_spin_weights)}},symbolIcon:function(e,t){return{u_is_size_zoom_constant:new oe.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new oe.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new oe.Uniform1f(e,t.u_size_t),u_size:new oe.Uniform1f(e,t.u_size),u_camera_to_center_distance:new oe.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new oe.Uniform1f(e,t.u_pitch),u_rotate_symbol:new oe.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new oe.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new oe.Uniform1f(e,t.u_fade_change),u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new oe.UniformMatrix4f(e,t.u_label_plane_matrix),u_gl_coord_matrix:new oe.UniformMatrix4f(e,t.u_gl_coord_matrix),u_is_text:new oe.Uniform1f(e,t.u_is_text),u_pitch_with_map:new oe.Uniform1i(e,t.u_pitch_with_map),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_texture:new oe.Uniform1i(e,t.u_texture)}},symbolSDF:function(e,t){return{u_is_size_zoom_constant:new oe.Uniform1i(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new oe.Uniform1i(e,t.u_is_size_feature_constant),u_size_t:new oe.Uniform1f(e,t.u_size_t),u_size:new oe.Uniform1f(e,t.u_size),u_camera_to_center_distance:new oe.Uniform1f(e,t.u_camera_to_center_distance),u_pitch:new oe.Uniform1f(e,t.u_pitch),u_rotate_symbol:new oe.Uniform1i(e,t.u_rotate_symbol),u_aspect_ratio:new oe.Uniform1f(e,t.u_aspect_ratio),u_fade_change:new oe.Uniform1f(e,t.u_fade_change),u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_label_plane_matrix:new oe.UniformMatrix4f(e,t.u_label_plane_matrix),u_gl_coord_matrix:new oe.UniformMatrix4f(e,t.u_gl_coord_matrix),u_is_text:new oe.Uniform1f(e,t.u_is_text),u_pitch_with_map:new oe.Uniform1i(e,t.u_pitch_with_map),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_texture:new oe.Uniform1i(e,t.u_texture),u_gamma_scale:new oe.Uniform1f(e,t.u_gamma_scale),u_is_halo:new oe.Uniform1f(e,t.u_is_halo)}},background:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_opacity:new oe.Uniform1f(e,t.u_opacity),u_color:new oe.UniformColor(e,t.u_color)}},backgroundPattern:function(e,t){return{u_matrix:new oe.UniformMatrix4f(e,t.u_matrix),u_opacity:new oe.Uniform1f(e,t.u_opacity),u_image:new oe.Uniform1i(e,t.u_image),u_pattern_tl_a:new oe.Uniform2f(e,t.u_pattern_tl_a),u_pattern_br_a:new oe.Uniform2f(e,t.u_pattern_br_a),u_pattern_tl_b:new oe.Uniform2f(e,t.u_pattern_tl_b),u_pattern_br_b:new oe.Uniform2f(e,t.u_pattern_br_b),u_texsize:new oe.Uniform2f(e,t.u_texsize),u_mix:new oe.Uniform1f(e,t.u_mix),u_pattern_size_a:new oe.Uniform2f(e,t.u_pattern_size_a),u_pattern_size_b:new oe.Uniform2f(e,t.u_pattern_size_b),u_scale_a:new oe.Uniform1f(e,t.u_scale_a),u_scale_b:new oe.Uniform1f(e,t.u_scale_b),u_pixel_coord_upper:new oe.Uniform2f(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new oe.Uniform2f(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new oe.Uniform1f(e,t.u_tile_units_to_pixels)}}};function hr(e,t){for(var r=e.sort((function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0})),n=0;n<r.length;n++){var i={},a=r[n],o=r.slice(n+1);dr(a.tileID.wrapped(),a.tileID,o,new oe.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),i),a.setMask(i,t)}}function dr(e,t,r,n,i){for(var a=0;a<r.length;a++){var o=r[a];if(n.isLessThan(o.tileID))break;if(t.key===o.tileID.key)return;if(o.tileID.isChildOf(t)){for(var s=t.children(1/0),l=0;l<s.length;l++)dr(e,s[l],r.slice(a),n,i);return}}var u=t.overscaledZ-e.overscaledZ,c=new oe.CanonicalTileID(u,t.canonical.x-(e.canonical.x<<u),t.canonical.y-(e.canonical.y<<u));i[c.key]=i[c.key]||c}function fr(e,t,r,n,i){for(var a=e.context,o=a.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),l=0;l<n.length;l++){var u=n[l],c=t.getTile(u),p=c.getBucket(r);if(p){var h=i?p.collisionCircle:p.collisionBox;h&&s.draw(a,i?o.TRIANGLES:o.LINES,Le.disabled,Ne.disabled,e.colorModeForRenderPass(),je.disabled,(d=u.posMatrix,f=e.transform,void 0,y=gt(m=c,1,f.zoom),g=Math.pow(2,f.zoom-m.tileID.overscaledZ),v=m.tileID.overscaleFactor(),{u_matrix:d,u_camera_to_center_distance:f.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[f.pixelsToGLUnits[0]/(y*g),f.pixelsToGLUnits[1]/(y*g)],u_overscale_factor:v}),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,e.transform.zoom,null,null,h.collisionVertexBuffer)}}var d,f,m,y,g,v}var mr=oe.identity(new Float32Array(16)),yr=oe.properties.layout;function gr(e,t,r,n,i,a,o,s,l,u,c,p){for(var h,d,f=e.context,m=f.gl,y=e.transform,g="map"===s,v="map"===l,b=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!v&&!b,x=v?e.depthModeForSublayer(0,Le.ReadOnly):Le.disabled,w=0,D=n;w<D.length;w+=1){var S=D[w],R=t.getTile(S),P=R.getBucket(r);if(P){var E=i?P.text:P.icon;if(E&&E.segments.get().length){var A=E.programConfigurations.get(r.id),M=i||P.sdfIcons,I=i?P.textSizeData:P.iconSizeData;h||(h=e.useProgram(M?"symbolSDF":"symbolIcon",A),d=oe.evaluateSizeForZoom(I,y.zoom,yr.properties[i?"text-size":"icon-size"])),f.activeTexture.set(m.TEXTURE0);var O=void 0;if(i)R.glyphAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),O=R.glyphAtlasTexture.size;else{var C=1!==r.layout.get("icon-size").constantOr(0)||P.iconsNeedLinear,T=v||0!==y.pitch;R.imageAtlasTexture.bind(M||e.options.rotating||e.options.zooming||C||T?m.LINEAR:m.NEAREST,m.CLAMP_TO_EDGE),O=R.imageAtlasTexture.size}var k=gt(R,1,e.transform.zoom),L=it(S.posMatrix,v,g,e.transform,k),N=(ee=S.posMatrix,te=v,re=g,ne=e.transform,ie=k,void 0,ae=oe.identity(new Float32Array(16)),te?(oe.multiply(ae,ae,ee),oe.scale(ae,ae,[ie,ie,1]),re||oe.rotateZ(ae,ae,-ne.angle)):(oe.scale(ae,ae,[1,-1,1]),oe.translate(ae,ae,[-1,-1,0]),oe.scale(ae,ae,[2/ne.width,2/ne.height,1])),ae);b&&ot(P,S.posMatrix,e,i,L,N,v,u);var z=e.translatePosMatrix(S.posMatrix,R,a,o),j=b?mr:L,F=e.translatePosMatrix(N,R,a,o,!0),V=void 0;if(M){var G=0!==r.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1);B=I.functionType,U=d,H=_,q=v,Y=z,Z=j,X=F,$=i,K=O,J=!0,void 0,Q=(W=e).transform,V=oe.extend(cr(B,U,H,q,W,Y,Z,X,$,K),{u_gamma_scale:q?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_is_halo:+J}),G&&vr(E,r,e,h,x,c,p,V),V.u_is_halo=0}else V=cr(I.functionType,d,_,v,e,z,j,F,i,O);vr(E,r,e,h,x,c,p,V)}}}var B,U,H,q,W,Y,Z,X,$,K,J,Q,ee,te,re,ne,ie,ae}function vr(e,t,r,n,i,a,o,s){var l=r.context,u=l.gl;n.draw(l,u.TRIANGLES,i,a,o,je.disabled,s,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,t.paint,r.transform.zoom,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function br(e,t,r,n,i,a,o){var s,l,u,c,p,h,d,f,m,y,g=e.context.gl,v=r.paint.get("fill-pattern"),b=v&&v.constantOr(1),_=r.getCrossfadeParameters();s=o?(l=b&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",g.LINES):(l=b?"fillPattern":"fill",g.TRIANGLES);for(var x=0,w=n;x<w.length;x+=1){var D=w[x],S=t.getTile(D);if(!b||S.patternsLoaded()){var R=S.getBucket(r);if(R){var P=R.programConfigurations.get(r.id),E=e.useProgram(l,P);b&&(e.context.activeTexture.set(g.TEXTURE0),S.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),P.updatePatternPaintBuffers(_));var A=v.constantOr(null);if(A&&S.imageAtlas){var M=S.imageAtlas.patternPositions[A.to],I=S.imageAtlas.patternPositions[A.from];M&&I&&P.setConstantPatternPositions(M,I)}var O=e.translatePosMatrix(D.posMatrix,S,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(o){c=R.indexBuffer2,p=R.segments2;var C=[g.drawingBufferWidth,g.drawingBufferHeight];u="fillOutlinePattern"===l&&b?(h=O,d=e,f=_,m=S,y=C,oe.extend(er(h,d,f,m),{u_world:y})):{u_matrix:O,u_world:C}}else c=R.indexBuffer,p=R.segments,u=b?er(O,e,_,S):Qt(O);E.draw(e.context,s,i,e.stencilModeForClipping(D),a,je.disabled,u,r.id,R.layoutVertexBuffer,c,p,r.paint,e.transform.zoom,P)}}}}function _r(e,t){var r=e.context,n=r.gl,i=t.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!i){var a=new oe.Texture(r,{width:e.width,height:e.height,data:null},n.RGBA);a.bind(n.LINEAR,n.CLAMP_TO_EDGE),(i=t.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:oe.Color.transparent}),r.setStencilMode(Ne.disabled),r.setDepthMode(new Le(n.LEQUAL,Le.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function xr(e,t,r){var n=t.viewportFrame;if(n){var i=e.context,a=i.gl;i.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,n.colorAttachment.get()),e.useProgram("extrusionTexture").draw(i,a.TRIANGLES,Le.disabled,Ne.disabled,e.colorModeForRenderPass(),je.disabled,(function(e,t,r){var n=oe.create();oe.ortho(n,0,e.width,e.height,0,0,1);var i=e.context.gl;return{u_matrix:n,u_world:[i.drawingBufferWidth,i.drawingBufferHeight],u_image:r,u_opacity:t}})(e,r,0),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function wr(e,t,r,n,i,a){var o=e.context,s=o.gl,l=t.fbo;if(l){var u=e.useProgram("hillshade");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=ar(e,t,r);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?u.draw(o,s.TRIANGLES,n,i,a,je.disabled,c,r.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):u.draw(o,s.TRIANGLES,n,i,a,je.disabled,c,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Dr(e,t,r,n,i,a,o){var s=e.context,l=s.gl;if(t.dem&&t.dem.data){var u=t.dem.dim,c=t.dem.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(t.tileSize),t.demTexture){var p=t.demTexture;p.update(c,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else t.demTexture=new oe.Texture(s,c,l.RGBA,{premultiply:!1}),t.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var h=t.fbo;if(!h){var d=new oe.Texture(s,{width:u,height:u,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=t.fbo=s.createFramebuffer(u,u)).colorAttachment.set(d.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,je.disabled,or(t,n),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Sr(e,t,r,n,i){var a=n.paint.get("raster-fade-duration");if(a>0){var o=oe.browser.now(),s=(o-e.timeAdded)/a,l=t?(o-t.timeAdded)/a:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),p=!t||Math.abs(t.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),h=p&&e.refreshedUponExpiration?1:oe.clamp(p?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}function Rr(e,t,r){var n=e.context,i=n.gl,a=r.posMatrix,o=e.useProgram("debug"),s=Le.disabled,l=Ne.disabled,u=e.colorModeForRenderPass(),c="$debug";o.draw(n,i.LINE_STRIP,s,l,u,je.disabled,nr(a,oe.Color.red),c,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=(function(e,t,r,n){n=n||1;var i,a,o,s,l,u,c,p,h=[];for(i=0,a=e.length;i<a;i++)if(l=Pr[e[i]]){for(p=null,o=0,s=l[1].length;o<s;o+=2)p=-1===l[1][o]&&-1===l[1][o+1]?null:(u=t+l[1][o]*n,c=200-l[1][o+1]*n,p&&h.push(p.x,p.y,u,c),{x:u,y:c});t+=l[0]*n}return h})(r.toString(),50,0,5),h=new oe.StructArrayLayout2i4,d=new oe.StructArrayLayout2ui4,f=0;f<p.length;f+=2)h.emplaceBack(p[f],p[f+1]),d.emplaceBack(f,f+1);for(var m=n.createVertexBuffer(h,Ut.members),y=n.createIndexBuffer(d),g=oe.SegmentVector.simpleSegment(0,0,h.length/2,h.length/2),v=t.getTile(r).tileSize,b=oe.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*v),_=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<_.length;x++){var w=_[x];o.draw(n,i.LINES,s,l,u,je.disabled,nr(oe.translate([],a,[b*w[0],b*w[1],0]),oe.Color.white),c,m,y,g)}o.draw(n,i.LINES,s,l,u,je.disabled,nr(a,oe.Color.black),c,m,y,g)}var Pr={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Er={symbol:function(e,t,r,n){if("translucent"===e.renderPass){var i=Ne.disabled,a=e.colorModeForRenderPass();0!==r.paint.get("icon-opacity").constantOr(1)&&gr(e,t,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),i,a),0!==r.paint.get("text-opacity").constantOr(1)&&gr(e,t,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),i,a),t.map.showCollisionBoxes&&(fr(o=e,s=t,l=r,u=n,!1),fr(o,s,l,u,!0))}var o,s,l,u},circle:function(e,t,r,n){if("translucent"===e.renderPass){var i=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),o=r.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1))for(var s=e.context,l=s.gl,u=e.depthModeForSublayer(0,Le.ReadOnly),c=Ne.disabled,p=e.colorModeForRenderPass(),h=0;h<n.length;h++){var d=n[h],f=t.getTile(d),m=f.getBucket(r);if(m){var y=m.programConfigurations.get(r.id);e.useProgram("circle",y).draw(s,l.TRIANGLES,u,c,p,je.disabled,tr(e,d,f,r),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,e.transform.zoom,y)}}}},heatmap:function(e,t,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var i=e.context,a=i.gl,o=e.depthModeForSublayer(0,Le.ReadOnly),s=Ne.disabled,l=new ze([a.ONE,a.ONE],oe.Color.transparent,[!0,!0,!0,!0]);!(function(e,t,r){var n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),(function e(t,r,n,i){var a=t.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r.width/4,r.height/4,0,a.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),i.colorAttachment.set(n),t.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,i.colorAttachment.setDirty(),e(t,r,n,i))})(e,t,a,i=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4))}})(i,e,r),i.clear({color:oe.Color.transparent});for(var u=0;u<n.length;u++){var c=n[u];if(!t.hasRenderableParent(c)){var p=t.getTile(c),h=p.getBucket(r);if(h){var d=h.programConfigurations.get(r.id),f=e.useProgram("heatmap",d),m=e.transform.zoom;f.draw(i,a.TRIANGLES,o,s,l,je.disabled,(y=c.posMatrix,g=p,v=m,b=r.paint.get("heatmap-intensity"),{u_matrix:y,u_extrude_scale:gt(g,1,v),u_intensity:b}),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}}}i.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),(function(e,t){var r=e.context,n=r.gl,i=t.heatmapFbo;if(i){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var a=t.colorRampTexture;a||(a=t.colorRampTexture=new oe.Texture(r,t.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,n.TRIANGLES,Le.disabled,Ne.disabled,e.colorModeForRenderPass(),je.disabled,(function(e,t,r,n){var i=oe.create();oe.ortho(i,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:i,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:r,u_color_ramp:n,u_opacity:t.paint.get("heatmap-opacity")}})(e,t,0,1),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}})(e,r));var y,g,v,b},line:function(e,t,r,n){if("translucent"===e.renderPass){var i=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==i.constantOr(1)&&0!==a.constantOr(1)){var o=e.depthModeForSublayer(0,Le.ReadOnly),s=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),c=u.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),d=l?"lineSDF":c?"linePattern":p?"lineGradient":"line",f=e.context,m=f.gl,y=!0;if(p){f.activeTexture.set(m.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;g||(g=r.gradientTexture=new oe.Texture(f,r.gradient,m.RGBA)),g.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var v=0,b=n;v<b.length;v+=1){var _=b[v],x=t.getTile(_);if(!c||x.patternsLoaded()){var w=x.getBucket(r);if(w){var D=w.programConfigurations.get(r.id),S=e.context.program.get(),R=e.useProgram(d,D),P=y||R.program!==S,E=u.constantOr(null);if(E&&x.imageAtlas){var A=x.imageAtlas.patternPositions[E.to],M=x.imageAtlas.patternPositions[E.from];A&&M&&D.setConstantPatternPositions(A,M)}var I=l?(G=x,B=r,U=l,H=h,W=void 0,q=(V=e).transform,W=V.lineAtlas,Y=lr(G,q),Z="round"===B.layout.get("line-cap"),X=W.getDash(U.from,Z),$=W.getDash(U.to,Z),K=X.width*H.fromScale,J=$.width*H.toScale,oe.extend(sr(V,G,B),{u_patternscale_a:[Y/K,-X.height/2],u_patternscale_b:[Y/J,-$.height/2],u_sdfgamma:W.width/(256*Math.min(K,J)*oe.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:X.y,u_tex_y_b:$.y,u_mix:H.t})):c?(L=x,N=r,z=h,void 0,j=(k=e).transform,F=lr(L,j),{u_matrix:ur(k,L,N),u_texsize:L.imageAtlasTexture.size,u_ratio:1/gt(L,1,j.zoom),u_image:0,u_scale:[oe.browser.devicePixelRatio,F,z.fromScale,z.toScale],u_fade:z.t,u_gl_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}):p?(O=e,C=x,T=r,oe.extend(sr(O,C,T),{u_image:0})):sr(e,x,r);l&&(P||e.lineAtlas.dirty)?(f.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(f)):c&&(f.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),D.updatePatternPaintBuffers(h)),R.draw(f,m.TRIANGLES,o,e.stencilModeForClipping(_),s,je.disabled,I,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,D),y=!1}}}}}var O,C,T,k,L,N,z,j,F,V,G,B,U,H,q,W,Y,Z,X,$,K,J},fill:function(e,t,r,n){var i=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var o=e.colorModeForRenderPass(),s=r.paint.get("fill-pattern").constantOr(1)||1!==i.constantOr(oe.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===s&&br(e,t,r,n,e.depthModeForSublayer(1,"opaque"===e.renderPass?Le.ReadWrite:Le.ReadOnly),o,!1),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&br(e,t,r,n,e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Le.ReadOnly),o,!0)}},"fill-extrusion":function(e,t,r,n){0!==r.paint.get("fill-extrusion-opacity")&&("offscreen"===e.renderPass?(_r(e,r),(function(e,t,r,n,i,a,o){for(var s=e.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=r.getCrossfadeParameters(),h=0,d=n;h<d.length;h+=1){var f=d[h],m=t.getTile(f),y=m.getBucket(r);if(y){var g=y.programConfigurations.get(r.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(e.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(p));var b=u.constantOr(null);if(b&&m.imageAtlas){var _=m.imageAtlas.patternPositions[b.to],x=m.imageAtlas.patternPositions[b.from];_&&x&&g.setConstantPatternPositions(_,x)}var w=e.translatePosMatrix(f.posMatrix,m,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),D=r.paint.get("fill-extrusion-vertical-gradient"),S=c?(R=w,P=e,E=D,A=f,M=p,I=m,oe.extend(Jt(R,P,E),Kt(M,P,I),{u_height_factor:-Math.pow(2,A.overscaledZ)/I.tileSize/8})):Jt(w,e,D);v.draw(s,s.gl.TRIANGLES,i,a,o,je.backCCW,S,r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,g)}}var R,P,E,A,M,I})(e,t,r,n,new Le(e.context.gl.LEQUAL,Le.ReadWrite,[0,1]),Ne.disabled,e.colorModeForRenderPass())):"translucent"===e.renderPass&&xr(e,r,r.paint.get("fill-extrusion-opacity")))},hillshade:function(e,t,r,n){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,a=t.getSource().maxzoom,o=e.depthModeForSublayer(0,Le.ReadOnly),s=Ne.disabled,l=e.colorModeForRenderPass(),u=0,c=n;u<c.length;u+=1){var p=c[u],h=t.getTile(p);h.needsHillshadePrepare&&"offscreen"===e.renderPass?Dr(e,h,r,a,o,s,l):"translucent"===e.renderPass&&wr(e,h,r,o,s,l)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,r,n){if("translucent"===e.renderPass&&0!==r.paint.get("raster-opacity"))for(var i=e.context,a=i.gl,o=t.getSource(),s=e.useProgram("raster"),l=Ne.disabled,u=e.colorModeForRenderPass(),c=n.length&&n[0].overscaledZ,p=0,h=n;p<h.length;p+=1){var d=h[p],f=e.depthModeForSublayer(d.overscaledZ-c,1===r.paint.get("raster-opacity")?Le.ReadWrite:Le.ReadOnly,a.LESS),m=t.getTile(d),y=e.transform.calculatePosMatrix(d.toUnwrapped(),!0);m.registerFadeDuration(r.paint.get("raster-fade-duration"));var g=t.findLoadedParent(d,0),v=Sr(m,g,t,r,e.transform),b=void 0,_=void 0,x="nearest"===r.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;i.activeTexture.set(a.TEXTURE0),m.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(a.TEXTURE1),g?(g.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,g.tileID.overscaledZ-m.tileID.overscaledZ),_=[m.tileID.canonical.x*b%1,m.tileID.canonical.y*b%1]):m.texture.bind(x,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var w=(S=r,P=R=void 0,{u_matrix:y,u_tl_parent:_||[0,0],u_scale_parent:b||1,u_buffer_scale:1,u_fade_t:(D=v).mix,u_opacity:D.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(P=S.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(R=S.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:(function(e){e*=Math.PI/180;var t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]})(S.paint.get("raster-hue-rotate"))});o instanceof U?s.draw(i,a.TRIANGLES,f,l,u,je.disabled,w,r.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,a.TRIANGLES,f,l,u,je.disabled,w,r.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,r.paint,e.transform.zoom):s.draw(i,a.TRIANGLES,f,l,u,je.disabled,w,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}var D,S,R,P},background:function(e,t,r){var n,i,a,o,s,l,u,c,p,h,d,f,m,y,g,v,b,_,x,w=r.paint.get("background-color"),D=r.paint.get("background-opacity");if(0!==D){var S=e.context,R=S.gl,P=e.transform,E=P.tileSize,A=r.paint.get("background-pattern");if(!e.isPatternMissing(A)){var M=A||1!==w.a||1!==D?"translucent":"opaque";if(e.renderPass===M){var I=Ne.disabled,O=e.depthModeForSublayer(0,"opaque"===M?Le.ReadWrite:Le.ReadOnly),C=e.colorModeForRenderPass(),T=e.useProgram(A?"backgroundPattern":"background"),k=P.coveringTiles({tileSize:E});A&&(S.activeTexture.set(R.TEXTURE0),e.imageManager.bind(e.context));for(var L=r.getCrossfadeParameters(),N=0,z=k;N<z.length;N+=1){var j=z[N],F=e.transform.calculatePosMatrix(j.toUnwrapped()),V=A?(n=F,i=D,a=e,o=A,s={tileID:j,tileSize:E},l=L,x=_=b=v=g=y=m=f=d=h=p=c=u=void 0,oe.extend((u=o,c=l,h=s,d=(p=a).imageManager.getPattern(u.from),f=p.imageManager.getPattern(u.to),m=p.imageManager.getPixelSize(),y=m.width,g=m.height,v=Math.pow(2,h.tileID.overscaledZ),b=h.tileSize*Math.pow(2,p.transform.tileZoom)/v,_=b*(h.tileID.canonical.x+h.tileID.wrap*v),x=b*h.tileID.canonical.y,{u_image:0,u_pattern_tl_a:d.tl,u_pattern_br_a:d.br,u_pattern_tl_b:f.tl,u_pattern_br_b:f.br,u_texsize:[y,g],u_mix:c.t,u_pattern_size_a:d.displaySize,u_pattern_size_b:f.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/gt(h,1,p.transform.tileZoom),u_pixel_coord_upper:[_>>16,x>>16],u_pixel_coord_lower:[65535&_,65535&x]}),{u_matrix:n,u_opacity:i})):{u_matrix:F,u_opacity:D,u_color:w};T.draw(S,R.TRIANGLES,O,I,C,je.disabled,V,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,r){for(var n=0;n<r.length;n++)Rr(e,t,r[n])},custom:function(e,t,r){var n=e.context,i=r.implementation;if("offscreen"===e.renderPass){var a=i.prerender;a&&(e.setCustomLayerDefaults(),a.call(i,n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState()),"3d"===i.renderingMode&&(e.setCustomLayerDefaults(),_r(e,r),i.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState())}else"translucent"===e.renderPass&&("3d"===i.renderingMode?xr(e,r,1):(e.setCustomLayerDefaults(),n.setStencilMode(Ne.disabled),n.setDepthMode(Le.disabled),i.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState(),n.bindFramebuffer.set(null)))}},Ar=function(e,t){this.context=new Fe(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new oe.ProgramConfiguration,this.crossTileSymbolIndex=new jt};function Mr(e,t){if(e.row>t.row){var r=e;e=t,t=r}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function Ir(e,t,r,n,i){var a=Math.max(r,Math.floor(t.y0)),o=Math.min(n,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,p=t.dx<0,h=a;h<o;h++){var d=l*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,f=u*Math.max(0,Math.min(t.dy,h+p-t.y0))+t.x0;i(Math.floor(f),Math.ceil(d),h)}}function Or(e,t,r,n,i,a){var o,s=Mr(e,t),l=Mr(t,r),u=Mr(r,e);s.dy>l.dy&&(o=s,s=l,l=o),s.dy>u.dy&&(o=s,s=u,u=o),l.dy>u.dy&&(o=l,l=u,u=o),s.dy&&Ir(u,s,n,i,a),l.dy&&Ir(u,l,n,i,a)}Ar.prototype.resize=function(e,t){var r=this.context.gl;if(this.width=e*oe.browser.devicePixelRatio,this.height=t*oe.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,i=this.style._order;n<i.length;n+=1){var a=i[n];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Ar.prototype.setup=function(){var e=this.context,t=new oe.StructArrayLayout2i4;t.emplaceBack(0,0),t.emplaceBack(oe.EXTENT,0),t.emplaceBack(0,oe.EXTENT),t.emplaceBack(oe.EXTENT,oe.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(t,Ut.members),this.tileExtentSegments=oe.SegmentVector.simpleSegment(0,0,4,2);var r=new oe.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(oe.EXTENT,0),r.emplaceBack(0,oe.EXTENT),r.emplaceBack(oe.EXTENT,oe.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ut.members),this.debugSegments=oe.SegmentVector.simpleSegment(0,0,4,5);var n=new oe.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(oe.EXTENT,0,oe.EXTENT,0),n.emplaceBack(0,oe.EXTENT,0,oe.EXTENT),n.emplaceBack(oe.EXTENT,oe.EXTENT,oe.EXTENT,oe.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,oe.rasterBoundsAttributes.members),this.rasterBoundsSegments=oe.SegmentVector.simpleSegment(0,0,4,2);var i=new oe.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,Ut.members),this.viewportSegments=oe.SegmentVector.simpleSegment(0,0,4,2);var a=new oe.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var o=new oe.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o);var s=this.context.gl;this.stencilClearMode=new Ne({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},Ar.prototype.clearStencil=function(){var e=this.context,t=e.gl,r=oe.create();oe.ortho(r,0,this.width,this.height,0,0,1),oe.scale(r,r,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,Le.disabled,this.stencilClearMode,ze.disabled,je.disabled,ir(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ar.prototype._renderTileClippingMasks=function(e){var t=this.context,r=t.gl;t.setColorMode(ze.disabled),t.setDepthMode(Le.disabled);var n=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var a=0,o=e;a<o.length;a+=1){var s=o[a],l=this._tileClippingMaskIDs[s.key]=i++;n.draw(t,r.TRIANGLES,Le.disabled,new Ne({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),ze.disabled,je.disabled,ir(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Ar.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Ne({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},Ar.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new ze([e.CONSTANT_COLOR,e.ONE],new oe.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},Ar.prototype.depthModeForSublayer=function(e,t,r){var n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=n-1+this.depthRange;return new Le(r||this.context.gl.LEQUAL,t,[i,n])},Ar.prototype.render=function(e,t){this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(oe.browser.now());var r=this.style._order,n=this.style.sourceCaches;for(var i in n){var a=n[i];a.used&&a.prepare(this.context)}var o,s={},l={},u={};for(var c in n){var p=n[c];s[c]=p.getVisibleCoordinates(),l[c]=s[c].slice().reverse(),u[c]=p.getVisibleCoordinates(!0).reverse()}for(var h in n){var d=n[h],f=d.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var m=[],y=0,g=s[h];y<g.length;y+=1){var v=g[y];m.push(d.getTile(v))}hr(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,_=r;b<_.length;b+=1){var x=_[b],w=this.style._layers[x];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var D=l[w.source];("custom"===w.type||D.length)&&this.renderLayer(this,n[w.source],w,D)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?oe.Color.black:oe.Color.transparent,depth:1}),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[r[this.currentLayer]],R=n[S.source],P=s[S.source];S.source!==o&&R&&(this.clearStencil(),R.getSource().isTileClipped&&this._renderTileClippingMasks(P)),this.renderLayer(this,R,S,P),o=S.source}for(this.renderPass="translucent",this.currentLayer=0,o=null;this.currentLayer<r.length;this.currentLayer++){var E=this.style._layers[r[this.currentLayer]],A=n[E.source],M=("symbol"===E.type?u:l)[E.source];E.source!==o&&A&&(this.clearStencil(),A.getSource().isTileClipped&&this._renderTileClippingMasks(s[E.source])),this.renderLayer(this,A,E,M),o=E.source}if(this.options.showTileBoundaries)for(var I in n){Er.debug(this,n[I],s[I]);break}this.setCustomLayerDefaults()},Ar.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},Ar.prototype.renderLayer=function(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||n.length)&&(this.id=r.id,Er[r.type](e,t,r,n))},Ar.prototype.translatePosMatrix=function(e,t,r,n,i){if(!r[0]&&!r[1])return e;var a=i?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){var o=Math.sin(a),s=Math.cos(a);r=[r[0]*s-r[1]*o,r[0]*o+r[1]*s]}var l=[i?r[0]:gt(t,r[0],this.transform.zoom),i?r[1]:gt(t,r[1],this.transform.zoom),0],u=new Float32Array(16);return oe.translate(u,e,l),u},Ar.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},Ar.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},Ar.prototype.isPatternMissing=function(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),r=this.imageManager.getPattern(e.to);return!t||!r},Ar.prototype.useProgram=function(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new $t(this.context,Zt[e],t,pr[e],this._showOverdrawInspector)),this.cache[r]},Ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ar.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var Cr=function(e,t,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=t||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new N(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Tr={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Cr.prototype.clone=function(){var e=new Cr(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},Tr.minZoom.get=function(){return this._minZoom},Tr.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Tr.maxZoom.get=function(){return this._maxZoom},Tr.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Tr.renderWorldCopies.get=function(){return this._renderWorldCopies},Tr.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Tr.worldSize.get=function(){return this.tileSize*this.scale},Tr.centerPoint.get=function(){return this.size._div(2)},Tr.size.get=function(){return new oe.Point(this.width,this.height)},Tr.bearing.get=function(){return-this.angle/Math.PI*180},Tr.bearing.set=function(e){var t=-oe.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=oe.create$4(),oe.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Tr.pitch.get=function(){return this._pitch/Math.PI*180},Tr.pitch.set=function(e){var t=oe.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},Tr.fov.get=function(){return this._fov/Math.PI*180},Tr.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Tr.zoom.get=function(){return this._zoom},Tr.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Tr.center.get=function(){return this._center},Tr.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Cr.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},Cr.prototype.getVisibleUnwrappedCoordinates=function(e){var t=[new oe.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new oe.Point(0,0),0),n=this.pointCoordinate(new oe.Point(this.width,0),0),i=this.pointCoordinate(new oe.Point(this.width,this.height),0),a=this.pointCoordinate(new oe.Point(0,this.height),0),o=Math.floor(Math.min(r.column,n.column,i.column,a.column)),s=Math.floor(Math.max(r.column,n.column,i.column,a.column)),l=o-1;l<=s+1;l++)0!==l&&t.push(new oe.UnwrappedTileID(l,e));return t},Cr.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),r=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var n=this.pointCoordinate(this.centerPoint,t),i=new oe.Point(n.column-.5,n.row-.5);return (function(s,e,l,u){void 0===u&&(u=!0);var c=1<<s,p={};function t(e,t,r){var n,i,a,o;if(r>=0&&r<=c)for(n=e;n<t;n++)i=Math.floor(n/c),a=(n%c+c)%c,0!==i&&!0!==u||(o=new oe.OverscaledTileID(l,i,s,a,r),p[o.key]=o)}return Or(e[0],e[1],e[2],0,c,t),Or(e[2],e[3],e[0],0,c,t),Object.keys(p).map((function(e){return p[e]}))})(t,[this.pointCoordinate(new oe.Point(0,0),t),this.pointCoordinate(new oe.Point(this.width,0),t),this.pointCoordinate(new oe.Point(this.width,this.height),t),this.pointCoordinate(new oe.Point(0,this.height),t)],e.reparseOverscaled?r:t,this._renderWorldCopies).sort((function(e,t){return i.dist(e.canonical)-i.dist(t.canonical)}))},Cr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Tr.unmodified.get=function(){return this._unmodified},Cr.prototype.zoomScale=function(e){return Math.pow(2,e)},Cr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Cr.prototype.project=function(e){return new oe.Point(this.lngX(e.lng),this.latY(e.lat))},Cr.prototype.unproject=function(e){return new N(this.xLng(e.x),this.yLat(e.y))},Tr.x.get=function(){return this.lngX(this.center.lng)},Tr.y.get=function(){return this.latY(this.center.lat)},Tr.point.get=function(){return new oe.Point(this.x,this.y)},Cr.prototype.lngX=function(e){return(180+e)*this.worldSize/360},Cr.prototype.latY=function(e){return e=oe.clamp(e,-this.maxValidLatitude,this.maxValidLatitude),(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},Cr.prototype.xLng=function(e){return 360*e/this.worldSize-180},Cr.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},Cr.prototype.setLocationAtPoint=function(e,t){var r=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(r)),this._renderWorldCopies&&(this.center=this.center.wrap())},Cr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Cr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Cr.prototype.locationCoordinate=function(e){return new oe.Coordinate(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Cr.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new N(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},Cr.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var r=[e.x,e.y,0,1],n=[e.x,e.y,1,1];oe.transformMat4(r,r,this.pixelMatrixInverse),oe.transformMat4(n,n,this.pixelMatrixInverse);var i=r[3],a=n[3],o=r[0]/i,s=n[0]/a,l=r[1]/i,u=n[1]/a,c=r[2]/i,p=n[2]/a,h=c===p?0:(0-c)/(p-c);return new oe.Coordinate(oe.number(o,s,h)/this.tileSize,oe.number(l,u,h)/this.tileSize,this.zoom)._zoomTo(t)},Cr.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),r=[t.column*this.tileSize,t.row*this.tileSize,0,1];return oe.transformMat4(r,r,this.pixelMatrix),new oe.Point(r[0]/r[3],r[1]/r[3])},Cr.prototype.getBounds=function(){return(new z).extend(this.pointLocation(new oe.Point(0,0))).extend(this.pointLocation(new oe.Point(this.width,0))).extend(this.pointLocation(new oe.Point(this.width,this.height))).extend(this.pointLocation(new oe.Point(0,this.height)))},Cr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new z([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Cr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Cr.prototype.calculatePosMatrix=function(e,t){void 0===t&&(t=!1);var r=e.key,n=t?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var i=e.canonical,a=this.worldSize/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,s=oe.identity(new Float64Array(16));return oe.translate(s,s,[o*a,i.y*a,0]),oe.scale(s,s,[a/oe.EXTENT,a/oe.EXTENT,1]),oe.multiply(s,t?this.alignedProjMatrix:this.projMatrix,s),n[r]=new Float32Array(s),n[r]},Cr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Cr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,r,n,i=-90,a=90,o=-180,s=180,l=this.size,u=this._unmodified;if(this.latRange){var c=this.latRange;i=this.latY(c[1]),e=(a=this.latY(c[0]))-i<l.y?l.y/(a-i):0}if(this.lngRange){var p=this.lngRange;o=this.lngX(p[0]),t=(s=this.lngX(p[1]))-o<l.x?l.x/(s-o):0}var h=Math.max(t||0,e||0);if(h)return this.center=this.unproject(new oe.Point(t?(s+o)/2:this.x,e?(a+i)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var d=this.y,f=l.y/2;d-f<i&&(n=i+f),d+f>a&&(n=a-f)}if(this.lngRange){var m=this.x,y=l.x/2;m-y<o&&(r=o+y),m+y>s&&(r=s-y)}void 0===r&&void 0===n||(this.center=this.unproject(new oe.Point(void 0!==r?r:this.x,void 0!==n?n:this.y))),this._unmodified=u,this._constraining=!1}},Cr.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),n=this.x,i=this.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),o=new Float64Array(16);oe.perspective(o,this._fov,this.width/this.height,1,a),oe.scale(o,o,[1,-1,1]),oe.translate(o,o,[0,0,-this.cameraToCenterDistance]),oe.rotateX(o,o,this._pitch),oe.rotateZ(o,o,this.angle),oe.translate(o,o,[-n,-i,0]),this.mercatorMatrix=oe.scale([],o,[this.worldSize,this.worldSize,this.worldSize]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));oe.scale(o,o,[1,1,s,1]),this.projMatrix=o;var l=this.width%2/2,u=this.height%2/2,c=Math.cos(this.angle),p=Math.sin(this.angle),h=n-Math.round(n)+c*l+p*u,d=i-Math.round(i)+c*u+p*l,f=new Float64Array(o);if(oe.translate(f,f,[h>.5?h-1:h,d>.5?d-1:d,0]),this.alignedProjMatrix=f,o=oe.create(),oe.scale(o,o,[this.width/2,-this.height/2,1]),oe.translate(o,o,[1,-1,0]),this.pixelMatrix=oe.multiply(new Float64Array(16),o,this.projMatrix),!(o=oe.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=o,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Cr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new oe.Point(0,0)).zoomTo(this.zoom),t=[e.column*this.tileSize,e.row*this.tileSize,0,1];return oe.transformMat4(t,t,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Cr.prototype,Tr);var kr=function(){var e,t,r,n;oe.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),t=!300,r=0,n=function(){r=0,t&&(e(),r=setTimeout(n,300),t=!1)},function(){return t=!0,r||n(),r})};kr.prototype.addTo=function(e){return this._map=e,oe.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},kr.prototype.remove=function(){return oe.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},kr.prototype.getHashString=function(e){var t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),a=Math.round(t.lng*i)/i,o=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=e?"#/"+a+"/"+o+"/"+r:"#"+r+"/"+o+"/"+a,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},kr.prototype._onHashChange=function(){var e=oe.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},kr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();oe.window.history.replaceState(oe.window.history.state,"",e)};var Lr=(function(o){function e(e,t,r,n){void 0===n&&(n={});var i=v.mousePos(t.getCanvasContainer(),r),a=t.unproject(i);o.call(this,e,oe.extend({point:i,lngLat:a,originalEvent:r},n)),this._defaultPrevented=!1,this.target=t}o&&(e.__proto__=o);var t={defaultPrevented:{configurable:!0}};return((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.preventDefault=function(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e})(oe.Event),Nr=(function(s){function e(e,t,r){var n=v.touchPos(t.getCanvasContainer(),r),i=n.map((function(e){return t.unproject(e)})),a=n.reduce((function(e,t,r,n){return e.add(t.div(n.length))}),new oe.Point(0,0)),o=t.unproject(a);s.call(this,e,{points:n,point:a,lngLats:i,lngLat:o,originalEvent:r}),this._defaultPrevented=!1}s&&(e.__proto__=s);var t={defaultPrevented:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.preventDefault=function(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e})(oe.Event),zr=(function(n){function e(e,t,r){n.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}n&&(e.__proto__=n);var t={defaultPrevented:{configurable:!0}};return((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.preventDefault=function(){this._defaultPrevented=!0},t.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,t),e})(oe.Event),jr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,oe.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};jr.prototype.isEnabled=function(){return!!this._enabled},jr.prototype.isActive=function(){return!!this._active},jr.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},jr.prototype.onWheel=function(e){if(this.isEnabled()){var t=e.deltaMode===oe.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=oe.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this.isActive()||this._start(e)),e.preventDefault()}},jr.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},jr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new oe.Event("movestart",{originalEvent:e})),this._map.fire(new oe.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var t=v.mousePos(this._el,e);this._around=N.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},jr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var t=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:t.zoom,o=this._startZoom,s=this._easing,l=!1;if("wheel"===this._type&&o&&s){var u=Math.min((oe.browser.now()-this._lastWheelEventTime)/200,1),c=s(u);t.zoom=oe.number(o,a,c),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else t.zoom=a,l=!0;t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new oe.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new oe.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._map.fire(new oe.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new oe.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom}),200))}},jr.prototype._smoothOutEasing=function(e){var t=oe.ease;if(this._prevEase){var r=this._prevEase,n=(oe.browser.now()-r.start)/r.duration,i=r.easing(n+.01)-r.easing(n),a=.27/Math.sqrt(i*i+1e-4)*.01,o=Math.sqrt(.0729-a*a);t=oe.bezier(a,o,.25,1)}return this._prevEase={start:oe.browser.now(),duration:e,easing:t},t};var Fr=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1,oe.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Fr.prototype.isEnabled=function(){return!!this._enabled},Fr.prototype.isActive=function(){return!!this._active},Fr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(oe.window.document.addEventListener("mousemove",this._onMouseMove,!1),oe.window.document.addEventListener("keydown",this._onKeyDown,!1),oe.window.document.addEventListener("mouseup",this._onMouseUp,!1),v.disableDrag(),this._startPos=this._lastPos=v.mousePos(this._el,e),this._active=!0)},Fr.prototype._onMouseMove=function(e){var t=v.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=t,this._box||(this._box=v.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var n=Math.min(r.x,t.x),i=Math.max(r.x,t.x),a=Math.min(r.y,t.y),o=Math.max(r.y,t.y);v.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=i-n+"px",this._box.style.height=o-a+"px"}},Fr.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,r=v.mousePos(this._el,e);this._finish(),v.suppressClick(),t.x===r.x&&t.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(t,r,this._map.getBearing(),{linear:!0}).fire(new oe.Event("boxzoomend",{originalEvent:e}))}},Fr.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},Fr.prototype._finish=function(){this._active=!1,oe.window.document.removeEventListener("mousemove",this._onMouseMove,!1),oe.window.document.removeEventListener("keydown",this._onKeyDown,!1),oe.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos},Fr.prototype._fireEvent=function(e,t){return this._map.fire(new oe.Event(e,{originalEvent:t}))};var Vr=oe.bezier(0,0,.25,1),Gr=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._state="disabled",this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,oe.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Gr.prototype.isEnabled=function(){return"disabled"!==this._state},Gr.prototype.isActive=function(){return"active"===this._state},Gr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Gr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Gr.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=v.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==v.mouseButton(e))return;this._eventButton=0}v.disableDrag(),oe.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),oe.window.document.addEventListener("mouseup",this._onMouseUp),oe.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[oe.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=v.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Gr.prototype._onMouseMove=function(e){var t=v.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Gr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform,r=this._startPos,n=this._lastPos,i=.8*(r.x-n.x),a=-.5*(r.y-n.y),o=t.bearing-i,s=t.pitch-a,l=this._inertia,u=l[l.length-1];this._drainInertiaBuffer(),l.push([oe.browser.now(),this._map._normalizeBearing(o,u[1])]),t.bearing=o,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=s),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},Gr.prototype._onMouseUp=function(e){if(v.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",v.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},Gr.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},Gr.prototype._unbind=function(){oe.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),oe.window.document.removeEventListener("mouseup",this._onMouseUp),oe.window.removeEventListener("blur",this._onBlur),v.enableDrag()},Gr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Gr.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var r=this._map,n=r.getBearing(),i=this._inertia,a=function(){Math.abs(n)<t._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)a();else{var o=i[0],s=i[i.length-1],l=i[i.length-2],u=r._normalizeBearing(n,l[1]),c=s[1]-o[1],p=c<0?-1:1,h=(s[0]-o[0])/1e3;if(0!==c&&0!==h){var d=Math.abs(c*(.25/h));d>180&&(d=180);var f=d/180;u+=p*d*(f/2),Math.abs(r._normalizeBearing(u,0))<this._bearingSnap&&(u=r._normalizeBearing(0,u)),r.rotateTo(u,{duration:1e3*f,easing:Vr,noMoveStart:!0},{originalEvent:e})}else a()}},Gr.prototype._fireEvent=function(e,t){return this._map.fire(new oe.Event(e,t?{originalEvent:t}:{}))},Gr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=oe.browser.now();e.length>0&&t-e[0][0]>160;)e.shift()};var Br=oe.bezier(0,0,.3,1),Ur=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=t.clickTolerance||1,oe.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Ur.prototype.isEnabled=function(){return"disabled"!==this._state},Ur.prototype.isActive=function(){return"active"===this._state},Ur.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Ur.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Ur.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==v.mouseButton(e)||(v.addEventListener(oe.window.document,"mousemove",this._onMove,{capture:!0}),v.addEventListener(oe.window.document,"mouseup",this._onMouseUp),this._start(e)))},Ur.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(v.addEventListener(oe.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),v.addEventListener(oe.window.document,"touchend",this._onTouchEnd),this._start(e)))},Ur.prototype._start=function(e){oe.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=v.mousePos(this._el,e),this._inertia=[[oe.browser.now(),this._startPos]]},Ur.prototype._onMove=function(e){e.preventDefault();var t=v.mousePos(this._el,e);this._lastPos.equals(t)||"pending"===this._state&&t.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=t,this._drainInertiaBuffer(),this._inertia.push([oe.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Ur.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},Ur.prototype._onMouseUp=function(e){if(0===v.mouseButton(e))switch(this._state){case"active":this._state="enabled",v.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},Ur.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},Ur.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},Ur.prototype._unbind=function(){v.removeEventListener(oe.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),v.removeEventListener(oe.window.document,"touchend",this._onTouchEnd),v.removeEventListener(oe.window.document,"mousemove",this._onMove,{capture:!0}),v.removeEventListener(oe.window.document,"mouseup",this._onMouseUp),v.removeEventListener(oe.window,"blur",this._onBlur)},Ur.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Ur.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var r=t[t.length-1],n=t[0],i=r[1].sub(n[1]),a=(r[0]-n[0])/1e3;if(0===a||r[1].equals(n[1]))this._fireEvent("moveend",e);else{var o=i.mult(.3/a),s=o.mag();s>1400&&(s=1400,o._unit()._mult(s));var l=s/750,u=o.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:Br,noMoveStart:!0},{originalEvent:e})}}},Ur.prototype._fireEvent=function(e,t){return this._map.fire(new oe.Event(e,t?{originalEvent:t}:{}))},Ur.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=oe.browser.now();e.length>0&&t-e[0][0]>160;)e.shift()};var Hr=function(e){this._map=e,this._el=e.getCanvasContainer(),oe.bindAll(["_onKeyDown"],this)};function qr(e){return e*(2-e)}Hr.prototype.isEnabled=function(){return!!this._enabled},Hr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Hr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Hr.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,r=0,n=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?n=-1:(a=1,e.preventDefault());break;default:return}var o=this._map,s=o.getZoom(),l={duration:300,delayEndEvents:500,easing:qr,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+15*r,pitch:o.getPitch()+10*n,offset:[100*-i,100*-a],center:o.getCenter()};o.easeTo(l,{originalEvent:e})}};var Wr=function(e){this._map=e,oe.bindAll(["_onDblClick","_onZoomEnd"],this)};Wr.prototype.isEnabled=function(){return!!this._enabled},Wr.prototype.isActive=function(){return!!this._active},Wr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Wr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wr.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout((function(){t._tapped=null}),300)))},Wr.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},Wr.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},Wr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Yr=oe.bezier(0,0,.15,1),Zr=function(e){this._map=e,this._el=e.getCanvasContainer(),oe.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Zr.prototype.isEnabled=function(){return!!this._enabled},Zr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},Zr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Zr.prototype.disableRotation=function(){this._rotationDisabled=!0},Zr.prototype.enableRotation=function(){this._rotationDisabled=!1},Zr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var t=v.mousePos(this._el,e.touches[0]),r=v.mousePos(this._el,e.touches[1]),n=t.add(r).div(2);this._startVec=t.sub(r),this._startAround=this._map.transform.pointLocation(n),this._gestureIntent=void 0,this._inertia=[],v.addEventListener(oe.window.document,"touchmove",this._onMove,{passive:!1}),v.addEventListener(oe.window.document,"touchend",this._onEnd)}},Zr.prototype._getTouchEventData=function(e){var t=v.mousePos(this._el,e.touches[0]),r=v.mousePos(this._el,e.touches[1]),n=t.sub(r);return{vec:n,center:t.add(r).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},Zr.prototype._onMove=function(e){if(2===e.touches.length){var t=this._getTouchEventData(e),r=t.vec,n=t.scale,i=t.bearing;if(!this._gestureIntent){var a=Math.abs(1-n)>.15;Math.abs(i)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new oe.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new oe.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Zr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var t=this._map.transform;this._startScale||(this._startScale=t.scale,this._startBearing=t.bearing);var r=this._getTouchEventData(this._lastTouchEvent),n=r.center,i=r.bearing,a=r.scale,o=t.pointLocation(n),s=t.locationPoint(o);"rotate"===e&&(t.bearing=this._startBearing+i),t.zoom=t.scaleZoom(this._startScale*a),t.setLocationAtPoint(this._startAround,s),this._map.fire(new oe.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new oe.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([oe.browser.now(),a,n])}},Zr.prototype._onEnd=function(e){v.removeEventListener(oe.window.document,"touchmove",this._onMove,{passive:!1}),v.removeEventListener(oe.window.document,"touchend",this._onEnd);var t=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,t){this._map.fire(new oe.Event(t+"end",{originalEvent:e})),this._drainInertiaBuffer();var n=this._inertia,i=this._map;if(n.length<2)i.snapToNorth({},{originalEvent:e});else{var a=n[n.length-1],o=n[0],s=i.transform.scaleZoom(r*a[1]),l=i.transform.scaleZoom(r*o[1]),u=s-l,c=(a[0]-o[0])/1e3,p=a[2];if(0!==c&&s!==l){var h=.15*u/c;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var d=1e3*Math.abs(h/(12*.15)),f=s+h*d/2e3;f<0&&(f=0),i.easeTo({zoom:f,duration:d,easing:Yr,around:this._aroundCenter?i.getCenter():i.unproject(p),noMoveStart:!0},{originalEvent:e})}else i.snapToNorth({},{originalEvent:e})}}},Zr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=oe.browser.now();e.length>2&&t-e[0][0]>160;)e.shift()};var Xr={scrollZoom:jr,boxZoom:Fr,dragRotate:Gr,dragPan:Ur,keyboard:Hr,doubleClickZoom:Wr,touchZoomRotate:Zr},$r=(function(r){function e(e,t){r.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,oe.bindAll(["_renderFrameCallback"],this)}return r&&(e.__proto__=r),((e.prototype=Object.create(r&&r.prototype)).constructor=e).prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},e.prototype.panBy=function(e,t,r){return e=oe.Point.convert(e).mult(-1),this.panTo(this.transform.center,oe.extend({offset:e},t),r)},e.prototype.panTo=function(e,t,r){return this.easeTo(oe.extend({center:e},t),r)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},e.prototype.zoomTo=function(e,t,r){return this.easeTo(oe.extend({zoom:e},t),r)},e.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},e.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},e.prototype.rotateTo=function(e,t,r){return this.easeTo(oe.extend({bearing:e},t),r)},e.prototype.resetNorth=function(e,t){return this.rotateTo(0,oe.extend({duration:1e3},e),t),this},e.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},e.prototype.cameraForBounds=function(e,t){return e=z.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,t)},e.prototype._cameraForBoxAndBearing=function(e,t,r,n){if("number"==typeof(n=oe.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var i=n.padding;n.padding={top:i,bottom:i,right:i,left:i}}if(oe.isEqual(Object.keys(n.padding).sort((function(e,t){return e<t?-1:e>t?1:0})),["bottom","left","right","top"])){var a=[(n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2],o=Math.min(n.padding.right,n.padding.left),s=Math.min(n.padding.top,n.padding.bottom);n.offset=[n.offset[0]+a[0],n.offset[1]+a[1]];var l=this.transform,u=l.project(N.convert(e)),c=l.project(N.convert(t)),p=u.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),d=new oe.Point(Math.max(p.x,h.x),Math.max(p.y,h.y)),f=new oe.Point(Math.min(p.x,h.x),Math.min(p.y,h.y)),m=oe.Point.convert(n.offset),y=d.sub(f),g=(l.width-2*o-2*Math.abs(m.x))/y.x,v=(l.height-2*s-2*Math.abs(m.y))/y.y;if(!(v<0||g<0))return n.center=l.unproject(u.add(c).div(2)),n.zoom=Math.min(l.scaleZoom(l.scale*Math.min(g,v)),n.maxZoom),n.bearing=r,n;oe.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else oe.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},e.prototype.fitBounds=function(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)},e.prototype.fitScreenCoordinates=function(e,t,r,n,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(oe.Point.convert(e)),this.transform.pointLocation(oe.Point.convert(t)),r,n),n,i)},e.prototype._fitInternal=function(e,t,r){return e?(t=oe.extend(e,t)).linear?this.easeTo(t,r):this.flyTo(t,r):this},e.prototype.jumpTo=function(e,t){this.stop();var r=this.transform,n=!1,i=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(n=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=N.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(i=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new oe.Event("movestart",t)).fire(new oe.Event("move",t)),n&&this.fire(new oe.Event("zoomstart",t)).fire(new oe.Event("zoom",t)).fire(new oe.Event("zoomend",t)),i&&this.fire(new oe.Event("rotatestart",t)).fire(new oe.Event("rotate",t)).fire(new oe.Event("rotateend",t)),a&&this.fire(new oe.Event("pitchstart",t)).fire(new oe.Event("pitch",t)).fire(new oe.Event("pitchend",t)),this.fire(new oe.Event("moveend",t))},e.prototype.easeTo=function(e,a){var o=this;this.stop(),!1===(e=oe.extend({offset:[0,0],duration:500,easing:oe.ease},e)).animate&&(e.duration=0);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in e?+e.zoom:l,h="bearing"in e?this._normalizeBearing(e.bearing,u):u,d="pitch"in e?+e.pitch:c,f=s.centerPoint.add(oe.Point.convert(e.offset)),t=s.pointLocation(f),r=N.convert(e.center||t);this._normalizeCenter(r);var m,y,g=s.project(t),v=s.project(r).sub(g),b=s.zoomScale(p-l);return e.around&&(m=N.convert(e.around),y=s.locationPoint(m)),this._zooming=p!==l,this._rotating=u!==h,this._pitching=d!==c,this._prepareEase(a,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(o._zooming&&(s.zoom=oe.number(l,p,e)),o._rotating&&(s.bearing=oe.number(u,h,e)),o._pitching&&(s.pitch=oe.number(c,d,e)),m)s.setLocationAtPoint(m,y);else{var t=s.zoomScale(s.zoom-l),r=p>l?Math.min(2,b):Math.max(.5,b),n=Math.pow(r,1-e),i=s.unproject(g.add(v.mult(e*n)).mult(t));s.setLocationAtPoint(s.renderWorldCopies?i.wrap():i,f)}o._fireMoveEvents(a)}),(function(){e.delayEndEvents?o._easeEndTimeoutID=setTimeout((function(){return o._afterEase(a)}),e.delayEndEvents):o._afterEase(a)}),e),this},e.prototype._prepareEase=function(e,t){this._moving=!0,t||this.fire(new oe.Event("movestart",e)),this._zooming&&this.fire(new oe.Event("zoomstart",e)),this._rotating&&this.fire(new oe.Event("rotatestart",e)),this._pitching&&this.fire(new oe.Event("pitchstart",e))},e.prototype._fireMoveEvents=function(e){this.fire(new oe.Event("move",e)),this._zooming&&this.fire(new oe.Event("zoom",e)),this._rotating&&this.fire(new oe.Event("rotate",e)),this._pitching&&this.fire(new oe.Event("pitch",e))},e.prototype._afterEase=function(e){var t=this._zooming,r=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,t&&this.fire(new oe.Event("zoomend",e)),r&&this.fire(new oe.Event("rotateend",e)),n&&this.fire(new oe.Event("pitchend",e)),this.fire(new oe.Event("moveend",e))},e.prototype.flyTo=function(e,i){var a=this;this.stop(),e=oe.extend({offset:[0,0],speed:1.2,curve:1.42,easing:oe.ease},e);var o=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c="zoom"in e?oe.clamp(+e.zoom,o.minZoom,o.maxZoom):s,p="bearing"in e?this._normalizeBearing(e.bearing,l):l,h="pitch"in e?+e.pitch:u,t=o.zoomScale(c-s),d=o.centerPoint.add(oe.Point.convert(e.offset)),r=o.pointLocation(d),f=N.convert(e.center||r);this._normalizeCenter(f);var m=o.project(r),y=o.project(f).sub(m),n=e.curve,g=Math.max(o.width,o.height),v=g/t,b=y.mag();if("minZoom"in e){var _=oe.clamp(Math.min(e.minZoom,s,c),o.minZoom,o.maxZoom),x=g/o.zoomScale(_-s);n=Math.sqrt(x/b*2)}var w=n*n;function D(e){var t=(v*v-g*g+(e?-1:1)*w*w*b*b)/(2*(e?v:g)*w*b);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function R(e){return(Math.exp(e)+Math.exp(-e))/2}var P=D(0),E=function(e){return R(P)/R(P+n*e)},A=function(e){return g*((R(P)*(S(t=P+n*e)/R(t))-S(P))/w)/b;var t},M=(D(1)-P)/n;if(Math.abs(b)<1e-6||!isFinite(M)){if(Math.abs(g-v)<1e-6)return this.easeTo(e,i);var I=v<g?-1:1;M=Math.abs(Math.log(v/g))/n,A=function(){return 0},E=function(e){return Math.exp(I*n*e)}}if("duration"in e)e.duration=+e.duration;else{var O="screenSpeed"in e?+e.screenSpeed/n:+e.speed;e.duration=1e3*M/O}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==p,this._pitching=h!==u,this._prepareEase(i,!1),this._ease((function(e){var t=e*M,r=1/E(t);o.zoom=1===e?c:s+o.scaleZoom(r),a._rotating&&(o.bearing=oe.number(l,p,e)),a._pitching&&(o.pitch=oe.number(u,h,e));var n=1===e?f:o.unproject(m.add(y.mult(A(t))).mult(r));o.setLocationAtPoint(o.renderWorldCopies?n.wrap():n,d),a._fireMoveEvents(i)}),(function(){return a._afterEase(i)}),e),this},e.prototype.isEasing=function(){return!!this._easeFrameId},e.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},e.prototype._ease=function(e,t,r){!1===r.animate||0===r.duration?(e(1),t()):(this._easeStart=oe.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function(){var e=Math.min((oe.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function(e,t){e=oe.wrap(e,-180,180);var r=Math.abs(e-t);return Math.abs(e-360-t)<r&&(e-=360),Math.abs(e+360-t)<r&&(e+=360),e},e.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}},e})(oe.Evented),Kr=function(e){void 0===e&&(e={}),this.options=e,oe.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Kr.prototype.getDefaultPosition=function(){return"bottom-right"},Kr.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Kr.prototype.onRemove=function(){v.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Kr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:h.ACCESS_TOKEN}];if(e){var t=n.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e}),"?");e.href="https://www.mapbox.com/feedback/"+t+(this._map._hash?this._map._hash.getHashString(!0):"")}},Kr.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},Kr.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var t=this._map.style.sourceCaches;for(var r in t){var i=t[r].getSource();i.attribution&&n.indexOf(i.attribution)<0&&n.push(i.attribution)}n.sort((function(e,t){return e.length-t.length})),(n=n.filter((function(e,t){for(var r=t+1;r<n.length;r++)if(n[r].indexOf(e)>=0)return!1;return!0}))).length?(this._container.innerHTML=n.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Kr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Jr=function(){oe.bindAll(["_updateLogo"],this),oe.bindAll(["_updateCompact"],this)};Jr.prototype.onAdd=function(e){this._map=e,this._container=v.create("div","mapboxgl-ctrl");var t=v.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Jr.prototype.onRemove=function(){v.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Jr.prototype.getDefaultPosition=function(){return"bottom-left"},Jr.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Jr.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},Jr.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var Qr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Qr.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Qr.prototype.remove=function(e){for(var t=this._currentlyRunning,r=0,n=t?this._queue.concat(t):this._queue;r<n.length;r+=1){var i=n[r];if(i.id===e)return void(i.cancelled=!0)}},Qr.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,r=e;t<r.length;t+=1){var n=r[t];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Qr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var en=oe.window.HTMLImageElement,tn=oe.window.HTMLElement,rn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},nn=(function(s){function e(e){var t=this;if(null!=(e=oe.extend({},rn,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Cr(e.minZoom,e.maxZoom,e.renderWorldCopies);s.call(this,r,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Qr,this._controls=[];var n=e.transformRequest;if(this._transformRequest=n?function(e,t){return n(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof e.container){if(this._container=oe.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof tn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),oe.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return t._update(!1)})),this.on("zoom",(function(){return t._update(!0)})),void 0!==oe.window&&(oe.window.addEventListener("online",this._onWindowOnline,!1),oe.window.addEventListener("resize",this._onWindowResize,!1)),(function(r,n){var i=r.getCanvasContainer(),a=null,o=!1,s=null;for(var e in Xr)r[e]=new Xr[e](r,n),n.interactive&&n[e]&&r[e].enable(n[e]);v.addEventListener(i,"mouseout",(function(e){r.fire(new Lr("mouseout",r,e))})),v.addEventListener(i,"mousedown",(function(e){o=!0,s=v.mousePos(i,e);var t=new Lr("mousedown",r,e);r.fire(t),t.defaultPrevented||(n.interactive&&!r.doubleClickZoom.isActive()&&r.stop(),r.boxZoom.onMouseDown(e),r.boxZoom.isActive()||r.dragPan.isActive()||r.dragRotate.onMouseDown(e),r.boxZoom.isActive()||r.dragRotate.isActive()||r.dragPan.onMouseDown(e))})),v.addEventListener(i,"mouseup",(function(e){var t=r.dragRotate.isActive();a&&!t&&r.fire(new Lr("contextmenu",r,a)),a=null,o=!1,r.fire(new Lr("mouseup",r,e))})),v.addEventListener(i,"mousemove",(function(e){if(!r.dragPan.isActive()&&!r.dragRotate.isActive()){for(var t=e.target;t&&t!==i;)t=t.parentNode;t===i&&r.fire(new Lr("mousemove",r,e))}})),v.addEventListener(i,"mouseover",(function(e){for(var t=e.target;t&&t!==i;)t=t.parentNode;t===i&&r.fire(new Lr("mouseover",r,e))})),v.addEventListener(i,"touchstart",(function(e){var t=new Nr("touchstart",r,e);r.fire(t),t.defaultPrevented||(n.interactive&&r.stop(),r.boxZoom.isActive()||r.dragRotate.isActive()||r.dragPan.onTouchStart(e),r.touchZoomRotate.onStart(e),r.doubleClickZoom.onTouchStart(t))}),{passive:!1}),v.addEventListener(i,"touchmove",(function(e){r.fire(new Nr("touchmove",r,e))}),{passive:!1}),v.addEventListener(i,"touchend",(function(e){r.fire(new Nr("touchend",r,e))})),v.addEventListener(i,"touchcancel",(function(e){r.fire(new Nr("touchcancel",r,e))})),v.addEventListener(i,"click",(function(e){var t=v.mousePos(i,e);(t.equals(s)||t.dist(s)<n.clickTolerance)&&r.fire(new Lr("click",r,e))})),v.addEventListener(i,"dblclick",(function(e){var t=new Lr("dblclick",r,e);r.fire(t),t.defaultPrevented||r.doubleClickZoom.onDblClick(t)})),v.addEventListener(i,"contextmenu",(function(e){var t=r.dragRotate.isActive();o||t?o&&(a=e):r.fire(new Lr("contextmenu",r,e)),e.preventDefault()})),v.addEventListener(i,"wheel",(function(e){n.interactive&&r.stop();var t=new zr("wheel",r,e);r.fire(t),t.defaultPrevented||r.scrollZoom.onWheel(e)}),{passive:!1})})(this,e),this._hash=e.hash&&(new kr).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Kr({customAttribution:e.customAttribution})),this.addControl(new Jr,e.logoPosition),this.on("style.load",(function(){t.transform.unmodified&&t.jumpTo(t.style.stylesheet)})),this.on("data",(function(e){t._update("style"===e.dataType),t.fire(new oe.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){t.fire(new oe.Event(e.dataType+"dataloading",e))}))}s&&(e.__proto__=s);var t={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.addControl=function(e,t){if(void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right"),!e||!e.onAdd)return this.fire(new oe.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[t];return-1!==t.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},e.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new oe.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var t=this._controls.indexOf(e);return t>-1&&this._controls.splice(t,1),e.onRemove(this),this},e.prototype.resize=function(e){var t=this._containerDimensions(),r=t[0],n=t[1];return this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n),this.fire(new oe.Event("movestart",e)).fire(new oe.Event("move",e)).fire(new oe.Event("resize",e)).fire(new oe.Event("moveend",e)),this},e.prototype.getBounds=function(){return this.transform.getBounds()},e.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},e.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(z.convert(e)),this._update()},e.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},e.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(e){return this.transform.locationPoint(N.convert(e))},e.prototype.unproject=function(e){return this.transform.pointLocation(oe.Point.convert(e))},e.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},e.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},e.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},e.prototype.on=function(n,i,a){var e,o=this;if(void 0===a)return s.prototype.on.call(this,n,i);var t=(function(){if("mouseenter"===n||"mouseover"===n){var r=!1;return{layer:i,listener:a,delegates:{mousemove:function(e){var t=o.getLayer(i)?o.queryRenderedFeatures(e.point,{layers:[i]}):[];t.length?r||(r=!0,a.call(o,new Lr(n,o,e.originalEvent,{features:t}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"!==n&&"mouseout"!==n)return{layer:i,listener:a,delegates:(e={},e[n]=function(e){var t=o.getLayer(i)?o.queryRenderedFeatures(e.point,{layers:[i]}):[];t.length&&(e.features=t,a.call(o,e),delete e.features)},e)};var t=!1;return{layer:i,listener:a,delegates:{mousemove:function(e){(o.getLayer(i)?o.queryRenderedFeatures(e.point,{layers:[i]}):[]).length?t=!0:t&&(t=!1,a.call(o,new Lr(n,o,e.originalEvent)))},mouseout:function(e){t&&(t=!1,a.call(o,new Lr(n,o,e.originalEvent)))}}}})();for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[n]=this._delegatedListeners[n]||[],this._delegatedListeners[n].push(t),t.delegates)o.on(r,t.delegates[r]);return this},e.prototype.off=function(e,t,r){if(void 0===r)return s.prototype.off.call(this,e,t);if(this._delegatedListeners&&this._delegatedListeners[e])for(var n=this._delegatedListeners[e],i=0;i<n.length;i++){var a=n[i];if(a.layer===t&&a.listener===r){for(var o in a.delegates)this.off(o,a.delegates[o]);return n.splice(i,1),this}}return this},e.prototype.queryRenderedFeatures=function(e,t){if(!this.style)return[];var r;if(void 0!==t||void 0===e||e instanceof oe.Point||Array.isArray(e)||(t=e,e=void 0),t=t||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof oe.Point||"number"==typeof e[0])r=[oe.Point.convert(e)];else{var n=oe.Point.convert(e[0]),i=oe.Point.convert(e[1]);r=[n,new oe.Point(i.x,n.y),i,new oe.Point(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,t,this.transform)},e.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},e.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){oe.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Bt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)):delete this.style,this},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():oe.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0)},e.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];if(void 0!==t)return t.loaded();this.fire(new oe.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},e.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var r=e[t]._tiles;for(var n in r){var i=r[n];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},e.prototype.addSourceType=function(e,t,r){return this.style.addSourceType(e,t,r)},e.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},e.prototype.getSource=function(e){return this.style.getSource(e)},e.prototype.addImage=function(e,t,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var i=r.sdf;if(void 0===i&&(i=!1),t instanceof en){var a=oe.browser.getImageData(t),o=a.width,s=a.height,l=a.data;this.style.addImage(e,{data:new oe.RGBAImage({width:o,height:s},l),pixelRatio:n,sdf:i})}else{if(void 0===t.width||void 0===t.height)return this.fire(new oe.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=t.width,c=t.height,p=t.data;this.style.addImage(e,{data:new oe.RGBAImage({width:u,height:c},new Uint8Array(p)),pixelRatio:n,sdf:i})}},e.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new oe.ErrorEvent(new Error("Missing required image id"))),!1)},e.prototype.removeImage=function(e){this.style.removeImage(e)},e.prototype.loadImage=function(e,t){oe.getImage(this._transformRequest(e,oe.ResourceType.Image),t)},e.prototype.listImages=function(){return this.style.listImages()},e.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0)},e.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},e.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},e.prototype.getLayer=function(e){return this.style.getLayer(e)},e.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0)},e.prototype.setLayerZoomRange=function(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)},e.prototype.getFilter=function(e){return this.style.getFilter(e)},e.prototype.setPaintProperty=function(e,t,r){return this.style.setPaintProperty(e,t,r),this._update(!0)},e.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},e.prototype.setLayoutProperty=function(e,t,r){return this.style.setLayoutProperty(e,t,r),this._update(!0)},e.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},e.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0)},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},e.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},e.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==oe.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&oe.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},e.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=v.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=v.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=v.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=v.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){i[e]=v.create("div","mapboxgl-ctrl-"+e,n)}))},e.prototype._resizeCanvas=function(e,t){var r=oe.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},e.prototype._setupPainter=function(){var e=oe.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},r.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);t?this.painter=new Ar(t,this.transform):this.fire(new oe.ErrorEvent(new Error("Failed to initialize WebGL")))},e.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new oe.Event("webglcontextlost",{originalEvent:e}))},e.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new oe.Event("webglcontextrestored",{originalEvent:e}))},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},e.prototype._update=function(e){return this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint()),this},e.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},e.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},e.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var t=this.transform.zoom,r=oe.browser.now();this.style.zoomHistory.update(t,r);var n=new oe.EvaluationParameters(t,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=n.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(n)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new oe.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new oe.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this.triggerRepaint(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==oe.window&&(oe.window.removeEventListener("resize",this._onWindowResize,!1),oe.window.removeEventListener("online",this._onWindowOnline,!1));for(var e=0,t=this._controls;e<t.length;e+=1)t[e].onRemove(this);this._controls=[];var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),an(this._canvasContainer),an(this._controlContainer),an(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new oe.Event("remove"))},e.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=oe.browser.frame((function(){e._frame=null,e._render()})))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},t.showTileBoundaries.get=function(){return!!this._showTileBoundaries},t.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},t.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},t.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&((this._showCollisionBoxes=e)?this.style._generateCollisionBoxes():this._update())},t.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},t.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},t.repaint.get=function(){return!!this._repaint},t.repaint.set=function(e){this._repaint=e,this._update()},t.vertices.get=function(){return!!this._vertices},t.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(e.prototype,t),e})($r);function an(e){e.parentNode&&e.parentNode.removeChild(e)}var on={showCompass:!0,showZoom:!0},sn=function(e){var t=this;this.options=oe.extend({},on,e),this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",(function(){return t._map.zoomIn()})),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",(function(){return t._map.zoomOut()}))),this.options.showCompass&&(oe.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",(function(){return t._map.resetNorth()})),this._compassArrow=v.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function ln(e,t,r){if(e=new N(e.lng,e.lat),t){var n=new N(e.lng-360,e.lat),i=new N(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(t);r.locationPoint(n).distSqr(t)<a?e=n:r.locationPoint(i).distSqr(t)<a&&(e=i)}for(;Math.abs(e.lng-r.center.lng)>180;){var o=r.locationPoint(e);if(o.x>=0&&o.y>=0&&o.x<=r.width&&o.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}sn.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},sn.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gr(e,{button:"left",element:this._compass}),v.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},sn.prototype.onRemove=function(){v.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),v.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},sn.prototype._createButton=function(e,t,r){var n=v.create("button",e,this._container);return n.type="button",n.setAttribute("aria-label",t),n.addEventListener("click",r),n};var un={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cn(e,t,r){var n=e.classList;for(var i in un)n.remove("mapboxgl-"+r+"-anchor-"+i);n.add("mapboxgl-"+r+"-anchor-"+t)}var pn,hn=(function(g){function e(e){if(g.call(this),(arguments[0]instanceof oe.window.HTMLElement||2===arguments.length)&&(e=oe.extend({element:e},arguments[1])),oe.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._draggable=e&&e.draggable||!1,this._state="inactive",e&&e.element)this._element=e.element,this._offset=oe.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div");var t=v.createNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"height","41px"),t.setAttributeNS(null,"width","27px"),t.setAttributeNS(null,"viewBox","0 0 27 41");var r=v.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var n=v.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"fill-rule","nonzero");var i=v.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"transform","translate(3.0, 29.0)"),i.setAttributeNS(null,"fill","#000000");for(var a=0,o=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<o.length;a+=1){var s=o[a],l=v.createNS("http://www.w3.org/2000/svg","ellipse");l.setAttributeNS(null,"opacity","0.04"),l.setAttributeNS(null,"cx","10.5"),l.setAttributeNS(null,"cy","5.80029008"),l.setAttributeNS(null,"rx",s.rx),l.setAttributeNS(null,"ry",s.ry),i.appendChild(l)}var u=v.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);var c=v.createNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(c);var p=v.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var h=v.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(h);var d=v.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");var f=v.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");var m=v.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#000000"),m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962");var y=v.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),f.appendChild(m),f.appendChild(y),n.appendChild(i),n.appendChild(u),n.appendChild(p),n.appendChild(d),n.appendChild(f),t.appendChild(n),this._element.appendChild(t),this._offset=oe.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return g&&(e.__proto__=g),((e.prototype=Object.create(g&&g.prototype)).constructor=e).prototype.addTo=function(e){return this.remove(),(this._map=e).getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},e.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(e){return this._lngLat=N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function(){return this._element},e.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},e.prototype._onMapClick=function(e){var t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()},e.prototype.getPopup=function(){return this._popup},e.prototype.togglePopup=function(){var e=this._popup;return e&&(e.isOpen()?e.remove():e.addTo(this._map)),this},e.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),v.setTransform(this._element,un[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),cn(this._element,this._anchor,"marker"))},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(e){return this._offset=oe.Point.convert(e),this._update(),this},e.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new oe.Event("dragstart"))),this.fire(new oe.Event("drag"))},e.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new oe.Event("dragend")),this._state="inactive"},e.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},e.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},e.prototype.isDraggable=function(){return this._draggable},e})(oe.Evented),dn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},fn=(function(t){function e(e){t.call(this),this.options=oe.extend({},dn,e),oe.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onAdd=function(e){var t;return this._map=e,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==pn?t(pn):void 0!==oe.window.navigator.permissions?oe.window.navigator.permissions.query({name:"geolocation"}).then((function(e){pn="denied"!==e.state,t(pn)})):(pn=!!oe.window.navigator.geolocation,t(pn)),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(oe.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),v.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new oe.Event("geolocate",e)),this._finish()},e.prototype._updateCamera=function(e){var t=new N(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy;this._map.fitBounds(t.toBounds(r),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new oe.Event("error",e)),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(e){var t=this;!1!==e?(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=v.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new hn(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire(new oe.Event("trackuserlocationend")))}))):oe.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},e.prototype.trigger=function(){if(!this._setup)return oe.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new oe.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new oe.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new oe.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=oe.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else oe.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function(){oe.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e})(oe.Evented),mn={maxWidth:100,unit:"metric"},yn=function(e){this.options=oe.extend({},mn,e),oe.bindAll(["_onMove","setUnit"],this)};function gn(e,t,r){var n,i,a,o,s,l,u=r&&r.maxWidth||100,c=e._container.clientHeight/2,p=(n=e.unproject([0,c]),i=e.unproject([u,c]),a=Math.PI/180,o=n.lat*a,s=i.lat*a,l=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((i.lng-n.lng)*a),6371e3*Math.acos(Math.min(l,1)));if(r&&"imperial"===r.unit){var h=3.2808*p;h>5280?vn(t,u,h/5280,"mi"):vn(t,u,h,"ft")}else r&&"nautical"===r.unit?vn(t,u,p/1852,"nm"):vn(t,u,p,"m")}function vn(e,t,r,n){var i,a,o,s=(i=r,(a=Math.pow(10,(""+Math.floor(i)).length-1))*(o=(o=i/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:1)),l=s/r;"m"===n&&s>=1e3&&(s/=1e3,n="km"),e.style.width=t*l+"px",e.innerHTML=s+n}yn.prototype.getDefaultPosition=function(){return"bottom-left"},yn.prototype._onMove=function(){gn(this._map,this._container,this.options)},yn.prototype.onAdd=function(e){return this._map=e,this._container=v.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},yn.prototype.onRemove=function(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},yn.prototype.setUnit=function(e){this.options.unit=e,gn(this._map,this._container,this.options)};var bn=function(){this._fullscreen=!1,oe.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in oe.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in oe.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in oe.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in oe.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};bn.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=v.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",oe.warnOnce("This device does not support fullscreen mode.")),this._container},bn.prototype.onRemove=function(){v.remove(this._container),this._map=null,oe.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},bn.prototype._checkFullscreenSupport=function(){return!!(oe.window.document.fullscreenEnabled||oe.window.document.mozFullScreenEnabled||oe.window.document.msFullscreenEnabled||oe.window.document.webkitFullscreenEnabled)},bn.prototype._setupUI=function(){var e=this._fullscreenButton=v.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),oe.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},bn.prototype._isFullscreen=function(){return this._fullscreen},bn.prototype._changeIcon=function(){(oe.window.document.fullscreenElement||oe.window.document.mozFullScreenElement||oe.window.document.webkitFullscreenElement||oe.window.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},bn.prototype._onClickFullscreen=function(){this._isFullscreen()?oe.window.document.exitFullscreen?oe.window.document.exitFullscreen():oe.window.document.mozCancelFullScreen?oe.window.document.mozCancelFullScreen():oe.window.document.msExitFullscreen?oe.window.document.msExitFullscreen():oe.window.document.webkitCancelFullScreen&&oe.window.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var _n={closeButton:!0,closeOnClick:!0,className:""},xn=(function(t){function e(e){t.call(this),this.options=oe.extend(Object.create(_n),e),oe.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new oe.Event("open")),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new oe.Event("close")),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(e){return this._lngLat=N.convert(e),this._pos=null,this._update(),this},e.prototype.setText=function(e){return this.setDOMContent(oe.window.document.createTextNode(e))},e.prototype.setHTML=function(e){var t,r=oe.window.document.createDocumentFragment(),n=oe.window.document.createElement("body");for(n.innerHTML=e;t=n.firstChild;)r.appendChild(t);return this.setDOMContent(r)},e.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},e.prototype._createContent=function(){this._content&&v.remove(this._content),this._content=v.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=v.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){var t=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=v.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=v.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return t._container.classList.add(e)}))),this._map.transform.renderWorldCopies&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),r=this.options.anchor,n=(function e(t){if(t){if("number"==typeof t){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new oe.Point(0,0),top:new oe.Point(0,t),"top-left":new oe.Point(r,r),"top-right":new oe.Point(-r,r),bottom:new oe.Point(0,-t),"bottom-left":new oe.Point(r,-r),"bottom-right":new oe.Point(-r,-r),left:new oe.Point(t,0),right:new oe.Point(-t,0)}}if(t instanceof oe.Point||Array.isArray(t)){var n=oe.Point.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:oe.Point.convert(t.center||[0,0]),top:oe.Point.convert(t.top||[0,0]),"top-left":oe.Point.convert(t["top-left"]||[0,0]),"top-right":oe.Point.convert(t["top-right"]||[0,0]),bottom:oe.Point.convert(t.bottom||[0,0]),"bottom-left":oe.Point.convert(t["bottom-left"]||[0,0]),"bottom-right":oe.Point.convert(t["bottom-right"]||[0,0]),left:oe.Point.convert(t.left||[0,0]),right:oe.Point.convert(t.right||[0,0])}}return e(new oe.Point(0,0))})(this.options.offset);if(!r){var i,a=this._container.offsetWidth,o=this._container.offsetHeight;i=e.y+n.bottom.y<o?["top"]:e.y>this._map.transform.height-o?["bottom"]:[],e.x<a/2?i.push("left"):e.x>this._map.transform.width-a/2&&i.push("right"),r=0===i.length?"bottom":i.join("-")}var s=e.add(n[r]).round();v.setTransform(this._container,un[r]+" translate("+s.x+"px,"+s.y+"px)"),cn(this._container,r,"popup")}},e.prototype._onClickClose=function(){this.remove()},e})(oe.Evented),wn={version:"0.50.0",supported:r,setRTLTextPlugin:oe.setRTLTextPlugin,Map:nn,NavigationControl:sn,GeolocateControl:fn,AttributionControl:Kr,ScaleControl:yn,FullscreenControl:bn,Popup:xn,Marker:hn,Style:Bt,LngLat:N,LngLatBounds:z,Point:oe.Point,Evented:oe.Evented,config:h,get accessToken(){return h.ACCESS_TOKEN},set accessToken(e){h.ACCESS_TOKEN=e},get workerCount(){return We.workerCount},set workerCount(e){We.workerCount=e},workerUrl:""};return wn})),o},"object"===typeof r&&"undefined"!==typeof t?t.exports=i():n.mapboxgl=i()}),{}],117:[(function(Br,Ur,e){var t,r;t=this,r=function(){"use strict";var e,i;function h(){return e.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function u(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function p(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){for(var r in t)f(t,r)&&(e[r]=t[r]);return f(t,"toString")&&(e.toString=t.toString),f(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,r,n){return Pt(e,t,r,n,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=g(e),r=i.call(t.parsedDateParts,(function(e){return null!=e})),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function b(e){var t=y(NaN);return null!=e?m(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var a=h.momentProperties=[];function _(e,t){var r,n,i;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=g(t)),u(t._locale)||(e._locale=t._locale),a.length>0)for(r=0;r<a.length;r++)u(i=t[n=a[r]])||(e[n]=i);return e}var t=!1;function x(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,h.updateOffset(this),t=!1)}function w(e){return e instanceof x||null!=e&&null!=e._isAMomentObject}function D(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function S(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=D(t)),r}function o(e,t,r){var n,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&S(e[n])!==S(t[n]))&&o++;return o+a}function R(e){!1===h.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function r(i,a){var o=!0;return m((function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,i),o){for(var e,t=[],r=0;r<arguments.length;r++){if(e="","object"===typeof arguments[r]){for(var n in e+="\n["+r+"] ",arguments[0])e+=n+": "+arguments[0][n]+", ";e=e.slice(0,-2)}else e=arguments[r];t.push(e)}R(i+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),o=!1}return a.apply(this,arguments)}),a)}var n,P={};function E(e,t){null!=h.deprecationHandler&&h.deprecationHandler(e,t),P[e]||(R(t),P[e]=!0)}function A(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function M(e,t){var r,n=m({},e);for(r in t)f(t,r)&&(l(e[r])&&l(t[r])?(n[r]={},m(n[r],e[r]),m(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)f(e,r)&&!f(t,r)&&l(e[r])&&(n[r]=m({},n[r]));return n}function I(e){null!=e&&this.set(e)}h.suppressDeprecationWarnings=!1,h.deprecationHandler=null,n=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)f(e,t)&&r.push(t);return r};var O={};function C(e,t){var r=e.toLowerCase();O[r]=O[r+"s"]=O[t]=e}function T(e){return"string"===typeof e?O[e]||O[e.toLowerCase()]:void 0}function k(e){var t,r,n={};for(r in e)f(e,r)&&(t=T(r))&&(n[t]=e[r]);return n}var L={};function N(e,t){L[e]=t}function z(e,t,r){var n=""+Math.abs(e),i=t-n.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},G={};function B(e,t,r,n){var i=n;"string"===typeof n&&(i=function(){return this[n]()}),e&&(G[e]=i),t&&(G[t[0]]=function(){return z(i.apply(this,arguments),t[1],t[2])}),r&&(G[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),V[t]=V[t]||(function(n){var e,i,t,a=n.match(j);for(e=0,i=a.length;e<i;e++)G[a[e]]?a[e]=G[a[e]]:a[e]=(t=a[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,r="";for(t=0;t<i;t++)r+=A(a[t])?a[t].call(e,n):a[t];return r}})(t),V[t](e)):e.localeData().invalidDate()}function H(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;r>=0&&F.test(e);)e=e.replace(F,n),F.lastIndex=0,r-=1;return e}var q=/\d/,W=/\d\d/,Y=/\d{3}/,Z=/\d{4}/,X=/[+-]?\d{6}/,$=/\d\d?/,K=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,re=/\d+/,ne=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,se={};function le(e,r,n){se[e]=A(r)?r:function(e,t){return e&&n?n:r}}function ue(e,t){return f(se,e)?se[e](t._strict,t._locale):new RegExp(ce(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,r,n,i){return t||r||n||i}))))}function ce(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pe={};function he(e,r){var t,n=r;for("string"===typeof e&&(e=[e]),c(r)&&(n=function(e,t){t[r]=S(e)}),t=0;t<e.length;t++)pe[e[t]]=n}function de(e,i){he(e,(function(e,t,r,n){r._w=r._w||{},i(e,r._w,r,n)}))}var fe=0,me=1,ye=2,ge=3,ve=4,be=5,_e=6,xe=7,we=8;function De(e){return Se(e)?366:365}function Se(e){return e%4===0&&e%100!==0||e%400===0}B("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),C("year","y"),N("year",1),le("Y",ne),le("YY",$,W),le("YYYY",ee,Z),le("YYYYY",te,X),le("YYYYYY",te,X),he(["YYYYY","YYYYYY"],fe),he("YYYY",(function(e,t){t[fe]=2===e.length?h.parseTwoDigitYear(e):S(e)})),he("YY",(function(e,t){t[fe]=h.parseTwoDigitYear(e)})),he("Y",(function(e,t){t[fe]=parseInt(e,10)})),h.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)};var Re,Pe=Ee("FullYear",!0);function Ee(t,r){return function(e){return null!=e?(Me(this,t,e),h.updateOffset(this,r),this):Ae(this,t)}}function Ae(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Me(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&Se(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Ie(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function Ie(e,t){if(isNaN(e)||isNaN(t))return NaN;var r,n=(t%(r=12)+r)%r;return e+=(t-n)/12,1===n?Se(e)?29:28:31-n%7%2}Re=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),C("month","M"),N("month",8),le("M",$),le("MM",$,W),le("MMM",(function(e,t){return t.monthsShortRegex(e)})),le("MMMM",(function(e,t){return t.monthsRegex(e)})),he(["M","MM"],(function(e,t){t[me]=S(e)-1})),he(["MMM","MMMM"],(function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[me]=i:g(r).invalidMonth=e}));var Oe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Te="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function ke(e,t){var r;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=S(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function Le(e){return null!=e?(ke(this,e),h.updateOffset(this,!0),this):Ae(this,"Month")}var Ne=oe;var ze=oe;function je(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],a=[];for(t=0;t<12;t++)r=y([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),a.push(this.months(r,"")),a.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)n[t]=ce(n[t]),i[t]=ce(i[t]);for(t=0;t<24;t++)a[t]=ce(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ve(e,t,r){var n=7+t-r;return-((7+Fe(e,0,n).getUTCDay()-t)%7)+n-1}function Ge(e,t,r,n,i){var a,o,s=1+7*(t-1)+(7+r-n)%7+Ve(e,n,i);return o=s<=0?De(a=e-1)+s:s>De(e)?(a=e+1,s-De(e)):(a=e,s),{year:a,dayOfYear:o}}function Be(e,t,r){var n,i,a=Ve(e.year(),t,r),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?n=o+Ue(i=e.year()-1,t,r):o>Ue(e.year(),t,r)?(n=o-Ue(e.year(),t,r),i=e.year()+1):(i=e.year(),n=o),{week:n,year:i}}function Ue(e,t,r){var n=Ve(e,t,r),i=Ve(e+1,t,r);return(De(e)-n+i)/7}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),N("week",5),N("isoWeek",5),le("w",$),le("ww",$,W),le("W",$),le("WW",$,W),de(["w","ww","W","WW"],(function(e,t,r,n){t[n.substr(0,1)]=S(e)}));B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),le("d",$),le("e",$),le("E",$),le("dd",(function(e,t){return t.weekdaysMinRegex(e)})),le("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),le("dddd",(function(e,t){return t.weekdaysRegex(e)})),de(["dd","ddd","dddd"],(function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:g(r).invalidWeekday=e})),de(["d","e","E"],(function(e,t,r,n){t[n]=S(e)}));var He="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var We="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ye=oe;var Ze=oe;var Xe=oe;function $e(){function e(e,t){return t.length-e.length}var t,r,n,i,a,o=[],s=[],l=[],u=[];for(t=0;t<7;t++)r=y([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),a=this.weekdays(r,""),o.push(n),s.push(i),l.push(a),u.push(n),u.push(i),u.push(a);for(o.sort(e),s.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)s[t]=ce(s[t]),l[t]=ce(l[t]),u[t]=ce(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ke(){return this.hours()%12||12}function Je(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Qe(e,t){return t._meridiemParse}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Ke),B("k",["kk",2],0,(function(){return this.hours()||24})),B("hmm",0,0,(function(){return""+Ke.apply(this)+z(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Ke.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+z(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)})),Je("a",!0),Je("A",!1),C("hour","h"),N("hour",13),le("a",Qe),le("A",Qe),le("H",$),le("h",$),le("k",$),le("HH",$,W),le("hh",$,W),le("kk",$,W),le("hmm",K),le("hmmss",J),le("Hmm",K),le("Hmmss",J),he(["H","HH"],ge),he(["k","kk"],(function(e,t,r){var n=S(e);t[ge]=24===n?0:n})),he(["a","A"],(function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e})),he(["h","hh"],(function(e,t,r){t[ge]=S(e),g(r).bigHour=!0})),he("hmm",(function(e,t,r){var n=e.length-2;t[ge]=S(e.substr(0,n)),t[ve]=S(e.substr(n)),g(r).bigHour=!0})),he("hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[ge]=S(e.substr(0,n)),t[ve]=S(e.substr(n,2)),t[be]=S(e.substr(i)),g(r).bigHour=!0})),he("Hmm",(function(e,t,r){var n=e.length-2;t[ge]=S(e.substr(0,n)),t[ve]=S(e.substr(n))})),he("Hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[ge]=S(e.substr(0,n)),t[ve]=S(e.substr(n,2)),t[be]=S(e.substr(i))}));var et,tt=Ee("Hours",!0),rt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ce,monthsShort:Te,week:{dow:0,doy:6},weekdays:He,weekdaysMin:We,weekdaysShort:qe,meridiemParse:/[ap]\.?m?\.?/i},nt={},it={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){var t=null;if(!nt[e]&&"undefined"!==typeof Ur&&Ur&&Ur.exports)try{t=et._abbr,Br("./locale/"+e),st(t)}catch(e){}return nt[e]}function st(e,t){var r;return e&&((r=u(t)?ut(e):lt(e,t))?et=r:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function lt(e,t){if(null===t)return delete nt[e],null;var r,n=rt;if(t.abbr=e,null!=nt[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])n=nt[t.parentLocale]._config;else{if(null==(r=ot(t.parentLocale)))return it[t.parentLocale]||(it[t.parentLocale]=[]),it[t.parentLocale].push({name:e,config:t}),null;n=r._config}return nt[e]=new I(M(n,t)),it[e]&&it[e].forEach((function(e){lt(e.name,e.config)})),st(e),nt[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!s(e)){if(t=ot(e))return t;e=[e]}return (function(e){for(var t,r,n,i,a=0;a<e.length;){for(t=(i=at(e[a]).split("-")).length,r=(r=at(e[a+1]))?r.split("-"):null;t>0;){if(n=ot(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&o(i,r,!0)>=t-1)break;t--}a++}return et})(e)}function ct(e){var t,r=e._a;return r&&-2===g(e).overflow&&(t=r[me]<0||r[me]>11?me:r[ye]<1||r[ye]>Ie(r[fe],r[me])?ye:r[ge]<0||r[ge]>24||24===r[ge]&&(0!==r[ve]||0!==r[be]||0!==r[_e])?ge:r[ve]<0||r[ve]>59?ve:r[be]<0||r[be]>59?be:r[_e]<0||r[_e]>999?_e:-1,g(e)._overflowDayOfYear&&(t<fe||t>ye)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=xe),g(e)._overflowWeekday&&-1===t&&(t=we),g(e).overflow=t),e}function pt(e,t,r){return null!=e?e:null!=t?t:r}function ht(e){var t,r,n,i,a,o=[];if(!e._d){var s,l;for(s=e,l=new Date(h.now()),n=s._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],e._w&&null==e._a[ye]&&null==e._a[me]&&(function(e){var t,r,n,i,a,o,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,r=pt(t.GG,e._a[fe],Be(Et(),1,4).year),n=pt(t.W,1),((i=pt(t.E,1))<1||i>7)&&(l=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var u=Be(Et(),a,o);r=pt(t.gg,e._a[fe],u.year),n=pt(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(l=!0)):i=a}n<1||n>Ue(r,a,o)?g(e)._overflowWeeks=!0:null!=l?g(e)._overflowWeekday=!0:(s=Ge(r,n,i,a,o),e._a[fe]=s.year,e._dayOfYear=s.dayOfYear)})(e),null!=e._dayOfYear&&(a=pt(e._a[fe],n[fe]),(e._dayOfYear>De(a)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),r=Fe(a,0,e._dayOfYear),e._a[me]=r.getUTCMonth(),e._a[ye]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[ve]&&0===e._a[be]&&0===e._a[_e]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Fe:function(e,t,r,n,i,a,o){var s=new Date(e,t,r,n,i,a,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,r,n,i,a,o,s=e._i,l=dt.exec(s)||ft.exec(s);if(l){for(g(e).iso=!0,t=0,r=yt.length;t<r;t++)if(yt[t][1].exec(l[1])){i=yt[t][0],n=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,r=gt.length;t<r;t++)if(gt[t][1].exec(l[3])){a=(l[2]||" ")+gt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!mt.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),St(e)}else e._isValid=!1}var _t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function xt(e,t,r,n,i,a){var o=[(function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t})(e),Te.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}var wt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,r,n,i=_t.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(i){var a=xt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],r=a,n=e,t&&qe.indexOf(t)!==new Date(r[0],r[1],r[2]).getDay()&&(g(n).weekdayMismatch=!0,!(n._isValid=!1)))return;e._a=a,e._tzm=(function(e,t,r){if(e)return wt[e];if(t)return 0;var n=parseInt(r,10),i=n%100;return(n-i)/100*60+i})(i[8],i[9],i[10]),e._d=Fe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function St(e){if(e._f!==h.ISO_8601)if(e._f!==h.RFC_2822){e._a=[],g(e).empty=!0;var t,r,n,i,a,o,s,l,u=""+e._i,c=u.length,p=0;for(n=H(e._f,e._locale).match(j)||[],t=0;t<n.length;t++)i=n[t],(r=(u.match(ue(i,e))||[])[0])&&((a=u.substr(0,u.indexOf(r))).length>0&&g(e).unusedInput.push(a),u=u.slice(u.indexOf(r)+r.length),p+=r.length),G[i]?(r?g(e).empty=!1:g(e).unusedTokens.push(i),o=i,l=e,null!=(s=r)&&f(pe,o)&&pe[o](s,l._a,l,o)):e._strict&&!r&&g(e).unusedTokens.push(i);g(e).charsLeftOver=c-p,u.length>0&&g(e).unusedInput.push(u),e._a[ge]<=12&&!0===g(e).bigHour&&e._a[ge]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=(function(e,t,r){var n;if(null==r)return t;return null!=e.meridiemHour?e.meridiemHour(t,r):(null!=e.isPM&&((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0)),t)})(e._locale,e._a[ge],e._meridiem),ht(e),ct(e)}else Dt(e);else bt(e)}function Rt(e){var t,r,n,i,a=e._i,o=e._f;return e._locale=e._locale||ut(e._l),null===a||void 0===o&&""===a?b({nullInput:!0}):("string"===typeof a&&(e._i=a=e._locale.preparse(a)),w(a)?new x(ct(a)):(p(a)?e._d=a:s(o)?(function(e){var t,r,n,i,a;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)a=0,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],St(t),v(t)&&(a+=g(t).charsLeftOver,a+=10*g(t).unusedTokens.length,g(t).score=a,(null==n||a<n)&&(n=a,r=t));m(e,r||t)})(e):o?St(e):u(r=(t=e)._i)?t._d=new Date(h.now()):p(r)?t._d=new Date(r.valueOf()):"string"===typeof r?(n=t,null===(i=vt.exec(n._i))?(bt(n),!1===n._isValid&&(delete n._isValid,Dt(n),!1===n._isValid&&(delete n._isValid,h.createFromInputFallback(n)))):n._d=new Date(+i[1])):s(r)?(t._a=d(r.slice(0),(function(e){return parseInt(e,10)})),ht(t)):l(r)?(function(e){if(!e._d){var t=k(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),ht(e)}})(t):c(r)?t._d=new Date(r):h.createFromInputFallback(t),v(e)||(e._d=null),e))}function Pt(e,t,r,n,i){var a,o={};return!0!==r&&!1!==r||(n=r,r=void 0),(l(e)&&(function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0})(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=r,o._i=e,o._f=t,o._strict=n,(a=new x(ct(Rt(o))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function Et(e,t,r,n){return Pt(e,t,r,n,!1)}h.createFromInputFallback=r("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),h.ISO_8601=function(){},h.RFC_2822=function(){};var At=r("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:b()})),Mt=r("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:b()}));function It(e,t){var r,n;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Et();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}var Ot=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var t=k(e),r=t.year||0,n=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=(function(e){for(var t in e)if(-1===Re.call(Ot,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<Ot.length;++n)if(e[Ot[n]]){if(r)return!1;parseFloat(e[Ot[n]])!==S(e[Ot[n]])&&(r=!0)}return!0})(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*n+12*r,this._data={},this._locale=ut(),this._bubble()}function Tt(e){return e instanceof Ct}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,r){B(e,0,0,(function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+z(~~(e/60),2)+r+z(~~e%60,2)}))}Lt("Z",":"),Lt("ZZ",""),le("Z",ae),le("ZZ",ae),he(["Z","ZZ"],(function(e,t,r){r._useUTC=!0,r._tzm=zt(ae,e)}));var Nt=/([\+\-]|\d\d)/gi;function zt(e,t){var r=(t||"").match(e);if(null===r)return null;var n=((r[r.length-1]||[])+"").match(Nt)||["-",0,0],i=60*n[1]+S(n[2]);return 0===i?0:"+"===n[0]?i:-i}function jt(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(w(e)||p(e)?e.valueOf():Et(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),h.updateOffset(r,!1),r):Et(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}h.updateOffset=function(){};var Gt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Bt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ut(e,t){var r,n,i,a=e,o=null;return Tt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(a={},t?a[t]=e:a.milliseconds=e):(o=Gt.exec(e))?(r="-"===o[1]?-1:1,a={y:0,d:S(o[ye])*r,h:S(o[ge])*r,m:S(o[ve])*r,s:S(o[be])*r,ms:S(kt(1e3*o[_e]))*r}):(o=Bt.exec(e))?(r="-"===o[1]?-1:(o[1],1),a={y:Ht(o[2],r),M:Ht(o[3],r),w:Ht(o[4],r),d:Ht(o[5],r),h:Ht(o[6],r),m:Ht(o[7],r),s:Ht(o[8],r)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=(function(e,t){var r;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=jt(t,e),e.isBefore(t)?r=qt(e,t):((r=qt(t,e)).milliseconds=-r.milliseconds,r.months=-r.months);return r})(Et(a.from),Et(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),n=new Ct(a),Tt(e)&&f(e,"_locale")&&(n._locale=e._locale),n}function Ht(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function qt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Wt(n,i){return function(e,t){var r;return null===t||isNaN(+t)||(E(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=e,e=t,t=r),Yt(this,Ut(e="string"===typeof e?+e:e,t),n),this}}function Yt(e,t,r,n){var i=t._milliseconds,a=kt(t._days),o=kt(t._months);e.isValid()&&(n=null==n||n,o&&ke(e,Ae(e,"Month")+o*r),a&&Me(e,"Date",Ae(e,"Date")+a*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&h.updateOffset(e,a||o))}Ut.fn=Ct.prototype,Ut.invalid=function(){return Ut(NaN)};var Zt=Wt(1,"add"),Xt=Wt(-1,"subtract");function $t(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,"months");return-(r+(t-n<0?(t-n)/(n-e.clone().add(r-1,"months")):(t-n)/(e.clone().add(r+1,"months")-n)))||0}function Kt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=r("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Qt(){return this._locale}function er(e,t){B(0,[e,e.length],0,t)}function tr(e,t,r,n,i){var a;return null==e?Be(this,n,i).year:(t>(a=Ue(e,n,i))&&(t=a),function(e,t,r,n,i){var a=Ge(e,t,r,n,i),o=Fe(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,r,n,i))}B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),er("gggg","weekYear"),er("ggggg","weekYear"),er("GGGG","isoWeekYear"),er("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),le("G",ne),le("g",ne),le("GG",$,W),le("gg",$,W),le("GGGG",ee,Z),le("gggg",ee,Z),le("GGGGG",te,X),le("ggggg",te,X),de(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,r,n){t[n.substr(0,2)]=S(e)})),de(["gg","GG"],(function(e,t,r,n){t[n]=h.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),C("quarter","Q"),N("quarter",7),le("Q",q),he("Q",(function(e,t){t[me]=3*(S(e)-1)})),B("D",["DD",2],"Do","date"),C("date","D"),N("date",9),le("D",$),le("DD",$,W),le("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),he(["D","DD"],ye),he("Do",(function(e,t){t[ye]=S(e.match($)[0])}));var rr=Ee("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),N("dayOfYear",4),le("DDD",Q),le("DDDD",Y),he(["DDD","DDDD"],(function(e,t,r){r._dayOfYear=S(e)})),B("m",["mm",2],0,"minute"),C("minute","m"),N("minute",14),le("m",$),le("mm",$,W),he(["m","mm"],ve);var nr=Ee("Minutes",!1);B("s",["ss",2],0,"second"),C("second","s"),N("second",15),le("s",$),le("ss",$,W),he(["s","ss"],be);var ir,ar=Ee("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),C("millisecond","ms"),N("millisecond",16),le("S",Q,q),le("SS",Q,W),le("SSS",Q,Y),ir="SSSS";ir.length<=9;ir+="S")le(ir,re);function or(e,t){t[_e]=S(1e3*("0."+e))}for(ir="S";ir.length<=9;ir+="S")he(ir,or);var sr=Ee("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var lr=x.prototype;function ur(e){return e}lr.add=Zt,lr.calendar=function(e,t){var r=e||Et(),n=jt(r,this).startOf("day"),i=h.calendarFormat(this,n)||"sameElse",a=t&&(A(t[i])?t[i].call(this,r):t[i]);return this.format(a||this.localeData().calendar(i,this,Et(r)))},lr.clone=function(){return new x(this)},lr.diff=function(e,t,r){var n,i,a;if(!this.isValid())return NaN;if(!(n=jt(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=T(t)){case"year":a=$t(this,n)/12;break;case"month":a=$t(this,n);break;case"quarter":a=$t(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:D(a)},lr.endOf=function(e){return void 0===(e=T(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},lr.format=function(e){e||(e=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},lr.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Et(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},lr.fromNow=function(e){return this.from(Et(),e)},lr.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Et(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},lr.toNow=function(e){return this.to(Et(),e)},lr.get=function(e){return A(this[e=T(e)])?this[e]():this},lr.invalidAt=function(){return g(this).overflow},lr.isAfter=function(e,t){var r=w(e)?e:Et(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=T(u(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},lr.isBefore=function(e,t){var r=w(e)?e:Et(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=T(u(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},lr.isBetween=function(e,t,r,n){return("("===(n=n||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))},lr.isSame=function(e,t){var r,n=w(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=T(t||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},lr.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},lr.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},lr.isValid=function(){return v(this)},lr.lang=Jt,lr.locale=Kt,lr.localeData=Qt,lr.max=Mt,lr.min=At,lr.parsingFlags=function(){return m({},g(this))},lr.set=function(e,t){if("object"===typeof e)for(var r=(function(e){var t=[];for(var r in e)t.push({unit:r,priority:L[r]});return t.sort((function(e,t){return e.priority-t.priority})),t})(e=k(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(A(this[e=T(e)]))return this[e](t);return this},lr.startOf=function(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},lr.subtract=Xt,lr.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},lr.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},lr.toDate=function(){return new Date(this.valueOf())},lr.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?U(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(r,"Z")):U(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},lr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},lr.toJSON=function(){return this.isValid()?this.toISOString():null},lr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},lr.unix=function(){return Math.floor(this.valueOf()/1e3)},lr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},lr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},lr.year=Pe,lr.isLeapYear=function(){return Se(this.year())},lr.weekYear=function(e){return tr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},lr.isoWeekYear=function(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},lr.quarter=lr.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},lr.month=Le,lr.daysInMonth=function(){return Ie(this.year(),this.month())},lr.week=lr.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},lr.isoWeek=lr.isoWeeks=function(e){var t=Be(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},lr.weeksInYear=function(){var e=this.localeData()._week;return Ue(this.year(),e.dow,e.doy)},lr.isoWeeksInYear=function(){return Ue(this.year(),1,4)},lr.date=rr,lr.day=lr.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,r,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,r=this.localeData(),e="string"!==typeof t?t:isNaN(t)?"number"===typeof(t=r.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},lr.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},lr.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,r,n=(t=e,r=this.localeData(),"string"===typeof t?r.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?n:n-7)},lr.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},lr.hour=lr.hours=tt,lr.minute=lr.minutes=nr,lr.second=lr.seconds=ar,lr.millisecond=lr.milliseconds=sr,lr.utcOffset=function(e,t,r){var n,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Ft(this);if("string"===typeof e){if(null===(e=zt(ae,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(n=Ft(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?Yt(this,Ut(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this},lr.utc=function(e){return this.utcOffset(0,e)},lr.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this},lr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=zt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},lr.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Et(e).utcOffset():0,(this.utcOffset()-e)%60===0)},lr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},lr.isLocal=function(){return!!this.isValid()&&!this._isUTC},lr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},lr.isUtc=Vt,lr.isUTC=Vt,lr.zoneAbbr=function(){return this._isUTC?"UTC":""},lr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},lr.dates=r("dates accessor is deprecated. Use date instead.",rr),lr.months=r("months accessor is deprecated. Use month instead",Le),lr.years=r("years accessor is deprecated. Use year instead",Pe),lr.zone=r("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),lr.isDSTShifted=r("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(_(e,this),(e=Rt(e))._a){var t=e._isUTC?y(e._a):Et(e._a);this._isDSTShifted=this.isValid()&&o(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var cr=I.prototype;function pr(e,t,r,n){var i=ut(),a=y().set(n,t);return i[r](a,e)}function hr(e,t,r){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return pr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=pr(e,n,r,"month");return i}function dr(e,t,r,n){t=("boolean"===typeof e?c(t)&&(r=t,t=void 0):(t=e,e=!1,c(r=t)&&(r=t,t=void 0)),t||"");var i,a=ut(),o=e?a._week.dow:0;if(null!=r)return pr(t,(r+o)%7,n,"day");var s=[];for(i=0;i<7;i++)s[i]=pr(t,(i+o)%7,n,"day");return s}cr.calendar=function(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return A(n)?n.call(t,r):n},cr.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},cr.invalidDate=function(){return this._invalidDate},cr.ordinal=function(e){return this._ordinal.replace("%d",e)},cr.preparse=ur,cr.postformat=ur,cr.relativeTime=function(e,t,r,n){var i=this._relativeTime[r];return A(i)?i(e,t,r,n):i.replace(/%d/i,e)},cr.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return A(r)?r(t):r.replace(/%s/i,t)},cr.set=function(e){var t,r;for(r in e)A(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},cr.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Oe).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},cr.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Oe.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},cr.monthsParse=function(e,t,r){var n,i,a;if(this._monthsParseExact)return function(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=y([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=Re.call(this._shortMonthsParse,o))?i:null:-1!==(i=Re.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=Re.call(this._shortMonthsParse,o))?i:-1!==(i=Re.call(this._longMonthsParse,o))?i:null:-1!==(i=Re.call(this._longMonthsParse,o))?i:-1!==(i=Re.call(this._shortMonthsParse,o))?i:null}.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=y([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},cr.monthsRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||je.call(this),e?this._monthsStrictRegex:this._monthsRegex):(f(this,"_monthsRegex")||(this._monthsRegex=ze),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},cr.monthsShortRegex=function(e){return this._monthsParseExact?(f(this,"_monthsRegex")||je.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(f(this,"_monthsShortRegex")||(this._monthsShortRegex=Ne),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},cr.week=function(e){return Be(e,this._week.dow,this._week.doy).week},cr.firstDayOfYear=function(){return this._week.doy},cr.firstDayOfWeek=function(){return this._week.dow},cr.weekdays=function(e,t){return e?s(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:s(this._weekdays)?this._weekdays:this._weekdays.standalone},cr.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},cr.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},cr.weekdaysParse=function(e,t,r){var n,i,a;if(this._weekdaysParseExact)return function(e,t,r){var n,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=y([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=Re.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Re.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Re.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=Re.call(this._weekdaysParse,o))?i:-1!==(i=Re.call(this._shortWeekdaysParse,o))?i:-1!==(i=Re.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Re.call(this._shortWeekdaysParse,o))?i:-1!==(i=Re.call(this._weekdaysParse,o))?i:-1!==(i=Re.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Re.call(this._minWeekdaysParse,o))?i:-1!==(i=Re.call(this._weekdaysParse,o))?i:-1!==(i=Re.call(this._shortWeekdaysParse,o))?i:null}.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=y([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},cr.weekdaysRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(f(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},cr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ze),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},cr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||$e.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},cr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},cr.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},st("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.lang=r("moment.lang is deprecated. Use moment.locale instead.",st),h.langData=r("moment.langData is deprecated. Use moment.localeData instead.",ut);var fr=Math.abs;function mr(e,t,r,n){var i=Ut(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function yr(e){return e<0?Math.floor(e):Math.ceil(e)}function gr(e){return 4800*e/146097}function vr(e){return 146097*e/4800}function br(e){return function(){return this.as(e)}}var _r=br("ms"),xr=br("s"),wr=br("m"),Dr=br("h"),Sr=br("d"),Rr=br("w"),Pr=br("M"),Er=br("y");function Ar(e){return function(){return this.isValid()?this._data[e]:NaN}}var Mr=Ar("milliseconds"),Ir=Ar("seconds"),Or=Ar("minutes"),Cr=Ar("hours"),Tr=Ar("days"),kr=Ar("months"),Lr=Ar("years");var Nr=Math.round,zr={ss:44,s:45,m:45,h:22,d:26,M:11};var jr=Math.abs;function Fr(e){return(e>0)-(e<0)||+e}function Vr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=jr(this._milliseconds)/1e3,n=jr(this._days),i=jr(this._months);t=D((e=D(r/60))/60),r%=60,e%=60;var a=D(i/12),o=i%=12,s=n,l=t,u=e,c=r?r.toFixed(3).replace(/\.?0+$/,""):"",p=this.asSeconds();if(!p)return"P0D";var h=p<0?"-":"",d=Fr(this._months)!==Fr(p)?"-":"",f=Fr(this._days)!==Fr(p)?"-":"",m=Fr(this._milliseconds)!==Fr(p)?"-":"";return h+"P"+(a?d+a+"Y":"")+(o?d+o+"M":"")+(s?f+s+"D":"")+(l||u||c?"T":"")+(l?m+l+"H":"")+(u?m+u+"M":"")+(c?m+c+"S":"")}var Gr=Ct.prototype;return Gr.isValid=function(){return this._isValid},Gr.abs=function(){var e=this._data;return this._milliseconds=fr(this._milliseconds),this._days=fr(this._days),this._months=fr(this._months),e.milliseconds=fr(e.milliseconds),e.seconds=fr(e.seconds),e.minutes=fr(e.minutes),e.hours=fr(e.hours),e.months=fr(e.months),e.years=fr(e.years),this},Gr.add=function(e,t){return mr(this,e,t,1)},Gr.subtract=function(e,t){return mr(this,e,t,-1)},Gr.as=function(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=T(e))||"year"===e)return t=this._days+n/864e5,r=this._months+gr(t),"month"===e?r:r/12;switch(t=this._days+Math.round(vr(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Gr.asMilliseconds=_r,Gr.asSeconds=xr,Gr.asMinutes=wr,Gr.asHours=Dr,Gr.asDays=Sr,Gr.asWeeks=Rr,Gr.asMonths=Pr,Gr.asYears=Er,Gr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12):NaN},Gr._bubble=function(){var e,t,r,n,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*yr(vr(s)+o),s=o=0),l.milliseconds=a%1e3,e=D(a/1e3),l.seconds=e%60,t=D(e/60),l.minutes=t%60,r=D(t/60),l.hours=r%24,s+=i=D(gr(o+=D(r/24))),o-=yr(vr(i)),n=D(s/12),s%=12,l.days=o,l.months=s,l.years=n,this},Gr.clone=function(){return Ut(this)},Gr.get=function(e){return e=T(e),this.isValid()?this[e+"s"]():NaN},Gr.milliseconds=Mr,Gr.seconds=Ir,Gr.minutes=Or,Gr.hours=Cr,Gr.days=Tr,Gr.weeks=function(){return D(this.days()/7)},Gr.months=kr,Gr.years=Lr,Gr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,r,n,i,a,o,s,l,u,c,p,h=this.localeData(),d=(r=!e,n=h,i=Ut(t=this).abs(),a=Nr(i.as("s")),o=Nr(i.as("m")),s=Nr(i.as("h")),l=Nr(i.as("d")),u=Nr(i.as("M")),c=Nr(i.as("y")),(p=a<=zr.ss&&["s",a]||a<zr.s&&["ss",a]||o<=1&&["m"]||o<zr.m&&["mm",o]||s<=1&&["h"]||s<zr.h&&["hh",s]||l<=1&&["d"]||l<zr.d&&["dd",l]||u<=1&&["M"]||u<zr.M&&["MM",u]||c<=1&&["y"]||["yy",c])[2]=r,p[3]=+t>0,p[4]=n,function(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}.apply(null,p));return e&&(d=h.pastFuture(+this,d)),h.postformat(d)},Gr.toISOString=Vr,Gr.toString=Vr,Gr.toJSON=Vr,Gr.locale=Kt,Gr.localeData=Qt,Gr.toIsoString=r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Vr),Gr.lang=Jt,B("X",0,0,"unix"),B("x",0,0,"valueOf"),le("x",ne),le("X",/[+-]?\d+(\.\d{1,3})?/),he("X",(function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))})),he("x",(function(e,t,r){r._d=new Date(S(e))})),h.version="2.22.1",e=Et,h.fn=lr,h.min=function(){return It("isBefore",[].slice.call(arguments,0))},h.max=function(){return It("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=y,h.unix=function(e){return Et(1e3*e)},h.months=function(e,t){return hr(e,t,"months")},h.isDate=p,h.locale=st,h.invalid=b,h.duration=Ut,h.isMoment=w,h.weekdays=function(e,t,r){return dr(e,t,r,"weekdays")},h.parseZone=function(){return Et.apply(null,arguments).parseZone()},h.localeData=ut,h.isDuration=Tt,h.monthsShort=function(e,t){return hr(e,t,"monthsShort")},h.weekdaysMin=function(e,t,r){return dr(e,t,r,"weekdaysMin")},h.defineLocale=lt,h.updateLocale=function(e,t){if(null!=t){var r,n,i=rt;null!=(n=ot(e))&&(i=n._config),(r=new I(t=M(i,t))).parentLocale=nt[e],nt[e]=r,st(e)}else null!=nt[e]&&(null!=nt[e].parentLocale?nt[e]=nt[e].parentLocale:null!=nt[e]&&delete nt[e]);return nt[e]},h.locales=function(){return n(nt)},h.weekdaysShort=function(e,t,r){return dr(e,t,r,"weekdaysShort")},h.normalizeUnits=T,h.relativeTimeRounding=function(e){return void 0===e?Nr:"function"===typeof e&&(Nr=e,!0)},h.relativeTimeThreshold=function(e,t){return void 0!==zr[e]&&(void 0===t?zr[e]:(zr[e]=t,"s"===e&&(zr.ss=t-1),!0))},h.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},h.prototype=lr,h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},h},"object"===typeof e&&"undefined"!==typeof Ur?Ur.exports=r():t.moment=r()}),{}],118:[(function(e,t,r){"use strict";var M,I="http://www.w3.org/1999/xhtml",O="undefined"===typeof document?void 0:document,n=O?O.body||O.createElement("div"):{},l=n.hasAttributeNS?function(e,t,r){return e.hasAttributeNS(t,r)}:n.hasAttribute?function(e,t,r){return e.hasAttribute(r)}:function(e,t,r){return null!=e.getAttributeNode(t,r)};function C(e,t){var r=e.nodeName,n=t.nodeName;return r===n||!!(t.actualize&&r.charCodeAt(0)<91&&n.charCodeAt(0)>90)&&r===n.toUpperCase()}function i(e,t,r){e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,""):e.removeAttribute(r,""))}var T={OPTION:function(e,t){i(e,t,"selected")},INPUT:function(e,t){i(e,t,"checked"),i(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),l(t,null,"value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var r=t.value;e.value!==r&&(e.value=r);var n=e.firstChild;if(n){var i=n.nodeValue;if(i==r||!r&&i==e.placeholder)return;n.nodeValue=r}},SELECT:function(e,t){if(!l(t,null,"multiple")){for(var r=0,n=t.firstChild;n;){var i=n.nodeName;if(i&&"OPTION"===i.toUpperCase()){if(l(n,null,"selected")){r;break}r++}n=n.nextSibling}e.selectedIndex=r}}};function k(){}function L(e){return e.id}var N,a=(N=function(e,t){var r,n,i,a,o,s=t.attributes;for(r=s.length-1;r>=0;--r)i=(n=s[r]).name,a=n.namespaceURI,o=n.value,a?(i=n.localName||i,e.getAttributeNS(a,i)!==o&&e.setAttributeNS(a,i,o)):e.getAttribute(i)!==o&&e.setAttribute(i,o);for(r=(s=e.attributes).length-1;r>=0;--r)!1!==(n=s[r]).specified&&(i=n.name,(a=n.namespaceURI)?(i=n.localName||i,l(t,a,i)||e.removeAttributeNS(a,i)):l(t,null,i)||e.removeAttribute(i))},function(m,y,e){if(e||(e={}),"string"===typeof y)if("#document"===m.nodeName||"HTML"===m.nodeName){var t=y;(y=O.createElement("html")).innerHTML=t}else r=y,!M&&O.createRange&&(M=O.createRange()).selectNode(O.body),M&&M.createContextualFragment?n=M.createContextualFragment(r):(n=O.createElement("body")).innerHTML=r,y=n.childNodes[0];var r,n,i,g=e.getNodeKey||L,v=e.onBeforeNodeAdded||k,a=e.onNodeAdded||k,b=e.onBeforeElUpdated||k,_=e.onElUpdated||k,o=e.onBeforeNodeDiscarded||k,s=e.onNodeDiscarded||k,x=e.onBeforeElChildrenUpdated||k,l=!0===e.childrenOnly,w={};function D(e){i?i.push(e):i=[e]}function S(e,t,r){!1!==o(e)&&(t&&t.removeChild(e),s(e),(function e(t,r){if(1===t.nodeType)for(var n=t.firstChild;n;){var i=void 0;r&&(i=g(n))?D(i):(s(n),n.firstChild&&e(n,r)),n=n.nextSibling}})(e,r))}function R(e){a(e);for(var t=e.firstChild;t;){var r=t.nextSibling,n=g(t);if(n){var i=w[n];i&&C(t,i)&&(t.parentNode.replaceChild(i,t),P(i,t))}R(t),t=r}}function P(e,t,r){var n,i=g(t);if(i&&delete w[i],!y.isSameNode||!y.isSameNode(m)){if(!r){if(!1===b(e,t))return;if(N(e,t),_(e),!1===x(e,t))return}if("TEXTAREA"!==e.nodeName){var a,o,s,l,u=t.firstChild,c=e.firstChild;e:for(;u;){for(s=u.nextSibling,a=g(u);c;){if(o=c.nextSibling,u.isSameNode&&u.isSameNode(c)){u=s,c=o;continue e}n=g(c);var p=c.nodeType,h=void 0;if(p===u.nodeType&&(1===p?(a?a!==n&&((l=w[a])?c.nextSibling===l?h=!1:(e.insertBefore(l,c),o=c.nextSibling,n?D(n):S(c,e,!0),c=l):h=!1):n&&(h=!1),(h=!1!==h&&C(c,u))&&P(c,u)):3!==p&&8!=p||(h=!0,c.nodeValue!==u.nodeValue&&(c.nodeValue=u.nodeValue))),h){u=s,c=o;continue e}n?D(n):S(c,e,!0),c=o}if(a&&(l=w[a])&&C(l,u))e.appendChild(l),P(l,u);else{var d=v(u);!1!==d&&(d&&(u=d),u.actualize&&(u=u.actualize(e.ownerDocument||O)),e.appendChild(u),R(u))}u=s,c=o}for(;c;)o=c.nextSibling,(n=g(c))?D(n):S(c,e,!0),c=o}var f=T[e.nodeName];f&&f(e,t)}}!(function e(t){if(1===t.nodeType)for(var r=t.firstChild;r;){var n=g(r);n&&(w[n]=r),e(r),r=r.nextSibling}})(m);var u,c,p=m,h=p.nodeType,d=y.nodeType;if(!l)if(1===h)1===d?C(m,y)||(s(m),p=(function(e,t){for(var r=e.firstChild;r;){var n=r.nextSibling;t.appendChild(r),r=n}return t})(m,(u=y.nodeName,(c=y.namespaceURI)&&c!==I?O.createElementNS(c,u):O.createElement(u)))):p=y;else if(3===h||8===h){if(d===h)return p.nodeValue!==y.nodeValue&&(p.nodeValue=y.nodeValue),p;p=y}if(p===y)s(m);else if(P(p,y,l),i)for(var f=0,E=i.length;f<E;f++){var A=w[i[f]];A&&S(A,A.parentNode,!1)}return!l&&p!==m&&m.parentNode&&(p.actualize&&(p=p.actualize(m.ownerDocument||O)),m.parentNode.replaceChild(p,m)),p});t.exports=a}),{}],119:[(function(e,r,t){(function(e){"use strict";var i,t;i=function(e){if("function"!==typeof e)throw new TypeError(e+" is not a function");return e},t=function(e){var t,r=document.createTextNode(""),n=0;return new e(function(){var e;t&&(e=t,t=null,"function"!==typeof e?e.forEach((function(e){e()})):e())}).observe(r,{characterData:!0}),function(e){i(e),t?"function"===typeof t?t=[t,e]:t.push(e):(t=e,r.data=n=++n%2)}},r.exports=(function(){if("undefined"!==typeof e&&e&&"function"===typeof e.nextTick)return e.nextTick;if("object"===typeof document&&document){if("function"===typeof MutationObserver)return t(MutationObserver);if("function"===typeof WebKitMutationObserver)return t(WebKitMutationObserver)}return"function"===typeof setImmediate?function(e){setImmediate(i(e))}:"function"===typeof setTimeout?function(e){setTimeout(i(e),0)}:null})()}).call(this,e("_process"))}),{_process:18}],120:[(function(e,s,t){(function(){var c,v={},t={currentLanguage:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},b={currentLanguage:t.currentLanguage,zeroFormat:t.zeroFormat,nullFormat:t.nullFormat,defaultFormat:t.defaultFormat},p={bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],iec:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]};function r(e){this._value=e}function _(e,t,r,n){var i,a,o,s,l=e.toString().split("."),u=t-(n||0);return i=2===l.length?Math.min(Math.max(l[1].length,u),t):u,s=(r(e*(o=Math.pow(10,i)))/o).toFixed(i),n>t-i&&(a=new RegExp("\\.?0{1,"+(n-(t-i))+"}$"),s=s.replace(a,"")),s}function n(e,t,r){var n,i,a,o;return 0===e._value&&null!==b.zeroFormat?b.zeroFormat:null===e._value&&null!==b.nullFormat?b.nullFormat:t.indexOf("$")>-1?(function(e,t,r){var n,i,a=t.indexOf("$"),o=t.indexOf("("),s=t.indexOf("-"),l="";t=t.indexOf(" $")>-1?(l=" ",t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t.replace("$ ","")):t.replace("$","");i=u(e._value,t,r),i=a<=1?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),n=1,(a<o||a<s)&&(n=0),i.splice(n,0,v[b.currentLanguage].currency.symbol+l),i.join("")):v[b.currentLanguage].currency.symbol+l+i:i.indexOf(")")>-1?((i=i.split("")).splice(-1,0,l+v[b.currentLanguage].currency.symbol),i.join("")):i+l+v[b.currentLanguage].currency.symbol;return i})(e,t,r):t.indexOf("%")>-1?(function(e,t,r){var n,i="",a=100*e._value;t=t.indexOf(" %")>-1?(i=" ",t.replace(" %","")):t.replace("%","");n=(n=u(a,t,r)).indexOf(")")>-1?((n=n.split("")).splice(-1,0,i+"%"),n.join("")):n+i+"%";return n})(e,t,r):t.indexOf(":")>-1?(n=e,i=Math.floor(n._value/60/60),a=Math.floor((n._value-60*i*60)/60),o=Math.round(n._value-60*i*60-60*a),i+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)):t.indexOf("b")>-1||t.indexOf("ib")>-1?(function(e,t,r){var n,i,a,o=t.indexOf("ib")>-1?p.iec:p.bytes,s=e._value,l="";t=t.indexOf(" b")>-1||t.indexOf(" ib")>-1?(l=" ",t.replace(" ib","").replace(" b","")):t.replace("ib","").replace("b","");for(n=0;n<=o.length;n++)if(i=Math.pow(1024,n),a=Math.pow(1024,n+1),null===s||0===s||s>=i&&s<a){l+=o[n],i>0&&(s/=i);break}return u(s,t,r)+l})(e,t,r):t.indexOf("o")>-1?(function(e,t,r){var n="";t=t.indexOf(" o")>-1?(n=" ",t.replace(" o","")):t.replace("o","");return n+=v[b.currentLanguage].ordinal(e._value),u(e._value,t,r)+n})(e,t,r):u(e._value,t,r)}function u(e,t,r){var n,i,a,o,s=!1,l=!1,u=!1,c="",p=!1,h=!1,d=!1,f=!1,m=!1,y="",g=!1;return null===e&&(e=0),n=Math.abs(e),t.indexOf("(")>-1?(s=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(l=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(p=t.indexOf("aK")>=0,h=t.indexOf("aM")>=0,d=t.indexOf("aB")>=0,f=t.indexOf("aT")>=0,m=p||h||d||f,t.indexOf(" a")>-1&&(c=" "),t=t.replace(new RegExp(c+"a[KMBT]?"),""),n>=Math.pow(10,12)&&!m||f?(c+=v[b.currentLanguage].abbreviations.trillion,e/=Math.pow(10,12)):n<Math.pow(10,12)&&n>=Math.pow(10,9)&&!m||d?(c+=v[b.currentLanguage].abbreviations.billion,e/=Math.pow(10,9)):n<Math.pow(10,9)&&n>=Math.pow(10,6)&&!m||h?(c+=v[b.currentLanguage].abbreviations.million,e/=Math.pow(10,6)):(n<Math.pow(10,6)&&n>=Math.pow(10,3)&&!m||p)&&(c+=v[b.currentLanguage].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("[.]")>-1&&(u=!0,t=t.replace("[.]",".")),i=e.toString().split(".")[0],a=t.split(".")[1],o=t.indexOf(","),a?(i=(y=a.indexOf("[")>-1?_(e,(a=(a=a.replace("]","")).split("["))[0].length+a[1].length,r,a[1].length):_(e,a.length,r)).split(".")[0],y=y.indexOf(".")>-1?v[b.currentLanguage].delimiters.decimal+y.split(".")[1]:"",u&&0===Number(y.slice(1))&&(y="")):i=_(e,null,r),i.indexOf("-")>-1&&(i=i.slice(1),g=!0),o>-1&&(i=i.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+v[b.currentLanguage].delimiters.thousands)),0===t.indexOf(".")&&(i=""),(s&&g?"(":"")+(!s&&g?"-":"")+(!g&&l?"+":"")+i+y+(c||"")+(s&&g?")":"")}function i(e,t){var r,n,i,a,o,s,l=t,u=!1;if(t.indexOf(":")>-1)s=(function(e){var t=e.split(":"),r=0;3===t.length?(r+=60*Number(t[0])*60,r+=60*Number(t[1]),r+=Number(t[2])):2===t.length&&(r+=60*Number(t[0]),r+=Number(t[1]));return Number(r)})(t);else if(t===b.zeroFormat||t===b.nullFormat)s=0;else{for("."!==v[b.currentLanguage].delimiters.decimal&&(t=t.replace(/\./g,"").replace(v[b.currentLanguage].delimiters.decimal,".")),r=new RegExp("[^a-zA-Z]"+v[b.currentLanguage].abbreviations.thousand+"(?:\\)|(\\"+v[b.currentLanguage].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+v[b.currentLanguage].abbreviations.million+"(?:\\)|(\\"+v[b.currentLanguage].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+v[b.currentLanguage].abbreviations.billion+"(?:\\)|(\\"+v[b.currentLanguage].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+v[b.currentLanguage].abbreviations.trillion+"(?:\\)|(\\"+v[b.currentLanguage].currency.symbol+")?(?:\\))?)?$"),o=1;o<=p.bytes.length&&!(u=(t.indexOf(p.bytes[o])>-1||t.indexOf(p.iec[o])>-1)&&Math.pow(1024,o));o++);s=u||1,s*=l.match(r)?Math.pow(10,3):1,s*=l.match(n)?Math.pow(10,6):1,s*=l.match(i)?Math.pow(10,9):1,s*=l.match(a)?Math.pow(10,12):1,s*=t.indexOf("%")>-1?.01:1,s*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,s*=Number(t.replace(/[^0-9\.]+/g,"")),s=u?Math.ceil(s):s}return e._value=s,e._value}function a(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function o(){return Array.prototype.slice.call(arguments).reduce((function(e,t){var r=a(e),n=a(t);return r>n?r:n}),-1/0)}(c=function(e){return new r(e=c.isNumeral(e)?e.value():0===e||"undefined"===typeof e?0:null===e?null:Number(e)?Number(e):c.fn.unformat(e))}).version="1.5.6",c.isNumeral=function(e){return e instanceof r},c.language=function(e,t){if(!e)return b.currentLanguage;if((e=e.toLowerCase())&&!t){if(!v[e])throw new Error("Unknown language : "+e);b.currentLanguage=e}var r;return!t&&v[e]||(r=t,v[e]=r),c},c.reset=function(){for(var e in t)b[e]=t[e]},c.languageData=function(e){if(!e)return v[b.currentLanguage];if(!v[e])throw new Error("Unknown language : "+e);return v[e]},c.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),c.zeroFormat=function(e){b.zeroFormat="string"===typeof e?e:null},c.nullFormat=function(e){b.nullFormat="string"===typeof e?e:null},c.defaultFormat=function(e){b.defaultFormat="string"===typeof e?e:"0.0"},c.validate=function(e,t){var r,n,i,a,o,s,l,u;if("string"!==typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{l=c.languageData(t)}catch(e){l=c.languageData(c.language())}return i=l.currency.symbol,o=l.abbreviations,r=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,(null===(u=e.match(/^[^\d]+/))||(e=e.substr(1),u[0]===i))&&((null===(u=e.match(/[^\d]+$/))||(e=e.slice(0,-1),u[0]===o.thousand||u[0]===o.million||u[0]===o.billion||u[0]===o.trillion))&&(s=new RegExp(n+"{2}"),!e.match(/[^\d.,]/g)&&(!((a=e.split(r)).length>2)&&(a.length<2?!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s):1===a[0].length?!!a[0].match(/^\d+$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/):!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/)))))},Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!==typeof e)throw new TypeError(e+" is not a function");var t,r=Object(this),n=r.length>>>0,i=0;if(2===arguments.length)t=arguments[1];else{for(;i<n&&!(i in r);)i++;if(i>=n)throw new TypeError("Reduce of empty array with no initial value");t=r[i++]}for(;i<n;i++)i in r&&(t=e(t,r[i],i,r));return t}),c.fn=r.prototype={clone:function(){return c(this)},format:function(e,t){return n(this,e||b.defaultFormat,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:i(this,e||b.defaultFormat)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){var i=o.call(null,this._value,e);return this._value=[this._value,e].reduce((function(e,t,r,n){return e+i*t}),0)/i,this},subtract:function(e){var i=o.call(null,this._value,e);return this._value=[e].reduce((function(e,t,r,n){return e-i*t}),this._value*i)/i,this},multiply:function(e){return this._value=[this._value,e].reduce((function(e,t,r,n){var i=o(e,t);return e*i*(t*i)/(i*i)}),1),this},divide:function(e){return this._value=[this._value,e].reduce((function(e,t,r,n){var i=o(e,t);return e*i/(t*i)})),this},difference:function(e){return Math.abs(c(this._value).subtract(e).value())}},"undefined"!==typeof s&&s.exports&&(s.exports=c),"undefined"===typeof ender&&(this.numeral=c)}).call(this)}),{}],121:[(function(e,r,t){!(function(e,t){"use strict";"object"===typeof r&&"object"===typeof r.exports?r.exports=t():e.objectPath=t()})(this,(function(){"use strict";var a=Object.prototype.hasOwnProperty;function o(e){return"number"===typeof e}function s(e){return"string"===typeof e}function l(e){return Array.isArray(e)}function u(e){var t=parseInt(e);return t.toString()===e?t:e}var n=function(r){var e=Object.keys(n).reduce((function(e,t){return"function"===typeof n[t]&&(e[t]=function(){var e=[r].concat(Array.prototype.slice.call(arguments));return n(n[t].apply(n,e))}),e}),{});return e.value=function(){return r},e};function c(e,t,r){if(null==e)return t?r?[]:{}:e;if(l(e))return e.slice();var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function p(e,t,r){if(o(t)&&(t=[t]),(function(e){if(!e)return!0;if(l(e)&&0===e.length)return!0;if(s(e))return!1;for(var t in e)if(a.call(e,t))return!1;return!0})(t))return e;if(s(t))return p(e,t.split(".").map(u),r);var n=t[0],i=c(e,!0,o(n));return 1===t.length?r(i,n):(i[n]=p(i[n],t.slice(1),r),i)}return n.set=function(e,t,r){return p(e,t,(function(e,t){return e[t]=r,e}))},n.push=function(e,t){var r=Array.prototype.slice.call(arguments,2);return p(e,t,(function(e,t){return l(e[t])?e[t]=e[t].concat(r):e[t]=r,e}))},n.insert=function(e,i,a,o){return o=~~o,p(e,i,(function(e,t){var r=e[t];if(!l(r)){if(null!=r&&"undefined"!==typeof r)throw new Error("Expected "+i+"to be an array. Instead got "+typeof i);r=[]}var n=r.slice(0,o);return n.push(a),e[t]=n.concat(r.slice(o)),e}))},n.del=function(e,t,r,n){return p(e,t,(function(e,t){return Array.isArray(e)?e[t]&&e.splice(t,1):e.hasOwnProperty(t)&&delete e[t],e}))},n.assign=function(e,t,i){return p(e,t,(function(e,t){i=Object(i);var r=c(e[t],!0);for(var n in i)a.call(i,n)&&(r[n]=i[n]);return e[t]=r,e}))},n}))}),{}],122:[(function(e,r,t){!(function(e,t){"use strict";"object"===typeof r&&"object"===typeof r.exports?r.exports=t():e.objectPath=t()})(this,(function(){"use strict";var t=Object.prototype.toString;function a(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(!e)return!0;if(h(e)&&0===e.length)return!0;if("string"===typeof e)return!1;for(var t in e)if(a(e,t))return!1;return!0}function p(e){return t.call(e)}var h=Array.isArray||function(e){return"[object Array]"===t.call(e)};function d(e){var t=parseInt(e);return t.toString()===e?t:e}function e(i){i=i||{};var o=function(r){return Object.keys(o).reduce((function(e,t){return"create"===t||"function"===typeof o[t]&&(e[t]=o[t].bind(o,r)),e}),{})};function s(e,t){return i.includeInheritedProps||"number"===typeof t&&Array.isArray(e)||a(e,t)}function l(e,t){if(s(e,t))return e[t]}function u(e,t,r,n){if("number"===typeof t&&(t=[t]),!t||0===t.length)return e;if("string"===typeof t)return u(e,t.split(".").map(d),r,n);var i=t[0],a=l(e,i);return 1===t.length?(void 0!==a&&n||(e[i]=r),a):(void 0===a&&("number"===typeof t[1]?e[i]=[]:e[i]={}),u(e[i],t.slice(1),r,n))}return o.has=function(e,t){if("number"===typeof t?t=[t]:"string"===typeof t&&(t=t.split(".")),!t||0===t.length)return!!e;for(var r=0;r<t.length;r++){var n=d(t[r]);if(!("number"===typeof n&&h(e)&&n<e.length||(i.includeInheritedProps?n in Object(e):a(e,n))))return!1;e=e[n]}return!0},o.ensureExists=function(e,t,r){return u(e,t,r,!0)},o.set=function(e,t,r,n){return u(e,t,r,n)},o.insert=function(e,t,r,n){var i=o.get(e,t);n=~~n,h(i)||(i=[],o.set(e,t,i)),i.splice(n,0,r)},o.empty=function(e,t){var r,n;if(!c(t)&&(null!=e&&(r=o.get(e,t)))){if("string"===typeof r)return o.set(e,t,"");if("boolean"===typeof(a=r)||"[object Boolean]"===p(a))return o.set(e,t,!1);if("number"===typeof r)return o.set(e,t,0);if(h(r))r.length=0;else{if("object"!==typeof(i=r)||"[object Object]"!==p(i))return o.set(e,t,null);for(n in r)s(r,n)&&delete r[n]}var i,a}},o.push=function(e,t){var r=o.get(e,t);h(r)||(r=[],o.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},o.coalesce=function(e,t,r){for(var n,i=0,a=t.length;i<a;i++)if(void 0!==(n=o.get(e,t[i])))return n;return r},o.get=function(e,t,r){if("number"===typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"===typeof t)return o.get(e,t.split("."),r);var n=d(t[0]),i=l(e,n);return void 0===i?r:1===t.length?i:o.get(e[n],t.slice(1),r)},o.del=function(e,t){if("number"===typeof t&&(t=[t]),null==e)return e;if(c(t))return e;if("string"===typeof t)return o.del(e,t.split("."));var r=d(t[0]);return s(e,r)?1!==t.length?o.del(e[r],t.slice(1)):(h(e)?e.splice(r,1):delete e[r],e):e},o}var r=e();return r.create=e,r.withInheritedProps=e({includeInheritedProps:!0}),r}))}),{}],123:[(function(e,t,r){var o=e("trim"),n=e("for-each");t.exports=function(e){if(!e)return{};var a={};return n(o(e).split("\n"),(function(e){var t,r=e.indexOf(":"),n=o(e.slice(0,r)).toLowerCase(),i=o(e.slice(r+1));"undefined"===typeof a[n]?a[n]=i:(t=a[n],"[object Array]"===Object.prototype.toString.call(t)?a[n].push(i):a[n]=[a[n],i])})),a}}),{"for-each":100,trim:130}],124:[(function(e,t,u){(function(i){function a(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return t.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}u.resolve=function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:i.cwd();if("string"!==typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=a(s(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),r="/"===n(e,-1);return(e=a(s(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(s(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},u.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),a=Math.min(n.length,i.length),o=a,s=0;s<a;s++)if(n[s]!==i[s]){o=s;break}var l=[];for(s=o;s<n.length;s++)l.push("..");return(l=l.concat(i.slice(o))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},u.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},u.extname=function(e){return o(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))}),{_process:18}],125:[(function(e,i,t){(function(n){(function(){var e,t,r;"undefined"!==typeof performance&&null!==performance&&performance.now?i.exports=function(){return performance.now()}:r="undefined"!==typeof n&&null!==n&&n.hrtime?(i.exports=function(){return(e()-r)/1e6},t=n.hrtime,(e=function(){var e;return 1e9*(e=t())[0]+e[1]})()):Date.now?(i.exports=function(){return Date.now()-r},Date.now()):(i.exports=function(){return(new Date).getTime()-r},(new Date).getTime())}).call(this)}).call(this,e("_process"))}),{_process:18}],126:[(function(e,C,T){(function(O){!(function(e){var t="object"==typeof T&&T&&!T.nodeType&&T,r="object"==typeof C&&C&&!C.nodeType&&C,n="object"==typeof O&&O;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var i,a,g=2147483647,v=36,b=1,_=26,o=38,s=700,x=72,w=128,D="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=v-b,S=Math.floor,R=String.fromCharCode;function P(e){throw RangeError(p[e])}function d(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function f(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+d((e=e.replace(c,".")).split("."),t).join(".")}function E(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function A(e){return d(e,(function(e){var t="";return e>65535&&(t+=R((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=R(e)})).join("")}function M(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,r){var n=0;for(e=r?S(e/s):e>>1,e+=S(e/t);e>h*_>>1;n+=v)e=S(e/h);return S(n+(h+1)*e/(e+o))}function m(e){var t,r,n,i,a,o,s,l,u,c,p,h=[],d=e.length,f=0,m=w,y=x;for((r=e.lastIndexOf(D))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&P("not-basic"),h.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<d;){for(a=f,o=1,s=v;i>=d&&P("invalid-input"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:v)>=v||l>S((g-f)/o))&&P("overflow"),f+=l*o,!(l<(u=s<=y?b:s>=y+_?_:s-y));s+=v)o>S(g/(c=v-u))&&P("overflow"),o*=c;y=I(f-a,t=h.length+1,0==a),S(f/t)>g-m&&P("overflow"),m+=S(f/t),f%=t,h.splice(f++,0,m)}return A(h)}function y(e){var t,r,n,i,a,o,s,l,u,c,p,h,d,f,m,y=[];for(h=(e=E(e)).length,t=w,a=x,o=r=0;o<h;++o)(p=e[o])<128&&y.push(R(p));for(n=i=y.length,i&&y.push(D);n<h;){for(s=g,o=0;o<h;++o)(p=e[o])>=t&&p<s&&(s=p);for(s-t>S((g-r)/(d=n+1))&&P("overflow"),r+=(s-t)*d,t=s,o=0;o<h;++o)if((p=e[o])<t&&++r>g&&P("overflow"),p==t){for(l=r,u=v;!(l<(c=u<=a?b:u>=a+_?_:u-a));u+=v)m=l-c,f=v-c,y.push(R(M(c+m%f,0))),l=S(m/f);y.push(R(M(l,0))),a=I(r,d,n==i),r=0,++n}++r,++t}return y.join("")}if(i={version:"1.3.2",ucs2:{decode:E,encode:A},decode:m,encode:y,toASCII:function(e){return f(e,(function(e){return u.test(e)?"xn--"+y(e):e}))},toUnicode:function(e){return f(e,(function(e){return l.test(e)?m(e.slice(4).toLowerCase()):e}))}},t&&r)if(C.exports==t)r.exports=i;else for(a in i)i.hasOwnProperty(a)&&(t[a]=i[a]);else e.punycode=i})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{}],127:[(function(e,t,r){"use strict";t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!==typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"===typeof n.maxKeys&&(o=n.maxKeys);var s,l,u=e.length;o>0&&u>o&&(u=o);for(var c=0;c<u;++c){var p,h,d,f,m=e[c].replace(a,"%20"),y=m.indexOf(r);h=y>=0?(p=m.substr(0,y),m.substr(y+1)):(p=m,""),d=decodeURIComponent(p),f=decodeURIComponent(h),s=i,l=d,Object.prototype.hasOwnProperty.call(s,l)?g(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i};var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),{}],128:[(function(e,t,r){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"===typeof r?s(l(r),(function(e){var t=encodeURIComponent(a(e))+i;return o(r[e])?s(r[e],(function(e){return t+encodeURIComponent(a(e))})).join(n):t+encodeURIComponent(a(r[e]))})).join(n):e?encodeURIComponent(a(e))+i+encodeURIComponent(a(r)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var l=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}),{}],129:[(function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")}),{"./decode":127,"./encode":128}],130:[(function(e,t,r){(r=t.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}}),{}],131:[(function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),(function(e,t){for(var r=1,n=e.length,i=e[0],a=e[0],o=1;o<n;++o)if(a=i,t(i=e[o],a)){if(o===r){r++;continue}e[r++]=i}return e.length=r,e})(e,t)):(r||e.sort(),(function(e){for(var t=1,r=e.length,n=e[0],i=e[0],a=1;a<r;++a,i=n)if(i=n,(n=e[a])!==i){if(a===t){t++;continue}e[t++]=n}return e.length=t,e})(e))}}),{}],132:[(function(e,t,r){"function"===typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),{}],133:[(function(e,t,r){t.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}}),{}],134:[(function(h,e,E){(function(n,i){var s=/%[sdj%]/g;E.format=function(e){if(!_(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(s,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),o=n[r];r<i;o=n[++r])v(o)||!c(o)?a+=" "+o:a+=" "+l(o);return a},E.deprecate=function(e,t){if(x(i.process))return function(){return E.deprecate(e,t).apply(this,arguments)};if(!0===n.noDeprecation)return e;var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(t);n.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var e,a={};function l(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&E._extend(r,t),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),d(r,e,r.depth)}function o(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function u(e,t){return e}function d(t,r,n){if(t.customInspect&&r&&R(r.inspect)&&r.inspect!==E.inspect&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return _(e)||(e=d(t,e,n)),e}var i=(function(e,t){if(x(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(b(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")})(t,r);if(i)return i;var a,o=Object.keys(r),s=(a={},o.forEach((function(e,t){a[e]=!0})),a);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),S(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(r);if(0===o.length){if(R(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(D(r))return t.stylize(Date.prototype.toString.call(r),"date");if(S(r))return f(r)}var u,c="",p=!1,h=["{","}"];(y(r)&&(p=!0,h=["[","]"]),R(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(c=" "+RegExp.prototype.toString.call(r)),D(r)&&(c=" "+Date.prototype.toUTCString.call(r)),S(r)&&(c=" "+f(r)),0!==o.length||p&&0!=r.length?n<0?w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=p?(function(t,r,n,i,e){for(var a=[],o=0,s=r.length;o<s;++o)P(r,String(o))?a.push(m(t,r,n,i,String(o),!0)):a.push("");return e.forEach((function(e){e.match(/^\d+$/)||a.push(m(t,r,n,i,e,!0))})),a})(t,r,n,s,o):o.map((function(e){return m(t,r,n,s,e,p)})),t.seen.pop(),(function(e,t,r){if(e.reduce((function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]})(u,c,h)):h[0]+c+h[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),P(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=v(r)?d(e,l.value,null):d(e,l.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),x(o)){if(a&&i.match(/^\d+$/))return s;o=(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+s}function y(e){return Array.isArray(e)}function g(e){return"boolean"===typeof e}function v(e){return null===e}function b(e){return"number"===typeof e}function _(e){return"string"===typeof e}function x(e){return void 0===e}function w(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"===typeof e&&null!==e}function D(e){return c(e)&&"[object Date]"===t(e)}function S(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function R(e){return"function"===typeof e}function t(e){return Object.prototype.toString.call(e)}function r(e){return e<10?"0"+e.toString(10):e.toString(10)}E.debuglog=function(t){if(x(e)&&(e=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var r=n.pid;a[t]=function(){var e=E.format.apply(E,arguments);console.error("%s %d: %s",t,r,e)}}else a[t]=function(){};return a[t]},(E.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},E.isArray=y,E.isBoolean=g,E.isNull=v,E.isNullOrUndefined=function(e){return null==e},E.isNumber=b,E.isString=_,E.isSymbol=function(e){return"symbol"===typeof e},E.isUndefined=x,E.isRegExp=w,E.isObject=c,E.isDate=D,E.isError=S,E.isFunction=R,E.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},E.isBuffer=h("./support/isBuffer");var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[r(e.getHours()),r(e.getMinutes()),r(e.getSeconds())].join(":"),[e.getDate(),p[e.getMonth()],t].join(" ")),E.format.apply(E,arguments))},E.inherits=h("inherits"),E._extend=function(e,t){if(!t||!c(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,h("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}),{"./support/isBuffer":133,_process:18,inherits:132}],135:[(function(e,t,r){var n=e("component-type"),a=e("ltgt"),o=e("util").format,s=e("ltgt-to-interval");function l(e){return null!=e&&"undefined"!=typeof e.length?e.length:void 0}function u(e){return Object(e)===e}t.exports=function(){var i=[],r=function(r){var n=[];return i.forEach((function(e){var t=e(r);t&&(Array.isArray(t)||(t=[t]),t.forEach((function(e){n.push(e)})))})),{errors:n,valid:function(){return 0==n.length}}},e=function(e,t){r[e]=function(){var e=t.apply(null,arguments);return i.push(e),r}};return e("custom",(function(e){return e})),"number string boolean object array buffer date".split(" ").forEach((function(r){e(r,(function(t){return function(e){if(n(e)!=r)return{value:e,operator:r,actual:n(e),message:t||o("Expected a %s but got a %s",r,n(e))}}}))})),e("email",(function(t){return function(e){if(!("string"==n(e)&&/^([\w_\.\-\+])+\@([\w\-]+\.)+([\w]{2,10})+$/.test(e)))return{value:e,operator:"email",message:t||"Expected a valid email address"}}})),e("equal",(function(t,r){return u(t)?function(e){if(!a.contains(t,e))return{value:e,operator:"equal",expected:t,message:r||o("Expected a value in range %s",s(t))}}:function(e){if(e!==t)return{value:e,operator:"equal",expected:t,message:r||o("Expected %j to equal %j",e,t)}}})),e("notEqual",(function(t,r){return u(t)?function(e){if(a.contains(t,e))return{value:e,operator:"notEqual",message:r||o("Expected a value outside range %s",s(t))}}:function(e){if(e===t)return{value:e,operator:"notEqual",message:r||o("Expected %j not to equal %j",e,t)}}})),e("match",(function(t,r){return function(e){if("string"!=n(e)||!t.test(e))return{value:e,operator:"match",expected:t,message:r||o("Expected %j to match %s",e,t)}}})),e("notMatch",(function(t,r){return function(e){if("string"!=n(e)||t.test(e))return{value:e,operator:"notMatch",message:r||o("Expected %j not to match %s",e,t)}}})),e("hasKey",(function(t,r){return function(e){if("object"!=n(e)||!(t in e))return{value:e,operator:"hasKey",expected:t,message:r||o("Expected %j to have key %s",e,t)}}})),e("len",(function(t,r){return"number"==typeof t?function(e){if(l(e)!=t)return{value:e,operator:"len",expected:t,actual:l(e),message:r||o("Expected %j to have length %s",e,t)}}:function(e){if(!a.contains(t,l(e)))return{value:e,operator:"len",expected:t,actual:l(e),message:r||o("Expected %j to be of length %s",e,s(t))}}})),e("of",(function(t,r){return function(e){if(-1==t.indexOf(e))return{value:e,operator:"of",expected:t,message:r||o("Expected %j to be of %j",e,t)}}})),e("notOf",(function(t,r){return function(e){if(t.indexOf(e)>-1)return{value:e,operator:"notOf",expected:t,message:r||o("Expected %j not to be of %j",e,t)}}})),e("each",(function(n){return function(t){var r=[];if(Object.keys(t).forEach((function(e){n(t[e]).errors.forEach((function(e){r.push(e)}))})),r.length)return r}})),r},t.exports.putin=function(e,t,r){r(new Error("in node, error throws you!"))}}),{"component-type":23,ltgt:114,"ltgt-to-interval":113,util:134}],136:[(function(e,t,r){t.exports={al:{name:"Alabama",abbreviation:"Ala.",capital:"Montgomery",labelDx:-12,labelDy:5},az:{name:"Arizona",abbreviation:"Ariz.",capital:"Phoenix",cities:[{name:"Phoenix",anchor:"start"},{name:"Tucson",anchor:"end"}]},ak:{name:"Alaska",abbreviation:"Alaska",capital:"Juneau",labelDx:-10,labelDy:0,cities:[{name:"Fairbanks",anchor:"end"},{name:"Anchorage",anchor:"end"},{name:"Juneau",anchor:"end"}],zoom:-1},ar:{name:"Arkansas",abbreviation:"Ark.",capital:"Little Rock",labelDx:-15,labelDy:5},ca:{name:"California",abbreviation:"Calif.",capital:"Sacramento",zoom:6,labelDx:-15,labelDy:13,cities:[{name:"San Francisco",anchor:"start"},{name:"Sacramento",anchor:"start"},{name:"Los Angeles",anchor:"end"}]},co:{name:"Colorado",abbreviation:"Colo.",capital:"Denver",cities:[{name:"Fort Collins",anchor:"end"},{name:"Denver",anchor:"end"},{name:"Colorado Springs",anchor:"end"}],labelDx:-12,labelDy:4},ct:{name:"Connecticut",abbreviation:"Conn.",capital:"Hartford",labelDx:39,labelDy:19,zoom:9},dc:{name:"Washington, D.C.",abbreviation:"Washington, D.C.",labelDx:82,labelDy:41,zoom:-1},de:{name:"Delaware",abbreviation:"Del.",capital:"Dover",labelDx:68,labelDy:13,zoom:9},fl:{name:"Florida",abbreviation:"Fla.",capital:"Tallahassee",labelDx:2,labelDy:5,cities:[{name:"Tallahassee",anchor:"start"},{name:"Tampa",anchor:"end"},{name:"Miami",anchor:"end"}]},ga:{name:"Georgia",abbreviation:"Ga.",capital:"Atlanta<br>",labelDx:-15,labelDy:5},hi:{name:"Hawaii",abbreviation:"Hawaii",capital:"Honolulu"},ia:{name:"Iowa",abbreviation:"Iowa",capital:"Des Moines",cities:[{name:"Des Moines",anchor:"start"},{name:"Council Bluffs",anchor:"start"},{name:"Cedar Rapids",anchor:"end"},{name:"Davenport",anchor:"end",minWidth:365}]},id:{name:"Idaho",abbreviation:"Idaho",capital:"Boise",labelDx:-10,cities:[{name:"Boise",anchor:"start"},{name:"Idaho Falls",anchor:"end",minWidth:240},{name:"Pocatello",anchor:"end"}]},il:{name:"Illinois",abbreviation:"Ill.",capital:"Springfield",labelDx:-5,cities:[{name:"Chicago",anchor:"end"},{name:"Joliet",anchor:"end"},{name:"Springfield",anchor:"start"}]},in:{name:"Indiana",abbreviation:"Ind.",capital:"Indianapolis",labelDx:-3,labelDy:0,cities:[{name:"South Bend",anchor:"end"},{name:"Fort Wayne",anchor:"end"},{name:"Indianapolis",anchor:"end"}]},ks:{name:"Kansas",abbreviation:"Kan.",capital:"Topeka",labelDx:-12,labelDy:5,cities:[{name:"Wichita",anchor:"end"},{name:"Topeka",anchor:"end"}]},ky:{name:"Kentucky",abbreviation:"Ky.",capital:"Frankfort",labelDx:0,labelDy:5,cities:[{name:"Covington",anchor:"end"},{name:"Louisville",anchor:"end"},{name:"Frankfort",anchor:"start"}]},la:{name:"Louisiana",abbreviation:"La.",capital:"Baton Rouge",labelDx:-20,labelDy:5,cities:[{name:"Shreveport",anchor:"start"},{name:"Baton Rouge",anchor:"end"},{name:"New Orleans",anchor:"end"}]},ma:{name:"Massachusetts",abbreviation:"Mass.",capital:"Boston",labelDx:30,labelDy:0,cities:[{name:"Boston",anchor:"end"},{name:"Springfield",anchor:"start"},{name:"Lowell",anchor:"end"}]},md:{name:"Maryland",abbreviation:"Md.",capital:"Annapolis",labelDx:81,labelDy:28,cities:[{name:"Baltimore",anchor:"end"},{name:"Annapolis",anchor:"end"}]},me:{name:"Maine",abbreviation:"Maine",capital:"Augusta",labelDx:-8,labelDy:3},mi:{name:"Michigan",abbreviation:"Mich.",capital:"Lansing",labelDx:3,labelDy:20,cities:[{name:"Lansing",anchor:"end"},{name:"Detroit",anchor:"end"},{name:"Flint",anchor:"start"}]},mn:{name:"Minnesota",abbreviation:"Minn.",capital:"St. Paul",labelDx:-20,labelDy:5,cities:[{name:"St. Cloud",anchor:"end"},{name:"Minneapolis",anchor:"end"},{name:"Lakeville",anchor:"end"}]},ms:{name:"Mississippi",abbreviation:"Miss.",capital:"Jackson",labelDx:-15},mo:{name:"Missouri",abbreviation:"Mo.",capital:"Jefferson City",labelDx:-15,labelDy:3,cities:[{name:"Kansas City",anchor:"start"},{name:"St. Louis",anchor:"end"},{name:"Jefferson City",anchor:"end"}]},mt:{name:"Montana",abbreviation:"Mont.",capital:"Helena",zoom:6,labelDx:-5,labelDy:7},nc:{name:"North Carolina",abbreviation:"N.C.",capital:"Raleigh",labelDx:-5,labelDy:5,cities:[{name:"Raleigh",anchor:"start"},{name:"Charlotte",anchor:"start"},{name:"Greensboro",anchor:"end"}]},nd:{name:"North Dakota",abbreviation:"N.D.",capital:"Bismarck",labelDx:-10,labelDy:5},nh:{name:"New Hampshire",abbreviation:"N.H.",capital:"Concord",labelDx:-25,labelDy:-40},nj:{name:"New Jersey",abbreviation:"N.J.",capital:"Trenton",labelDx:60,labelDy:15},nm:{name:"New Mexico",abbreviation:"N.M.",capital:"Santa Fe",labelDx:-15,labelDy:5},ny:{name:"New York",abbreviation:"N.Y.",capital:"Albany",labelDx:0,labelDy:5},ne:{name:"Nebraska",abbreviation:"Neb.",capital:"Lincoln",labelDx:-5,labelDy:7,cities:[{name:"Omaha",anchor:"end"},{name:"Lincoln",anchor:"end"},{name:"Kearney",anchor:"end"}]},nv:{name:"Nevada",abbreviation:"Nev.",capital:"Carson City",labelDx:-12,cities:[{name:"Elko",anchor:"end"},{name:"Carson City",anchor:"start"},{name:"Las Vegas",anchor:"end"}]},oh:{name:"Ohio",abbreviation:"Ohio",capital:"Columbus",labelDx:-15,labelDy:3},ok:{name:"Oklahoma",abbreviation:"Okla.",capital:"Oklahoma City",labelDx:-10,labelDy:5},or:{name:"Oregon",abbreviation:"Ore.",capital:"Salem"},pa:{name:"Pennsylvania",abbreviation:"Pa.",capital:"Harrisburg",labelDx:0,labelDy:2,cities:[{name:"Pittsburgh",anchor:"start"},{name:"Philadelphia",anchor:"end"},{name:"Allentown",anchor:"end"}]},ri:{name:"Rhode Island",abbreviation:"R.I.",capital:"Providence",labelDx:28,labelDy:6,zoom:9},sc:{name:"South Carolina",abbreviation:"S.C.",capital:"Columbia",cities:[{name:"Greenville",anchor:"start"},{name:"Columbia",anchor:"start"},{name:"Charleston",anchor:"end"}]},sd:{name:"South Dakota",abbreviation:"S.D.",capital:"Pierre",labelDx:-8,labelDy:5},tn:{name:"Tennessee",abbreviation:"Tenn.",capital:"Nashville",labelDx:-10,labelDy:8,cities:[{name:"Nashville",anchor:"end"},{name:"Knoxville",anchor:"end"},{name:"Memphis",anchor:"start"}]},tx:{name:"Texas",abbreviation:"Texas",capital:"Austin",labelDx:0,labelDy:10,zoom:6},ut:{name:"Utah",abbreviation:"Utah",capital:"Salt Lake City"},va:{name:"Virginia",abbreviation:"Va.",capital:"Richmond",labelDx:-5,labelDy:5,cities:[{name:"Richmond",anchor:"end"},{name:"Virginia Beach",anchor:"end"}]},vt:{name:"Vermont",abbreviation:"Vt.",capital:"Montpelier",labelDx:-40,labelDy:-35},wv:{name:"West Virginia",abbreviation:"W.Va.",capital:"Charleston",labelDx:-15,labelDy:8,cities:[{name:"Morgantown",anchor:"end"},{name:"Parkersburg",anchor:"end"},{name:"Charleston",anchor:"start"}]},wa:{name:"Washington",abbreviation:"Wash.",capital:"Olympia"},wi:{name:"Wisconsin",abbreviation:"Wis.",capital:"Madison",cities:[{name:"Madison",anchor:"end"},{name:"Milwaukee",anchor:"end",minWidth:360}]},wy:{name:"Wyoming",abbreviation:"Wyo.",capital:"Cheyenne",cities:[{name:"Gillette",anchor:"end"},{name:"Casper",anchor:"end"},{name:"Cheyenne",anchor:"end"}]}}}),{}],137:[(function(e,t,r){"use strict";var n=e("global/window"),i=e("is-function"),y=e("parse-headers"),a=e("xtend");function o(e,t,r){var n=e;return i(t)?(r=t,"string"===typeof e&&(n={uri:e})):n=a(t,{uri:e}),n.callback=r,n}function g(e,t,r){return s(t=o(e,t,r))}function s(n){if("undefined"===typeof n.callback)throw new Error("callback argument missing");var i=!1,a=function(e,t,r){i||(i=!0,n.callback(e,t,r))};function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,m)}function e(){if(!o){var e;clearTimeout(l),e=n.useXDR&&void 0===s.status?200:1223===s.status?204:s.status;var t=m,r=null;return 0!==e?(t={body:(function(){var e=void 0;if(e=s.response?s.response:s.responseText||(function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null})(s),f)try{e=JSON.parse(e)}catch(e){}return e})(),statusCode:e,method:c,headers:{},url:u,rawRequest:s},s.getAllResponseHeaders&&(t.headers=y(s.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),a(r,t,t.body)}}var r,o,s=n.xhr||null;s||(s=n.cors||n.useXDR?new g.XDomainRequest:new g.XMLHttpRequest);var l,u=s.url=n.uri||n.url,c=s.method=n.method||"GET",p=n.body||n.data,h=s.headers=n.headers||{},d=!!n.sync,f=!1,m={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:s};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),p=JSON.stringify(!0===n.json?p:n.json))),s.onreadystatechange=function(){4===s.readyState&&setTimeout(e,0)},s.onload=e,s.onerror=t,s.onprogress=function(){},s.onabort=function(){o=!0},s.ontimeout=t,s.open(c,u,!d,n.username,n.password),d||(s.withCredentials=!!n.withCredentials),!d&&n.timeout>0&&(l=setTimeout((function(){if(!o){o=!0,s.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}}),n.timeout)),s.setRequestHeader)for(r in h)h.hasOwnProperty(r)&&s.setRequestHeader(r,h[r]);else if(n.headers&&!(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0})(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(s.responseType=n.responseType),"beforeSend"in n&&"function"===typeof n.beforeSend&&n.beforeSend(s),s.send(p||null),s}(t.exports=g).XMLHttpRequest=n.XMLHttpRequest||function(){},g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:n.XDomainRequest,(function(e,t){for(var r=0;r<e.length;r++)t(e[r])})(["get","put","post","patch","head","delete"],(function(n){g["delete"===n?"del":n]=function(e,t,r){return(t=o(e,t,r)).method=n.toUpperCase(),s(t)}}))}),{"global/window":102,"is-function":106,"parse-headers":123,xtend:138}],138:[(function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e};var i=Object.prototype.hasOwnProperty}),{}],139:[(function(e,t,r){t.exports=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e};var i=Object.prototype.hasOwnProperty}),{}],140:[(function(e,t,r){var n=e("morphdom"),l=e("./update-events.js");t.exports={},t.exports.update=function(e,t,s){return s||(s={}),!1!==s.events&&(s.onBeforeElUpdated||(s.onBeforeElUpdated=function(e,t){for(var r=s.events||l,n=0;n<r.length;n++){var i=r[n];t[i]?e[i]=t[i]:e[i]&&(e[i]=void 0)}var a=e.value,o=t.value;"INPUT"===e.nodeName&&"file"!==e.type||"SELECT"===e.nodeName?o||t.hasAttribute("value")?o!==a&&(e.value=o):t.value=e.value:"TEXTAREA"===e.nodeName&&null===t.getAttribute("value")&&(e.value=t.value)})),n(e,t,s)}}),{"./update-events.js":141,morphdom:118}],141:[(function(e,t,r){t.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"]}),{}],142:[(function(e,t,r){t.exports=function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];if(Array.isArray(i))e(t,i);else{if(("number"===typeof i||"boolean"===typeof i||i instanceof Date||i instanceof RegExp)&&(i=i.toString()),"string"===typeof i){if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=i;continue}i=document.createTextNode(i)}i&&i.nodeType&&t.appendChild(i)}}}}),{}],143:[(function(e,t,r){"use strict";var n=e("mapbox-gl");n.accessToken=e("./config").mapboxAccessToken,n.workerCount=e("./util/browser").hardwareConcurrency;var l=e("wapo-shared/util"),u=e("./util/log"),c=e("./util/format"),p=e("./views/render"),h={config:e("./config"),store:e("./store"),mountView:function(r,n,e,i){i=i||function(e){e&&u.error(e)};var a=n+"."+l.uniqueId(32),t=e;if(e=(function(e,t){var r={},n={},i=c.camelCase(e)+"ViewOption",a=RegExp("^"+i+"([A-Z])");for(var o in t)if(a.test(o)){var s=o.replace(a,(function(e,t){return t.toLowerCase()}));n[s]=t[o]}else{if(y.test(o))continue;r[o]=t[o]}return l.extend(r,n)})(n,e),u.debug("mount-view",a,n,{targetElement:r,options:e,originalOptions:t}),!r||!r.nodeType)return i(new Error("Mount target must be a valid HTML Element."));if(!d[n])return i(new Error("Unknown view "+n+"; must be one of "+Object.keys(d)));var o=h.store.state(),s=o.views.mounted;if(l.find(s,(function(e){return e.id===a||e.tree===r})))return i(new Error("A view instance with id "+a+" is already mounted."));return d[n](a,e,o,m,(function(e,t){if(e)return i(e);u.debug("view-mount","... instance created",a,t),t.id=a,f("views:addMount",{view:n,id:a,tree:r,instance:t},(function(e){if(e)return i(e);p(r,t,h.store.state(),m),i(null,a)}))})),a},unmountView:function(e,t){f("views:unmount",{id:e},t=t||function(e){e&&u.error(e)})},fallbackImageURL:e("./map/fallback-image")},d=e("./views");d.map=e("./views/map"),d["auto-last-update"]=e("./views/auto-last-update"),d["preview-map"]=e("./views/preview-map"),d["map-view-toggle"]=e("./views/map-view-toggle"),d["head-to-head"]=e("./views/head-to-head"),d["homepage-head-to-head"]=e("./views/homepage-head-to-head"),d["bucket-toggle"]=e("./views/bucket-toggle"),d.legend=e("./views/legend"),d["bare-map"]=e("./views/bare-map"),d["simple-heading"]=e("./views/simple-heading"),d["results-table"]=e("./views/results-table"),d["flipped-states"]=e("./views/flipped-states"),d["next-update"]=e("./views/next-update"),d.debug=e("./views/debug"),d["race-summary"]=e("./views/race-summary"),d["race-table"]=e("./views/race-table"),d["interesting-races"]=e("./views/interesting-races"),d["house-political-lean"]=e("./views/house-political-lean"),d["live-house-political-lean"]=e("./views/live-house-political-lean"),d["races-last-updated"]=e("./views/race-update-table"),d["battlegrounds-table"]=e("./views/battlegrounds-table"),d["vulnerable-seats"]=e("./views/vulnerable-seats"),d["state-highlight-table"]=e("./views/state-highlight-table"),d["bucket-analysis-table"]=e("./views/bucket-analysis-table"),e("./map/state"),e("./results");var i=h.store.start(),f=i("app"),m=i("view",!0);document.addEventListener("visibilitychange",(function(){document.hidden?m("results:pauseFetching",{}):m("results:resumeFetching",{},!1)}),!1);var y=RegExp("^("+Object.keys(d).map((function(e){return c.camelCase(e)+"ViewOption"})).join("|")+")");Object.assign(t.exports,h)}),{"./config":146,"./map/fallback-image":148,"./map/state":151,"./results":191,"./store":195,"./util/browser":145,"./util/format":205,"./util/log":211,"./views":241,"./views/auto-last-update":231,"./views/bare-map":232,"./views/battlegrounds-table":233,"./views/bucket-analysis-table":234,"./views/bucket-toggle":235,"./views/debug":236,"./views/flipped-states":237,"./views/head-to-head":238,"./views/homepage-head-to-head":239,"./views/house-political-lean":240,"./views/interesting-races":243,"./views/legend":244,"./views/live-house-political-lean":245,"./views/map":247,"./views/map-view-toggle":246,"./views/next-update":248,"./views/preview-map":249,"./views/race-summary":250,"./views/race-table":251,"./views/race-update-table":252,"./views/render":253,"./views/results-table":254,"./views/simple-heading":255,"./views/state-highlight-table":256,"./views/vulnerable-seats":257,"mapbox-gl":116,"wapo-shared/util":264}],144:[(function(e,t,r){"use strict";var i=e("global/window"),a=e("xhr"),o=e("url").parse,s=e("../util/log"),l=e("./browser").isOldIE;function n(e,t){var r="object"===typeof e?e:{url:e},n=l(i);n&&n<=9&&(-1!==o(i.location.href).host.indexOf("localhost")&&-1!==r.url.indexOf("topo")?r.useXDR=!1:r.useXDR=!0);a(r,t)}t.exports.getBuffer=n,t.exports.getJSON=function(i,a){n(i,(function(e,t,r){if(e)return a({error:e});try{if((r=JSON.parse(r)).error)return n("API/server error"),a(r);if(t.statusCode<200||t.statusCode>=400)return n("API/server error"),a({statusCode:t.statusCode,error:r})}catch(e){return console.log("ERROR",e),n("Error parsing API response"),a({statusCode:t.statusCode,error:"Error parsing API response",body:r})}return a(null,r);function n(e){s.warn(e,i,t.statusCode,r)}}))},r.getArrayBuffer=function(e,n){var t="object"===typeof e?e:{url:e};return t.responseType="arraybuffer",a(t,(function(e,t,r){!e&&t.statusCode>=200&&t.statusCode<300?n(null,r):n(e||new Error(t.statusCode))}))}}),{"../util/log":211,"./browser":145,"global/window":102,url:19,xhr:137}],145:[(function(e,t,r){"use strict";var n=e("global/window"),i=e("util").isFunction,a=e("../util/log"),o=n.navigator&&n.navigator.hardwareConcurrency;function s(t,e,r){Array.isArray(e)?e.forEach((function(e){return s(t,e,r)})):t.addEventListener?t.addEventListener(e,r):t.attachEvent?t.attachEvent("on"+e,(function(){r.call(t)})):a.warn("Cannot add event listener to",t)}function l(t,e,r){Array.isArray(e)?e.forEach((function(e){return l(t,e,r)})):t.removeEventListener?t.removeEventListener(e,r):t.detachEvent?t.detachEvent("on"+e,r):a.warn("Cannot remove event listener from",t)}function u(e){e.preventDefault()}t.exports.hardwareConcurrency=o>0?Math.ceil(o/2):2,t.exports.addEventListener=s,t.exports.removeEventListener=l,t.exports.once=function(t,e,r){var n=function(){return e.forEach((function(e){return l(t,e,i)}))},i=function(e){r(e),n()};return e.forEach((function(e){return s(t,e,i)})),n},t.exports.isOldIE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};{if(e.navigator&&e.navigator.userAgent){var t=e.navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")&&parseInt(t.split("msie")[1],10)}return!1}},t.exports.preventAnchorClicks=function(e){if(!e.querySelectorAll)return;for(var t=e.querySelectorAll("a"),r=0;r<t.length;r++){var n=t[r];s(n,"click",u)}},t.exports.scrollIntoView=function(e){if(i(e.scrollIntoView))return e.scrollIntoView(!0)},t.exports.URL=n.URL}),{"../util/log":211,"global/window":102,util:134}],146:[(function(w,D,e){(function(a){"use strict";var e=w("global/window"),o=w("url"),t=w("querystring"),r=w("./util/log");if(a.browser&&!a.env.TAP){a.nextTick=null;var n=w("next-tick");a.nextTick=n}w("core-js/es5"),w("core-js/fn/object/assign"),w("core-js/fn/array/from"),w("core-js/fn/array/find");var i="true"===a.env.IS_RUNNING_TESTS?function(){return!0}:w("mapbox-gl").supported,s=w("./live-fixtures"),l=w("./util/string-ends-with"),u=w("./util/is-mobile"),c=w("wapo-shared/util"),p=e&&e.location?t.parse(o.parse(e.location.href).query):{};a.env.DS_QUERY&&Object.assign(p,JSON.parse(a.env.DS_QUERY));var h="prodStable",d="production";/develop/.test(h)?d="develop":/staging/.test(h)&&(d="staging");var f=x("/screenshots/"+d+"/"),m="/assets/prodStable/";m=m?/^http/.test(m)?m:e.location.protocol+x(m):"/";var y=x("/api/v5/"),g={version:h,environment:d,debug:p.debug,scaryproductionoverride:!1,mapboxAccessToken:"pk.eyJ1Ijoid2FzaGluZ3RvbnBvc3QiLCJhIjoiY2lqeGo3b3F4MTFlY3YybTVzOHIyeDRwaiJ9.Zs-HQzwqRgDdDJu_78Z7zQ",webscreenshotter:/is_screenshotter/.test(p.flags),glSupport:i({failIfMajorPerformanceCaveat:!/is_screenshotter/.test(p.flags)}),assets:m,precincts:x("/precincts/races/"),precinctRaceIds:{},precinctFreshnessThreshold:3e5,api:function(e){if("production"===d&&!p.scaryproductionoverride)return y;if(p.ds_production_data)return y;{if(p.ds_test_date&&/^\d+-\d+-\d+$/.test(p.ds_test_date))return x("/tests/"+p.ds_test_date+"/api/v5/");if(g.demoData){var t=g.demoData;return e="number"===typeof e?1+e%t.count:1,x(["fixtures",t.key,"snapshot-"+e,"api/v2/"].join("/"))}return y}},regionTiles:["washingtonpost.2018-election-districts-v1","washingtonpost.2018-election-counties16-v1","washingtonpost.2018-election-states-v1","washingtonpost.2018-election-state-labels-v1","washingtonpost.2018-election-cartogram-v1","washingtonpost.2018-election-centroids-v1","washingtonpost.2018-election-city-labels-v1","washingtonpost.2018-election-senate-special","washingtonpost.2018-election-density"],mercatorTiles:["washingtonpost.2018-election-merc-dist18-v3","washingtonpost.2018-election-merc-counties16-v4","washingtonpost.2018-election-merc-states-v3","washingtonpost.2018-election-merc-state-labels","washingtonpost.2018-election-merc-centroids-v2","washingtonpost.2018-election-merc-citylabels","washingtonpost.2018-election-merc-density"],fallbackImages:f,pollingInterval:3e4,precinctsPollingInterval:6e4,delayExpectations:0,delayHistorical:0,showTimer:!0,annotationThreshold:3e5,featureFlags:p.flags||""};if(g.debug){var v=w("./util/log");v.enableDebugLogs(g.debug),("production"!==d||p.scaryproductionoverride)&&(e.devseed_publiclogger=v.debug)}if("production"!==d||p.scaryproductionoverride){for(var b in p)g.hasOwnProperty(b)&&(g[b]="string"===typeof g[b]?p[b]:JSON.parse(p[b]));if(p.ds_demo_data&&!p.ds_test_date){var _=g.demoData=s[p.ds_demo_data];_._started||(_._started=Date.now(),w("./util/time").pretendTodayIs(_.startTime))}}function x(e,t){var r="//dohdeick6sqa6.cloudfront.net";"v4partner"===h&&(r="//d180enm4uyc3ad.cloudfront.net");var n=(a.browser?"":"http:")+r,i=o.resolve(n,e);return t||l(i,"/")||(i+="/"),i}/disable_house_districts/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-districts16-v2"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-dist16"),r.debug("flags","removing house districts layer due to disable_house_districts")),/disable_state_borders/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-states-v1"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-states"),r.debug("flags","removing state borders layer due to disable_state_borders")),/disable_county_borders/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-counties16-v3"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-counties16"),r.debug("flags","removing county borders layer due to disable_county_borders")),/disable_state_labels/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-state-labels-v4"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-state-labels"),r.debug("flags","removing state labels layer due to disable_state_labels")),/disable_cartogram/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-cartogram-v3"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.ds-2016-election-cartogram-v3"),r.debug("flags","removing cartogram layer due to disable_cartogram")),/disable_centroids/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-centroids-v6"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-centroids"),r.debug("flags","removing centroids layer due to disable_centroids")),/disable_city_labels/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-city-labels-v9"),g.mercatorTiles=c.without(g.mercatorTiles,"washingtonpost.2018-election-merc-citylabels"),r.debug("flags","removing city labels layer due to disable_city_labels")),/disable_density/.test(g.featureFlags)&&(g.regionTiles=c.without(g.regionTiles,"washingtonpost.2018-election-density"),g.mercatorTiles=c.without(g.regionTiles,"washingtonpost.2018-election-merc-density"),r.debug("flags","removing population density layer due to disable_density")),u()&&(/enable_counties/.test(g.featureFlags)?r.debug("flags","enabling counties tiles on mobile due to enable_counties"):g.regionTiles=c.without(g.regionTiles,"washingtonpost.ds-2016-election-counties-v3")),Object.assign(D.exports,g)}).call(this,w("_process"))}),{"./live-fixtures":147,"./util/is-mobile":209,"./util/log":211,"./util/string-ends-with":222,"./util/time":225,_process:18,"core-js/es5":24,"core-js/fn/array/find":25,"core-js/fn/array/from":26,"core-js/fn/object/assign":27,"global/window":102,"mapbox-gl":116,"next-tick":119,querystring:129,url:19,"wapo-shared/util":264}],147:[(function(e,t,r){"use strict";t.exports={"basic-30s":{key:"basic-30s",interval:30,count:22,startTime:"2016-09-09T15:08:34.161Z"},"full-30s":{key:"full-30s",interval:30,count:239,startTime:"2016-10-07T16:55:01.840Z"},thirdparty:{key:"thirdparty",interval:120,count:4,startTime:"2016-10-07T16:55:01.840Z"}}}),{}],148:[(function(r,e,t){"use strict";var i=r("wapo-shared/util");e.exports=function(e,t){if(t)return(n=n||r("../config")).fallbackImages+a(e,t);throw new Error("Missing size argument")},e.exports.buildFallbackPath=a;var n=void 0;function a(e,t){if(!e.mapView)throw new Error("Missing mapView option");if(!e.stateFips)throw new Error("Missing stateFips option");var r=[e.mapView,e.stateFips];/senate/.test(e.mapView)&&(r[1]=""+r[1]+(e.seat||"00"));var n=i.get(e,"bucketSet.slug","");return n&&r.push(i.slugify(n),e.bucket),r=r.join("/")+"@"+t+".png"}}),{"../config":146,"wapo-shared/util":264}],149:[(function(W,e,t){"use strict";var Y=W("url"),Z=W("yo-yo"),X=W("classnames"),$=W("lodash.isequal"),K=W("lodash.throttle"),J=W("next-tick"),Q=W("mapbox-gl"),ee=W("global/document"),te=W("../util/evented"),re=W("wapo-shared/util"),ne=W("../util/log"),ie=W("../app"),ae=W("../util/is-mobile"),oe=W("../util/tooltip"),se=W("../util/button"),le=W("./util"),ue=W("./fallback-image"),ce=W("./views"),r=W("./style"),pe=W("mapbox-gl-multitouch"),he=le.showBackButton,de=le.hideBackButton,fe=W("../config");function me(e){return r(re.extend(ce[e.mapView],{level:le.getLevel(e.mapView,e.stateFips),hovered:e._hovered,stateFips:e.stateFips,bucket:e.bucket,bucketSet:e.bucketSet,showStateLabels:e.showStateLabels,hideOtherStates:e.hideOtherStates,seat:e.seat,data:e.data,smallContainerLayout:e.useSmallContainerLayout}))}function ye(e,t){t&&!ae()?(e.boxZoom.enable(),e.dragPan.enable()):(e.boxZoom.disable(),e.dragPan.disable())}function ge(e){e.stopPropagation()}function ve(e){return e.indexOf("cartogram")>-1}e.exports=function(l,e){var d=void 0,u=!1,t=void 0,f=void 0,m=(function(){W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return ee.createElement("div")})(),y=void 0,c=void 0,p=!0,r=!1,g=!1,h=!1,n=e.useStaticImageOption,v=e.fallbackSize,b=e.aspectRatioMethod,i=e.isAlbers,a=e.initialMapView,o=e.initialStateFips,_=ae()&&!ae.isMobileDesktop(),x=F,s=G,w={_hovered:void 0,_locked:!1,_tooltip:null,_boundsDirty:!1,_showPlaceholder:!0,stateFips:"00",mapView:"empty",bucket:void 0,enableZoom:!0,enableBackButton:!0,showStateLabels:!0,hideOtherStates:!1,isAlbers:i,initialStateFips:o,minZoom:null},D=me(w),S=le.getBBoxes(w.isAlbers,ve(a));for(var R in D.style.sources)R.indexOf("us")>-1&&(D.style.sources[R].tiles=[le.tileUrl("a",le.getTileSlug(w.isAlbers)),le.tileUrl("b",le.getTileSlug(w.isAlbers))]);var P=le.getOfficeIdFromMapView(e.initialMapView),E=(function(){W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=ee.createElement("div");return e.setAttribute("data-race-type",arguments[0]),e.setAttribute("data-office-id",arguments[1]),e.setAttribute("id",arguments[2]),e.setAttribute("class","wpe-mapbox-gl-container"),e})(le.raceTypeFromMapView(e.initialMapView),P,"map-"+l),A=void 0,M=re.extend({render:function(e,t,r){var n=le.useStaticImage(e.useStaticImage),i=void 0;if(i=n&&v?le.customAspectRatio(v):"square"===b?le.customAspectRatio("square"):"fit"===b&&w.initialStateFips?le.aspectRatioForRegion(w.initialStateFips,S,E):le.usAspectRatio(S),!A&&i&&(A=["position: relative","padding-bottom: "+100*i+"%","height: 0"].join("; ")),n)return p&&(window.electionFeaturesLoaded=!0),(function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div");return t.setAttribute("class","wpe-map_fallback_spacer"),e(t,["\n          ",arguments[0],"\n        "]),t})(function(e,t,r,n){var i=le.staticSize(n),a=ue(t,i),o=re.get(t,"data.timestamp","no-map-data");(a+="?t="+o)!==e._fallbackUrl&&(e._fallbackNotFound=!1);return (function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div");t.setAttribute("class","wpe-map_fallback_wrap");var r=ee.createElement("div");return r.setAttribute("data-ds-hash",arguments[0]),r.setAttribute("class","wpe-map_fallback"),e(r,["\n      ",arguments[1],"\n    "]),e(t,["\n    ",r,"\n  "]),t})(e._fallbackUrl=a,a&&!e._fallbackNotFound?(function(){W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=ee.createElement("img");return e.setAttribute("src",arguments[0]),e.onerror=arguments[1],e})(a,r):null)}(w,e,C,v));k(e);var a="00"!==w.stateFips&&w._isSubRegion&&!u,o="wpe-map-wrapper-"+l,s=(function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div"),r=ee.createElement("div");r.setAttribute("class","wpe-map_legend"),e(r,["\n          ",arguments[0],"\n        "]);var n=ee.createElement("div"),i=ee.createElement("div");i.setAttribute("style",arguments[5]),i.setAttribute("class",arguments[6]);var a=ee.createElement("div");a.setAttribute("data-ds-widget","mapbox-gl-js"),e(a,["\n              ",arguments[1],"\n            "]);var o=ee.createElement("div");o.setAttribute("id",arguments[2]),o.setAttribute("class",arguments[3]),e(o,["\n              ",arguments[4],"\n            "]);var s=ee.createElement("span");return s.setAttribute("class","wpe-source"),e(s,["Sources: AP, Mapbox"]),e(i,["\n            ",a,"\n\n            ",o,"\n            ",arguments[7],"\n            ",s,"\n          "]),e(n,["\n          ",i,"\n          ",arguments[8],"\n        "]),e(t,["\n        ",r,"\n        ",arguments[9],"\n        ",n,"\n        ",arguments[10],"\n      "]),t})(t&&r.legend?r.legend.render(e,r.usingStaticImage):null,p?E:null,o,w._showPlaceholder?"wpe-map_placeholder":"",w._showPlaceholder?(function(e,t){t=t.replace(".","_");var r=ue(e,le.staticSize());return (function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div");t.setAttribute("data-ds-hash",arguments[2]),t.setAttribute("class","wpe-map_fallback");var r=ee.createElement("img");return r.setAttribute("id","__MapPlaceholderImg__"+arguments[0]),r.setAttribute("src",arguments[1]),e(t,["\n    ",r,"\n  "]),t})(t,r,r)})(e,l):null,A,X({"wpe-map":!0,"wpe-map_nozoom":!e.enableZoom,"wpe-map_preload":!h,"wpe-map_substate":a},{"wpe-map_mobile":ae()}),c&&w.enableBackButton?c():null,_?m:null,ae()?(function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div");t.setAttribute("class","wpe-pan_prompt");var r=ee.createElement("img");return r.setAttribute("src",arguments[0]),e(t,[r,"Use two fingers to pan around the map.",ee.createElement("br"),"Pinch ",arguments[1]," to zoom."]),t})(Y.resolve(fe.assets,"graphics/icons/two_finger_scroll.svg"),"00"===w.initialStateFips?"or double-tap":""):null,"00"===w.stateFips&&!/cartogram/g.test(w.mapView)&&ee.getElementsByClassName("homepage").length>0?(function(){var e=W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=ee.createElement("div");t.setAttribute("class",arguments[0]);var r=ee.createElement("span");return e(r,["Click on a state to zoom."]),e(t,[r]),t})(X("wpe-hsb_instructions","wpe_click-to-zoom-instruction-homepage")):null);return p&&J(O),p=!1,ne.debugGroup("map-container","container",(function(e){var t=E.getBoundingClientRect();e(t.width,t.height),e(A)})),s},onceDataReady:function(e,t){return le.onDataReady(d,e,t)},_updateMap:k,_resize:function(){ne.debug("map-widget-resize"),d&&d.resize(),T(d,w,!0,S)}},te);return M;function I(e){if(!/Error: (Not Found|404)/.test(e&&e.error)){ne.error(new Error("Map Error").stack,e);try{d.remove()}catch(e){ne.error(e)}d=null,M.fire("error",e.error?e:{error:e})}}function O(){ne.debug("map-widget",l,"container added to DOM"),le.useStaticImage(n)||(function(e){if(r)return ne.warn("initMap called twice");r=!0,ie.maps||(ie.maps={});ne.debug("map-widget",l,"start load"),fe.debug&&ne.debugGroup("map-container","container at load",(function(e){e(E.getBoundingClientRect())}));y=oe({close:function(){B(),k(re.extend(w,{_locked:!1,_tooltip:null}))},zoom:function(e){k(re.set(w,"_locked",!1)),F(e)},tableLimit:_?2:10}).render,c=se({opt:" ",className:"wpe-map-button sf-"+w.stateFips+" hidden",fips:w.stateFips,mapId:l,handler:function(){if(!u){var e=ee.querySelector('.wpe-map-button[data-map-id="'+l+'"]');console.log(e);var t=e.getAttribute("data-reset-fips");de(d),w.stateFips!==t?x(t):ae()&&w.stateFips===t&&T(d,w,!1,S)}}}).render;var t=ie.maps[l]=new Q.Map({container:e,style:D.style,scrollZoom:!1,boxZoom:!0,dragRotate:!1,dragPan:!0,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!0,maxZoom:10,attributionControl:!1,interactive:ae()}).on("load",(function(){ne.debug("map-widget","Map instance loaded; setting up handlers and waiting for first render"),w.useSmallContainerLayout=ae()||t.getContainer().offsetWidth<767,ae()&&t.addControl(new pe.default),t.on("movestart",(function(){ne.debug("map-move","start"),t.getContainer().addEventListener("mousedown",ge,!0),u=!0})),t.on("moveend",(function(e){ne.debug("map-move","stop",t.getCenter(),t.getZoom(),t.getBounds(),e),t.getContainer().removeEventListener("mousedown",ge,!0),u=!1})),t.on("zoomstart",B),t.on("zoomend",(function(){M.fire("zoomend",{zoom:t.getZoom()})})),(d=t).touchZoomRotate.disableRotation(),t.on("moveend",q),t.on("error",I),le.onDataReady(t,(function(){ne.debug("map-widget",l,"init map => data ready"),p?J((function(){M._resize()})):M._resize(),ve(w.mapView)&&!ae()||ye(d,w.enableZoom),M.fire("_map",{_map:t})})),d.on("featureStateUpdated",(function(){w._showPlaceholder&&setTimeout((function(){ne.debug("feature-state","removing placeholder"),h=!0,J((function(){k(re.extend(w,{_showPlaceholder:!1})),M._resize()})),M.fire("featureStateUpdated")}),20)}))}))})(E)}function C(e){w._fallbackNotFound=!0;var t=re.getWithInherited(e,"target.parentNode");t&&t.removeChild(e.target)}function T(e,t,r,n,i){if(e&&t.stateFips){var a=(r=r||t._immediate)?{animate:!1}:{};setTimeout((function(){le.fitRegion(e,t.stateFips,a,n,i)}),50)}}function k(t,e){ne.debugGroup("map-render","map render",(function(e){e("prev",w),e("next",t)}));var r,n,i,a=ce[t.mapView],o=!g||e,s=!1,l=!1,u=!1;if(t.mapView!==w.mapView&&(o=!0),t.data!==w.data&&(o=!0),t.showStateLabels!==w.showStateLabels&&(o=!0),t.hideOtherStates!==w.hideOtherStates&&(o=!0),t.bucketSet===w.bucketSet&&t.bucket===w.bucket||(o=!0),t.stateFips!==w.stateFips&&(o=s=!0),t.mapView!==w.mapView&&(ve(w.mapView)||ve(t.mapView))&&(U(w._hovered),o=u=!0),d&&t._tooltip&&t._tooltip!==w._tooltip?(ne.debug("map-tooltip-update",t._tooltip,w._tooltip),r=t._tooltip,n=D.tooltipData(a.officeId,t.results,t._tooltip,le.raceTypeFromMapView(t.mapView),t._hoveredSeat,a.comparePresidential),(i=re.extend({id:r},n)).title?(Z.update(m,y(i)),_||(f||(f=new Q.Popup({closeButton:!1,closeOnClick:!1})),f.addTo(d)).setDOMContent(m)):H()):_&&t.stateFips!==w.stateFips?"00"===t.stateFips&&H():_&&w._tooltip&&t.mapView!==w.mapView?H():t._tooltip||"undefined"===typeof t._tooltip||H(),t.mapView!==w.mapView&&(l=!0),Object.assign(w,t),d&&o){var c=D.style,p=D.interactiveLayers;if(D=me(w),ne.debug("map-style","Updating style",c,D),le.updateStyle(d,D.style),w.style=D.style,!l&&$(p,D.interactiveLayers)||(!ve(w.mapView)||ae()?ye(d,!0):ye(d,!1),U(w._hovered),N(d,D)),d&&s){var h=void 0;"00"!==w.stateFips&&(h=!0),T(d,w,!1,S,h)}d&&u&&(S=le.getBBoxes(w.isAlbers,ve(w.mapView)),d.off("zoomend",L),V(d,null),de(d),U(w._hovered),setTimeout((function(){le.fitRegion(d,"00",{animate:!1},S),V(d,d.getBounds()),d.on("zoomend",L)}),50)),g||"empty"===w.mapView||(g=!0,le.onDataReady(d,(function(){ne.debug("map-widget","firing load event"),M.fire("load"),N(d,D),setTimeout((function(){V(d,d.getBounds()),d.on("zoomend",L)}),60)}),!0))}return{didUpdateStyle:!1,didChangeLocation:s}}function L(){var e=d.getZoom(),t=d.getMinZoom();Math.abs(t-e)>.001?he(d):de(d)}function N(n,e){n.off("mousemove"),n.off("mouseleave"),n.off("click"),n.off("touchstart"),n.on("click",j),e.interactiveLayers.forEach((function(l){var u=null,i=null,a=!1,o=!1;function c(e){B(l)}function p(){u=null}function r(){o=null}ae()&&(n.on("click",j),window.addEventListener("scroll",K((function(){w._hovered&&B()}),100))),ae()?(n.off("touchstart",l),n.off("touchend",l),n.off("touchmove",l),z(l,w.mapView,w.hideOtherStates)&&(a=!0,n.on("touchstart",l,(function(e){var t,r,n,i,a=e.originalEvent,o=e.features[0],s=o.properties.id;a.touches&&1===a.touches.length&&(u=u?(clearTimeout(u),t=s,r=o,n=e,i=l,c(),x(n.features[0].properties.id),setTimeout((function(){G(t,r,n,i)}),500),null):setTimeout(p,300))}))),n.on("touchend",l,(function(e){var t=e.originalEvent,r=e.features[0],n=r.properties.id;t.preventDefault(),t.changedTouches&&1===t.changedTouches.length&&!o&&(a?i=i?(clearTimeout(i),null):setTimeout((function(){G(n,r,e,l),i=null}),300):G(n,r,e,l)),clearTimeout(o)})),n.on("touchmove",l,K((function(e){var t=e.originalEvent;o=setTimeout(r,300),t.touches&&2===t.touches.length&&w._hovered&&B()}),100))):(z(l,w.mapView,w.hideOtherStates)&&(n.off("click",l),n.on("click",l,(function(e){c(),w.stateFips!==e.features[0].properties.id&&x(e.features[0].properties.id)}))),n.off("mousemove",l),n.on("mousemove",l,K((function(e){if(n.getCanvas().style.cursor="pointer",e.features){var t=e.features[0];G(t.properties.id,t,e,l)}}),16)),n.off("mouseleave",l),n.on("mouseleave",l,K(c,16)))}))}function z(e,t,r){return-1===e.indexOf("senate-special")&&-1===t.indexOf("cartogram")&&!1===r}function j(e){var t=d.queryRenderedFeatures(e.point);0===t.length&&B(),t.forEach((function(e){console.log(e)}))}function F(e){e&&(B(),M.fire("navigate",{id:e}))}function V(e,t){if(e){var r=t?e.getZoom():null;e.setMaxBounds(t),e.setMinZoom(r)}}function G(e,t,r,n){if(!w._locked&&(ne.debug("map-hover",e),e)){if(e!==w._hovered){var i=d.getLayer(n).sourceLayer,a=t.properties.seatNum?t.properties.seatNum:w.seat;w._hovered&&U(w._hovered),d.setFeatureState({source:"us",sourceLayer:i,id:+e},{hover:!0}),d.setFeatureState({source:"us",sourceLayer:i+"-centroids",id:+e},{hover:!0});var o={_hovered:e,_tooltip:e,_hoveredSeat:a};k(re.extend(w,o))}r.lngLat&&f&&f.setLngLat(r.lngLat)}}function B(e){w._hovered&&U(w._hovered),k(re.extend(w,{_hovered:null,_tooltip:null}))}function U(r){d&&D.interactiveLayers&&w._hovered&&D.interactiveLayers.forEach((function(e){var t=d.getLayer(e).sourceLayer;d.setFeatureState({source:"us",sourceLayer:t,id:+r},{hover:!1}),d.setFeatureState({source:"us",sourceLayer:t+"-centroids",id:+r},{hover:!1})}))}function H(){f?f.remove():Z.update(m,(function(){W("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=ee.createElement("div");return e.setAttribute("style","display:none;"),e})())}function q(){w.mapView&&k(re.set(w,"_locked",!1)),t&&(t.lnglat=d.unproject(t.point),le.onDataReady(d,(function(){s()})))}}}),{"../app":143,"../config":146,"../util/button":199,"../util/evented":203,"../util/is-mobile":209,"../util/log":211,"../util/tooltip":228,"./fallback-image":148,"./style":153,"./util":170,"./views":175,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"global/document":101,"lodash.isequal":109,"lodash.throttle":112,"mapbox-gl":116,"mapbox-gl-multitouch":115,"next-tick":119,url:19,"wapo-shared/util":264,"yo-yo":140}],150:[(function(e,t,r){"use strict";var n={us:{type:"vector",minzoom:0,maxzoom:14,tiles:[]},"maine-split":{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{statePostal:"ME",fips:"23",id:"23-3"},geometry:{type:"Polygon",coordinates:[[[30.28479834624131,17.949819280007993],[29.2165503682085,16.930770896316194],[30.28479834624131,15.90609880557358],[31.352966746802565,16.930770896316194],[30.28479834624131,17.949819280007993]]]},bbox:[29.2165503682085,15.90609880557358,31.352966746802565,17.949819280007993]}]}}};t.exports=n}),{}],151:[(function(e,t,r){"use strict";var n=e("../store"),i=e("wapo-shared/util"),a=e("../util/format"),o=e("../views/instance"),s=["bucketGroup","mapViewGroup","navigationGroup"];function l(t,r){return s.map((function(e){return r[e]})).filter((function(e){return e&&e!==t}))}function u(e){var t={initalStateFips:e.initialStateFips||"00",stateFips:e.initialStateFips||"00",mapView:e.initialMapView||"historical-president-states",tooltip:!1,bucket:e.bucket,bucketSet:e.bucketSet,enableZoom:a.defaults(e.enableZoom,!0),enableBackButton:a.defaults(e.enableBackButton,!0),showStateLabels:a.defaults(e.showStateLabels,!0),hideOtherStates:a.defaults(e.hideOtherStates,!1),useStaticImage:e.useStaticImage,fallbackGroup:e.fallbackGroup,seat:e.seat,electionDate:e.electionDate,bucketGroup:e.bucketGroup,mapViewGroup:e.mapViewGroup,navigationGroup:e.navigationGroup};return t.enableZoom||(t.enableBackButton=!1),t}n.model({namespace:"map",state:{instances:{}},reducers:{initOrUpdate:o.initOrUpdate((function(e,t){var r=u(e);return t.keys?i.pick(r,s.concat(t.keys)):r})),destroy:function(e,t){var r=[["instances",e.id]].concat(function(e,r){var n=[],t=function(t){if(t===e)return"continue";l(t,r[t]).filter((function(e){return t!==e})).forEach((function(e){return n.push(e)}))};for(var i in r)t(i);return l(e,r[e]).filter((function(e){return n.indexOf(e)<0}))}(e.id,t.instances).map((function(e){return["instances",e]})));return i.omit(t,r)},setStateFips:o.reducer((function(e,t){return i.set(t,"stateFips",e.stateFips)})),setMapView:o.reducer((function(e,t){return i.set(t,"mapView",e.mapView)})),setBucketSet:o.reducer((function(e,t){return i.set(t,"bucketSet",e.bucketSet)})),setZoom:o.reducer((function(e,t){return i.set(t,"zoom",e.zoom)})),setStyle:o.reducer((function(e,t){return i.set(t,"style",e.style)})),setUseStaticImage:o.reducer((function(e,t){return i.set(t,"useStaticImage",e.useStaticImage)}))}}),t.exports.normalize=u}),{"../store":195,"../util/format":205,"../views/instance":242,"wapo-shared/util":264}],152:[(function(e,t,r){"use strict";t.exports.colors={background:"hsla(0, 0%, 0%, 0)",hatchBase:"#ffffff",noResults:"#d8d8d8",noRace:"#fafafa",filtered:"#e4dfd8",republican_0:"#dc5147",republican_1:"#de7c7d",republican_2:"#e9c5c5",second_rep_0:"#AA76AD",second_rep_1:"#D8B3D4",democrat_0:"#3579a8",democrat_1:"#559dbe",democrat_2:"#b4d5e5",second_dem_0:"#AA76AD",second_dem_1:"#D8B3D4",libertarian_0:"#fccc31",libertarian_1:"#FDDA66",libertarian_2:"#fde79b",greenparty_0:"#759b47",greenparty_1:"#9db275",greenparty_2:"#cbd8b7",independent_0:"#f7931d",independent_1:"#fcbb75",independent_2:"#fdd0a7",tossup_0:"#A4A3A4",tossup_1:"#555656",tossup_2:"#d4bbd7",lightBorder:"hsla(0, 0%, 98%, 0.55)",border:"hsl(0, 0%, 100%)",borderShadow:"rgba(0, 0, 0, 0.3)",borderDarker:"rgba(33, 33, 33, 0.5)",label:"#000000",cityLabel:"#000000",labelCallout:"#6e6e6e",labelLine:"hsl(0, 0%, 84%)",failure:"#ee00ee",primary_rep_0:"#d53e4f",primary_rep_1:"#ee00ee",primary_rep_2:"#fdae61",primary_rep_3:"#fee08b",primary_rep_4:"#ffffbf",primary_rep_5:"#e6f598",primary_rep_6:"#abdda4",primary_rep_7:"#66c2a5",primary_rep_8:"#3288bd",primary_rep_9:"#aa00aa",primary_rep_10:"#660066",primary_rep_11:"#aa0066",primary_rep_12:"#aa6666",primary_rep_13:"#9933aa",primary_dem_0:"#3288bd",primary_dem_1:"#66c2a5",primary_dem_2:"#abdda4",primary_dem_3:"#e6f598",primary_dem_4:"#ffffbf",primary_dem_5:"#fee08b",primary_dem_6:"#fdae61",primary_dem_7:"#f46d43",primary_dem_8:"#d53e4f",primary_dem_9:"#6600aa",primary_dem_10:"#66aa00",primary_dem_11:"#aaaa66",primary_dem_12:"#003366",primary_dem_13:"#aa3311",primary_rep_incumbent_won:"#DB534C",primary_rep_incumbent_lead:"#E5B1B1",primary_rep_challenger1_won:"#AA76AD",primary_rep_challenger1_lead:"#D8B3D4",primary_rep_challenger2_won:"#DD8A37",primary_rep_challenger2_lead:"#DDAC7F",primary_rep_challenger3_won:"#DBC035",primary_rep_challenger3_lead:"#DDCD8C",primary_rep_other_won:"#846C61",primary_rep_other_lead:"#BDA18C",primary_dem_incumbent_won:"#377AA7",primary_dem_incumbent_lead:"#B6D6E5",primary_dem_challenger1_won:"#7FAA40",primary_dem_challenger1_lead:"#B5CE8C",primary_dem_challenger2_won:"#8592A3",primary_dem_challenger2_lead:"#A6B1BA",primary_dem_challenger3_won:"#3A6753",primary_dem_challenger3_lead:"#81998E",primary_dem_other_won:"#737C4C",primary_dem_other_lead:"#B4BC91"},t.exports.circles={color:"#fefefe",radius:3.75,blur:.5,innerColor:"#444444",innerRadius:2.25},t.exports.halo={color:"rgba(255, 255, 255, 0.8)",width:1,blur:1},t.exports.haloCity={color:"rgba(255, 255, 255, 0.8)",width:1,blur:1},t.exports.hatches={blue:"line-blue",red:"line-red",purple:"line-purple",green:"line-green",lightblue:"line-lightblue",lightred:"line-lightred"},t.exports.opacity={mid:.5,light:.2};t.exports.borderWidths={default:{border:{base:1,stops:[[2,.8],[6,.75],[22,6.5]]},borderHover:1.5,borderShadow:3},lighter:{border:{base:1,stops:[[2,.6],[7,.75],[22,4]]},borderHover:1,borderShadow:2},thicker:{border:{base:1,stops:[[2,1],[6,3],[22,8]]},borderHover:1.5,borderShadow:3.5},callout:{border:{base:1,stops:[[2,1.75],[6,3.5],[22,10]]},borderHover:3.5,borderShadow:4.5},selected:{border:3,borderHover:2.5,borderShadow:3},cartogram:{border:1.5}},t.exports.textSize={label:{base:.5,stops:[[0,10],[1,10],[1.9,10],[3,16],[6,18]]},city:{base:.5,stops:[[0,0],[2.9,0],[3,12],[5,14],[6,14],[9,14]]},annotation:["interpolate",["linear"],["zoom"],1,6,2,9,3,12,5,14],mobile:["interpolate",["linear"],["zoom"],1,8,2,9,3,11,5,14],cartogramMobile:["interpolate",["linear"],["zoom"],1,8,2,8,3,10,5,12]},t.exports.font={label:["FranklinITCPro-Light Regular","DIN Offc Pro Cond"]},t.exports.shadow={blur:2,translate:[2,2]},t.exports.shiftStops=[.01,.05,.1,.15,.2],t.exports.shiftIcons={dem:[],rep:[]},t.exports.colorStops={default:{Dem:r.colors.democrat_0,GOP:r.colors.republican_0,Lib:r.colors.libertarian_0,Grn:r.colors.greenparty_0,Ind:r.colors.independent_0,tossup:r.colors.tossup_0,"safe-GOP":r.colors.republican_1,"safe-Dem":r.colors.democrat_1,"safe-Lib":r.colors.libertarian_1,"safe-Grn":r.colors.greenparty_1,"safe-Ind":r.colors.independent_1,"lean-GOP":r.colors.republican_2,"lean-Dem":r.colors.democrat_2,"lean-Lib":r.colors.libertarian_2,"lean-Grn":r.colors.greenparty_2,"lean-Ind":r.colors.independent_2},solid:{"won-GOP":r.colors.republican_0,"won-second-GOP":r.colors.second_rep_0,"won-Dem":r.colors.democrat_0,"won-second-Dem":r.colors.second_dem_0,"won-Lib":r.colors.libertarian_0,"won-Grn":r.colors.greenparty_0,"won-Ind":r.colors.independent_0,"leading-GOP":r.colors.republican_2,"leading-second-GOP":r.colors.second_rep_1,"leading-Dem":r.colors.democrat_2,"leading-second-Dem":r.colors.second_dem_1,"leading-Lib":r.colors.libertarian_2,"leading-Grn":r.colors.greenparty_2,"leading-Ind":r.colors.independent_2,"tied-finished":r.colors.tossup_1,"tied-in-progress":r.colors.tossup_0},margins:{"won-GOP":r.colors.republican_0,"won-second-GOP":r.colors.second_rep_0,"won-Dem":r.colors.democrat_0,"won-second-Dem":r.colors.second_dem_0,"tied-in-progress":r.colors.tossup_0,"tied-finished":r.colors.tossup_1,"won-Lib":r.colors.libertarian_0,"won-Grn":r.colors.greenparty_0,"won-Ind":r.colors.independent_0,"leading-GOP":"#dba0a0","leading-Dem":"#8ec0d8","leading-second-GOP":r.colors.second_rep_1,"leading-second-Dem":r.colors.second_dem_1,"leading-Lib":r.colors.libertarian_2,"leading-Grn":r.colors.greenparty_2,"leading-Ind":r.colors.independent_2},hatched:{"lean-GOP":r.hatches.lightred,"lean-Dem":r.hatches.lightblue,"safe-GOP":r.hatches.lightred,"safe-Dem":r.hatches.lightblue,tossup:r.hatches.purple},primaryColors:{"tied-in-progress":r.colors.tossup_0,"tied-finished":r.colors.tossup_1,noResults:r.colors.noResults,"no-results-yet":r.colors.noResults,"not-yet-reporting":r.colors.noResults,failure:r.colors.failure,"primary-rep-incumbent-won":r.colors.primary_rep_incumbent_won,"primary-rep-incumbent-lead":r.colors.primary_rep_incumbent_lead,"primary-rep-challenger1-won":r.colors.primary_rep_challenger1_won,"primary-rep-challenger1-lead":r.colors.primary_rep_challenger1_lead,"primary-rep-challenger2-won":r.colors.primary_rep_challenger2_won,"primary-rep-challenger2-lead":r.colors.primary_rep_challenger2_lead,"primary-rep-challenger3-won":r.colors.primary_rep_challenger3_won,"primary-rep-challenger3-lead":r.colors.primary_rep_challenger3_lead,"primary-rep-other-won":r.colors.primary_rep_other_won,"primary-rep-other-lead":r.colors.primary_rep_other_lead,"primary-dem-incumbent-won":r.colors.primary_dem_incumbent_won,"primary-dem-incumbent-lead":r.colors.primary_dem_incumbent_lead,"primary-dem-challenger1-won":r.colors.primary_dem_challenger1_won,"primary-dem-challenger1-lead":r.colors.primary_dem_challenger1_lead,"primary-dem-challenger2-won":r.colors.primary_dem_challenger2_won,"primary-dem-challenger2-lead":r.colors.primary_dem_challenger2_lead,"primary-dem-challenger3-won":r.colors.primary_dem_challenger3_won,"primary-dem-challenger3-lead":r.colors.primary_dem_challenger3_lead,"primary-dem-other-won":r.colors.primary_dem_other_won,"primary-dem-other-lead":r.colors.primary_dem_other_lead},primaryRepublican:{failure:r.colors.failure,tied:r.colors.tossup_0,noResults:r.colors.noResults,"primary-rep-0":r.colors.primary_rep_0,"primary-rep-1":r.colors.primary_rep_1,"primary-rep-2":r.colors.primary_rep_2,"primary-rep-3":r.colors.primary_rep_3,"primary-rep-4":r.colors.primary_rep_4,"primary-rep-5":r.colors.primary_rep_5,"primary-rep-6":r.colors.primary_rep_6,"primary-rep-7":r.colors.primary_rep_7,"primary-rep-8":r.colors.primary_rep_8,"primary-rep-9":r.colors.primary_rep_9,"primary-rep-10":r.colors.primary_rep_10,"primary-rep-11":r.colors.primary_rep_11,"primary-rep-12":r.colors.primary_rep_12,"primary-rep-13":r.colors.primary_rep_13},primaryDemocrat:{failure:r.colors.failure,tied:r.colors.tossup_0,noResults:r.colors.noResults,"primary-dem-0":r.colors.primary_dem_0,"primary-dem-1":r.colors.primary_dem_1,"primary-dem-2":r.colors.primary_dem_2,"primary-dem-3":r.colors.primary_dem_3,"primary-dem-4":r.colors.primary_dem_4,"primary-dem-5":r.colors.primary_dem_5,"primary-dem-6":r.colors.primary_dem_6,"primary-dem-7":r.colors.primary_dem_7,"primary-dem-8":r.colors.primary_dem_8,"primary-dem-9":r.colors.primary_dem_9,"primary-dem-10":r.colors.primary_dem_10,"primary-dem-11":r.colors.primary_dem_11,"primary-dem-12":r.colors.primary_dem_12,"primary-dem-13":r.colors.primary_dem_13}}}),{}],153:[(function(e,t,r){"use strict";var i=e("url"),a=(e("path"),e("wapo-shared/util")),p=e("wapo-shared/race-helpers").fips,h=(e("../../util/is-mobile"),e("../../util/string-ends-with")),o=e("../sources"),d=e("../util").createTargetFilter,f=e("../util").createBucketFilter,m=e("../util").pushLayerFilters,y=e("../util").pushLayerOpacityFilters,g=e("../util").isDetailSolidLayer,v=e("../util").isDetailCentroidsLayer,b=e("../util").isDetailBordersLayer,_=e("../util").isStateBordersLayer,x=e("../util").checkSenateSeat,w=e("../util").invertFilter,D=e("../../config"),S={arrow:e("./layers/arrow.js"),background:e("./layers/background.js"),"border-shadow":e("./layers/border-shadow.js"),borders:e("./layers/borders.js"),"cartogram-labels":e("./layers/cartogram-labels.js"),circle:e("./layers/circle.js"),"city-labels":e("./layers/city-labels.js"),density:e("./layers/density.js"),excluded:e("./layers/excluded.js"),hatched:e("./layers/hatched.js"),icon:e("./layers/icon.js"),maine:e("./layers/maine.js"),"national-boundary":e("./layers/national-boundary.js"),"senate-special":e("./layers/senate-special.js"),solid:e("./layers/solid.js"),"state-labels":e("./layers/state-labels.js")},R=JSON.stringify(["==","id","NOPE"]);e("../../util/log");t.exports=function(s){var l=[],u=a.pick(s,["level","stateFips","hovered"]);u.bucketFilter=f(s.bucketSet,s.bucket);var n=!1;for(var e in s.data)if(5===e.length&&s.data[e]){n=!0;break}var c=u.level;"counties"!==c||n||(c="states");var t=s.layers.map((function(e){var o=Array.isArray(e)?e[0]:e,t=Array.isArray(e)?e[1]:{};if(/state-labels/.test(o)&&!s.showStateLabels)return!1;if(s.hideOtherStates&&/national/.test(o))return!1;var r=Object.assign({},t);return r=x(r,s),S[o].call(null,r,s).filter((function(e){return(!!n||!/counties|precincts/.test(e["source-layer"]))&&(E(e,"national")?p.isNatl(s.stateFips):E(e,"state")?p.isState(s.stateFips):!E(e,"level\\(.*\\)")||E(e,"level\\("+c+"\\)"))})).map((function(e){if(E(e,"included"))u.bucketFilter&&y(e,[].concat(u.bucketFilter));else if(E(e,"excluded")){if(!u.bucketFilter)return!1;y(e,w(u.bucketFilter))}if(s.hideOtherStates){if(/states/.test(e.id)&&!_(e))return!1;if(/:excluded/.test(e.id))return!1;if(g(e)||v(e)||b(e)||_(e)){var t=d(e,c,u.stateFips);m(e,t)}else if("citylabels"===e["source-layer"]){var r=d(e,c,u.stateFips);m(e,r)}else if(/density/.test(e.id)){var n=d(e,c,u.stateFips);m(e,n)}else if(/-callout-label/.test(e.id)||/callout-lines/.test(e.id)||/state-labels/.test(e.id))return!1}var i=P.test(e.id);if(s.interactiveLayers.indexOf(o)>=0&&!h(e.id,":hover")&&("districts"===s.level?e.id.indexOf(s.level)>-1&&l.push(e.id):i||l.push(e.id)),(E(e,"target")||E(e,"non-target"))&&"districts"!==c){var a=d(e,c,u.stateFips);m(e,a),JSON.stringify(a)===R&&(e.layout=e.layout||{},e.layout.visibility="none")}return e})).filter(Boolean)})).filter(Boolean),r=a.flatten(t);return{style:{version:8,name:"WaPo Election Map",sprite:i.resolve(D.assets,"graphics/sprites/sprites"),glyphs:"mapbox://fonts/washingtonpost/{fontstack}/{range}.pbf",sources:o,layers:r},interactiveLayers:l,tooltipData:s.tooltipData,bucketFilter:u.bucketFilter}};var P=/(anno)|(state\-labels)|(callout\-lines)|(special\-base)|(special\-states(\-callouts|\-labels))/,n={};function E(e,t){return"string"!==typeof e&&(e=e.id),n[t]||(n[t]=new RegExp(":"+t+"([^a-z]|$)")),n[t].test(e)}}),{"../../config":146,"../../util/is-mobile":209,"../../util/log":211,"../../util/string-ends-with":222,"../sources":150,"../util":170,"./layers/arrow.js":154,"./layers/background.js":155,"./layers/border-shadow.js":156,"./layers/borders.js":157,"./layers/cartogram-labels.js":158,"./layers/circle.js":159,"./layers/city-labels.js":160,"./layers/density.js":161,"./layers/excluded.js":162,"./layers/hatched.js":163,"./layers/icon.js":164,"./layers/maine.js":165,"./layers/national-boundary.js":166,"./layers/senate-special.js":167,"./layers/solid.js":168,"./layers/state-labels.js":169,path:124,url:19,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],154:[(function(e,t,r){"use strict";var n=e("../constants"),f=e("../../util").pushLayerOpacityFilters,m=n.shiftStops;t.exports=function(t,e){for(var r=t.property,n=t.sourceLayer,i=[r,n,"arrow"].join("-"),a=t.suffix||"",o=[],s=[],l=0;l<m.length;l++){var u=void 0,c=void 0;c=l<m.length-1?(u=["all",["!=",["feature-state",r],null],[">=",["number",["feature-state",r]],m[l]],["<",["number",["feature-state",r]],m[l+1]]],["all",["!=",["feature-state",r],null],["<=",["number",["feature-state",r]],-m[l]],[">",["number",["feature-state",r]],-m[l+1]]]):(u=["all",["!=",["feature-state",r],null],[">=",["number",["feature-state",r]],m[l]]],["all",["!=",["feature-state",r],null],["<",["number",["feature-state",r]],-m[l]]]);var p={id:i+"rep-gains-"+l+a,type:"symbol",source:"us","source-layer":n,layout:{"icon-image":"election-arrows-rep-0"+[l+1],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":"left"},paint:{"icon-opacity":0,"text-opacity":0}},h={id:i+"dem-gains-"+l+a,type:"symbol",source:"us","source-layer":n,layout:{"icon-image":"election-arrows-dem-0"+[l+1],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":"right"},paint:{"icon-opacity":0,"text-opacity":0}};f(p,u),f(h,c),o.push(p),s.push(h)}var d=[].concat(o,s);return t.filter&&d.forEach((function(e){e.filter=t.filter})),d}}),{"../../util":170,"../constants":152}],155:[(function(e,t,r){"use strict";var n=e("../constants");t.exports=function(e){return[{id:"background",type:"background",paint:{"background-color":n.colors.background}}]}}),{"../constants":152}],156:[(function(e,t,r){"use strict";var s=e("../../../util/is-mobile");t.exports=function(e,t){var r=e.sourceLayer+"--shadow",n=e.suffix||"",i=e.minzoom||0,a=e.filter||null,o=[{id:r+"--shadow"+n,type:"fill",source:"us","source-layer":e.sourceLayer,minzoom:i,paint:{"fill-color":"rgba(0, 0, 0, 0.4)","fill-translate":s()?[1,2]:[1.5,3]}}];return a&&o.forEach((function(e){e.filter=a})),o}}),{"../../../util/is-mobile":209}],157:[(function(e,t,r){"use strict";e("../../../config");t.exports=function(e,t){var r=e.sourceLayer,n=r+"--borders",i=e.suffix||"",a=/:hover/.test(i),o=a?e.borderWidth.borderHover:e.borderWidth.border,s=e.borderColor||"#333333",l=void 0;l=e.borderOpacity?e.borderOpacity:a?1:.1;var u=e.minzoom||0,c=e.filter||null,p={id:n+i,type:"line",source:"us","source-layer":r,minzoom:u,paint:{"line-color":s,"line-opacity":l,"line-width":o}};return a&&(p.paint["line-opacity"]=["case",["boolean",["feature-state","hover"],!1],l,0]),c&&(p.filter=c),[p]}}),{"../../../config":146}],158:[(function(e,t,r){"use strict";var n=e("../../style/constants"),i={"text-color":n.colors.label,"text-halo-color":n.halo.color,"text-halo-width":n.halo.width,"text-halo-blur":n.halo.blur};t.exports=function(e,t){var r=t.smallContainerLayout;return[{id:"cartogram--label",type:"symbol",source:"us","source-layer":"cartolabels",paint:i,layout:{"text-allow-overlap":!0,"text-ignore-placement":!0,"text-field":r?"{statePostal}":"{text}","text-size":r?n.textSize.cartogramMobile:n.textSize.label,"text-font":n.font.label,"text-anchor":"left","text-letter-spacing":.05,"text-offset":r?[.25,-.3]:[0,-.25]}}]}}),{"../../style/constants":152}],159:[(function(e,t,r){"use strict";var m=e("wapo-shared/util"),y=e("../../util").pushLayerOpacityFilters,g=e("../constants");t.exports=function(t,e){var r="S"===e.officeId?"."+e.seat:"",n=t.sizeProperty+r+".marginOfWinVotes",i=t.colorProperty+r+".status",a=(e.hideOtherStates,t.sourceLayer),o=[n,i,a,"circle"].join("-"),s=t.suffix||"",l=/:hover/.test(s),u=(function(e){var t=void 0;t=e.indexOf("states")>-1?2e7:1e6;return[0,t]})(t.sourceLayer),c=t.defaultColor||g.colors.noResults,p=m.entries(t.colors).concat([["default",g.colors.noResults]]),h={id:o+":included"+s,type:"circle",source:"us","source-layer":a,paint:{"circle-opacity":.3,"circle-color":b(i,p,c),"circle-radius":v(n,u),"circle-stroke-color":b(i,p,c),"circle-stroke-width":1,"circle-stroke-opacity":.9}},d=[h];l&&(h.paint["circle-radius"]=v(n,u),h.paint["circle-color"]=g.colors.border,h.paint["circle-opacity"]=["case",["boolean",["feature-state","hover"],!1],.4,0],h.paint["circle-stroke-opacity"]=["case",["boolean",["feature-state","hover"],!1],1,0],h.paint["circle-stroke-width"]=2);t.filter&&d.forEach((function(e){e.filter=t.filter}));var f=["any"];Object.keys(t.colors).forEach((function(e){f.push(["==",["feature-state",i],e])})),y(h,f),t.opacityFilter&&d.forEach((function(e){y(e,t.opacityFilter)}));return d},t.exports.MAX_VALUE=1e9;var v=function(e,t){return["interpolate",["linear"],["zoom"],3,["interpolate",["linear"],["/",["sqrt",["/",["coalesce",["feature-state",e],0],Math.PI]],["sqrt",["/",t[1],Math.PI]]],0,0,1,10],5,["interpolate",["linear"],["/",["sqrt",["/",["coalesce",["feature-state",e],0],Math.PI]],["sqrt",["/",t[1],Math.PI]]],0,0,1,75]]},b=function(e,t,r){for(var n=["case"],i=0;i<t.length;i++){var a=t[i];n.push(["==",["feature-state",e],a[0]]),n.push(a[1])}return n.push(r),n}}),{"../../util":170,"../constants":152,"wapo-shared/util":264}],160:[(function(e,t,r){"use strict";var s=e("../../style/constants"),l=e("wapo-shared/util"),u=e("../../util").pushLayerFilters,c=4,p=[4,9],h=[0,-.8],d=[.4,-.4],f=[-.4,-.4],m=[.45,-.55],y=[-.45,-.55],g=[0,1],n={"text-color":s.colors.cityLabel,"text-halo-color":s.haloCity.color,"text-halo-width":s.haloCity.width,"text-halo-blur":s.haloCity.blur},v=function(e,t){return{id:e.id,type:"symbol",source:"us","source-layer":"citylabels",minzoom:e.minzoom,maxzoom:e.maxzoom,paint:n,layout:{"text-allow-overlap":!1,"text-ignore-placement":!1,"text-field":"{name}","text-size":e.textSize,"text-font":s.font.label,"text-anchor":e.anchor,"text-offset":e.offset,"text-letter-spacing":.02,"icon-optional":!1,"icon-text-fit":"none","icon-image":e.icon,"icon-size":.75},filter:["all"].concat(e.filter)}};t.exports=function(t,e){var r=["==","capital",!0],n=["==","national",1],i=["all",["==","visible",1],["!=","capital",!0]],a=(isNaN(t.minzoom)||t.minzoom,[{id:"allcities--labels--bottom",textSize:s.textSize.city,anchor:"center",offset:g,minzoom:c,maxzoom:14,filter:[i,["==","align","bottom"]],icon:"city-dot"},{id:"allcities--labels--center",textSize:s.textSize.city,anchor:"center",offset:h,minzoom:c,maxzoom:14,filter:[i,["==","align","center"]],icon:"city-dot"},{id:"allcities--labels--left",textSize:s.textSize.city,anchor:"left",offset:d,minzoom:c,maxzoom:14,filter:[i,["==","align","left"]],icon:"city-dot"},{id:"allcities--labels--right",textSize:s.textSize.city,anchor:"right",offset:f,minzoom:c,maxzoom:14,filter:[i,["==","align","right"]],icon:"city-dot"},{id:"allcities--labels--default",textSize:s.textSize.city,anchor:"left",offset:d,minzoom:c,maxzoom:14,filter:[i,["!has","align"]],icon:"city-dot"},{id:"capital--labels--bottom",anchor:"center",textSize:s.textSize.city,offset:g,minzoom:c,maxzoom:14,filter:[r,["==","align","bottom"]],icon:"capital-dot"},{id:"capital--labels--center",anchor:"center",textSize:s.textSize.city,offset:h,minzoom:c,maxzoom:14,filter:[r,["==","align","center"]],icon:"capital-dot"},{id:"capital--labels--left",anchor:"left",textSize:s.textSize.city,offset:m,minzoom:c,maxzoom:14,filter:[r,["==","align","left"]],icon:"capital-dot"},{id:"capital--labels--right",anchor:"right",textSize:s.textSize.city,offset:y,minzoom:c,maxzoom:14,filter:[r,["==","align","right"]],icon:"capital-dot"},{id:"capital--labels--default",anchor:"left",textSize:s.textSize.city,offset:m,minzoom:c,maxzoom:14,filter:[r,["!has","align"]],icon:"capital-dot"},{id:"largecity--labels--bottom",textSize:s.textSize.city,anchor:"center",offset:g,minzoom:p[0],maxzoom:c,filter:[n,["==","align","bottom"]],icon:"city-dot"},{id:"largecity--labels--center",textSize:s.textSize.city,anchor:"center",offset:h,minzoom:p[0],maxzoom:c,filter:[n,["==","align","center"]],icon:"city-dot"},{id:"largecity--labels--left",textSize:s.textSize.city,anchor:"left",offset:d,minzoom:p[0],maxzoom:c,filter:[n,["==","align","left"]],icon:"city-dot"},{id:"largecity--labels--right",textSize:s.textSize.city,anchor:"right",offset:f,minzoom:p[0],maxzoom:c,filter:[n,["==","align","right"]],icon:"city-dot"},{id:"largecity--labels--default",textSize:s.textSize.city,anchor:"left",offset:d,minzoom:p[0],maxzoom:c,filter:[n,["!has","align"]],icon:"city-dot"}].map(v)),o=l.flatten([a]);return t.filter&&o.forEach((function(e){u(e,t.filter)})),o}}),{"../../style/constants":152,"../../util":170,"wapo-shared/util":264}],161:[(function(e,t,r){"use strict";t.exports=function(e,t){var r=1===window.devicePixelRatio?1:1.15;return[{id:"density",type:"circle",source:"us","source-layer":"censusdensitygeo",minzoom:4,paint:{"circle-blur":0,"circle-color":"#555555","circle-opacity":.5,"circle-radius":{base:1,stops:[[5,1.15/r],[7,1.35/r],[9,1.7/r]]}}}]}}),{}],162:[(function(e,t,r){"use strict";var n=e("../constants");e("../../util").pushLayerOpacityFilters;t.exports=function(e,t){var r={id:e.sourceLayer+(e.suffix||""),type:"fill",source:"us","source-layer":e.sourceLayer,paint:{"fill-color":n.colors.filtered}};return e.filter&&(r.filter=e.filter),[r]}}),{"../../util":170,"../constants":152}],163:[(function(e,t,r){"use strict";var s=e("wapo-shared/util"),l=e("../../util").pushLayerFilters,u=e("../constants");t.exports=function(e,t){var r=e.sourceLayer,n=e.property+"-"+r,i=e.suffix||"",a=(/:hover/.test(i),e.hatched||u.colorStops.hatched),o=(["in",e.property].concat(Object.keys(a)),s.entries(a),{id:n+"--hatch-base:included"+i,type:"fill",source:"us","source-layer":r,paint:{"fill-pattern":"line-lightgrey-01"}});return e.filter&&l(o,e.filter),[o]}}),{"../../util":170,"../constants":152,"wapo-shared/util":264}],164:[(function(e,t,r){"use strict";var a=e("../../util").pushLayerFilters;t.exports=function(t,e){var r=t.sourceLayer,n=t.suffix||"",i=t.icons.map((function(e){return{id:r+"-icon-"+e.image+n,type:"symbol",source:"us","source-layer":r,layout:{"icon-image":e.image,"icon-allow-overlap":!0,"icon-ignore-placement":!0},filter:e.filter}}));return t.filter&&i.forEach((function(e){return a(e,t.filter)})),i}}),{"../../util":170}],165:[(function(e,t,r){var n=e("../constants");t.exports=function(e){return[{id:"maine-split"+(e.hover?":hover":""),source:"maine-split",type:"fill",paint:{"fill-color":n.colors.republican_0}}]}}),{"../constants":152}],166:[(function(e,t,r){"use strict";var i=e("../constants");t.exports=function(t,e){var r=t.sourceLayer||"states",n=[{id:"national-boundary-"+r+"nation--base",type:"fill",source:"us","source-layer":r,paint:{"fill-color":i.colors.noResults}}];return t.filter&&n.forEach((function(e){e.filter=t.filter})),n}}),{"../constants":152}],167:[(function(e,t,r){"use strict";var v=e("wapo-shared/util"),b=e("../constants"),_=e("../../util").pushLayerFilters;t.exports=function(t,e){var r=t.property+".01"+t.solidPropertyKey,n=v.entries(t.colors||{}),i=e.smallContainerLayout,a={"text-color":b.colors.label,"text-halo-color":b.halo.color,"text-halo-width":b.halo.width,"text-halo-blur":b.halo.blur},o={"text-size":b.textSize.annotation,"text-font":b.font.label,"text-allow-overlap":!0,"text-ignore-placement":!0},s={"text-color":b.colors.labelCallout},l={"line-color":b.colors.labelLine,"line-width":1},u={"text-allow-overlap":!0,"text-ignore-placement":!0,"text-field":i?"{statePostal}":"{abbrev}","text-size":i?b.textSize.mobile:b.textSize.label,"text-font":b.font.label,"text-anchor":"center","text-offset":[0,.2]},c=[],p={id:"special-base",type:"circle",source:"us","source-layer":"senate-special",maxzoom:6,paint:{"circle-radius":["interpolate",["linear"],["zoom"],2,10,3,25],"circle-color":"#ffffff","circle-stroke-color":"#ffffff","circle-stroke-width":1,"circle-opacity":1},filter:["==","$type","Point"]},h={id:"senate-special-states",type:"circle",source:"us","source-layer":"senate-special",maxzoom:6,paint:{"circle-radius":["interpolate",["linear"],["zoom"],2,10,3,25],"circle-color":(function(e,t){if("no-property"===e)return"#dddddd";for(var r=["case"],n=0;n<t.length;n++){var i=t[n];r.push(["==",["feature-state",e],i[0]]),r.push(i[1])}return r.push("#dddddd"),r})(r,n),"circle-stroke-color":"#ffffff","circle-stroke-width":1,"circle-opacity":t.opacity||.85},filter:["==","$type","Point"]},d={id:"senate-special-states-callouts",type:"line",source:"us","source-layer":"senate-special",maxzoom:6,paint:l,filter:["==","$type","LineString"]},f={id:"senate-special-states-callouts:hover",type:"line",source:"us","source-layer":"senate-special",maxzoom:6,paint:v.extend(l,{"line-color":"#000000","line-opacity":["case",["boolean",["feature-state","hover"],!1],1,0]}),filter:["==","$type","LineString"]},m={id:"senate-special-states-labels",type:"symbol",source:"us","source-layer":"senate-special",maxzoom:6,layout:u,paint:a,filter:["==","$type","Point"]},y={id:"senate-special-minnesota-anno",type:"symbol",source:"us","source-layer":"senate-special",maxzoom:6,layout:v.extend(o,{"text-field":(i?"MN":"Minn.")+" special election seat","text-max-width":i?5:10,"text-anchor":"left","text-justify":"left"}),paint:v.extend(s,{"text-translate":["interpolate",["linear"],["zoom"],2,["literal",[12,0]],3,["literal",[30,0]]]}),filter:["all",["==","statePostal","MN"],["==","$type","Point"]]},g={id:"senate-special-mississippi-anno",type:"symbol",source:"us","source-layer":"senate-special",maxzoom:6,layout:v.extend(o,{"text-field":(i?"MS":"Miss.")+" special election seat","text-max-width":i?5:10,"text-anchor":"left","text-justify":"left"}),paint:v.extend(s,{"text-translate":["interpolate",["linear"],["zoom"],1,["literal",[10,11]],2,["literal",[12,7]],3,["literal",[30,0]]]}),filter:["all",["==","statePostal","MS"],["==","$type","Point"]]};return c.push(d,f,p,h,m,y,g),t.filter&&c.forEach((function(e){_(e,t.filter)})),c}}),{"../../util":170,"../constants":152,"wapo-shared/util":264}],168:[(function(e,t,r){"use strict";var p=e("wapo-shared/util"),h=e("../constants"),d=e("../../util").pushLayerOpacityFilters;t.exports=function(e,t){var r=void 0;if(e.property){var n="S"===t.officeId?"."+t.seat:"";r=e.property+n+e.solidPropertyKey}else r="no-property";var i=e.sourceLayer,a=[r,i,"solid"].join("-"),o=e.suffix||"",s=/:hover/.test(o),l=p.entries(e.colors||{}),u=e.defaultColor||h.colors.noResults;l.unshift(["Default",u]);var c={id:a+":included"+o,type:"fill",source:"us","source-layer":i,paint:{"fill-color":(function(e,t){if("no-property"===e)return u;for(var r=["case"],n=0;n<t.length;n++){var i=t[n];r.push(["==",["feature-state",e],i[0]]),r.push(i[1])}return r.push(u),r})(r,l),"fill-opacity":e.opacity||.85}};return s&&(c.paint["fill-outline-color"]=h.colors.border),e.fillOutlineColor&&(c.paint["fill-outline-color"]=e.fillOutlineColor),"no-property"!==r&&d(c,["!=",["feature-state",r],null]),e.filter&&(c.filter=e.filter),[c]}}),{"../../util":170,"../constants":152,"wapo-shared/util":264}],169:[(function(e,t,r){"use strict";var b=e("wapo-shared/util"),_=e("../constants"),x=e("../../util").pushLayerFilters,w={"text-color":_.colors.label,"text-halo-color":_.halo.color,"text-halo-width":_.halo.width,"text-halo-blur":_.halo.blur},D={CT:{"text-offset":[.5,.1],"text-anchor":"left"},DE:{"text-offset":[.5,.1],"text-anchor":"left"},HI:{"text-offset":[-.5,.1],"text-anchor":"right"},MA:{"text-offset":[.5,.1],"text-anchor":"left"},MD:{"text-offset":[.5,.1],"text-anchor":"left"},NH:{"text-offset":[.5,.1],"text-anchor":"left"},RI:{"text-offset":[.5,.1],"text-anchor":"left"},VT:{"text-offset":[0,-.5],"text-anchor":"center"}},S={CT:1.65,DE:1.3,HI:1.8,MA:1.65,MD:1.25,NH:1.3,RI:1.15,VT:-1},R={CT:.6,DE:.65,HI:-.5,MA:.7,MD:.75,NH:.6,RI:.6,VT:-.3},P={},E={"text-color":_.colors.labelCallout},A={"line-color":_.colors.labelLine,"line-width":1},M=["!in","id"].concat(["09","10","11","15","24","25","33","44","50"]);t.exports=function(t,e){var o=e.smallContainerLayout,r=function(t){var r=4.2*S[t],n=3*R[t],i=D[t]["text-offset"],e=D[t]["text-anchor"],a=void 0;a=o?_.textSize.label.stops.map((function(e){return[e[0],[e[1]*n,"VT"===t?e[1]/2*n:0]]})):"left"===e||"right"===e?_.textSize.label.stops.map((function(e){return[e[0],[e[1]*i[0]*r,i[1]]]})):_.textSize.label.stops.map((function(e){return[e[0],[e[1]*r/4,e[1]*i[1]*1.1]]})),P[t]={"circle-radius":["interpolate",["linear"],["zoom"],1,3,2,4,3,7],"circle-translate":{base:_.textSize.label.base,stops:a}}};for(var n in D)r(n);var i,a,s,l={"text-allow-overlap":!0,"text-ignore-placement":!1,"text-field":o?"{statePostal}":"{abbrev}","text-size":o?_.textSize.mobile:_.textSize.label,"text-font":_.font.label,"text-anchor":"center","text-offset":[0,.2]},u=isNaN(t.minzoom)?2:t.minzoom,c=1,p=[["default",_.colors.noResults]].concat(b.entries(t.colors||_.colorStops.default)),h=[{id:"state-labels:national",type:"symbol",source:"us","source-layer":"state-labels",minzoom:u,layout:l,paint:w,filter:M},{id:"small-state-labels",type:"symbol",source:"us","source-layer":"state-labels",minzoom:4,layout:l,paint:w,filter:["all",["==","$type","Point"],["!=","statePostal","DC"]]}],d={id:"callout-lines",type:"line",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:{},paint:A,filter:["all",["==","$type","LineString"],["!=","id","11"]]},f={id:"callout-lines:hover",type:"line",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:{},paint:b.extend(A,{"line-color":"#000000","line-opacity":["case",["boolean",["feature-state","hover"],!1],1,0]}),filter:["all",["==","$type","LineString"],["!=","id","11"]]};if(h.push(d,f),h.push({id:"state-labels:state",type:"symbol",source:"us","source-layer":"state-labels",layout:l,paint:w,filter:["!=","statePostal","DC"]}),h.push({id:"-callout-label-right-align",type:"symbol",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:b.extend(l,D.HI),paint:b.extend(E),filter:["all",["==","statePostal","HI"],["==","$type","Point"]]}),h.push({id:"-callout-label-top-align",type:"symbol",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:b.extend(l,D.VT),paint:b.extend(E),filter:["all",["==","statePostal","VT"],["==","$type","Point"]]}),h.push({id:"-callout-label-left-align",type:"symbol",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:b.extend(l,D.CT),paint:b.extend(E),filter:["all",["!in","statePostal","HI","VT","DC"],["==","$type","Point"]]}),t.dotProperty){var m="S"===e.officeId?"."+e.seat:"",y=(function(e,t){if("no-property"===e)return"#dddddd";for(var r=["case"],n=0;n<t.length;n++){var i=t[n];r.push(["==",["feature-state",e],i[0]]),r.push(i[1])}return r.push("#dddddd"),r})(t.dotProperty+m+t.solidPropertyKey,p);for(var g in D)if("HI"!==g){var v=b.extend(P[g],{"circle-color":y});h.push((a={},s=v,void 0,{id:(i=g)+"-callout-dot:level(states)",type:"circle",source:"us","source-layer":"state-label-callouts",minzoom:c,maxzoom:4,layout:b.extend({},a),paint:s,filter:["all",["==","$type","Point"],["==","statePostal",i]]}))}}return t.filter&&h.forEach((function(e){x(e,t.filter)})),h},t.exports.calloutLayouts=D}),{"../../util":170,"../constants":152,"wapo-shared/util":264}],170:[(function(e,t,r){"use strict";var o=e("lodash.isequal"),l=e("wapo-shared/util"),s=e("wapo-shared/race-helpers").getStatePostal,u=e("wapo-shared/race-helpers").stateNameByPostal,c=e("wapo-shared/race-helpers").fips.isNatl,p=e("wapo-shared/race-helpers").fips.isState,a=e("../util/is-mobile"),n=e("../config"),x=e("../util/log"),w=e("../app"),i=e("./views"),D=e("next-tick"),h=e("../../data/state-bounds.json"),d=e("../../data/state-bounds-mercator.json"),f=e("../../data/cartogram-bounds-2018.json"),m=[-.04,.005,.005,.01],y=[.01,.01,.06,.01],g=["lg","sm"];t.exports.getBBoxes=function(e,t){return t?f:e?h:d},t.exports.onDataReady=function(t,r,n){if(t.loaded()&&!n)return r();t.on("render",(function e(){n=n&&t.loaded();if(!t.loaded()||n)return;t.off("render",e);r()}))};var v={has:"!has","==":"!=",">":"<=",">=":"<",in:"!in",any:"none"};for(var b in v)v[v[b]]=b;function _(e,t){var r=e[2]-e[0],n=e[3]-e[1];return[e[0]-r*("number"===typeof t?t:t[0]),e[1]-n*("number"===typeof t?t:t[1]),e[2]+r*("number"===typeof t?t:t[2]),e[3]+n*("number"===typeof t?t:t[3])]}function S(e,t){return t=t||(a()&&!a.isMobileDesktop()?m:y),_(l.find(e,(function(e){return"00"===e.id})).bbox,t)}function R(e){return e[2]-e[0]}function P(e){return e[3]-e[1]}function E(e){var t;return[1*(180+e[0])/360,(t=e[1],1*(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)]}function A(e){var t=E([e[0],e[1]]),r=E([e[2],e[3]]),n=Math.abs(r[0]-t[0]);return Math.abs(r[1]-t[1])/n}t.exports.invertFilter=function e(t){var r=t[0];if(v[r])return[v[r]].concat(t.slice(1));if("all"===r)return["any",t.slice(1).map(e)];throw new Error("Unknown filter operation "+r)},t.exports.createTargetFilter=function(e,t,r){var n=e["source-layer"],i=/:non-target/.test(e.id);if(/counties|districts|precincts/.test(n)||I(e)){var a=p(r)&&s(r);return a?[i?"!=":"==","statePostal",a]:"states"===t?["==","id","NOPE"]:[i?"==":"!=","id","NOPE"]}if(/density/.test(n)&&r)return[i?"!=":"==","id",r];if(/statelabel/.test(n))return[i?"!=":"==","id",r];if(/citylabel/.test(n)){var o=p(r)&&u(s(r));return o?[i?"!=":"==","state",o]:"states"===t?["==","id","NOPE"]:[i?"==":"!=","id","NOPE"]}return"states"===t?"00"===r?["has","id"]:[i?"!=":"==","id",r]:["==","id","NOPE"]},t.exports.createBucketFilter=function(e,t){if(!e||!e.bucketDefinitions[t])return!1;var r=e.bucketDefinitions[t],n="include"===(r.type||"include")?["in","id"]:["!in","id"];return n=n.concat(r.regions)},t.exports.pushLayerFilters=function(e){var t=Array.prototype.slice.call(arguments,1),r=void 0;e.filter&&("all"===e.filter[0]?r=e.filter.concat(t):t.unshift(e.filter));r||(r=1===t.length?t[0]:["all"].concat(t));return e.filter=r,e},t.exports.pushLayerOpacityFilters=function(n,i){var a=void 0;(function(e){var t=void 0;switch(e.type){case"fill":t=["fill-opacity"];break;case"line":t=["line-opacity"];break;case"symbol":t=["icon-opacity","text-opacity"];break;case"circle":t=["circle-stroke-opacity","circle-opacity"];break;case"background":t=["background-opacity"]}return t})(n).forEach((function(e){var t=n.paint[e]||1;if(Array.isArray(t)){t[2];var r=(a=t)[1];(function(e,t){for(var r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1})(r,i)||a[1].push(i)}else a=["case",["all",i],t,0];n.paint[e]=a}))},t.exports.updateStyle=function(e,t){e.setStyle(t)},t.exports.scaleValue=function t(e,r){if("number"===typeof e)return e*r;var n=e.stops.map((function(e){return[e[0],t(e[1],r)]}));return l.set(e,"stops",n)},t.exports.padBounds=_,t.exports.getBoundsMargin=function(e,t){var r=e.getBounds();r=[r._sw.lng,r._sw.lat,r._ne.lng,r._ne.lat];var n=l.find(bboxes,(function(e){return e.id===t})).bbox,i=R(r)/R(n)-1,a=P(r)/P(n)-1;return Math.abs(i)>Math.abs(a)?i:a},t.exports.usAspectRatio=function(e){return A(S(e))},t.exports.aspectRatioForRegion=function(t,e,r){var n=A(l.find(e,(function(e){return e.id===t})).bbox);if(a()&&n<.5)n=.5;else if(n>.5){var i=(window.innerHeight>550?550:window.innerHeight-40)/r.offsetWidth;if(!isFinite(i))return null;i<n&&(n=i)}return n},t.exports.getRegionBoundingBox=function(t,e,r){var n=l.find(e,(function(e){return e.id===t})).bbox;return r&&(n=_(n,r)),n},t.exports.customAspectRatio=function(e){return"square"===e?A([-40,-40,40,40]):g.indexOf(e)>=0?A(S("lg"===e?y:m)):r.usAspectRatio()},t.exports.getNationalBbox=S,t.exports.fitRegion=function(e,t,r,n,i){var a=n,o=l.find(a,(function(e){return e.id===t})),s=c(t)?S(a):_(o.bbox,.05);e.fitBounds(s,r)},t.exports.getOfficeID=function(e){return!(!e||!i[e])&&i[e].officeId};var M=/states|counties|districts|precincts/;function I(e){return/^states--borders/.test(e.id)&&!/:hover/.test(e.id)&&!/:target/.test(e.id)}t.exports.getLevel=function(e){var t=M.exec(e);return t?t[0]:null},t.exports.useStaticImage=function(e){return!n.glSupport||"always"===e||"mobile"===e&&a()||a.isAndroid()},t.exports.staticSize=function(e){return e&&g.indexOf(e)>=0?e:a()&&!a.isMobileDesktop()?"sm":"lg"},t.exports.isKnownMapViewOption=function(e){return e&&"string"!==typeof e&&(e=e.value),!!i[e]},t.exports.raceTypeFromMapView=function(e){return/primary-republican/.test(e)?"R":/primary-democrat/.test(e)?"D":/primary-open/.test(e)?"X":"G"},t.exports.displayMercator=function(e){return"00"!==e.stateFips},t.exports.getTileSlug=function(e){var t=n.regionTiles.join(","),r=n.mercatorTiles.join(",");return e?t:r},t.exports.tileUrl=function(e,t){return"https://"+e+".tiles.mapbox.com/v4/"+t+"/{z}/{x}/{y}.vector.pbf?access_token="+n.mapboxAccessToken},t.exports.checkSenateSeat=function(e,t){return(/S\.00\.leadingCandidateIndex/.test(e.property)||/S\.00\.leadingCandidateIndex/.test(e.dotProperty))&&"S"===t.officeId&&t.seat&&"00"!==t.seat&&(e.property&&(e.property=e.property.replace("00",t.seat)),e.dotProperty&&(e.dotProperty=e.dotProperty.replace("00",t.seat))),e},t.exports.isDetailSolidLayer=function(e){return/(counties|districts)-solid/.test(e.id)},t.exports.isDetailCentroidsLayer=function(e){return/(counties|districts)-centroids/.test(e.id)},t.exports.isDetailBordersLayer=function(e){return/(counties|districts)--borders/.test(e.id)},t.exports.isStateBordersLayer=I;t.exports.showBackButton=function(e){var t=e._container.parentNode.parentNode.querySelector(".wpe-map-button");t&&t.classList.remove("hidden")},t.exports.hideBackButton=function(e){var t=e._container.parentNode.parentNode.querySelector(".wpe-map-button");t&&t.classList.add("hidden")},t.exports.getHistoricalKey=function(e,t){return"P"===e||t?"P.2016":"S"===e?"S.2012":"H"===e?"H.2016":void 0};var O=function(e,t,r){var n=new RegExp(t+".live."+r);return Object.keys(e).filter((function(e){return n.test(e)})).length>0};t.exports.getOfficeIdFromMapView=function(e){return e.indexOf("house")>-1?"H":e.indexOf("senate")>-1?"S":e.indexOf("governor")>-1?"G":e.indexOf("president")?"P":void 0};var C=function(y,g,v){if(w.maps&&y){for(var b=Object.keys(w.maps),_=[],e=0,t=g.length;e<t;e++)_.push(y[g[e]]);for(var r=function(e){var t=b[e],r=w.maps[t];if(r&&r.loaded()&&r.isStyleLoaded()){var n=!1,i=r.getContainer().getAttribute("data-office-id"),a=r.getContainer().getAttribute("data-race-type");x.debug("feature-state","UPDATING MAP DATA "+g.length+" "+v);for(var o=["counties","districts","states","cartodistricts","counties-centroids","districts-centroids","states-centroids","senate-special","state-labels","state-label-callouts"],s=0,l=_.length;s<l;s++){var u=_[s];n||(n=O(u,a,i));var c=+u.id;if(!isNaN(c)){u.hover=!1;for(var p=0,h=o.length;p<h;p++){var d=o[p];r.setFeatureState({source:"us",sourceLayer:d,id:c},u)}}}"live"===v&&n&&D((function(){r.fire("featureStateUpdated")}))}else var f=b.length>0?1e3*b.length:1e3,m=setInterval((function(){r&&r.loaded()&&r.isStyleLoaded()&&(x.debug("feature-state","map not ready, trying again"),C(y,g,v),clearTimeout(m))}),f)},n=0;n<b.length;n++)r(n)}};t.exports.updateMapData=C}),{"../../data/cartogram-bounds-2018.json":2,"../../data/state-bounds-mercator.json":9,"../../data/state-bounds.json":10,"../app":143,"../config":146,"../util/is-mobile":209,"../util/log":211,"./views":175,"lodash.isequal":109,"next-tick":119,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],171:[(function(e,t,r){"use strict";var n=e("../util/models"),i=e("../util/validate"),a=e("wapo-shared/util"),o=e("./views"),s=n.create({label:n.validators().string(),regions:n.validators().array().each(n.validators().string().custom(i.regionId)),type:n.validators(!0).string().custom(i.list(["include","exclude"]))}),l=t.exports.BucketSet=n.create({label:n.validators(!0).string(),slug:n.validators(!0).string(),bucketDefinitions:n.validators(!0).array().each(n.validators().custom(i.model(s)))});r.MapState=n.create({initialStateFips:n.validators(!0).string().custom(i.stateFipsOrNational),initialMapView:n.validators(!0).string().custom(i.list(o)),bucketSet:n.validators(!0).custom(i.model(l)),bucket:n.validators(!0).number().equal({gte:0}),enableZoom:n.validators(!0).boolean(),enableBackButton:n.validators(!0).boolean(),showStateLabels:n.validators(!0).boolean(),hideOtherStates:n.validators(!0).boolean(),useStaticImage:n.validators(!0).custom(i.list(["always","mobile"])),"@root":n.validators().object().custom((function(e){var t=a.get(e,"bucketSet.bucketDefinitions.length",1/0);if(e.bucket>=t)return{value:e.bucket,message:"Bucket index out of range"}}))})}),{"../util/models":212,"../util/validate":230,"./views":175,"wapo-shared/util":264}],172:[(function(e,t,r){"use strict";var l=e("wapo-shared/util").get,u=e("../../util/format"),n={first:"Hillary",last:"Clinton",party:"Dem",incumbent:!1},i={first:"Donald",last:"Trump",party:"GOP",incumbent:!1},c=[i,n],p=[n,i];t.exports=function(e,t,r){var n=l(t,["expectations","results",r,e]);if(!n)return{title:null};var i,a=!1;"P"===e?(i=n.expectation,a=/safe-GOP|lean-GOP/.test(i)?c:p):n.candidates&&(a=n.candidates.map((function(e){return l(t,["expectations","candidates",e.id],!1)})).filter((function(e){return e&&e.hasOwnProperty("first")&&"string"===typeof e.first})));var o,s=void 0;return"string"===typeof n.note&&(s=n.note.trim()),{title:u.reportingUnitName(n),annotation:u.predictedAnnotation(n.expectation),sidenotes:!!s&&[u.note(s)],table:a&&a.length?{head:["Party"],rows:(o=a,o.map((function(e){return{meta:e,result:{},cells:[u.party(e.party)]}})))}:null}}}),{"../../util/format":205,"wapo-shared/util":264}],173:[(function(e,t,r){"use strict";var c=e("../../../src/util/is-mobile.js"),p=e("../style/constants"),h={"safe-GOP":p.colors.republican_1,"safe-Dem":p.colors.democrat_1},d={"lean-GOP":p.hatches.lightred,"lean-Dem":p.hatches.lightblue,tossup:p.hatches.purple};t.exports=function(e){var t,r,n,i=e.sourceLayer||"states",a=["all",["in",e.property].concat(Object.keys(d))],o=["all",["in",e.property].concat(Object.keys(h))],s=e.callout&&"H"!==e.officeID&&!c();s&&(t=["==",e.callout,!0],r=a.concat([t]),n=o.concat([t]));var l=/districts/.test(i),u=["background","national-boundary",["excluded",{sourceLayer:i,suffix:":excluded"}],["excluded",{sourceLayer:i,filter:["!has",e.property]}],["hatched",{sourceLayer:i,property:e.property,hatched:d,filter:a}],["solid",{sourceLayer:i,property:e.property,colors:h,filter:o}],["borders",{sourceLayer:i,borderWidth:p.borderWidths.lighter,borderColor:p.colors.lightBorder}],l?["borders",{sourceLayer:"states",borderWidth:p.borderWidths.default,borderColor:p.colors.border}]:null,["borders",{sourceLayer:"states",suffix:":target:state",borderWidth:p.borderWidths.thicker,borderColor:p.colors.border}],["border-shadow",{sourceLayer:i,suffix:"--callout",filter:t}],["hatched",{sourceLayer:i,property:e.property,suffix:"--callout",filter:r,hatched:d}],["solid",{property:e.property,sourceLayer:i,suffix:"--callout",colors:h,filter:n}],["borders",{sourceLayer:i,suffix:"--callout",borderWidth:p.borderWidths.callout,borderColor:p.colors.border,filter:t}],["border-shadow",{sourceLayer:i,suffix:":hover"}],["hatched",{sourceLayer:i,suffix:":hover",property:e.property,hatched:d,filter:a}],["solid",{sourceLayer:i,suffix:":hover",property:e.property,colors:h,filter:o}],["borders",{sourceLayer:i,suffix:":hover",borderWidth:p.borderWidths.default,borderColor:p.colors.border}],"density","city-labels",["state-labels",{dotProperty:"states"===i&&e.property,minzoom:1}]].filter(Boolean);return s||(u=u.filter((function(e){return!e[1]||"string"!==typeof e[1].suffix||-1===e[1].suffix.indexOf("callout")}))),u}}),{"../../../src/util/is-mobile.js":209,"../style/constants":152}],174:[(function(e,t,r){"use strict";var n=e("../style/constants");t.exports=function(e){var t="H"===e.officeID?"districts":"counties",r="historical."+e.officeID+"."+e.property;return["background","national-boundary",["excluded",{sourceLayer:t,suffix:":excluded:target"}],["excluded",{sourceLayer:"states",suffix:":excluded:non-target"}],["solid",{property:r,sourceLayer:t,suffix:":target",colors:n.colorStops.default}],["solid",{property:r,sourceLayer:"states",suffix:":non-target",colors:n.colorStops.default}],["borders",{sourceLayer:t,suffix:":target",borderWidth:n.borderWidths.lighter,borderColor:n.colors.lightBorder}],["borders",{sourceLayer:"states",borderWidth:n.borderWidths.default,borderColor:n.colors.border}],["borders",{sourceLayer:"states",suffix:":target:state",borderWidth:n.borderWidths.thicker,borderColor:n.colors.border}],["border-shadow",{suffix:":hover",sourceLayer:"states"}],["border-shadow",{suffix:":hover",sourceLayer:t}],["solid",{property:r,sourceLayer:t,suffix:":hover",colors:n.colorStops.default}],["solid",{property:r,sourceLayer:"states",suffix:":hover",colors:n.colorStops.default}],["solid",{property:r,sourceLayer:"states",filter:["==","id","02"],colors:n.colorStops.default}],["borders",{suffix:":hover",sourceLayer:"states",borderWidth:n.borderWidths.default,borderColor:n.colors.border}],["borders",{suffix:":hover",sourceLayer:t,borderWidth:n.borderWidths.default,borderColor:n.colors.border}],"density","city-labels",["state-labels",{dotProperty:r,minzoom:1}]]}}),{"../style/constants":152}],175:[(function(e,t,r){"use strict";var a=e("wapo-shared/race-helpers"),o=e("../../config"),s=e("../../util/format"),n=e("../style/constants"),l=e("./live-tooltip"),u=e("./live-gain-tooltip"),c=e("./preview-tooltip"),p=e("./expected-tooltip"),h=e("./live-gain"),d=e("./live-solid"),f=e("./live-solid-primary"),i=e("./live-cartogram"),m=e("./live-margin"),y=e("./historical"),g=e("./expected"),v=r,b={precincts:"precinct",districts:"district",counties:"county",states:"state"},_=["president","house","senate","governor"],x={};Object.keys(a.officeIDs).filter((function(e){return _.indexOf(e)>=0})).forEach((function(e){x[e]=a.officeIDs[e]}));var w=function(r){var n=a.officeIDs[r],i=s.displayCase(r);[!0,!1].forEach((function(e){if("house"!==r||!1!==e){var t=e?"house"===r?"districts":"counties":"states";v["live-"+r+"-"+t]={interactiveLayers:["solid","state-labels","state-label-callouts","senate-special"],layers:d({officeID:n,callout:!1,showFreshie:!0,hideOnTarget:!0}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:"districts"!==t},"S"!==n&&"G"!==n||"counties"!=t||(v["live-"+r+"-counties-primary-democratic"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"D"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0},v["live-"+r+"-counties-primary-republican"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"R"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0},v["live-"+r+"-counties-primary-open"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"X"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0}),"H"===n&&"districts"==t&&(v["live-house-districts-primary-democratic"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"D"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0},v["live-house-districts-primary-republican"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"R"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0},v["live-house-districts-primary-open"]={interactiveLayers:["solid","hatched","state-labels"],layers:f({officeID:n,callout:!1,showFreshie:!0,raceType:"X"}),tooltipData:l,label:"states"===t?i+" by state":i,officeId:n,live:!0,needsFullResults:!0}),"states"!==t&&(v["state-detail-"+r+"-"+t]={interactiveLayers:["solid","hatched","state-labels"],layers:d({officeID:n,showFreshie:!1,hideOnTarget:!0}),tooltipData:l,label:i,officeId:n,live:!0,needsFullResults:!0}),o.glSupport&&(v["live-gain-"+r+"-"+t]={interactiveLayers:["solid"],layers:h({officeID:n}),tooltipData:u,label:i+" gains by "+b[t],officeId:n,needsFullResults:"districts"!==t,live:!0},v["live-gain-"+r+"-"+t+"-vs-presidential"]={interactiveLayers:["solid"],layers:h({officeID:n,comparePresidential:!0}),tooltipData:u,label:i+" gains by "+b[t]+"compared to 2016 Presidential",officeId:n,needsFullResults:"districts"!==t,live:!0,comparePresidential:!0},v["live-size-of-lead-"+r+"-"+t]={interactiveLayers:["solid"],layers:m({officeID:n,hollow:!1,percentMargin:!1}),tooltipData:l,label:i+" size of lead by "+b[t],officeId:n,needsFullResults:"districts"!==t,live:!0},v["live-margin-"+r+"-"+t]={interactiveLayers:["solid"],layers:m({officeID:n,hollow:!1,percentMargin:!1}),tooltipData:l,label:i+" vote margin by "+b[t],officeId:n,needsFullResults:"districts"!==t,live:!0}),v["scaled-margin-"+r+"-"+t]={interactiveLayers:["solid"],layers:m({officeID:n,hollow:!0}),tooltipData:l,label:i+" vote scaled margin by "+b[t],officeId:n,needsFullResults:"districts"!==t,live:!0},v["live-flip-"+r+"-"+t]={interactiveLayers:["solid","state-labels"],layers:d({officeID:n,filter:["==","live."+n+".flipped",!0]}),tooltipData:l,label:i+" party flips by "+b[t],officeId:n,needsFullResults:"districts"!==t,live:!0},v["historical-"+r+"-"+t]={interactiveLayers:["solid","state-labels"],layers:y({officeID:n,property:"winningParty"}),tooltipData:c,label:"2012 "+i+" results by "+b[t],officeId:n},v["historical-margin-"+r+"-"+t]={interactiveLayers:["solid","state-labels"],layers:m({officeID:n,property:"winningParty"}),tooltipData:c,label:"2012 "+i+" results by "+b[t],officeId:n},"P"===n&&["2008","2004"].forEach((function(e){v["historical-"+e+"-"+r+"-"+t]={interactiveLayers:["solid","state-labels"],layers:y({officeID:n,property:e+".winningParty"}),tooltipData:c,label:e+" "+i+" results by "+b[t],officeId:n+"."+e}}))}})),v["expected-"+r]={interactiveLayers:["hatched","solid","state-labels"],layers:g({property:"expectations."+n+".expectation",callout:"expectations."+n+".battleground",sourceLayer:"H"===n?"districts":"states"}),tooltipData:p,label:"Expected "+i+" results",officeId:n}};for(var D in x)w(D);v["live-president-cartogram"]={interactiveLayers:["solid","hatched"],layers:i({officeID:"P",callout:!1}),tooltipData:l,label:"President Cartogram",officeId:"P",live:!0,needsFullResults:!1},v["live-house-cartogram"]={interactiveLayers:["solid"],layers:i({officeID:"H",callout:!1}),tooltipData:l,label:"House Cartogram",officeId:"H",live:!0,needsFullResults:!1},v["live-president-precincts"]={interactiveLayers:["solid","hatched","state-labels"],layers:d({officeID:"P",callout:!1,detailLayer:"precincts"}),tooltipData:l,label:"Presidential results by precinct",officeId:"P",live:!0,needsFullResults:!0},v.empty={interactiveLayers:[],layers:["background","national-boundary",["solid",{sourceLayer:"states"}],["borders",{sourceLayer:"states",borderWidth:n.borderWidths.default,borderColor:n.colors.border}],"density",["state-labels",{}],"city-labels"],tooltipData:function(){return{title:null}}}}),{"../../config":146,"../../util/format":205,"../style/constants":152,"./expected":173,"./expected-tooltip":172,"./historical":174,"./live-cartogram":176,"./live-gain":178,"./live-gain-tooltip":177,"./live-margin":179,"./live-solid":181,"./live-solid-primary":180,"./live-tooltip":182,"./preview-tooltip":183,"wapo-shared/race-helpers":263}],176:[(function(e,t,r){"use strict";var a=e("../style/constants"),o="cartoboundaries",s="cartodistricts",l=e("../../../src/util/is-mobile.js");t.exports=function(e){var t,r="G.live."+e.officeID,n=e.filter;e.callout&&!l()&&(t=["==",e.callout,!0],e.filter&&(t=["all",e.filter,t]));var i=["background",["national-boundary",{sourceLayer:o}],["solid",{property:r,solidPropertyKey:".status",sourceLayer:s,colors:a.colorStops.solid,filter:n}],["borders",{sourceLayer:s,borderWidth:a.borderWidths.lighter}],["borders",{sourceLayer:o,borderWidth:a.borderWidths.cartogram,borderOpacity:.85,borderColor:"#f7f7f7"}],["borders",{suffix:":hover",sourceLayer:s,borderWidth:a.borderWidths.thicker,borderColor:a.colors.border}]];return"P"===e.officeID&&i.push(["solid",{property:r,solidPropertyKey:".status",suffix:":hover",sourceLayer:o,colors:a.colorStops.solid,filter:n}],["maine",{hover:!1}],["borders",{sourceLayer:o,suffix:"-maine-extra-bs",borderWidth:a.borderWidths.thicker,borderColor:a.colors.border,filter:["==","id","23"]}],["borders",{sourceLayer:o,suffix:":hover",borderWidth:a.borderWidths.default,borderColor:a.colors.border}]),i.push("cartogram-labels"),i}}),{"../../../src/util/is-mobile.js":209,"../style/constants":152}],177:[(function(x,e,t){"use strict";var w=x("wapo-shared/util"),D=x("../../util/format"),S=x("./live-tooltip"),R=(x("yo-yo"),x("../util").getHistoricalKey);e.exports=function(e,t,r,n,i,a){var o=S(e,t,r,n,i),s="results."+r+"."+e+"."+i+".G",l="results."+r,u=w.get(t.live,s),c=R(e,a),p=w.get(t.historical,l,null),h="shift."+c,d=u.precinctsReporting/u.precinctsTotal,f=a?"the 2016 Presidential vote":"the previous race for this seat",m=p?p[c]:null;if(d>=.1)if(m)if(u&&m&&u[h]){var y=u[h]<0?"Democrats":u[h]>0&&"Republicans",g=D.pct(Math.abs(u[h]),.01,!1,"0.0"),v=D.pct(u.previousMargin,1,!1),b="Dem"===m.winningParty?"Democrats":"GOP"===m.winningParty&&"Republicans";if(g&&v&&y&&b){var _="Democrats"===y?"dem":"rep";o.annotation=(function(){var e=x("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]," percentage points towards ",arguments[2]]),e(t,["Shifted ",r," compared to ",arguments[3],"."]),t})(_,g,y,f)}}else o.annotation=(function(){var e=x("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,["Neither party gained vote share compared to ",arguments[0],"."]),t})(f);else o.annotation="";return o}}),{"../../util/format":205,"../util":170,"./live-tooltip":182,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/util":264,"yo-yo":140}],178:[(function(e,t,r){"use strict";var l=e("../style/constants"),u=e("../../util/no-races").noRacePostal,c=e("../../util/no-races").noRaceFips,p=e("../util").getHistoricalKey,h=["==","id","02"];t.exports=function(e){var t="S"===e.officeID?".00":"",r=p(e.officeID,e.comparePresidential),n="G.live."+e.officeID+t+".shift."+r,i="H"===e.officeID?"districts-centroids":"counties-centroids",a="H"===e.officeID?"districts":"counties",o=(e.officeID,l.colorStops.margins,["!in","statePostal"].concat(u(e.officeID))),s=["in","id"].concat(c(e.officeID));return["background","national-boundary","density",["excluded",{sourceLayer:a,suffix:":excluded:target",filter:o}],["excluded",{sourceLayer:"states",suffix:":excluded:non-target"}],["solid",{sourceLayer:a,defaultColor:"#fefefe",opacity:.75}],["solid",{defaultColor:"#fefefe",sourceLayer:a,opacity:.1,suffix:":target:included"}],["solid",{sourceLayer:"states",suffix:":included"}],["borders",{sourceLayer:a,suffix:":target",borderWidth:l.borderWidths.lighter}],["hatched",{sourceLayer:"states",suffix:":no-race",defaultColor:l.colors.noRace,property:"no-race",filter:s,opacity:1}],["borders",{borderOpacity:.5,sourceLayer:"states",borderWidth:l.borderWidths.default}],["borders",{borderOpacity:.5,sourceLayer:"states",suffix:":target:state",borderWidth:l.borderWidths.thicker}],["borders",{suffix:":hover",sourceLayer:a,borderWidth:l.borderWidths.lighter,borderColor:l.colors.borderDarker}],["borders",{suffix:":hover",sourceLayer:"states",borderWidth:l.borderWidths.lighter,borderColor:l.colors.borderDarker}],["arrow",{property:n,sourceLayer:i,suffix:":target"}],["arrow",{property:n,sourceLayer:"states-centroids",suffix:":non-target"}],["solid",{sourceLayer:"states",suffix:":alaska-cover",filter:h}],["arrow",{property:n,sourceLayer:"states-centroids",suffix:":alaska",filter:h}]]}}),{"../../util/no-races":214,"../style/constants":152,"../util":170}],179:[(function(e,t,r){"use strict";var l=e("../style/constants"),u=e("../../util/no-races").noRaceFips,c=e("../../util/no-races").noRacePostal,p=l.colorStops.margins;t.exports=function(e){var t="G.live."+e.officeID,r="G.live."+e.officeID,n=["!=","statePostal"].concat(c(e.officeID)),i="H"===e.officeID?"districts-centroids":"counties-centroids",a="H"===e.officeID?"districts":"counties",o="H"===e.officeID?"districts":"counties",s=["in","id"].concat(u(e.officeID));return["background","national-boundary","density",["excluded",{sourceLayer:a,suffix:":excluded:target",filter:n}],["excluded",{sourceLayer:"states",suffix:":excluded:non-target"}],["solid",{sourceLayer:a,defaultColor:"#fefefe",opacity:.75}],["solid",{property:r,solidPropertyKey:".status",sourceLayer:a,opacity:.1,suffix:":target"}],["solid",{property:r,solidPropertyKey:".status",colors:p,opacity:.1,sourceLayer:"states",suffix:":non-target"}],["hatched",{sourceLayer:"states",suffix:":no-race",defaultColor:l.colors.noRace,property:"no-race",filter:s,opacity:1}],["borders",{borderOpacity:.5,sourceLayer:"states",borderWidth:l.borderWidths.default}],["borders",{borderOpacity:.5,sourceLayer:"states",suffix:":target:state",borderWidth:l.borderWidths.thicker}],["borders",{sourceLayer:o,suffix:":target",borderWidth:l.borderWidths.lighter}],["borders",{suffix:":hover",sourceLayer:"states",borderWidth:l.borderWidths.lighter,borderColor:l.colors.borderDarker}],["borders",{suffix:":hover",sourceLayer:o,borderWidth:l.borderWidths.lighter,borderColor:l.colors.borderDarker}],["circle",{colorProperty:t,colors:p,sizeProperty:t,sourceLayer:i,suffix:":target"}],["circle",{colorProperty:t,colors:p,sizeProperty:t,sourceLayer:"states-centroids",suffix:":non-target"}],["circle",{colorProperty:t,colors:p,sizeProperty:t,sourceLayer:i,suffix:":hover"}],["circle",{colorProperty:t,colors:p,sizeProperty:t,sourceLayer:"states-centroids",suffix:":hover"}],"city-labels",["state-labels",{dotProperty:e.property,minzoom:1}]]}}),{"../../util/no-races":214,"../style/constants":152}],180:[(function(e,t,r){"use strict";var S=e("../style/constants"),R=["==",["string",["get","id"]],"02"],P=e("../../util/no-races").noRaceFips,E=(e("../../util/log"),e("../../util/no-races").noRacePostal),A=e("../../../src/util/is-mobile.js");t.exports=function(e){var t,r=e.raceType||"D",n=S.colorStops.primaryColors,i=A()&&!A.isMobileDesktop(),a=e.hideOnTarget,o=r+".live."+e.officeID,s=".leadingCandidateIndex",l=e.callout&&"H"!==e.officeID&&!i,u=e.filter||null;l&&(t=["==",e.callout,!0],e.filter&&(t=["all",t,e.filter]));var c=e.detailLayer||("H"===e.officeID?"districts":"counties"),p=(["in","id"].concat(P(e.officeID)),["background","national-boundary","density",["excluded",{sourceLayer:c,suffix:":excluded:target",filter:["!in","statePostal"].concat(E(e.officeID))}],["excluded",{sourceLayer:"states",suffix:":excluded:non-target"}],["solid",{property:o,solidPropertyKey:s,sourceLayer:c,suffix:a?":target":"",colors:n,filter:u}],["solid",{property:o,solidPropertyKey:s,sourceLayer:"states",suffix:A()?"":":non-target",colors:n,filter:u}],["solid",{property:null,sourceLayer:"states",suffix:"--callout-cover:non-target",filter:t}],["borders",{sourceLayer:c,suffix:":target",borderWidth:S.borderWidths.lighter}],["borders",{sourceLayer:"states",borderWidth:S.borderWidths.default}],["borders",{sourceLayer:"states",suffix:":target:state",borderWidth:S.borderWidths.thicker}],["border-shadow",{sourceLayer:"states",suffix:"--callout:non-target",filter:t}],["solid",{property:o,sourceLayer:"states",suffix:"--callout:non-target",colors:n,filter:t}],["borders",{sourceLayer:"states",suffix:"--callout:non-target",borderWidth:S.borderWidths.callout,filter:t}],["borders",{suffix:":hover",sourceLayer:"states",borderWidth:S.borderWidths.thicker,borderColor:S.colors.border}],["borders",{suffix:":hover",sourceLayer:c,borderWidth:S.borderWidths.thicker,borderColor:S.colors.border}],["solid",{property:o,sourceLayer:"states",suffix:":alaska-solid",colors:n,filter:R}]]),h=["state-labels",{dotProperty:o,colors:n,minzoom:1}];if(e.showFreshie&&"H"!==e.officeID){var d="live."+e.officeID+".flipped",f=["all",["==",d,!0],["==",o,"won-Dem"]],m=["all",["==",d,!0],["==",o,"won-GOP"]],y=i?"-small":"",g=[{image:"flip-left"+y,filter:f},{image:"flip-right"+y,filter:m}],v=["all",["!=",d,!0]];if(e.filter&&(f.push(e.filter),m.push(e.filter),v.push(e.filter)),!i){var b="live."+e.officeID+".freshie",_=["all",["==",b,!0],["!=",d,!0]];e.filter&&_.push(e.filter),v.push(["!=",b,!0]),g.push({image:"exclamation",filter:_})}var x="H"===e.officeID?"districts-centroids":"state-labels",w=":target:included";if("statelabels"===x&&(w+=":national"),p.push(["icon",{suffix:w,sourceLayer:x,icons:g}]),"statelabels"===x&&!A()){var D=g.map((function(e){return{image:e.image+"-small",filter:e.filter}}));p.push(["icon",{suffix:":target:included:state",sourceLayer:"counties-centroids",icons:D}])}h[1].filter=v}return p=p.concat(["city-labels",h]),l||(p=p.filter((function(e){return e[1]&&!/--callout/.test(e[1].suffix)}))),p}}),{"../../../src/util/is-mobile.js":209,"../../util/log":211,"../../util/no-races":214,"../style/constants":152}],181:[(function(e,t,r){"use strict";var g=e("../style/constants"),v=g.colorStops.solid,b=["==","id","02"],_=e("../../util/no-races").noRaceFips,x=(e("../../util/log"),e("../../util/no-races").noRacePostal),w=e("../../../src/util/is-mobile.js");t.exports=function(e){var t,r=e.raceType||"G",n=w()&&!w.isMobileDesktop(),i=e.hideOnTarget,a=r+".live."+e.officeID,o=".status",s=e.callout&&"H"!==e.officeID&&!n,l=e.filter||null;s&&(t=["==",e.callout,!0],e.filter&&(t=["all",t,e.filter]));var u=e.detailLayer||("H"===e.officeID?"districts":"counties"),c=["in","id"].concat(_(e.officeID)),p=["!in","id"].concat(_(e.officeID)),h=["!in","statePostal"].concat(x(e.officeID)),d=(["in","statePostal"].concat(x(e.officeID)),["background","national-boundary","density",["excluded",{sourceLayer:u,suffix:":excluded:target",filter:h}],["excluded",{sourceLayer:"states",suffix:":excluded:non-target"}],["solid",{sourceLayer:u,opacity:.1}],["solid",{property:a,solidPropertyKey:o,sourceLayer:u,suffix:i?":target":"",colors:v,filter:null===l?h:["all",l,h]}],["solid",{property:a,solidPropertyKey:o,sourceLayer:"states",suffix:":non-target",colors:v,filter:null===l?p:["all",l,p]}],["solid",{property:null,sourceLayer:"states",suffix:"--callout-cover:non-target",filter:t}],["solid",{property:a,solidPropertyKey:o,sourceLayer:"states",suffix:"--callout:non-target",colors:v,filter:t}],["borders",{sourceLayer:"states",suffix:"--callout:non-target",borderWidth:g.borderWidths.callout,filter:t}],["hatched",{sourceLayer:"states",suffix:":no-race",defaultColor:g.colors.noRace,property:"no-race",filter:c,opacity:1}],["borders",{sourceLayer:"states",borderWidth:g.borderWidths.default,opacity:1}],["borders",{sourceLayer:"states",suffix:":target:state",borderWidth:g.borderWidths.thicker}],["borders",{sourceLayer:u,suffix:":target",borderWidth:g.borderWidths.lighter,filter:h}],["border-shadow",{sourceLayer:"states",suffix:"--callout:non-target",filter:t}],["borders",{suffix:":hover",sourceLayer:"states",borderWidth:g.borderWidths.thicker,borderColor:g.colors.border}],["borders",{suffix:":hover",sourceLayer:u,borderWidth:g.borderWidths.thicker,borderColor:g.colors.border,filter:h}],["solid",{property:a,solidPropertyKey:o,sourceLayer:"states",suffix:":alaska-solid",colors:v,filter:["all",b,p]}]]),f=["state-labels",{dotProperty:a,solidPropertyKey:o,colors:v,minzoom:1,filter:p}],m=["city-labels",{filter:h,minzoom:4}];if("S"===e.officeID){var y=["senate-special",{property:a,solidPropertyKey:o,colors:v}];d.push(y)}return e.showFreshie&&e.officeID,d=d.concat([m,f]),s||(d=d.filter((function(e){return e[1]&&!/--callout/.test(e[1].suffix)}))),d}}),{"../../../src/util/is-mobile.js":209,"../../util/log":211,"../../util/no-races":214,"../style/constants":152}],182:[(function(e,t,r){"use strict";e("yo-yo");var n=e("wapo-shared/util"),y=n.get,g=(n.set,e("wapo-shared/race-helpers")),v=g.isIndividual,b=(g.fips.isState,e("../../util/format")),_=(e("../../util/past-wins"),e("../../util/is-mobile"),e("../../util/no-races").hasNoRace),x=(e("../../util/log"),e("../../race-config").raceConfigLookup);t.exports=function(e,t,r,n,i){if(_(e,r)){var a=g.stateNameByPostal(g.getStatePostal(r));if(a)return{title:a,annotation:"No race"}}"undefined"===typeof i&&(i="00");var o=y(t,["live","results",r,e,i,n]);if(!o)return{title:null};var s=void 0;o.precinctsTotal&&(s={reporting:o.precinctsReporting,total:o.precinctsTotal});var l=void 0;o.freshie&&(l=b.freshie(o,t.live.candidates));var u,c,p,h=b.reportingUnitName(o),d=x(o.parentRaceId,e,i,n,{}),f=(u=o,c=t.live.candidates,p=d,u.candidates.filter((function(e){return v(e.id)})).map((function(e){var t=c[e.id];t.primaryCandidateColor=y(p,+e.id);var r=b.voteCount(e,u),n=b.pct(e.voteCount,u.voteCount);return{meta:t,result:e,winner:"X"===e.winner||"R"===e.winner,cells:[r,n]}}))),m=void 0;return f.length&&f.some((function(e){return"R"===y(e,"result.winner")}))&&(m=[{text:"Race goes to a runoff"}]),{title:h,progress:s,annotation:l,isFinished:o.isFinished,sidenotes:m,table:f.length?{head:["Candidate","Votes","Pct."],rows:f}:null,raceTypeId:n,parentRaceId:o.parentRaceId}}}),{"../../race-config":185,"../../util/format":205,"../../util/is-mobile":209,"../../util/log":211,"../../util/no-races":214,"../../util/past-wins":216,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],183:[(function(e,t,r){"use strict";var o=e("wapo-shared/util").get,s=e("../../util/format");t.exports=function(e,t,r){var n,i,a=o(t,["historical","results",r,e]);return a?{title:s.reportingUnitName(a),table:{head:["Votes","Pct."],rows:(n=a,i=t.historical.candidates,n.candidates.map((function(e){return{meta:i[e.id],result:e,cells:[s.voteCount(e,n),s.pct(e.voteCount,n.voteCount)]}})))}}:{title:null}}}),{"../../util/format":205,"wapo-shared/util":264}],184:[(function(e,t,r){"use strict";e("yo-yo");var f=e("wapo-shared/util").get,m=e("wapo-shared/race-helpers"),n=(m.isIndividual,m.fips),y=(n.isStateFips,n.isCountyFips,e("../../util/format")),g=(e("../../util/past-wins"),e("../../util/is-mobile"),e("../../util/no-races").hasNoRace);e("../../util/log");t.exports=function(e,t,r,n,i,a){if(g(t,i)){var o=m.stateNameByPostal(m.getStatePostal(i));if(o)return{title:o,annotation:"No race"}}var s=f(e,["live","results",i,t,r,n]);if(!s)return{title:null};var l=void 0;s.precinctsTotal&&(l={reporting:s.precinctsReporting,total:s.precinctsTotal});var u,c,p=y.reportingUnitName(s),h=(u=s,c=e.live.candidates,u.candidates.map((function(e){var t=c[e.id],r=y.voteCount(e,u),n=y.pct(e.voteCount,u.voteCount);return"state"!==u.level?u.isFinished&&u.singleLeader&&(e.id,u.singleLeader):"X"===e.winner||e.winner,{meta:t,result:e,winner:"R"===e.winner||"X"===e.winner,winner_runoff:"R"===e.winner,cells:[r,n]}}))),d="Pct.";return"ME"===s.statePostal&&s.candidates.length>2&&("G"!=s.raceTypeID||"G"!=s.officeID)&&(d="1st choice pct."),{title:p,progress:l,isFinished:s.isFinished,table:h.length?{head:["Votes",d],rows:h}:null}}}),{"../../util/format":205,"../../util/is-mobile":209,"../../util/log":211,"../../util/no-races":214,"../../util/past-wins":216,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],185:[(function(e,t,r){"use strict";var o=e("wapo-shared/util");t.exports.raceConfigLookup=function(e,t,r,n,i){var a=o.get(s,[e,t,n],null);return a||"S"!==t||(a=o.get(s,[e,t,r,n],null)),a||i};var s={48:{G:{D:{61811:"primary-dem-other",64629:"primary-dem-other",66006:"primary-dem-other",66008:"primary-dem-other",66009:"primary-dem-challenger3",66010:"primary-dem-other",66011:"primary-dem-challenger1",66012:"primary-dem-challenger2",66013:"primary-dem-other"},R:{41404:"primary-rep-incumbent",66077:"primary-rep-challenger2",57793:"primary-rep-challenger1"}},S:{D:{61921:"primary-dem-challenger1",65931:"primary-dem-challenger2",65932:"primary-dem-challenger3"},R:{66051:"primary-rep-challenger2",61815:"primary-rep-incumbent",65926:"primary-rep-challenger3",66052:"primary-rep-challenger1",43274:"primary-rep-other"}}},4801:{H:{D:{62024:"primary-dem-challenger1",65901:"primary-dem-challenger2"},R:{1883:"primary-rep-incumbent",63791:"primary-rep-challenger1",65902:"primary-rep-challenger2"}}},4802:{H:{D:{65903:"primary-dem-challenger1",65904:"primary-dem-challenger3",65905:"primary-dem-other",65906:"primary-dem-other",65933:"primary-dem-challenger2"},R:{66053:"primary-rep-challenger1",66054:"primary-rep-other",66055:"primary-rep-challenger3",66056:"primary-rep-other",66057:"primary-rep-challenger2",66058:"primary-rep-other",66059:"primary-rep-other",66060:"primary-rep-other",66078:"primary-rep-other"}}},4803:{H:{D:{64594:"primary-dem-challenger3",65907:"primary-dem-challenger2",65927:"primary-dem-challenger1",65934:"primary-dem-other"},R:{51467:"primary-rep-challenger3",66061:"primary-rep-challenger2",66062:"primary-rep-challenger1"}}},4804:{H:{D:{65935:"primary-dem-challenger1",65936:"primary-dem-challenger2"},R:{63174:"primary-rep-incumbent",65908:"primary-rep-challenger1"}}},4805:{H:{D:{65928:"primary-dem-challenger1"},R:{64647:"primary-rep-challenger3",65909:"primary-rep-challenger1",65937:"primary-rep-other",66014:"primary-rep-other",66015:"primary-rep-challenger2",66063:"primary-rep-other",66064:"primary-rep-other",66065:"primary-rep-other"}}},4806:{H:{D:{64599:"primary-dem-other",65911:"primary-dem-challenger2",65912:"primary-dem-challenger3",65913:"primary-dem-challenger1",65929:"primary-dem-other"},R:{42863:"primary-rep-other",63164:"primary-rep-other",65914:"primary-rep-other",65915:"primary-rep-other",65925:"primary-rep-other",65938:"primary-rep-other",65939:"primary-rep-other",65940:"primary-rep-other",66066:"primary-rep-challenger1",66067:"primary-rep-challenger2",66079:"primary-rep-challenger3"}}},4807:{H:{R:{284:"primary-rep-incumbent",66068:"primary-rep-challenger1"},D:{61900:"primary-dem-other",65916:"primary-dem-other",65917:"primary-dem-other",65918:"primary-dem-challenger1",65919:"primary-dem-challenger3",65941:"primary-dem-challenger2",65942:"primary-dem-other"}}},4808:{H:{R:{287:"primary-rep-incumbent"},D:{65920:"primary-dem-challenger1"}}},4809:{H:{D:{37280:"primary-dem-incumbent"}}},4810:{H:{D:{63177:"primary-dem-challenger3",65921:"primary-dem-other",65924:"primary-dem-other",65943:"primary-dem-challenger2",65944:"primary-dem-other",65945:"primary-dem-other",65946:"primary-dem-challenger1"},R:{38751:"primary-rep-incumbent",41839:"primary-rep-challenger1"}}},4811:{H:{D:{65922:"primary-dem-challenger1",65923:"primary-dem-challenger2"},R:{1860:"primary-rep-incumbent",65947:"primary-rep-challenger1"}}},4812:{H:{R:{296:"primary-rep-incumbent"},D:{65948:"primary-dem-challenger1"}}},4813:{H:{D:{65949:"primary-dem-challenger1"},R:{299:"primary-rep-incumbent"}}},4814:{H:{D:{65950:"primary-dem-challenger1",65951:"primary-dem-challenger2"},R:{61980:"primary-rep-incumbent",62015:"primary-rep-challenger1",66016:"primary-rep-challenger2"}}},4815:{H:{D:{64608:"primary-dem-incumbent"},R:{64614:"primary-rep-challenger1"}}},4816:{H:{D:{58358:"primary-dem-other",61922:"primary-dem-challenger1",65952:"primary-dem-other",65953:"primary-dem-other",65954:"primary-dem-challenger3",65955:"primary-dem-challenger2"},R:{65956:"primary-rep-challenger2",66017:"primary-rep-challenger1"}}},4817:{H:{D:{65957:"primary-dem-challenger2",66018:"primary-dem-challenger1"},R:{60215:"primary-rep-incumbent"}}},4818:{H:{D:{312:"primary-dem-incumbent",66019:"primary-dem-challenger1"},R:{64619:"primary-rep-challenger1"}}},4819:{H:{R:{64621:"primary-rep-incumbent"},D:{65958:"primary-dem-challenger1"}}},4820:{H:{D:{58407:"primary-dem-incumbent"}}},4821:{H:{D:{65959:"primary-dem-challenger3",65960:"primary-dem-other",65961:"primary-dem-challenger1",66020:"primary-dem-challenger2"},R:{40801:"primary-rep-other",62012:"primary-rep-challenger3",63186:"primary-rep-other",65962:"primary-rep-other",65963:"primary-rep-other",65964:"primary-rep-other",65965:"primary-rep-other",65966:"primary-rep-other",65967:"primary-rep-other",65968:"primary-rep-challenger2",65969:"primary-rep-other",65970:"primary-rep-other",66021:"primary-rep-other",66069:"primary-rep-other",66070:"primary-rep-other",66071:"primary-rep-other",66080:"primary-rep-other",66081:"primary-rep-challenger1"}}},4822:{H:{D:{63188:"primary-dem-other",65971:"primary-dem-challenger2",65972:"primary-dem-challenger3",66022:"primary-dem-challenger1",66023:"primary-dem-other"},R:{58008:"primary-rep-incumbent",65973:"primary-rep-challenger3",65974:"primary-rep-challenger2",66082:"primary-rep-challenger1"}}},4823:{H:{D:{41733:"primary-dem-challenger3",65975:"primary-dem-challenger2",65976:"primary-dem-challenger1",66024:"primary-dem-other",66025:"primary-dem-other"},R:{61403:"primary-rep-incumbent",66026:"primary-rep-challenger1"}}},4824:{H:{D:{64635:"primary-dem-challenger1",65977:"primary-dem-challenger2",65978:"primary-dem-challenger3",66027:"primary-dem-other"},R:{42752:"primary-rep-incumbent",66072:"primary-rep-challenger1"}}},4825:{H:{D:{64636:"primary-dem-other",65979:"primary-dem-challenger1",65980:"primary-dem-other",65981:"primary-dem-challenger3",65982:"primary-dem-challenger2"},R:{62001:"primary-rep-incumbent"}}},4826:{H:{D:{65983:"primary-dem-challenger2",65984:"primary-dem-challenger1"},R:{1017:"primary-rep-incumbent",65985:"primary-rep-challenger1"}}},4827:{H:{D:{61937:"primary-dem-other",62214:"primary-dem-challenger1",64640:"primary-dem-challenger2",65986:"primary-dem-challenger3"},R:{42289:"primary-rep-challenger1",62002:"primary-rep-other",63165:"primary-rep-other",65987:"primary-rep-challenger3",65988:"primary-rep-challenger2",66028:"primary-rep-other"}}},4828:{H:{D:{327:"primary-dem-incumbent"}}},4829:{H:{D:{42158:"primary-dem-challenger2",64642:"primary-dem-challenger3",65989:"primary-dem-other",65990:"primary-dem-other",65991:"primary-dem-other",65992:"primary-dem-challenger1",65993:"primary-dem-other"},R:{64645:"primary-rep-challenger1",66073:"primary-rep-other",66074:"primary-rep-challenger3",66075:"primary-rep-challenger2"}}},4830:{H:{D:{350:"primary-dem-incumbent",61938:"primary-dem-challenger1",64456:"primary-dem-challenger2"}}},4831:{H:{D:{64648:"primary-dem-challenger2",65994:"primary-dem-other",65995:"primary-dem-challenger3",65996:"primary-dem-challenger1"},R:{1441:"primary-rep-incumbent",64649:"primary-rep-challenger1"}}},4832:{H:{D:{65997:"primary-dem-other",65998:"primary-dem-challenger1",65999:"primary-dem-challenger2",66e3:"primary-dem-other",66001:"primary-dem-other",66002:"primary-dem-challenger3",66003:"primary-dem-other"},R:{358:"primary-rep-incumbent",64658:"primary-rep-challenger1"}}},4833:{H:{D:{61945:"primary-dem-challenger1",61950:"primary-dem-incumbent"},R:{66083:"primary-rep-challenger1"}}},4834:{H:{D:{61957:"primary-dem-incumbent"},R:{64654:"primary-rep-challenger1"}}},4835:{H:{D:{292:"primary-dem-incumbent"},R:{65930:"primary-rep-challenger1",66076:"primary-rep-challenger2"}}},4836:{H:{D:{66004:"primary-dem-challenger1",66005:"primary-dem-challenger2"},R:{41484:"primary-rep-incumbent"}}},17:{G:{D:{17155:"primary-dem-other",17710:"primary-dem-challenger1",63252:"primary-dem-other",66098:"primary-dem-challenger3",66099:"primary-dem-challenger2",66100:"primary-dem-other"},R:{63253:"primary-rep-incumbent",66097:"primary-rep-challenger1"}}},1701:{H:{R:{61661:"primary-rep-challenger1"},D:{1263:"primary-dem-incumbent"}}},1702:{H:{D:{53697:"primary-dem-incumbent",62245:"primary-dem-challenger1"},R:{64721:"primary-rep-challenger2",66104:"primary-rep-challenger3",66105:"primary-rep-challenger1"}}},1703:{H:{R:{16827:"primary-rep-challenger1"},D:{50681:"primary-dem-incumbent",66106:"primary-dem-challenger1"}}},1704:{H:{R:{66107:"primary-rep-challenger1"},D:{16407:"primary-dem-challenger2",66108:"primary-dem-challenger3",66147:"primary-dem-challenger1"}}},1705:{H:{R:{59282:"primary-rep-challenger1"},D:{59914:"primary-dem-incumbent",66110:"primary-dem-challenger3",66111:"primary-dem-challenger2",66112:"primary-dem-challenger1"}}},1706:{H:{R:{53825:"primary-rep-incumbent"},D:{64666:"primary-dem-challenger3",66113:"primary-dem-other",66114:"primary-dem-other",66115:"primary-dem-other",66116:"primary-dem-challenger2",66117:"primary-dem-challenger1",66146:"primary-dem-other"}}},1707:{H:{R:{65644:"primary-rep-challenger2",66118:"primary-rep-challenger1"},D:{59339:"primary-dem-incumbent",66119:"primary-dem-challenger1"}}},1708:{H:{R:{66120:"primary-rep-challenger1"},D:{61644:"primary-dem-incumbent"}}},1709:{H:{R:{18288:"primary-rep-other",66121:"primary-rep-challenger1",66122:"primary-rep-challenger3",66123:"primary-rep-challenger2"},D:{1275:"primary-dem-incumbent"}}},1710:{H:{D:{61646:"primary-dem-incumbent"},R:{66124:"primary-rep-challenger1",66125:"primary-rep-challenger2",66126:"primary-rep-challenger3"}}},1711:{H:{R:{8699:"primary-rep-challenger2",64673:"primary-rep-challenger1"},D:{58367:"primary-dem-incumbent"}}},1712:{H:{0:{66129:"primary-rep-challenger1"},R:{15698:"primary-rep-incumbent",66127:"primary-rep-challenger1"},D:{66128:"primary-dem-challenger1",66150:"primary-dem-challenger2"}}},1713:{H:{R:{16089:"primary-rep-incumbent"},D:{1879:"primary-dem-other",66130:"primary-dem-other",66131:"primary-dem-challenger2",66132:"primary-dem-challenger1",66133:"primary-dem-challenger3"}}},1714:{H:{R:{53754:"primary-rep-incumbent"},D:{63229:"primary-dem-other",64676:"primary-dem-other",66134:"primary-dem-other",66135:"primary-dem-challenger2",66136:"primary-dem-challenger3",66137:"primary-dem-challenger1",66151:"primary-dem-other"}}},1715:{H:{R:{1285:"primary-rep-incumbent"},D:{66138:"primary-dem-challenger2",66139:"primary-dem-challenger1"}}},1716:{H:{R:{60166:"primary-rep-incumbent",64572:"primary-rep-challenger1"},D:{66140:"primary-dem-challenger2",66141:"primary-dem-challenger3",66142:"primary-dem-other",66143:"primary-dem-challenger1"}}},1717:{H:{R:{66152:"primary-rep-challenger1"},D:{61657:"primary-dem-incumbent"}}},1718:{H:{R:{16982:"primary-rep-incumbent",66144:"primary-rep-challenger1"},D:{60165:"primary-dem-challenger3",65645:"primary-dem-challenger2",66145:"primary-dem-challenger1"}}},18:{S:{D:{5e4:"primary-dem-incumbent"},R:{19081:"primary-rep-challenger2",53892:"primary-rep-challenger3",66197:"primary-rep-challenger1"}}},39:{G:{R:{1748:"primary-rep-challenger1",57185:"primary-rep-challenger2"},D:{1380:"primary-dem-challenger2",36817:"primary-dem-other",63277:"primary-dem-other",66208:"primary-dem-challenger3",66209:"primary-dem-challenger1",66257:"primary-dem-other"}},S:{D:{1384:"primary-dem-incumbent"},R:{59844:"primary-rep-other",60314:"primary-rep-challenger1",66210:"primary-rep-challenger2",66211:"primary-rep-other",66270:"primary-rep-challenger3"}}},54:{S:{D:{47450:"primary-dem-incumbent",66286:"primary-dem-challenger1"},R:{59268:"primary-rep-challenger2",66287:"primary-rep-challenger1",66288:"primary-rep-challenger3",66289:"primary-rep-other",66290:"primary-rep-other",66291:"primary-rep-other"}}},1801:{H:{D:{422:"primary-dem-incumbent",18775:"primary-dem-challenger1",66160:"primary-dem-challenger2"},R:{1287:"primary-rep-other",64753:"primary-rep-other",66158:"primary-rep-challenger1",66159:"primary-rep-challenger3",66161:"primary-rep-challenger2",66162:"primary-rep-other"}}},1802:{H:{D:{63312:"primary-dem-other",66163:"primary-dem-other",66164:"primary-dem-challenger3",66165:"primary-dem-challenger1",66166:"primary-dem-other",66198:"primary-dem-challenger2"},R:{60423:"primary-rep-incumbent",66167:"primary-rep-challenger1"}}},1803:{H:{D:{61676:"primary-dem-challenger1",61677:"primary-dem-challenger3",66168:"primary-dem-challenger2"},R:{64756:"primary-rep-incumbent"}}},1804:{H:{D:{18871:"primary-dem-other",63318:"primary-dem-challenger3",66169:"primary-dem-challenger1",66170:"primary-dem-challenger2",66171:"primary-dem-other",66199:"primary-dem-other"},R:{63321:"primary-rep-other",66172:"primary-rep-challenger3",66173:"primary-rep-challenger1",66174:"primary-rep-other",66175:"primary-rep-other",66176:"primary-rep-challenger2",66177:"primary-rep-other"}}},1805:{H:{D:{66179:"primary-dem-other",66180:"primary-dem-challenger2",66181:"primary-dem-other",66200:"primary-dem-challenger3",66256:"primary-dem-challenger1"},R:{61698:"primary-rep-incumbent"}}},1806:{H:{D:{18907:"primary-dem-other",63327:"primary-dem-challenger3",66183:"primary-dem-challenger2",66184:"primary-dem-challenger1",66185:"primary-dem-other",66201:"primary-dem-other"},R:{19119:"primary-rep-challenger2",50005:"primary-rep-challenger1",64761:"primary-rep-other",66188:"primary-rep-other",66189:"primary-rep-challenger3"}}},1807:{H:{D:{57849:"primary-dem-incumbent",59380:"primary-dem-other",61686:"primary-dem-challenger2",63330:"primary-dem-challenger3",66190:"primary-dem-challenger1"},R:{61710:"primary-rep-other",61712:"primary-rep-other",66191:"primary-rep-challenger1",66192:"primary-rep-other",66202:"primary-rep-challenger2",66203:"primary-rep-challenger3"}}},1808:{H:{D:{66204:"primary-dem-challenger1"},R:{60421:"primary-rep-incumbent",64764:"primary-rep-challenger2",66193:"primary-rep-challenger1"}}},1809:{H:{D:{66194:"primary-dem-challenger3",66195:"primary-dem-challenger2",66205:"primary-dem-challenger1"},R:{64768:"primary-rep-incumbent",66196:"primary-rep-challenger1"}}},3701:{H:{D:{34352:"primary-dem-incumbent"},R:{66301:"primary-rep-challenger1"}}},3702:{H:{D:{66302:"primary-dem-challenger2",66303:"primary-dem-challenger1",66386:"primary-dem-challenger3"},R:{61779:"primary-rep-incumbent",66304:"primary-rep-challenger1"},L:{66305:"primary-rep-challenger1"}}},3703:{H:{R:{1362:"primary-rep-incumbent",64735:"primary-rep-challenger1",66306:"primary-rep-challenger2"}}},3704:{H:{D:{450:"primary-dem-incumbent",66307:"primary-dem-challenger1",66308:"primary-dem-challenger2"},R:{66309:"primary-rep-challenger1"},L:{34945:"primary-rep-challenger1",66310:"primary-rep-challenger2"}}},3705:{H:{D:{66311:"primary-dem-challenger2",66387:"primary-dem-challenger1"},R:{1877:"primary-rep-incumbent",66312:"primary-rep-challenger2",66313:"primary-rep-challenger1"}}},3706:{H:{D:{66314:"primary-dem-challenger1",66315:"primary-dem-challenger2"},R:{63389:"primary-rep-incumbent"}}},3707:{H:{D:{66316:"primary-dem-challenger1",66317:"primary-dem-challenger2"},R:{35605:"primary-rep-incumbent"}}},3708:{H:{R:{61758:"primary-rep-incumbent"},D:{66318:"primary-dem-challenger3",66319:"primary-dem-challenger1",66320:"primary-dem-challenger2"}}},3709:{H:{D:{64742:"primary-dem-challenger1",66321:"primary-dem-challenger2"},R:{56030:"primary-rep-incumbent",63306:"primary-rep-challenger2",66322:"primary-rep-challenger1"},L:{66337:"primary-rep-challenger1"}}},3710:{H:{D:{66338:"primary-dem-challenger1"},R:{35265:"primary-rep-incumbent",35959:"primary-rep-challenger1",60664:"primary-rep-other",66323:"primary-rep-other",66324:"primary-rep-challenger3",66325:"primary-rep-challenger2"}}},3711:{H:{D:{66326:"primary-dem-challenger2",66327:"primary-dem-challenger1",66328:"primary-dem-challenger3"},R:{61773:"primary-rep-incumbent",66329:"primary-rep-challenger1"},L:{66330:"primary-rep-challenger1"}}},3712:{H:{D:{55929:"primary-dem-incumbent",66331:"primary-dem-challenger1",66332:"primary-dem-challenger3",66333:"primary-dem-challenger2"},R:{36028:"primary-rep-challenger1",66334:"primary-rep-challenger2",66335:"primary-rep-challenger3"}}},3713:{H:{D:{64731:"primary-dem-challenger2",66336:"primary-dem-challenger1"},R:{64970:"primary-rep-incumbent"},L:{34158:"primary-rep-challenger1"}}},3901:{H:{R:{391:"primary-rep-incumbent",66213:"primary-rep-challenger1"},D:{66212:"primary-dem-challenger1"}}},3902:{H:{R:{61892:"primary-rep-incumbent"},D:{36959:"primary-dem-challenger3",66214:"primary-dem-challenger2",66215:"primary-dem-challenger1"}}},3903:{H:{R:{66216:"primary-rep-challenger2",66217:"primary-rep-challenger1"},D:{57169:"primary-dem-incumbent"}}},3904:{H:{R:{57253:"primary-rep-incumbent",66271:"primary-rep-challenger1"},D:{63283:"primary-dem-challenger1",66258:"primary-dem-challenger2"}}},3905:{H:{R:{57148:"primary-rep-incumbent",66220:"primary-rep-challenger1",66221:"primary-rep-challenger2"},D:{64692:"primary-dem-challenger1",66219:"primary-dem-challenger2"}}},3906:{H:{R:{60428:"primary-rep-incumbent",66259:"primary-rep-challenger1"},D:{36712:"primary-dem-challenger1",66222:"primary-dem-challenger2"}}},3907:{H:{R:{57239:"primary-rep-incumbent",64695:"primary-rep-challenger1",66260:"primary-rep-challenger2"},D:{66224:"primary-dem-challenger1",66225:"primary-dem-challenger2"}}},3908:{H:{R:{64698:"primary-rep-incumbent"},D:{63286:"primary-dem-other",66226:"primary-dem-challenger1",66261:"primary-dem-challenger2",66262:"primary-dem-challenger3"}}},3909:{H:{R:{62790:"primary-rep-challenger3",66228:"primary-rep-challenger1",66229:"primary-rep-challenger2"},D:{405:"primary-dem-incumbent",66227:"primary-dem-challenger1"}}},3910:{H:{R:{1376:"primary-rep-incumbent",36777:"primary-rep-challenger2",60915:"primary-rep-challenger1"},D:{63293:"primary-dem-challenger1",66230:"primary-dem-challenger2",66231:"primary-dem-challenger3"}}},3911:{H:{R:{64708:"primary-rep-challenger1",66232:"primary-rep-challenger2"},D:{59885:"primary-dem-incumbent"}}},3912:{H:{R:{66236:"primary-rep-other",66237:"primary-rep-other",66238:"primary-rep-other",66240:"primary-rep-other",66241:"primary-rep-other",66242:"primary-rep-challenger2",66243:"primary-rep-challenger1",66266:"primary-rep-challenger3",66267:"primary-rep-other"},D:{64709:"primary-dem-challenger1",66233:"primary-dem-challenger2",66234:"primary-dem-other",66235:"primary-dem-other",66263:"primary-dem-other",66265:"primary-dem-challenger3"}}},3999:{H:{R:{66236:"primary-rep-other",66237:"primary-rep-other",66238:"primary-rep-other",66240:"primary-rep-other",66241:"primary-rep-other",66242:"primary-rep-challenger2",66243:"primary-rep-challenger1",66266:"primary-rep-challenger3",66267:"primary-rep-other"},D:{64709:"primary-dem-challenger1",66233:"primary-dem-challenger2",66234:"primary-dem-other",66235:"primary-dem-other",66263:"primary-dem-other",66265:"primary-dem-challenger3"}}},3913:{H:{R:{66245:"primary-rep-challenger1"},D:{1388:"primary-dem-incumbent",63296:"primary-dem-challenger2",66244:"primary-dem-challenger1"}}},3914:{H:{R:{62559:"primary-rep-incumbent"},D:{66246:"primary-dem-challenger1"}}},3915:{H:{R:{57257:"primary-rep-incumbent"},D:{66247:"primary-dem-challenger1",66248:"primary-dem-challenger2"}}},3916:{H:{R:{66253:"primary-rep-challenger3",66254:"primary-rep-challenger1",66255:"primary-rep-challenger2"},D:{66249:"primary-dem-challenger1",66250:"primary-dem-other",66251:"primary-dem-other",66252:"primary-dem-challenger2",66268:"primary-dem-other",66269:"primary-dem-challenger3"}}},5401:{H:{D:{64873:"primary-dem-challenger2",66292:"primary-dem-challenger1",66293:"primary-dem-challenger3"},R:{47518:"primary-rep-challenger1"}}},5402:{H:{D:{66294:"primary-dem-challenger2",66295:"primary-dem-challenger1"},R:{22596:"primary-rep-incumbent"}}},5403:{H:{D:{47426:"primary-dem-challenger1",63444:"primary-dem-challenger2",66296:"primary-dem-challenger3",66300:"primary-dem-other"},R:{47432:"primary-rep-challenger1",47557:"primary-rep-challenger3",58970:"primary-rep-other",66297:"primary-rep-other",66298:"primary-rep-other",66299:"primary-rep-other","2018-05-08-WV-53263":"primary-rep-challenger2"}}},16:{G:{D:{63497:"primary-dem-challenger1",66398:"primary-dem-challenger2",66399:"primary-dem-challenger3"},R:{53635:"primary-rep-challenger3",60527:"primary-rep-challenger1",63483:"primary-rep-other",63499:"primary-rep-other",64032:"primary-rep-other",66400:"primary-rep-challenger2",66401:"primary-rep-other"}}},31:{G:{D:{66349:"primary-dem-challenger1",66350:"primary-dem-challenger3",66351:"primary-dem-challenger2"},R:{51566:"primary-rep-incumbent",66348:"primary-rep-challenger1"}},S:{D:{30019:"primary-dem-challenger3",57805:"primary-dem-challenger2",66339:"primary-dem-challenger1",66340:"primary-dem-other"},R:{61796:"primary-rep-challenger1",61800:"primary-rep-incumbent",64417:"primary-rep-challenger2",64839:"primary-rep-other",66338:"primary-rep-other"}}},41:{G:{0:{66736:"primary-rep-challenger3",66737:"primary-rep-challenger1",66738:"primary-rep-challenger2"},R:{66731:"primary-rep-challenger1",64918:"primary-rep-challenger2",66733:"primary-rep-challenger3",63551:"primary-rep-other",64909:"primary-rep-other",66732:"primary-rep-other",66734:"primary-rep-other",66735:"primary-rep-other",66741:"primary-rep-other",66742:"primary-rep-other"},D:{57502:"primary-dem-incumbent",66740:"primary-dem-challenger1",59364:"primary-dem-challenger2"}}},42:{G:{R:{66404:"primary-rep-challenger1",66405:"primary-rep-challenger3",66406:"primary-rep-challenger2"},D:{63485:"primary-dem-incumbent"}},S:{D:{39527:"primary-dem-incumbent"},R:{252:"primary-rep-challenger1",66403:"primary-rep-challenger2"}}},1601:{H:{D:{66388:"primary-dem-challenger3",66389:"primary-dem-challenger2",66402:"primary-dem-challenger1"},R:{63500:"primary-rep-challenger1",66390:"primary-rep-challenger2",66391:"primary-rep-challenger3",66392:"primary-rep-other",66393:"primary-rep-other",66394:"primary-rep-other",66395:"primary-rep-other"}}},1602:{H:{D:{66396:"primary-dem-challenger1",66397:"primary-dem-challenger2"},R:{504:"primary-rep-incumbent"}}},3101:{H:{D:{63265:"primary-dem-challenger2",66342:"primary-dem-challenger1"},R:{49989:"primary-rep-incumbent"}}},3102:{H:{D:{63450:"primary-dem-challenger2",66343:"primary-dem-challenger1"},R:{64838:"primary-rep-incumbent"}}},3103:{H:{D:{66347:"primary-dem-challenger1"},R:{30010:"primary-rep-incumbent",66344:"primary-rep-challenger1",66345:"primary-rep-challenger3",66346:"primary-rep-challenger2"}}},4101:{H:{R:{66711:"primary-rep-challenger2",66712:"primary-rep-challenger1",66713:"primary-rep-challenger3"},D:{61555:"primary-dem-incumbent",66709:"primary-dem-challenger2",66710:"primary-dem-challenger1"}}},4102:{H:{R:{481:"primary-rep-incumbent",64923:"primary-rep-challenger1",66720:"primary-rep-challenger2"},D:{4305:"primary-dem-challenger2",66714:"primary-dem-other",66715:"primary-dem-challenger3",66716:"primary-dem-other",66717:"primary-dem-other",66718:"primary-dem-other",66719:"primary-dem-challenger1"}}},4103:{H:{0:{64477:"primary-rep-challenger2",66723:"primary-rep-challenger1"},D:{482:"primary-dem-incumbent",65534:"primary-dem-challenger1",66721:"primary-dem-challenger3",66722:"primary-dem-challenger2"}}},4104:{H:{R:{60612:"primary-rep-other",63564:"primary-rep-challenger1",66725:"primary-rep-challenger3",66726:"primary-rep-other",66727:"primary-rep-challenger2"},D:{484:"primary-dem-incumbent",66724:"primary-dem-challenger1"}}},4105:{H:{R:{61498:"primary-rep-challenger3",66729:"primary-rep-challenger2",66730:"primary-rep-challenger1"},D:{57501:"primary-dem-incumbent",66728:"primary-dem-challenger1"}}},4201:{H:{R:{64827:"primary-rep-incumbent",66409:"primary-rep-challenger1"},D:{66407:"primary-dem-challenger3",66408:"primary-dem-challenger1",66465:"primary-dem-challenger2"}}},4202:{H:{D:{63512:"primary-dem-incumbent",66410:"primary-dem-challenger1"},R:{66411:"primary-rep-challenger1"}}},4203:{H:{D:{49768:"primary-dem-incumbent",66412:"primary-dem-challenger1"},R:{66413:"primary-rep-challenger1"}}},4204:{H:{D:{254:"primary-dem-challenger3",66414:"primary-dem-challenger1",66416:"primary-dem-challenger2"},R:{66417:"primary-rep-challenger1"}}},4205:{H:{R:{66426:"primary-rep-challenger1"},D:{39792:"primary-dem-other",57670:"primary-dem-other",64820:"primary-dem-other",66418:"primary-dem-challenger1",66419:"primary-dem-other",66420:"primary-dem-other",66421:"primary-dem-challenger3",66423:"primary-dem-challenger2",66424:"primary-dem-other",66471:"primary-dem-other"}}},4206:{H:{R:{66428:"primary-rep-challenger1"},D:{66427:"primary-dem-challenger1"}}},4207:{H:{R:{66432:"primary-rep-challenger1",66433:"primary-rep-challenger2"},D:{57537:"primary-dem-challenger3",61608:"primary-dem-other",66429:"primary-dem-other",66430:"primary-dem-other",66431:"primary-dem-challenger2",66467:"primary-dem-challenger1"}}},4208:{H:{R:{66434:"primary-rep-challenger1",66435:"primary-rep-challenger2",66468:"primary-rep-challenger3"},D:{61612:"primary-dem-challenger1"}}},4209:{H:{R:{58537:"primary-rep-challenger2",66438:"primary-rep-challenger1",66439:"primary-rep-challenger3"},D:{64831:"primary-dem-challenger1",66436:"primary-dem-challenger2",66437:"primary-dem-challenger3"}}},4210:{H:{R:{61618:"primary-rep-incumbent"},D:{66440:"primary-dem-other",66441:"primary-dem-challenger1",66442:"primary-dem-challenger3",66469:"primary-dem-challenger2"}}},4211:{H:{R:{64832:"primary-rep-challenger1",64833:"primary-rep-incumbent"},D:{66443:"primary-dem-challenger1"}}},4212:{H:{R:{60542:"primary-rep-incumbent",66446:"primary-rep-challenger1"},D:{66444:"primary-dem-challenger1",66445:"primary-dem-challenger2"}}},4213:{H:{R:{63506:"primary-rep-other",63507:"primary-rep-challenger3",66448:"primary-rep-challenger2",66449:"primary-rep-other",66450:"primary-rep-challenger1",66451:"primary-rep-other",66452:"primary-rep-other",66453:"primary-rep-other"},D:{66447:"primary-dem-challenger1"}}},4214:{H:{R:{66102:"primary-rep-challenger1",66458:"primary-rep-challenger2"},D:{66454:"primary-dem-other",66455:"primary-dem-challenger1",66456:"primary-dem-challenger2",66457:"primary-dem-challenger3"}}},4215:{H:{R:{58283:"primary-rep-incumbent"},D:{66459:"primary-dem-challenger2",66460:"primary-dem-challenger1"}}},4216:{H:{R:{60917:"primary-rep-incumbent"},D:{66461:"primary-dem-challenger1",66462:"primary-dem-challenger3",66463:"primary-dem-challenger2"}}},4217:{H:{R:{60544:"primary-rep-incumbent"},D:{66101:"primary-dem-incumbent"}}},4218:{H:{D:{255:"primary-dem-incumbent",61609:"primary-dem-challenger1"}}},13:{G:{D:{66667:"primary-dem-challenger1",66668:"primary-dem-challenger2"},R:{53319:"primary-rep-challenger2",53322:"primary-rep-challenger1",66669:"primary-rep-challenger3",66670:"primary-rep-other",66671:"primary-rep-other",66702:"primary-rep-other"}}},1301:{H:{R:{63354:"primary-rep-incumbent"},D:{66673:"primary-dem-challenger2",66674:"primary-dem-challenger1"}}},1302:{H:{D:{1253:"primary-dem-incumbent"},R:{66675:"primary-rep-challenger1"}}},1303:{H:{R:{64902:"primary-rep-incumbent",66677:"primary-rep-challenger1"},D:{66676:"primary-dem-challenger2",66707:"primary-dem-challenger1"}}},1304:{H:{D:{59400:"primary-dem-incumbent",66678:"primary-dem-challenger1"},R:{66679:"primary-rep-challenger1"}}},1305:{H:{D:{833:"primary-dem-incumbent"}}},1306:{H:{R:{61015:"primary-rep-incumbent"},D:{66681:"primary-dem-challenger1",66682:"primary-dem-challenger3",66683:"primary-dem-challenger2",66684:"primary-dem-other"}}},1307:{H:{R:{61021:"primary-rep-incumbent",66690:"primary-rep-challenger1"},D:{12927:"primary-dem-other",66685:"primary-dem-challenger3",66686:"primary-dem-other",66687:"primary-dem-challenger1",66688:"primary-dem-other",66689:"primary-dem-challenger2"}}},1308:{H:{R:{13031:"primary-rep-incumbent"}}},1309:{H:{D:{66693:"primary-dem-challenger2",66708:"primary-dem-challenger1"},R:{62270:"primary-rep-incumbent"}}},1310:{H:{D:{66694:"primary-dem-challenger1",66703:"primary-dem-challenger3",66704:"primary-dem-challenger2"},R:{61020:"primary-rep-incumbent",66695:"primary-rep-challenger2",66696:"primary-rep-challenger1"}}},1311:{H:{D:{66697:"primary-dem-challenger1"},R:{63369:"primary-rep-incumbent"}}},1312:{H:{D:{66698:"primary-dem-challenger2",66705:"primary-dem-challenger3",66706:"primary-dem-challenger1"},R:{61316:"primary-rep-incumbent",63374:"primary-rep-challenger1"}}},1313:{H:{D:{1257:"primary-dem-incumbent"},R:{66699:"primary-rep-challenger1",66700:"primary-rep-challenger2"}}},1314:{H:{D:{66701:"primary-dem-challenger1"},R:{53104:"primary-rep-incumbent"}}},2101:{H:{R:{54203:"primary-rep-incumbent"},D:{66272:"primary-dem-challenger1",66815:"primary-dem-challenger2"}}},2102:{H:{R:{54282:"primary-rep-incumbent"},D:{20747:"primary-dem-challenger3",64843:"primary-dem-challenger2",66273:"primary-dem-other",66274:"primary-dem-challenger1"}}},2103:{H:{R:{66275:"primary-rep-challenger3",66276:"primary-rep-challenger2",66277:"primary-rep-challenger1"},D:{51522:"primary-dem-incumbent"}}},2104:{H:{D:{66278:"primary-dem-challenger2",66279:"primary-dem-challenger3",66280:"primary-dem-challenger1"},R:{61880:"primary-rep-incumbent"}}},2105:{H:{R:{208:"primary-rep-incumbent",66816:"primary-rep-challenger1"},D:{51523:"primary-dem-challenger2",66281:"primary-dem-challenger1"}}},2106:{H:{R:{60705:"primary-rep-incumbent",66285:"primary-rep-challenger1"},D:{63434:"primary-dem-other",64856:"primary-dem-challenger1",66282:"primary-dem-challenger2",66283:"primary-dem-challenger3",66284:"primary-dem-other",66782:"primary-dem-other"}}},"05":{G:{D:{66368:"primary-dem-challenger2",66369:"primary-dem-challenger1"},R:{5956:"primary-rep-incumbent",66370:"primary-rep-challenger1"}}},"0501":{H:{D:{66352:"primary-dem-challenger1"},R:{60226:"primary-rep-incumbent"}}},"0502":{H:{D:{66354:"primary-dem-challenger1",66355:"primary-dem-other",66356:"primary-dem-challenger2",66357:"primary-dem-challenger3"},R:{63416:"primary-rep-incumbent"}}},"0503":{H:{D:{66359:"primary-dem-challenger1"},R:{60238:"primary-rep-incumbent",66360:"primary-rep-challenger1"}}},"0504":{H:{D:{66363:"primary-dem-challenger1"},R:{63418:"primary-rep-incumbent",66364:"primary-rep-challenger1"}}},"06":{G:{X:{6745:"primary-dem-challenger3",6981:"primary-dem-other",7623:"primary-dem-other",7995:"primary-dem-other",8696:"primary-dem-challenger2",60374:"primary-dem-challenger1",60376:"primary-dem-other",63581:"primary-dem-other",63629:"primary-dem-other",66497:"primary-rep-challenger2",66498:"primary-rep-other",66499:"primary-dem-other",66500:"primary-dem-other",66501:"primary-dem-other",66502:"primary-dem-other",66503:"primary-dem-other",66504:"primary-dem-other",66505:"primary-dem-other",66506:"primary-dem-other",66507:"primary-dem-other",66508:"primary-dem-other",66509:"primary-dem-other",66510:"primary-dem-other",66511:"primary-dem-other",66512:"primary-dem-other",66651:"primary-rep-challenger1",66652:"primary-dem-other"}},S:{X:{41:"primary-dem-other",112:"primary-dem-other",1704:"primary-dem-incumbent",59417:"primary-dem-other",61824:"primary-dem-other",63681:"primary-dem-other",64542:"primary-rep-other",64725:"primary-dem-other",64986:"primary-dem-other",64991:"primary-dem-other",64998:"primary-dem-other",65e3:"primary-dem-other",65003:"primary-dem-other",65111:"primary-dem-other",66485:"primary-dem-challenger1",66486:"primary-dem-other",66487:"primary-dem-other",66488:"primary-rep-challenger1",66489:"primary-dem-other",66490:"primary-dem-challenger3",66491:"primary-dem-other",66492:"primary-dem-other",66493:"primary-dem-other",66494:"primary-dem-other",66495:"primary-dem-other",66496:"primary-dem-other",66647:"primary-rep-challenger3",66648:"primary-dem-challenger2",66649:"primary-dem-other",66650:"primary-dem-other",66664:"primary-rep-challenger2",66665:"primary-dem-other"}}},"0603":{H:{X:{7136:"primary-dem-incumbent",8389:"primary-dem-challenger1",66517:"primary-dem-challenger2"}}},"0605":{H:{X:{1115:"primary-dem-incumbent",65012:"primary-dem-challenger1",66523:"primary-dem-challenger2",66653:"primary-dem-challenger3"}}},"0606":{H:{X:{51416:"primary-dem-incumbent",65015:"primary-dem-challenger1"}}},"0607":{H:{X:{60686:"primary-dem-incumbent",66524:"primary-dem-other",66525:"primary-dem-challenger2",66526:"primary-dem-challenger1",66527:"primary-dem-challenger3"}}},"0608":{H:{X:{62339:"primary-dem-incumbent",63584:"primary-dem-challenger1",65019:"primary-dem-challenger2",66528:"primary-dem-other",66529:"primary-dem-challenger3"}}},"0610":{H:{X:{52493:"primary-dem-incumbent",62828:"primary-dem-other",63608:"primary-dem-challenger2",66532:"primary-dem-challenger3",66533:"primary-dem-challenger1",66534:"primary-dem-other",66535:"primary-dem-other",66536:"primary-dem-other"}}},"0612":{H:{X:{24:"primary-dem-incumbent",7350:"primary-dem-other",66539:"primary-dem-challenger2",66540:"primary-dem-other",66541:"primary-dem-other",66542:"primary-dem-challenger1",66543:"primary-dem-challenger3"}}},"0613":{H:{X:{28:"primary-dem-incumbent"}}},"0614":{H:{X:{52489:"primary-dem-incumbent",66544:"primary-dem-challenger1"}}},"0616":{H:{X:{6818:"primary-dem-incumbent",66547:"primary-dem-challenger1"}}},"0617":{H:{X:{7547:"primary-dem-incumbent",8737:"primary-dem-other",50818:"primary-dem-challenger3",65028:"primary-dem-challenger2",66548:"primary-dem-challenger1"}}},"0618":{H:{X:{43:"primary-dem-incumbent",66549:"primary-dem-challenger2",66550:"primary-dem-challenger1"}}},"0620":{H:{X:{62844:"primary-dem-challenger2",65030:"primary-dem-incumbent",66551:"primary-dem-challenger1"}}},"0622":{H:{X:{67:"primary-dem-incumbent",66552:"primary-dem-other",66553:"primary-dem-other",66554:"primary-dem-challenger1",66555:"primary-dem-challenger2",66654:"primary-dem-challenger3"}}},"0624":{H:{X:{63635:"primary-dem-challenger1",65043:"primary-dem-incumbent",66559:"primary-dem-challenger2"}}},"0626":{H:{X:{62395:"primary-dem-incumbent",66562:"primary-dem-challenger2",66563:"primary-dem-challenger1",66656:"primary-dem-challenger3"}}},"0629":{H:{X:{6525:"primary-dem-challenger1",6688:"primary-dem-incumbent",65052:"primary-dem-challenger3",66566:"primary-dem-other",66567:"primary-dem-challenger2"}}},"0630":{H:{X:{84:"primary-dem-incumbent",60848:"primary-dem-challenger3",65055:"primary-dem-challenger1",66568:"primary-dem-challenger2"}}},"0631":{H:{X:{62883:"primary-dem-incumbent",65057:"primary-dem-challenger2",65058:"primary-dem-challenger1"}}},"0632":{H:{X:{113:"primary-dem-incumbent"}}},"0633":{H:{X:{63666:"primary-dem-incumbent",64988:"primary-dem-challenger2",65106:"primary-dem-challenger1"}}},"0634":{H:{X:{65841:"primary-dem-incumbent",65849:"primary-dem-challenger2",65851:"primary-dem-challenger1"}}},"0635":{H:{X:{128:"primary-dem-challenger1",63684:"primary-dem-incumbent",66569:"primary-dem-challenger2"}}},"0636":{H:{X:{62342:"primary-dem-incumbent",65062:"primary-dem-challenger2",66570:"primary-dem-challenger3",66571:"primary-dem-other",66657:"primary-dem-challenger1",66658:"primary-dem-other"}}},"0637":{H:{X:{50853:"primary-dem-incumbent",66572:"primary-dem-challenger1"}}},"0642":{H:{X:{132:"primary-dem-incumbent",66588:"primary-dem-challenger3",66589:"primary-dem-challenger1",66590:"primary-dem-challenger2"}}},"0644":{H:{X:{65073:"primary-dem-incumbent",66594:"primary-dem-challenger3",66595:"primary-dem-challenger1",66596:"primary-dem-challenger2"}}},"0602":{H:{X:{62060:"primary-dem-challenger1",62063:"primary-dem-incumbent",63594:"primary-dem-challenger2"}}},"0604":{H:{X:{52499:"primary-dem-incumbent",66518:"primary-dem-challenger1",66519:"primary-dem-other",66520:"primary-dem-challenger2",66521:"primary-dem-challenger3",66522:"primary-dem-other"}}},"0609":{H:{X:{50403:"primary-dem-incumbent",66530:"primary-dem-challenger1",66531:"primary-dem-challenger2"}}},"0615":{H:{X:{62343:"primary-dem-incumbent",66545:"primary-dem-challenger1",66546:"primary-dem-challenger2"}}},"0619":{H:{X:{49:"primary-dem-incumbent"}}},"0621":{H:{X:{51779:"primary-dem-challenger1",62229:"primary-dem-incumbent"}}},"0623":{H:{X:{52561:"primary-dem-incumbent",65039:"primary-dem-other",66556:"primary-dem-challenger2",66557:"primary-dem-challenger3",66558:"primary-dem-challenger1",66655:"primary-dem-other"}}},"0625":{H:{X:{59941:"primary-dem-challenger2",63641:"primary-dem-incumbent",65048:"primary-dem-other",66560:"primary-dem-challenger1",66561:"primary-dem-challenger3"}}},"0627":{H:{X:{52450:"primary-dem-incumbent",66564:"primary-dem-challenger1"}}},"0628":{H:{X:{89:"primary-dem-incumbent",62852:"primary-dem-challenger1",66565:"primary-dem-challenger2"}}},"0638":{H:{X:{116:"primary-dem-incumbent",63654:"primary-dem-challenger1"}}},"0639":{H:{X:{7419:"primary-dem-other",62821:"primary-dem-challenger3",62866:"primary-dem-other",66573:"primary-dem-other",66574:"primary-dem-other",66575:"primary-dem-other",66576:"primary-dem-other",66577:"primary-dem-challenger2",66578:"primary-dem-other",66579:"primary-dem-other",66580:"primary-dem-other",66581:"primary-dem-other",66582:"primary-dem-other",66583:"primary-dem-other",66584:"primary-dem-challenger1",66585:"primary-dem-other",66659:"primary-dem-other"}}},"0640":{H:{X:{102:"primary-dem-incumbent",66586:"primary-dem-challenger1"}}},"0641":{H:{X:{8584:"primary-dem-incumbent",66587:"primary-dem-challenger1"}}},"0643":{H:{X:{104:"primary-dem-incumbent",65070:"primary-dem-other",66591:"primary-dem-challenger1",66592:"primary-dem-challenger3",66593:"primary-dem-challenger2"}}},"0645":{H:{X:{1220:"primary-dem-other",12594:"primary-dem-incumbent",66597:"primary-dem-other",66598:"primary-dem-challenger3",66599:"primary-dem-challenger2",66666:"primary-dem-challenger1"}}},"0601":{H:{X:{52531:"primary-dem-incumbent",60110:"primary-dem-challenger1",62055:"primary-dem-challenger2",66513:"primary-dem-other",66514:"primary-dem-challenger3",66515:"primary-dem-other",66516:"primary-dem-other"}}},"0646":{H:{X:{52470:"primary-dem-incumbent",66600:"primary-dem-challenger1",66601:"primary-dem-challenger2",66660:"primary-dem-challenger3"}}},"0647":{H:{X:{52455:"primary-dem-incumbent",66602:"primary-dem-challenger2",66603:"primary-dem-challenger1"}}},"0648":{H:{X:{138:"primary-dem-incumbent",6488:"primary-dem-other",66604:"primary-dem-other",66605:"primary-dem-other",66606:"primary-dem-other",66607:"primary-dem-other",66608:"primary-dem-challenger3",66609:"primary-dem-other",66610:"primary-dem-other",66611:"primary-dem-other",66612:"primary-dem-challenger1",66613:"primary-dem-other",66614:"primary-dem-other",66615:"primary-dem-challenger2",66616:"primary-dem-other",66617:"primary-dem-other"}}},"0649":{H:{X:{65086:"primary-dem-challenger3",66618:"primary-dem-other",66619:"primary-dem-other",66620:"primary-dem-challenger2",66621:"primary-dem-other",66622:"primary-dem-other",66623:"primary-dem-other",66624:"primary-dem-other",66625:"primary-dem-challenger1",66626:"primary-dem-other",66627:"primary-dem-other",66628:"primary-dem-other",66629:"primary-dem-other",66630:"primary-dem-other",66661:"primary-dem-other",66662:"primary-dem-other"}}},"0650":{H:{X:{59681:"primary-dem-incumbent",65088:"primary-dem-other",66631:"primary-dem-other",66632:"primary-dem-challenger2",66633:"primary-dem-other",66634:"primary-dem-challenger3",66663:"primary-dem-challenger1"}}},"0651":{H:{X:{52480:"primary-dem-incumbent",65091:"primary-dem-challenger1",66635:"primary-dem-other",66636:"primary-dem-challenger2",66637:"primary-dem-challenger3",66638:"primary-dem-other"}}},"0653":{H:{X:{157:"primary-dem-incumbent",7873:"primary-dem-challenger1",66643:"primary-dem-other",66644:"primary-dem-challenger2",66645:"primary-dem-other",66646:"primary-dem-challenger3"}}},"0611":{H:{X:{60108:"primary-dem-incumbent",62832:"primary-dem-challenger2",66537:"primary-dem-challenger1",66538:"primary-dem-challenger3"}}},"0652":{H:{X:{50902:"primary-dem-incumbent",65097:"primary-dem-challenger3",65099:"primary-dem-other",66639:"primary-dem-challenger1",66640:"primary-dem-other",66641:"primary-dem-challenger2",66642:"primary-dem-other"}}},"01":{G:{R:{3576:"primary-rep-incumbent",66764:"primary-rep-challenger1",66765:"primary-rep-challenger2",66766:"primary-rep-other",66779:"primary-rep-challenger3"},D:{3221:"primary-dem-challenger2",40497:"primary-dem-other",66761:"primary-dem-challenger3",66762:"primary-dem-other",66763:"primary-dem-challenger1",66778:"primary-dem-other"}}},"0101":{H:{R:{52813:"primary-rep-incumbent"},D:{65879:"primary-dem-other",66780:"primary-dem-other"}}},"0102":{H:{R:{59445:"primary-rep-other",60628:"primary-rep-incumbent",66769:"primary-rep-other",66770:"primary-rep-other",66781:"primary-rep-other"},D:{66767:"primary-dem-other",66768:"primary-dem-other"}}},"0103":{H:{R:{1161:"primary-rep-incumbent"},D:{66771:"primary-dem-other",66772:"primary-dem-other"}}},"0104":{H:{R:{523:"primary-rep-incumbent",66774:"primary-rep-other"},D:{62165:"primary-dem-other",66773:"primary-dem-other"}}},"0105":{H:{R:{60629:"primary-rep-incumbent",66776:"primary-rep-other"},D:{66775:"primary-dem-other"}}},"0106":{H:{D:{66777:"primary-dem-other"},R:{63532:"primary-rep-incumbent"}}},"0107":{H:{D:{60639:"primary-dem-incumbent"}}},19:{G:{D:{536:"primary-dem-other",66743:"primary-dem-challenger2",66744:"primary-dem-challenger3",66745:"primary-dem-challenger1",66746:"primary-dem-other",66747:"primary-dem-other"},R:{66095:"primary-rep-incumbent"},L:{66748:"primary-rep-other",66749:"primary-rep-other"}}},30:{S:{D:{55866:"primary-dem-incumbent"},R:{29484:"primary-rep-challenger2",63731:"primary-rep-challenger1",66817:"primary-rep-other",66818:"primary-rep-challenger3"}}},34:{S:{D:{386:"primary-dem-incumbent",66832:"primary-dem-challenger1"},R:{63446:"primary-rep-challenger1",66858:"primary-rep-challenger2"}}},35:{G:{R:{31918:"primary-rep-challenger1"},D:{56810:"primary-dem-challenger3",59726:"primary-dem-challenger1",66481:"primary-dem-challenger2"}},S:{D:{59492:"primary-dem-incumbent"},R:{66482:"primary-rep-challenger1"}}},46:{G:{D:{66831:"primary-dem-challenger1"},R:{60394:"primary-rep-challenger1",66829:"primary-rep-challenger2"}}},23:{G:{D:{54894:"primary-dem-challenger1",59994:"primary-dem-challenger3",66377:"primary-dem-other",66378:"primary-dem-other",66379:"primary-dem-other",66380:"primary-dem-other",66381:"primary-dem-challenger2"},R:{60615:"primary-rep-challenger1",66373:"primary-rep-other",66375:"primary-rep-challenger3",66376:"primary-rep-challenger2"}},S:{D:{66371:"primary-dem-challenger1"},R:{66372:"primary-rep-challenger1"}}},32:{G:{D:{30127:"primary-dem-other",30335:"primary-dem-challenger2",30812:"primary-dem-challenger1",66786:"primary-dem-other",66787:"primary-dem-other",66807:"primary-dem-challenger3",100013:"primary-dem-other"},R:{30558:"primary-rep-other",60368:"primary-rep-other",62091:"primary-rep-challenger2",65155:"primary-rep-other",66788:"primary-rep-challenger1",66789:"primary-rep-other",66790:"primary-rep-challenger3",66809:"primary-rep-other",100013:"primary-rep-other",66808:"primary-rep-other"}},S:{D:{63763:"primary-dem-challenger3",65149:"primary-dem-other",65162:"primary-dem-challenger2",65163:"primary-dem-challenger1",66783:"primary-dem-other",66806:"primary-dem-other",100013:"primary-dem-other"},R:{30423:"primary-rep-incumbent",62093:"primary-rep-challenger3",65152:"primary-rep-challenger2",66784:"primary-rep-challenger1",66785:"primary-rep-other",100013:"primary-rep-other"}}},38:{S:{R:{62068:"primary-rep-challenger1",66920:"primary-rep-challenger2"},D:{36149:"primary-dem-incumbent"}}},45:{G:{0:{66885:"primary-rep-other"},R:{40378:"primary-rep-incumbent",58031:"primary-rep-other",66883:"primary-rep-challenger2",66884:"primary-rep-challenger1",66917:"primary-rep-challenger3"},D:{57947:"primary-dem-challenger1",66881:"primary-dem-challenger3",66882:"primary-dem-challenger2"}}},51:{S:{D:{51423:"primary-dem-incumbent"},R:{62121:"primary-rep-challenger3",65856:"primary-rep-challenger1",66926:"primary-rep-challenger2"}}},2301:{H:{D:{59613:"primary-dem-incumbent"},R:{65177:"primary-rep-other"}}},2302:{H:{R:{60410:"primary-rep-incumbent"},D:{66383:"primary-dem-other",66384:"primary-dem-other",66385:"primary-dem-other"}}},3201:{H:{D:{30878:"primary-dem-incumbent",65517:"primary-dem-other"},R:{65156:"primary-rep-other",66791:"primary-rep-other"}}},3202:{H:{R:{56895:"primary-rep-other",56930:"primary-rep-incumbent",66795:"primary-rep-other",66796:"primary-rep-other"},D:{30784:"primary-dem-other",63769:"primary-dem-other",65160:"primary-dem-other",66792:"primary-dem-other",66793:"primary-dem-other",66794:"primary-dem-other"}}},3203:{H:{R:{30386:"primary-rep-other",59541:"primary-rep-other",60365:"primary-rep-other",63798:"primary-rep-other",66800:"primary-rep-other",66801:"primary-rep-other",66802:"primary-rep-other",66803:"primary-rep-other",66810:"primary-rep-other"},D:{65164:"primary-dem-other",65174:"primary-dem-other",66797:"primary-dem-other",66798:"primary-dem-other",66799:"primary-dem-other",66809:"primary-dem-other",66812:"primary-dem-other"}}},3204:{H:{D:{62079:"primary-dem-other",62092:"primary-dem-other",66804:"primary-dem-other",66805:"primary-dem-other",66813:"primary-dem-other",66950:"primary-dem-other"},R:{51987:"primary-rep-other",63775:"primary-rep-other",63776:"primary-rep-other",65161:"primary-rep-other",66811:"primary-rep-other",66814:"primary-rep-other"}}},3801:{H:{D:{66921:"primary-dem-other"},R:{66922:"primary-rep-other",66923:"primary-rep-other",66924:"primary-rep-other",66925:"primary-rep-other"}}},4501:{H:{D:{66886:"primary-dem-other",66887:"primary-dem-other"},R:{600:"primary-rep-incumbent",65134:"primary-rep-other",66888:"primary-rep-other"}}},4503:{H:{0:{66893:"primary-rep-other"},D:{63787:"primary-dem-other",66892:"primary-dem-other"},R:{57891:"primary-rep-incumbent"}}},4505:{H:{0:{65512:"primary-rep-other"},R:{51896:"primary-rep-incumbent"},D:{63784:"primary-dem-other",65867:"primary-dem-other",66911:"primary-dem-other",66912:"primary-dem-other"}}},4506:{H:{0:{66914:"primary-rep-other"},D:{1414:"primary-dem-incumbent"},R:{66913:"primary-rep-other"}}},5101:{H:{R:{57798:"primary-rep-incumbent"},D:{66927:"primary-dem-other",66928:"primary-dem-other",66929:"primary-dem-other"}}},5102:{H:{D:{66930:"primary-dem-other",66931:"primary-dem-other"},R:{60321:"primary-rep-incumbent",66946:"primary-rep-other"}}},5103:{H:{D:{1451:"primary-dem-incumbent"}}},5104:{H:{D:{45762:"primary-dem-incumbent"},R:{66932:"primary-rep-other",66933:"primary-rep-other"}}},5106:{H:{D:{66934:"primary-dem-other",66935:"primary-dem-other",66936:"primary-dem-other",66947:"primary-dem-other"}}},5107:{H:{D:{66937:"primary-dem-other",66948:"primary-dem-other"}}},5108:{H:{D:{45543:"primary-dem-incumbent"}}},5109:{H:{D:{62474:"primary-dem-other",66938:"primary-dem-other"},R:{58574:"primary-rep-incumbent"}}},5110:{H:{D:{66939:"primary-dem-other",66940:"primary-dem-other",66941:"primary-dem-other",66942:"primary-dem-other",66943:"primary-dem-other",66944:"primary-dem-other"},R:{63886:"primary-rep-incumbent",66945:"primary-rep-other"}}},5111:{H:{D:{59040:"primary-dem-incumbent"},R:{66949:"primary-rep-other"}}},24:{G:{R:{63859:"primary-rep-incumbent"},D:{54681:"primary-dem-challenger3",61493:"primary-dem-other",66958:"primary-dem-other",66959:"primary-dem-challenger1",66960:"primary-dem-challenger2",66961:"primary-dem-other",66962:"primary-dem-other",66963:"primary-dem-incumbent",67001:"primary-dem-other"}},S:{D:{1057:"primary-dem-incumbent",28331:"primary-dem-other",64793:"primary-dem-other",66951:"primary-dem-other",66952:"primary-dem-challenger1",66953:"primary-dem-other",66954:"primary-dem-challenger2",66955:"primary-dem-other"},R:{57635:"primary-rep-other",57713:"primary-rep-other",61592:"primary-rep-other",63869:"primary-rep-other",63872:"primary-rep-challenger3",65570:"primary-rep-other",66956:"primary-rep-other",66957:"primary-rep-challenger2",66998:"primary-rep-challenger1",66999:"primary-rep-other",67e3:"primary-rep-other"}}},28:{S:{D:{66861:"primary-dem-challenger2",66878:"primary-dem-challenger1",55627:"primary-dem-challenger1",66862:"primary-dem-other",66863:"primary-dem-other",66864:"primary-dem-other"},R:{212:"primary-rep-incumbent",66879:"primary-rep-challenger1"}}},36:{S:{"00":{D:{51916:"primary-dem-challenger1"},R:{67075:"primary-rep-challenger1"}}},G:{D:{1506:"primary-dem-incumbent",67748:"primary-dem-challenger1"},R:{67747:"primary-rep-challenger1"}}},40:{G:{D:{37478:"primary-dem-challenger1",63813:"primary-dem-challenger2"},R:{1391:"primary-rep-other",37799:"primary-rep-other",51669:"primary-rep-challenger3",64372:"primary-rep-challenger1",67004:"primary-rep-other",67005:"primary-rep-other",67006:"primary-rep-other",67007:"primary-rep-challenger2",67008:"primary-rep-other",67009:"primary-rep-other"},L:{38199:"primary-rep-other",67010:"primary-rep-other",67011:"primary-rep-other"}}},49:{S:{0:{63850:"primary-rep-other"},D:{67063:"primary-dem-challenger1"},R:{893:"primary-rep-challenger1",67064:"primary-rep-challenger2"}}},2401:{H:{R:{58831:"primary-rep-incumbent",66969:"primary-rep-other",66970:"primary-rep-other"},D:{66964:"primary-dem-other",66965:"primary-dem-other",66966:"primary-dem-other",66967:"primary-dem-other",66968:"primary-dem-other",67002:"primary-dem-other"}}},2402:{H:{R:{62459:"primary-rep-other",64809:"primary-rep-other",66972:"primary-rep-other",66973:"primary-rep-other"},D:{1055:"primary-dem-incumbent",66971:"primary-dem-other"}}},2403:{H:{R:{58657:"primary-rep-other",66976:"primary-rep-other",66977:"primary-rep-other"},D:{28104:"primary-dem-other",51603:"primary-dem-incumbent",66974:"primary-dem-other",66975:"primary-dem-other"}}},2404:{H:{R:{28197:"primary-rep-other"},D:{54705:"primary-dem-incumbent"}}},2405:{H:{R:{66978:"primary-rep-other",66979:"primary-rep-other"},D:{1061:"primary-dem-incumbent",64415:"primary-dem-other"}}},2406:{H:{R:{64800:"primary-rep-other",66985:"primary-rep-other",66986:"primary-rep-other",66987:"primary-rep-other"},D:{51605:"primary-dem-other",57606:"primary-dem-other",64807:"primary-dem-other",66980:"primary-dem-other",66981:"primary-dem-other",66982:"primary-dem-other",66983:"primary-dem-other",66984:"primary-dem-other"}}},2407:{H:{R:{27881:"primary-rep-other",64803:"primary-rep-other",66997:"primary-rep-other",67003:"primary-rep-other"},D:{1064:"primary-dem-incumbent",57630:"primary-dem-other",66988:"primary-dem-other",66989:"primary-dem-other",66990:"primary-dem-other"}}},2408:{H:{R:{66994:"primary-rep-other",66995:"primary-rep-other",66996:"primary-rep-other"},D:{64804:"primary-dem-incumbent",66992:"primary-dem-other",66993:"primary-dem-other"}}},2803:{H:{R:{66867:"primary-rep-other",66870:"primary-rep-other"}}},3601:{H:{0:{59740:"primary-rep-other"},D:{34003:"primary-dem-other",67076:"primary-dem-other",67077:"primary-dem-other",67078:"primary-dem-other",67079:"primary-dem-other"},R:{59740:"primary-rep-other"},C:{59740:"primary-rep-other"},W:{67076:"primary-rep-other"},F:{65209:"primary-rep-other"},I:{59740:"primary-rep-other"}}},3602:{H:{0:{1514:"primary-rep-other"},D:{65206:"primary-dem-other",67081:"primary-dem-other"},R:{1514:"primary-rep-other"},W:{65206:"primary-rep-other"},I:{65206:"primary-rep-other"},C:{1514:"primary-rep-other"},F:{65206:"primary-rep-other"}}},3603:{H:{0:{33896:"primary-rep-other"},R:{67082:"primary-rep-other"},D:{33896:"primary-dem-other"},C:{67082:"primary-rep-other"},I:{33896:"primary-rep-other"},W:{33896:"primary-rep-other"},F:{33896:"primary-rep-other"}}},3604:{H:{0:{67083:"primary-rep-other"},D:{63736:"primary-dem-other"},R:{67083:"primary-rep-other"},C:{67083:"primary-rep-other"},W:{63736:"primary-rep-other"}}},3605:{H:{D:{1521:"primary-dem-incumbent",67084:"primary-dem-other",67085:"primary-dem-other"}}},3606:{H:{0:{62304:"primary-rep-other"},D:{62304:"primary-dem-other"},F:{62304:"primary-rep-other"}}},3607:{H:{D:{1535:"primary-dem-other"},C:{67087:"primary-rep-other"},F:{1535:"primary-rep-other"}}},3608:{H:{0:{67088:"primary-rep-other"},D:{33006:"primary-dem-other"},C:{33030:"primary-rep-other"},F:{33006:"primary-rep-other"}}},3609:{H:{0:{67091:"primary-rep-other"},D:{32471:"primary-dem-other",67089:"primary-dem-other"},C:{67090:"primary-rep-other"},R:{67090:"primary-rep-other"},F:{32471:"primary-rep-other"}}},3610:{H:{0:{67092:"primary-rep-other"},D:{1525:"primary-dem-other"},R:{67092:"primary-rep-other"},F:{1525:"primary-rep-other"},C:{67092:"primary-rep-other"}}},3611:{H:{0:{32620:"primary-rep-other"},D:{67093:"primary-dem-other",67094:"primary-dem-other",67095:"primary-dem-other",67096:"primary-dem-other",67097:"primary-dem-other",67098:"primary-dem-other"},R:{32620:"primary-rep-other",61215:"primary-rep-other"},C:{32620:"primary-rep-other"},I:{32620:"primary-rep-other"},F:{67096:"primary-rep-other"},W:{67096:"primary-rep-other"}}},3612:{H:{0:{67102:"primary-rep-other"},D:{1541:"primary-dem-other",67100:"primary-dem-other"},R:{67101:"primary-rep-other"},F:{1541:"primary-rep-other"}}},3613:{H:{0:{67103:"primary-rep-other"},D:{57004:"primary-dem-other"},R:{67103:"primary-rep-other"},F:{57004:"primary-rep-other"}}},3614:{H:{D:{1523:"primary-dem-other",67104:"primary-dem-other"},R:{67105:"primary-rep-other"},C:{63746:"primary-rep-other"},W:{1523:"primary-rep-other"},F:{1523:"primary-rep-other"}}},3615:{H:{D:{1545:"primary-dem-other"},R:{67108:"primary-rep-other"},C:{67108:"primary-rep-other"},F:{1545:"primary-rep-other"}}},3616:{H:{D:{1547:"primary-dem-other",65674:"primary-dem-other",67109:"primary-dem-other",67110:"primary-dem-other"},W:{1547:"primary-rep-other"},F:{1547:"primary-rep-other"}}},3617:{H:{0:{67111:"primary-rep-other"},D:{1551:"primary-dem-other"},W:{1551:"primary-rep-other"},F:{1551:"primary-rep-other"}}},3618:{H:{0:{63759:"primary-rep-other"},D:{62318:"primary-dem-other"},R:{63759:"primary-rep-other"},C:{63759:"primary-rep-other"},I:{62318:"primary-rep-other"},F:{62318:"primary-rep-other"},W:{62318:"primary-rep-other"}}},3619:{H:{0:{32696:"primary-rep-other"},D:{67112:"primary-dem-other",67113:"primary-dem-other",67114:"primary-dem-other",67115:"primary-dem-other",67116:"primary-dem-other",67117:"primary-dem-other",67118:"primary-dem-other"},R:{32696:"primary-rep-other"},C:{32696:"primary-rep-other"},I:{32696:"primary-rep-other"},F:{67119:"primary-rep-other"}}},3620:{H:{0:{57037:"primary-rep-other"},D:{57037:"primary-dem-other"},R:{65228:"primary-rep-other"},W:{57037:"primary-rep-other"},F:{57037:"primary-rep-other"}}},3621:{H:{0:{63754:"primary-rep-other"},D:{67120:"primary-dem-other",67121:"primary-dem-other",67122:"primary-dem-other",67123:"primary-dem-other",67124:"primary-dem-other",67125:"primary-dem-other"},R:{63754:"primary-rep-other"},C:{63754:"primary-rep-other"},F:{67125:"primary-rep-other"},I:{63754:"primary-rep-other"}}},3622:{H:{0:{63809:"primary-rep-other"},D:{67128:"primary-dem-other"},R:{63809:"primary-rep-other"},C:{63809:"primary-rep-other"},I:{67128:"primary-rep-other"},W:{67128:"primary-rep-other"},F:{67128:"primary-rep-other"}}},3623:{H:{D:{67129:"primary-dem-other",67131:"primary-dem-other",67132:"primary-dem-other",67133:"primary-dem-other",67134:"primary-dem-other"},R:{60935:"primary-rep-other"},I:{60935:"primary-rep-other"},F:{67133:"primary-rep-other"},C:{60935:"primary-rep-other"},W:{67133:"primary-rep-other"}}},3624:{H:{0:{63757:"primary-rep-other"},D:{67135:"primary-dem-other",67136:"primary-dem-other"},R:{63757:"primary-rep-other"},C:{63757:"primary-rep-other"},I:{63757:"primary-rep-other"},F:{67135:"primary-rep-other"},W:{67135:"primary-rep-other"}}},3625:{H:{0:{67140:"primary-rep-other"},D:{57063:"primary-dem-other",67137:"primary-dem-other",67138:"primary-dem-other",67139:"primary-dem-other"},R:{67140:"primary-rep-other"},C:{67140:"primary-rep-other"},I:{57063:"primary-rep-other"},W:{57063:"primary-rep-other"},F:{57063:"primary-rep-other"}}},3626:{H:{D:{32940:"primary-dem-other"},R:{67141:"primary-rep-other"},F:{32940:"primary-rep-other"},W:{32940:"primary-rep-other"}}},3627:{H:{0:{67143:"primary-rep-other"},D:{67142:"primary-dem-other"},R:{62324:"primary-rep-other"},C:{62324:"primary-rep-other"},I:{62324:"primary-rep-other"},W:{67142:"primary-rep-other"},F:{67142:"primary-rep-other"}}},4001:{H:{R:{37660:"primary-rep-other",67017:"primary-rep-other",67018:"primary-rep-other",67019:"primary-rep-other",67020:"primary-rep-other"},D:{67012:"primary-dem-other",67013:"primary-dem-other",67014:"primary-dem-other",67015:"primary-dem-other",67016:"primary-dem-other"}}},4002:{H:{D:{37771:"primary-dem-other",67021:"primary-dem-other",67022:"primary-dem-other",67023:"primary-dem-other"},R:{62235:"primary-rep-incumbent",64947:"primary-rep-other",65540:"primary-rep-other",67038:"primary-rep-other"},L:{67037:"primary-rep-other"}}},4003:{H:{R:{1396:"primary-rep-incumbent"},D:{59450:"primary-dem-other",67024:"primary-dem-other"}}},4004:{H:{R:{1398:"primary-rep-incumbent",64953:"primary-rep-other"},D:{67026:"primary-dem-other",67027:"primary-dem-other",67028:"primary-dem-other",67029:"primary-dem-other"}}},4005:{H:{D:{62238:"primary-dem-other",67030:"primary-dem-other",67031:"primary-dem-other",67032:"primary-dem-other",67033:"primary-dem-other",67034:"primary-dem-other"},R:{63829:"primary-rep-incumbent",67035:"primary-rep-other",67036:"primary-rep-other"}}},4502:{H:{D:{66889:"primary-dem-other",66890:"primary-dem-other"}}},4504:{H:{R:{63779:"primary-rep-other",66899:"primary-rep-other"},D:{50265:"primary-dem-other",66900:"primary-dem-other"}}},4507:{H:{D:{65141:"primary-dem-other",66918:"primary-dem-other"}}},4901:{H:{0:{67067:"primary-rep-other"},D:{67065:"primary-dem-other",67066:"primary-dem-other"},R:{618:"primary-rep-incumbent"}}},4902:{H:{0:{67070:"primary-rep-other"},D:{67069:"primary-dem-other"},R:{61890:"primary-rep-incumbent"}}},4903:{H:{0:{67073:"primary-rep-other"},R:{44042:"primary-rep-incumbent",65872:"primary-rep-other"},D:{67072:"primary-dem-other"}}},4904:{H:{D:{67074:"primary-dem-other"},R:{62178:"primary-rep-incumbent"}}},"08":{G:{R:{67042:"primary-rep-challenger1",67043:"primary-rep-challenger3",67044:"primary-rep-other",67045:"primary-rep-challenger2"},D:{9302:"primary-dem-challenger1",67039:"primary-dem-challenger2",67040:"primary-dem-other",67041:"primary-dem-challenger3"}}},"0802":{H:{D:{67047:"primary-dem-other",67048:"primary-dem-other"},R:{67049:"primary-rep-other"}}},"0803":{H:{D:{65631:"primary-dem-other",67050:"primary-dem-other",67051:"primary-dem-other"},R:{51753:"primary-rep-incumbent"}}},"0804":{H:{D:{67052:"primary-dem-other",67053:"primary-dem-other"},R:{61077:"primary-rep-incumbent"}}},"0806":{H:{D:{67060:"primary-dem-other",67061:"primary-dem-other"},R:{8993:"primary-rep-incumbent"}}},"0805":{H:{R:{9174:"primary-rep-incumbent",65183:"primary-rep-other",67057:"primary-rep-other",67058:"primary-rep-other",67059:"primary-rep-other"},D:{67056:"primary-dem-other"}}},"0807":{H:{D:{9291:"primary-dem-incumbent"},R:{67062:"primary-rep-other"}}},"0801":{H:{D:{734:"primary-dem-incumbent",67046:"primary-dem-other"},R:{65186:"primary-rep-other"}}},47:{G:{D:{58232:"primary-dem-challenger2",67392:"primary-dem-challenger1",67393:"primary-dem-challenger3"},R:{1418:"primary-rep-other",58195:"primary-rep-challenger3",58206:"primary-rep-other",67394:"primary-rep-other",67428:"primary-rep-challenger2",67429:"primary-rep-challenger1"}},S:{D:{646:"primary-dem-challenger1",1426:"primary-dem-challenger3",59564:"primary-dem-challenger2"},R:{682:"primary-rep-challenger1",67391:"primary-rep-challenger2"}}},20:{G:{D:{54093:"primary-dem-challenger3",67301:"primary-dem-challenger1",67302:"primary-dem-other",67303:"primary-dem-other",67304:"primary-dem-challenger2"},R:{50109:"primary-rep-challenger2",54127:"primary-rep-challenger3",66153:"primary-rep-incumbent",67305:"primary-rep-challenger1",67306:"primary-rep-other",67307:"primary-rep-other",67308:"primary-rep-other"}}},26:{G:{D:{55071:"primary-dem-challenger1",67151:"primary-dem-challenger3",67152:"primary-dem-challenger2"},R:{25244:"primary-rep-challenger1",67148:"primary-rep-challenger2",67149:"primary-rep-challenger3",67150:"primary-rep-other"}},S:{D:{1729:"primary-dem-incumbent"},R:{24959:"primary-rep-challenger2",67181:"primary-rep-challenger1"}}},29:{S:{D:{1339:"primary-dem-other",29135:"primary-dem-incumbent",64290:"primary-dem-other",65394:"primary-dem-other",67254:"primary-dem-other",67255:"primary-dem-challenger1",67256:"primary-dem-challenger2"},R:{61488:"primary-rep-other",64722:"primary-rep-challenger2",65381:"primary-rep-other",67257:"primary-rep-challenger1",67258:"primary-rep-other",67259:"primary-rep-other",67260:"primary-rep-other",67261:"primary-rep-other",67262:"primary-rep-other",67263:"primary-rep-other",67294:"primary-rep-challenger3"}}},53:{S:{X:{1805:"primary-dem-incumbent",45950:"primary-dem-other",59512:"primary-dem-challenger1",59513:"primary-dem-other",59520:"primary-dem-other",62523:"primary-dem-other",62524:"primary-dem-other",62982:"primary-dem-other",62987:"primary-dem-other",64046:"primary-dem-other",64066:"primary-dem-other",64542:"primary-rep-challenger3",65275:"primary-dem-other",65279:"primary-dem-other",65317:"primary-dem-other",67213:"primary-rep-challenger1",67214:"primary-dem-challenger2",67215:"primary-dem-other",67216:"primary-dem-other",67217:"primary-dem-other",67218:"primary-dem-other",67219:"primary-dem-other",67220:"primary-rep-challenger2",67221:"primary-dem-other",67222:"primary-dem-other",67223:"primary-dem-other",67224:"primary-dem-other",67225:"primary-dem-challenger3",67250:"primary-dem-other"}}},15:{G:{R:{13653:"primary-rep-challenger1",67456:"primary-rep-challenger2",67457:"primary-rep-challenger3"},D:{14832:"primary-dem-other",53396:"primary-dem-incumbent",53401:"primary-dem-challenger1",67453:"primary-dem-other",67454:"primary-dem-other",67455:"primary-dem-challenger2"}},S:{D:{1594:"primary-dem-incumbent"},R:{14940:"primary-rep-other",57591:"primary-rep-other",61476:"primary-rep-other",64542:"primary-rep-challenger1",67438:"primary-rep-other",67439:"primary-rep-challenger2",67440:"primary-rep-challenger3",67441:"primary-rep-other"}}},27:{G:{D:{26773:"primary-dem-other",51531:"primary-dem-challenger2",67363:"primary-dem-challenger3",67364:"primary-dem-challenger1",67388:"primary-dem-other"},R:{976:"primary-rep-challenger1",26363:"primary-rep-challenger2",67365:"primary-rep-challenger3"}},S:{"00":{R:{64542:"primary-rep-challenger3",65487:"primary-rep-other",67390:"primary-rep-challenger1",67360:"primary-rep-other",63957:"primary-rep-challenger2"},D:{51526:"primary-dem-incumbent",26223:"primary-dem-challenger3",67354:"primary-dem-challenger2",60713:"primary-dem-challenger1",67355:"primary-dem-other"}},"01":{D:{26326:"primary-dem-other",66096:"primary-dem-incumbent",67356:"primary-dem-challenger3",67357:"primary-dem-other",67358:"primary-dem-challenger2",67359:"primary-dem-challenger1"},R:{59610:"primary-rep-challenger2",65487:"primary-rep-challenger3",67361:"primary-rep-challenger1"}}}},50:{G:{D:{67434:"primary-dem-challenger2",67435:"primary-dem-challenger1",67436:"primary-dem-other",67437:"primary-dem-challenger3"},R:{45443:"primary-rep-incumbent",51395:"primary-rep-challenger1"}},S:{"00":{D:{1445:"primary-dem-incumbent",67298:"primary-dem-challenger1"},R:{62482:"primary-rep-challenger1",64542:"primary-rep-other",67299:"primary-rep-challenger2",67300:"primary-rep-challenger3"}}}},55:{G:{D:{48461:"primary-dem-challenger1",50201:"primary-dem-other",61634:"primary-dem-other",61780:"primary-dem-challenger2",62967:"primary-dem-challenger3",67331:"primary-dem-other",67332:"primary-dem-other",67333:"primary-dem-other",67334:"primary-dem-other",67350:"primary-dem-other"},R:{48976:"primary-rep-incumbent",67351:"primary-rep-challenger1"}},S:{"00":{D:{1092:"primary-dem-incumbent"},R:{59043:"primary-rep-challenger2",67328:"primary-rep-challenger1",67329:"primary-rep-other",67330:"primary-rep-challenger3",67349:"primary-rep-other"}}}},"09":{G:{R:{62327:"primary-rep-other",67512:"primary-rep-other",67513:"primary-rep-challenger1",67514:"primary-rep-challenger3",67522:"primary-rep-challenger2"},D:{9730:"primary-dem-challenger2",51911:"primary-dem-challenger1"}},S:{"00":{D:{52147:"primary-dem-incumbent"},R:{62729:"primary-rep-challenger1",67515:"primary-rep-challenger2"}}}},56:{G:{R:{59562:"primary-rep-challenger1",64386:"primary-rep-other",67593:"primary-rep-challenger3",67594:"primary-rep-other",67595:"primary-rep-challenger2",67597:"primary-rep-other"},D:{49137:"primary-dem-other",49252:"primary-dem-challenger2",61421:"primary-dem-challenger3",67592:"primary-dem-challenger1"}},S:{"00":{D:{51739:"primary-dem-challenger1"},R:{52935:"primary-rep-incumbent",64368:"primary-rep-challenger2",64542:"primary-rep-challenger3",67587:"primary-rep-challenger1",67588:"primary-rep-other",67596:"primary-rep-other"}}}},"02":{G:{R:{57566:"primary-rep-other",57567:"primary-rep-other",64252:"primary-rep-challenger2",67548:"primary-rep-other",67549:"primary-rep-challenger1",67550:"primary-rep-other",67556:"primary-rep-other"},D:{59501:"primary-dem-challenger1"}}},12:{G:{R:{861:"primary-rep-challenger2",58618:"primary-rep-other",62557:"primary-rep-challenger1",65651:"primary-rep-other",67613:"primary-rep-other",67614:"primary-rep-other",67674:"primary-rep-other",67675:"primary-rep-challenger3"},D:{60471:"primary-dem-other",64137:"primary-dem-challenger2",67609:"primary-dem-challenger3",67610:"primary-dem-other",67611:"primary-dem-challenger1",67612:"primary-dem-other",67673:"primary-dem-other"}},S:{"00":{R:{61149:"primary-rep-challenger1",64542:"primary-rep-challenger2"},D:{1711:"primary-dem-incumbent"}}}},"04":{G:{R:{52628:"primary-rep-challenger1",64364:"primary-rep-incumbent"},D:{67580:"primary-dem-challenger2",67581:"primary-dem-challenger1",67582:"primary-dem-challenger3"}},S:{"00":{D:{5418:"primary-dem-challenger1",67557:"primary-dem-challenger2"},R:{4543:"primary-rep-challenger3",61631:"primary-rep-challenger1",65707:"primary-rep-challenger2"}}}},25:{G:{D:{67468:"primary-dem-challenger1",67489:"primary-dem-challenger2"},R:{60668:"primary-rep-incumbent",63939:"primary-rep-challenger1"}},S:{"00":{D:{62244:"primary-dem-incumbent"},R:{67466:"primary-rep-challenger1",67467:"primary-rep-challenger3",67488:"primary-rep-challenger2"}}}},33:{G:{0:{65443:"primary-rep-other"},R:{65779:"primary-rep-incumbent"},D:{65778:"primary-dem-challenger2",67492:"primary-dem-challenger1"}}},10:{S:{"00":{R:{64542:"primary-rep-challenger3",67461:"primary-rep-challenger2",67462:"primary-rep-challenger1"},D:{1710:"primary-dem-incumbent",67463:"primary-dem-challenger1"}}}},44:{G:{R:{63912:"primary-rep-challenger1",67604:"primary-rep-challenger2",67605:"primary-rep-challenger3"},D:{39845:"primary-dem-challenger1",63911:"primary-dem-incumbent",67603:"primary-dem-challenger1"}},S:{"00":{D:{40102:"primary-dem-incumbent",67600:"primary-dem-challenger1"},R:{64542:"primary-rep-challenger2",67607:"primary-rep-challenger1"}}}}}}),{"wapo-shared/util":264}],186:[(function(e,t,r){"use strict";var s=e("wapo-shared/race-helpers"),l=e("wapo-shared/aggregate"),u=e("wapo-shared/race-helpers").MAJOR_PARTIES;t.exports=function(i){var a=i.results,n={},e=u.concat("Ind");["P","S","H","G"].forEach((function(r){n[r]={},e.forEach((function(t){["won","leading"].forEach((function(e){n[r][e+"-"+t]=0})),"P"===r&&(n[r]["voteCount-"+t]=0)}))})),n.P["voteCount-total"]=0;var o=n,t=function(e,t){for(var r in a[t][e])for(var n in a[t][e][r])l(o,i.candidates,a[t][e][r][n])};for(var r in a)r.length>4||(s.fips.isDistrict(r)&&a[r].H&&t("H",r),s.fips.isState(r)&&a[r].S&&t("S",r),s.fips.isState(r)&&a[r].G&&t("G",r));return o}}),{"wapo-shared/aggregate":258,"wapo-shared/race-helpers":263}],187:[(function(e,t,r){"use strict";var c=e("object-path"),p=e("wapo-shared/util"),h=e("wapo-shared/process"),d=e("wapo-shared/race-helpers"),f=e("../util/time"),m=e("../util/log"),y=e("../race-config").raceConfigLookup;t.exports=function(i,a,r,e){var n={},o={},s={},l={},t={},u=i.officeIDs.some((function(e){var t=i.watches[e],r=i.isPrecincts?["precinct",i.raceId]:[e,t],n=p.get(a,r,null);if((l[e]=n)&&f.diff(i.timestamp,n)<-1e3)return m.warn("Found old timestamp for "+e+"; bailing out",i.timestamp,a,r),!0;c.set(s,r,i.timestamp),i.isPrecincts||"all"!==i.watches[e]||c.set(s,[e,"state"],i.timestamp)}));if(i.isPrecincts&&i.error)return{timestamp:s,invalidatePrecincts:i.raceId};if(u)return{};return l=p.filterObject(l,(function(e){return f.strictISOPattern.test(e)})),t=i.races.reduce((function(e,t){var r=t.seatNum||"00";return e[d.getStateFips(t.statePostal)+"."+t.officeID+"."+(1==r.length?"0"+r:r)+"."+t.raceTypeID]=t.apiAccessTime,e}),{}),i.races.forEach((function(t){i.officeIDs.indexOf(t.officeID)<0&&i.officeIDs.indexOf(d.formatDateState(t.electionDate,t.statePostal))<0||(e&&t.electionDate!==e?m.debug("build-live","rejecting election on "+t.electionDate+" -- looking for "+e):t.reportingUnits.forEach((function(e){l[t.officeID]&&f.strictISOPattern.test(e.apiAccessTime)&&e.apiAccessTime<=l[t.officeID]||(e=h(o,t,e,r))&&(d.isPrimary(e.raceTypeID)&&e.reporting&&(e.leaders.length>0?(e.leadingCandidateIndex=p.get(y(e.parentRaceId,e.officeID,e.seatNum,e.raceTypeID,{}),+e.leaders[0],"failure"),"failure"!==e.leadingCandidateIndex&&(/won/.test(e.status)?e.leadingCandidateIndex=e.leadingCandidateIndex+"-won":/lead/.test(e.status)?e.leadingCandidateIndex=e.leadingCandidateIndex+"-lead":/not-yet-reporting/.test(e.status)?e.leadingCandidateIndex="noResults":e.leadingCandidateIndex=e.status)):"no-votes"!==e.status&&"not-yet-reporting"!==e.status||(e.leadingCandidateIndex="noResults")),c.set(n,[e.id,e.officeID,e.seatNum,e.raceTypeID],e))})))})),{results:n,candidates:i.isPrecincts?{}:o,timestamp:s,raceLastUpdate:t}}}),{"../race-config":185,"../util/log":211,"../util/time":225,"object-path":122,"wapo-shared/process":262,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],188:[(function(e,t,r){"use strict";var o=e("wapo-shared/race-helpers"),s=e("wapo-shared/process").attachDistrictId,l=e("../util/object-hash");t.exports=function(e){var t={},r={},n=(i=e,a={},["P","S","H","G"].forEach((function(t){var r=a[t]={tossup:0,"lean-Dem":0,"safe-Dem":0,"lean-GOP":0,"safe-GOP":0},n="P"===t?function(e,t){return e+o.getElectoral(t.statePostal)}:function(e){return e+1};i.races.filter((function(e){return e.officeID===t})).forEach((function(e){r[e.expectation]=n(r[e.expectation],e)}))})),a);var i,a;return e.races.forEach((function(e){"H"===e.officeID?(s(e,e),e.id=e.districtId):e.id=o.getStateFips(e.statePostal)+"-"+e.seatNum,e.candidates&&(e.candidates=e.candidates.map((function(e){var t=l(e);return r[t]=e,{id:t}}))),t[e.id]=t[e.id]||{},t[e.id][e.officeID]=e})),{loading:!1,results:t,aggregate:n,candidates:r,lastUpdated:e.lastupdated}}}),{"../util/object-hash":215,"wapo-shared/process":262,"wapo-shared/race-helpers":263}],189:[(function(e,t,r){"use strict";var g=e("d3-queue").queue,v=e("wapo-shared/util"),y=e("../browser/ajax"),b=e("wapo-shared/race-helpers"),_=e("../config"),n=e("../util/validate").asError,x=e("./validate"),w=e("../util/time"),D=e("../util/log");t.exports=function(e,t,r,n){var i={id:v.uniqueId(),pending:0,abort:function(){D.debug("fetch-live:abort",i.id),i.aborted=!0}},a=w.time(),o=w.moment(a+P).toISOString(),s=-1,l=[],u=[],c=g();D.debug("fetch-live:main","start",i.id,e,t.live),E&&(c.defer(M,i,e,t,r),E=!1);for(var p in e)if(S[p]){var h=C(e,t,p);if(w.isValid(h)){var d=(function(){var t=w.diff(o,h,"minutes"),e=v.find(R,(function(e){return e>t}));return e>0?(D.debug("fetch-live:main","using "+e+"-minute feed for "+p,o+" - "+h+" = "+t),s=Math.max(s,e),l.push(p)):(D.debug("fetch-live:main","need full fetch for "+p,o+" - "+h+" = "+t),u.push(p)),"continue"})();if("continue"===d)continue}D.debug("fetch-live:main","need full fetch for "+p,"(no previous timestamp)"),u.push(p)}else b.isDateStateId(p)?u.push(p):D.debug("fetch-live:main","Ignoring watch for requested officeID since it is neither a shortcut or a stateDate",p);u.length>0&&c.defer(I,i,u,e,t,r);s>0&&c.defer(A,i,l,s,e,t,r);for(var f in _.precinctRaceIds){var m=_.precinctRaceIds[f];if(e[m]){var y=v.get(t,["live","timestamp","precinct",m],null);(!w.isValid(y)||w.diff(a,y)>_.precinctsPollingInterval)&&c.defer(O,i,m,e,t,r)}}return c.awaitAll((function(e){n(e,i)})),i};var S=b.officeNames,R=[1,5],P=1e3,E=!0;function A(l,u,e,c,p,h,d){var f="metadata/changes/"+e+"-minute.json";D.debug("fetch-live:changes","request",f);var m=6e4*e;l.pending++,y.getJSON(T(f,p),(function(e,t){if(e=e||k(x.Changes,t))return d(e);D.debug("fetch-live:changes","response",v.get(t,"races.length")+" races changed",t);var r=g(),n={},i=[];for(var a in p.live.timestamp)if(b.isDateStateId(a))i.push(a),D.debug("jjh","skipping changes, going full fetch instead",i);else if(!(u.indexOf(a)<0)){var o=C(c,p,a);!w.isValid(o)||w.diff(t.createdAt,o)>=m?(D.debug("fetch-live:changes","Cannot use changes for "+a,"previousUpdate =",o),i.push(a)):n[a]=!0}var s=Object.keys(n);i.length>0&&r.defer(I,l,i,c,p,h),s.length?r.defer(h,"results:updateLiveResults",{races:t.races.filter((function(e){return n[e.officeID]})),timestamp:t.createdAt,watches:c,officeIDs:s,fetchStatus:l,endpoint:f}):l.pending--,r.awaitAll(d)}))}function M(r,e,t,n,i){D.debug("fetch-live:summary","request"),y.getJSON(T("metadata/summary.json",t),(function(e,t){if(D.debug("fetch-live:summary","response",t),e)return i(e);n("results:updateLiveResults",{summary:t,fetchStatus:r,endpoint:"metadata/summary.json"},(function(e){if(e)return i(e);i(null,t)}))}))}function I(i,e,a,o,s,t){var r=[],l=[];e.forEach((function(e){"all"===a[e]||b.isDateStateId(e)?l.push(e):"state"!==a[e]&&"H"!==e||r.push(e)}));var n=g(),u=v.mapObject(a,(function(e){return"all"===e?"state":e}));if(r.length>1){i.pending++,n.defer(h,i,"metadata/aggregates/state-reporting-units.json",r,u,o,s)}else if(1===r.length){var c=r[0],p=["metadata/aggregates",b.isDateStateId(c)?"states/"+c:S[c],"state-reporting-units.json"].join("/");i.pending++,n.defer(h,i,p,[c],u,o,s)}i.pending+=l.length,n.await((function(e){if(e)return t(e);s("results:broadcastMapData",{key:"live"},(function(e){if(e)return t(e);var n=g();l.forEach((function(e){var t="H"===e?"state-reporting-units.json":"all-reporting-units.json",r=["metadata/aggregates",b.isDateStateId(e)?"states/"+e:S[e],t].join("/");n.defer(h,i,r,[e],a,o,s)})),n.await(t)}))}))}function h(n,i,a,o,e,s,l){D.debug("fetch-live:full-result","request",i,a),y.getJSON(T(i,e),(function(e,t){if(e=e||k(x.Results,t))return l(e);var r=t.map((function(e){return w.time(e.apiAccessTime)})).reduce((function(e,t){return Math.max(e,t)}),0);r=w.moment(r).toISOString(),D.debug("fetch-live:full-result","response",i,t,r),s("results:updateLiveResults",{races:t.filter((function(e){return a.indexOf(e.officeID)>=0||a.indexOf(b.formatDateState(e.electionDate,e.statePostal))>=0})),timestamp:r,watches:o,officeIDs:a,fetchStatus:n,endpoint:i},l)}))}function O(n,i,a,o,s,l){var u=w.moment().toISOString(),c=i+"/current.json",p=_.precincts+c+"?t="+u;D.debug("fetch-live:precincts",u,i,p),n.pending++,y.getJSON(p,(function(e,t){var r={timestamp:u,watches:a,officeIDs:["P"],fetchStatus:n,endpoint:c,raceId:i,isPrecincts:!0};(e=e||x.checkPrecinctData(t,o))?(D.debug("fetch-live:precincts","error",p,e),r.error=e):(D.debug("fetch-live:precincts","response",p,t),r.races=[t]),s("results:updateLiveResults",r,l)}))}function C(e,t,r){return v.get(t.live.timestamp,[r,e[r]],null)}function T(e,t){return e="/"===e.charAt(0)?e.slice(1):e,_.api(t.liveFixtureIndex)+e+"?t="+w.moment().toISOString()}function k(e,t){if("staging"!==_.environment&&"production"!==_.environment)return n(e,t)}}),{"../browser/ajax":144,"../config":146,"../util/log":211,"../util/time":225,"../util/validate":230,"./validate":193,"d3-queue":92,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],190:[(function(e,t,r){"use strict";var p=e("wapo-shared/race-helpers"),h=(e("../util/log"),{live:["winningParty","voteCount","marginOfWinVotes","marginOfWinPercent","isFinished","reporting","status","flipped","nonLeaderVotes","freshie","leadingCandidateIndex","shift.P.2016","shift.S.2012","shift.H.2016"],historical:["winningParty","voteCount","marginOfWinPercent"],expectations:["battleground","currentParty","expectation"]});t.exports=function(e,u){var c={},t=u[e].results;if(u[e].errored)return c;for(var r in t)for(var n in t[r]){var i=t[r][n];if("live"===e)for(var a in i)for(var o in i[a])l(r,"S"!==n?o+"."+e+"."+n:o+"."+e+"."+n+"."+a,i[a][o],h[e]);else l(r,e+"."+n,i,h[e])}for(var s in c)c[s].id||delete c[s];return c;function l(e,t,r,n){var i=c[e]=c[e]||{},a=u.mapData[e]||{};for(var o in i.statePostal||a.statePostal===r.statePostal||(i.statePostal=r.statePostal,i.abbrev=p.getAbbrev(r.statePostal)),r)if(!(n.indexOf(o)<0)){var s=t+"."+o,l=r[o];a[s]!==l&&i[s]!==l&&(i[s]=l,i.id=e)}}}}),{"../util/log":211,"wapo-shared/race-helpers":263}],191:[(function(e,t,r){"use strict";var a=e("url"),o=e("d3-queue").queue,n=e("next-tick"),h=e("wapo-shared/util"),s=e("wapo-shared/process").setHistoricalFields,i=e("../store"),l=e("../util/ajax"),p=e("../util/time"),d=e("../util/log"),f=(e("../util/is-mobile"),e("../config")),m=e("./fetch-live"),y=e("./build-live"),g=e("./process-annotations"),v=e("./aggregate-live"),u=e("./expectations"),c=e("./get-updated-properties"),b=a.resolve(f.assets,"historical-states-2016.json"),_=a.resolve(f.assets,"historical-detail-2016.json"),x=a.resolve(f.assets,"expectations.json"),w=e("../map/util").updateMapData,D=void 0,S=!1,R=!1,P=void 0,E=0;function A(e,t){t>0?setTimeout(e,t):n(e)}i.model({namespace:"results",state:{liveFixtureIndex:null,mapData:{},watches:{},live:{loading:!1,nextFetch:null,timestamp:{P:{state:null,all:null,precincts:{}},S:{state:null,all:null},H:{state:null,all:null},G:{state:null,all:null}},results:{},aggregate:{}},historical:{loading:!0},expectations:{loading:!0},bucketAnalysis:{loading:!0}},reducers:{setMapData:function(e,t){return h.set(t,"mapData",e)},setWatches:function(e,t){return h.set(t,"watches",e.watches)},setLiveLoading:function(e,t){return h.set(t,"live.loading",!0)},setElectionDate:function(e,t){return h.set(t,"electionDate",e.electionDate)},setNextFetch:function(e,t){return h.set(t,"live.nextFetch",e.nextFetch)},updateLiveResults:function(e,t){if(!(h.get(D,"id")===e.fetchStatus.id))return t;if(e.fetchStatus.aborted)return h.set(t,"live.loading",!1);if(e.summary)return h.set(t,"live.aggregate",h.omit(e.summary,["createdAt"]));var r={};r=y(e,t.live.timestamp,t.historical,t.electionDate);var n=D?--D.pending:0;r.loading=n>0,!r.loading&&D&&(D.success=!0,D=null);var i=r.invalidatePrecincts;i&&delete r.invalidatePrecincts;var a=h.merge(t,{live:r});if(i)for(var o in d.warn("Invalidating precinct results for "+i),a.live.results)if(/precinct/i.test(o)){var s=h.get(a.live.results,[o,"P"]);s&&s.raceId===i&&delete a.live.results[o]}for(var l in a.live.results){var u=a.live.results[l];for(var c in u){var p=g(u[c]);h.isEmpty(p)||(u[c]=h.merge(u[c],p))}}return a.live.aggregate=v(a.live),a.live.errored=!1,a},updateLiveFixtureIndex:function(e,t){var r=t.liveFixtureIndex,n="number"===typeof r?r+e.increment:0;return h.merge(t,{liveFixtureIndex:n,live:{timestamp:{P:{state:null,all:null},S:{state:null,all:null},H:{state:null,all:null},G:{state:null,all:null}}}})},updateHistoricalData:function(e,t){var r={historical:h.extend({loading:!1},e),live:{results:{}}};for(var n in t.live.results)if(r.historical.results[n]){r.live.results[n]={};var i=t.live.results[n];for(var a in i)for(var o in r.live.results[n][a]={},i[a])r.live.results[n][a][o]=h.extend(i[a][o]),s(r.live.results[n][a][o].G,t.live.candidates,r.historical)}return h.merge(t,r)},setExpectationsData:function(e,t){return h.extend(t,{expectations:u(e)})},setBucketAnalysisData:function(e,t){var r={};return r[e.slug]=e.data,h.extend(t,{bucketAnalysis:r,loading:!1})},setErrored:function(e,t){d.warnOnce(e.error);var r=h.extend(h.get(t,e.key),{loading:!1,errored:e.error});return h.set(t,e.key,r)}},effects:{fetchStatic:function(e,t,n,i){if(S)return i();if(t.live.loading)return i();S=!0;var r=o();function a(e,t,r){if(e)return n("results:setErrored",{key:"historical",error:e},r);n("results:updateHistoricalData",t,(function(e){if(e)return n("results:setErrored",{key:"historical",error:e},r);n("results:broadcastMapData",{key:"historical"},r)}))}window.wp_meta_data&&window.wp_meta_data.isHomepage||(r.defer((function(r){A((function(){l.getJSON(b,(function(e,t){a(e,t,r)}))}),f.delayHistorical||0)})),r.defer((function(r){A((function(){l.getJSON(_,(function(e,t){a(e,t,r)}))}),f.delayHistorical||0)}))),d.debug("flags","enabling historical results and expectations due to enable_historical"),r.defer((function(r){A((function(){l.getJSON(x,(function(e,t){if(e)return n("results:setErrored",{key:"expectations",error:e},r);n("results:setExpectationsData",t,(function(e){if(e)return i(e);n("results:broadcastMapData",{key:"expectations"},r)}))}))}),f.delayExpectations||0)})),r.awaitAll(i)},fetchBucketAnalysis:function(n,e,i,t){if(R)return t();if(e.live.loading)return t();R=!0;var r=o();r.defer((function(r){A((function(){var e=a.resolve(f.assets,"buckets/"+n+".json");l.getJSON(e,(function(e,t){!(function(e,t,r,n){if(e)return i("results:setErrored",{key:"bucketAnalysis",error:e},n);i("results:setBucketAnalysisData",{slug:r,data:t},(function(e){if(e)return i("results:setErrored",{key:"bucketAnalysis",error:e},n);i("results:broadcastMapData",{key:"bucketAnalysis"},n)}))})(e,t,n,r)}))}),0)})),r.awaitAll(t)},updateWatches:function(e,t,r,n){var i=!1;for(var a in e.watches)(!t.watches[a]||"all"===e.watches[a]&&"all"!==t.watches[a])&&(i=!0);r("results:setWatches",e,(function(e){if(e)return n(e);i?r("results:fetchLive",{},n):n()}))},fetchLive:function(e,o,s,l){D&&D.abort(),P&&(clearTimeout(P),P=null);var u=!1,c=!1;for(var t in o.watches)"H"!==t||h.get(o,"live.timestamp.H.state")?("all"!==o.watches[t]||h.get(o,"live.timestamp."+t+".all")||(c=!0),h.get(o,"live.timestamp."+t+".state")||(u=!0)):c=!0;s("results:setLiveLoading",{},(function(e){if(e)return l(e);var t=o.watches,a=p.time();E++,D=m(t,o,s,(function(e,t){var i=t&&t.id;if(d.debugGroup("fetch-live:main","finished "+i,(function(e){e("finished fetch",t),D&&e("current fetch",D)}),!0),e)return s("results:setErrored",{key:"live",error:e},r);function r(e){if(e)return l(e);if(!D||D.id===i){var t=f.pollingInterval,r=p.time(),n=r-a;E<100&&!h.get(o,"live.errored")&&(c?t=4*n:u&&(t*=2)),d.debug("fetch-live:next-update",t,a,r,n,u),s("results:setNextFetch",{nextFetch:r+t},(function(e){if(e)return l(e);t>=0&&(P=setTimeout(s,t,"results:fetchLive",{},(function(e){e&&d.error(e)}))),t>=f.pollingInterval?s("results:fetchStatic",{},l):l()}))}}s("results:broadcastMapData",{key:"live"},r)}))}))},broadcastMapData:function(e,t,r,n){var i=c(e.key,t),a=h.merge(t.mapData,i);a.timestamp=p.moment().toISOString();var o=Object.keys(i);d.debug("results:data",e.key,o.length),w(a,o,e.key),r("results:setMapData",a,(function(e){if(e)return n(e);n()}))},pauseFetching:function(e,t,r,n){d.debug("visibility","results:data","No longer active -- disabling polling."),P&&(clearTimeout(P),P=null),n()},resumeFetching:function(e,t,r,n){d.debug("visibility","results:data","Active now -- will resume fetching in 1.5 sec."),P=setTimeout(r,1500,"results:fetchLive",{},n)}}})}),{"../config":146,"../map/util":170,"../store":195,"../util/ajax":144,"../util/is-mobile":209,"../util/log":211,"../util/time":225,"./aggregate-live":186,"./build-live":187,"./expectations":188,"./fetch-live":189,"./get-updated-properties":190,"./process-annotations":192,"d3-queue":92,"next-tick":119,url:19,"wapo-shared/process":262,"wapo-shared/util":264}],192:[(function(e,t,r){"use strict";var s=e("wapo-shared/race-helpers"),l=e("../util/time"),u=e("../config");t.exports=function(e,t){t=t||l.time();var r,n={};if("state"!==e.level&&"fipsCode"!==e.level)return n;if(e.annotations&&e.annotations.length){var i=e.annotations.slice().reverse();if(!e.isFinished&&e.singleLeader){var a=i.find((function(e){return"leaderChanged"===e.type}));n.leaderSwapped=a&&(r=a.datetime,l.diff(t,r)<u.annotationThreshold)&&a.newLeader===e.singleLeader&&s.isIndividual(a.newLeader)&&s.isIndividual(a.previousLeader)}}for(var o in n.freshie=n.leaderSwapped||e.isClose||e.isTied,n)n[o]===e[o]&&delete n[o];return n}}),{"../config":146,"../util/time":225,"wapo-shared/race-helpers":263}],193:[(function(e,t,r){"use strict";var n=e("../util/models"),u=e("../util/validate"),i=n.create({voteCount:n.validators(!0).number(),electWon:n.validators(!0).number(),candidateUID:n.validators().string(),last:n.validators().string(),first:n.validators(!0).string()}),a=n.create({level:n.validators().string().custom(u.list(["state","district","FIPSCode","subunit","precinct"])),candidates:n.validators().array().each(n.validators().custom(u.model(i)))}),c=n.create({officeID:n.validators().string(),reportingUnits:n.validators().array().each(n.validators().custom(u.model(a)))});t.exports.Candidate=i,t.exports.ReportingUnit=a,t.exports.Race=c,t.exports.Results=function(e){if(Array.isArray(e)){var t=e.map(u.model(c)).filter(Boolean);return{length:t.length,errors:{"":t}}}return{length:1,errors:{"":[{value:e,message:"expected an array"}]}}},t.exports.Changes=n.create({createdAt:n.validators().string().custom(u.date),races:n.validators().array().each(n.validators().custom(u.model(c)))}),t.exports.Summary=n.create({createdAt:n.validators().string().custom(u.date),P:n.validators().object(),S:n.validators().object(),H:n.validators().object(),G:n.validators().object()}),t.exports.checkPrecinctData=function(e,t){var r=u.asError(c,e);if(r)return r;for(var n={},i=0;i<e.reportingUnits.length;i++){var a=e.reportingUnits[i];if("precinct"!==a.level)return new Error("Invalid level: "+a.level+' !== "precinct"');var o=a.reportingUnitUID;if(n[o])return new Error("Duplicate reporting unit UID "+o);n[o]=!0;for(var s={};0<a.candidates.length;i++){var l=a.candidates[0].candidateUID;if(s[l])return new Error("Duplicate candidate ID "+l+" in precinct "+a.reportingUnitUID);s[l]=!0}}return!1}}),{"../util/models":212,"../util/validate":230}],194:[(function(e,t,r){"use strict";var W=e("wapo-shared/util"),Y=e("wapo-shared/race-helpers").officeIDs,Z=e("wapo-shared/race-helpers").getStatePostal,X=e("wapo-shared/race-helpers").formatDateState,i=e("wapo-shared/race-helpers").isDateStateId,a=e("../map/views"),o=e("../util/is-mobile"),s=e("../config"),$=(e("../util/log"),["P","S","H","G"]);function K(e,t){var r=t&&a[t.mapView];if(r&&r.live){var n=r.needsFullResults?"all":"state";if(t.electionDate&&t.stateFips&&"00"!==t.stateFips)J(e,X(t.electionDate,Z(t.stateFips)),n);else J(e,r.officeId,n)}var i=s.precinctRaceIds[t.stateFips];i&&J(e,i,"all")}function J(e,t,r){var n=o();"all"!==e[t]&&(n&&"P"!==t&&"S"!==t&&"H"!==t&&"G"!==t&&!i(t)||(e[t]=r))}t.exports=function(e){var t=W.extend({},W.get(e,"results.watches")),r=W.get(e,"map.instances",{});for(var n in r){var i=r[n];K(t,i)}var a=W.get(e,"overview.instances",{});for(var o in a)a[o].options.live&&W.without($,Y[a[o].options.hide]).forEach((function(e){J(t,e,"state")}));var s=W.get(e,"headhead.instances",{});for(var l in s)if(s[l].options.live){var u=W.get(s[l],"options.race");if(u){var c=Y[u];J(t,c,"state")}}var p=W.get(e,"hp-headhead.instances",{});for(var h in p){var d=W.get(p[h],"options.officeList");d&&d.map((function(e){J(t,e,"state")}))}var f=W.get(e,"table.instances",{});for(var m in f){var y=W.get(f[m],"options.race");if(y){var g=Y[y];J(t,g,"state")}}var v=W.get(e,"flipped.instances",{});for(var b in v){var _=W.get(v[b],"options.race");if(_){var x=Y[_];J(t,x,"state")}}var w=W.get(e,"race-table.instances",{});for(var D in w){var S=w[D];if(S.raceUID)J(t,S.raceUID,"state");else if(S.electionDate&&S.stateFips&&"00"!==S.stateFips){var R=X(S.electionDate,Z(S.stateFips));J(t,R,"state")}else J(t,S.officeID,"state")}var P=W.get(e,"battlegrounds-table.instances",{});for(var E in P){var A=W.get(P[E],"office");J(t,A,"state")}var M=W.get(e,"result-table.instances",{});for(var I in M)J(t,"H","state");var O=W.get(e,"live-house-political-lean.instances",{});for(var C in O){var T=O[C];if(T.electionDate&&T.stateFips){var k=X(T.electionDate,Z(T.stateFips));J(t,k,"state")}else J(t,"H","state")}var L=W.get(e,"vulnerable-seats.instances",{});for(var N in L){var z=L[N].office;J(t,z,"state")}var j=W.get(e,"state-highlight-table.instances",{});for(var F in j){var V=j[F];if(V.electionDate&&V.stateFips&&"00"!==V.stateFips){var G=X(V.electionDate,Z(V.stateFips));J(t,G,"state")}else J(t,"S","state"),J(t,"G","state"),J(t,"H","state")}var B=W.get(e,"bucket-analysis-table.instances",{});for(var U in B){var H=B[U];if(H.electionDate&&H.stateFips&&"00"!==H.stateFips){var q=X(H.electionDate,Z(H.stateFips));J(t,q,"state")}else J(t,H.officeID,"state")}return t},t.exports.addMapWatch=K,t.exports.addSingleWatch=J}),{"../config":146,"../map/views":175,"../util/is-mobile":209,"../util/log":211,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],195:[(function(e,t,r){"use strict";var n=e("barracks"),p=e("next-tick"),h=e("lodash.debounce"),d=e("deep-diff"),f=e("wapo-shared/util"),m=e("object-path"),y=e("./views/render"),g=e("./results/watches"),v=e("./util/log"),i=e("./config"),b=void 0,_=void 0,x=void 0;function a(e,t,r){if(i.debug&&!t._stack){var n=r&&r._stack;Object.defineProperty(t,"_stack",{enumerable:!1,writeable:!0,value:[].concat(n)}),t._stack.push({name:e,data:t})}}t.exports=n({onError:function(e,t,r){e&&v.error(e)},onAction:function(t,e,r,n){i.debug&&(a(r,t,{_stack:[{name:n}]}),v.debugGroup("store-action:"+r,"",(function(e){e("data",t),e("callers",t._stack.map((function(e){return e.name})).join(" => "))})))},wrapEffects:function(r){return i.debug?function(n,e,i,t){return r(n,e,(function(e,t,r){return a(e,t=Array.isArray(t)?t.slice():Object.assign({},t),n),i(e,t,r)}),t)}:r},onStateChange:function(r,n,i,a,t){var o,s,l,u,c,e;v.debugGroup("store-state:"+a,"",(function(e){e(a,r),e("previous:",i),e("next    :",n);var t={};Object.defineProperty(t,"diff",{get:function(){return (function(e,t){var r=d(e,t);if(!r)return"no changes";var n={};return r.forEach((function(e){var t=e.path.join(".");"A"===e.kind&&(t+="["+e.index+"]",e=e.item),m.set(n,t,{prev:e.lhs,next:e.rhs})})),n})(i,n)}}),e('click into "diff" for detailed changes',t)}),!0),b||(e=(c=t)("frame",!0),o=t,s=void 0,l=!(b=function(t,r){w++;var n=e;v.debugGroup("store-frame","=== BATCHED RENDER FRAME ===",(function(e){n=c("frame "+w,!0),e("previous:",r),e("next    :",t)}),!0),t.views.mounted.forEach((function(e){y(e.tree,e.instance,t,n)}))}),u=[],_=function(e,t,r){if(s=g(t),f.deepEqual(s,r.results.watches)){for(var n in s){var i=f.get(t,"results.live.timestamp."+n+"."+s[n]);if(!i)return void v.debug("store-update-watches","no new watches, but still waiting for "+n+"; skipping maybeFetchStatic",s,t,i)}return v.debug("store-update-watches","no new watches, so maybeFetchStatic"),void x(e)}v.debug("store-update-watches:queue",l,u,s,r.results.watches),x.cancel(),u.push(e),l||(l=!0,p((function(){v.debug("store-update-watches:fire",l,u,s);var e=o("update-watches: "+u.join(","),!0);l=!1,u=[],e("results:updateWatches",{watches:s})})))},x=h((function(e){t("fetch-static ("+e+")",!0)("results:fetchStatic",{})}))),b(n,i),"setWatches"!==a&&_(a,n,i)}});var w=0}),{"./config":146,"./results/watches":194,"./util/log":211,"./views/render":253,barracks:13,"deep-diff":98,"lodash.debounce":108,"next-tick":119,"object-path":122,"wapo-shared/util":264}],196:[(function(o,e,t){"use strict";function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=o("classnames"),u=(o("yo-yo"),o("wapo-shared/util")),r=o("./bem"),i=o("./format"),c=o("wapo-shared/race-helpers").MAJOR_PARTIES,p=r("wpe-progressbar");function a(e,t,r,n){n=n||0,e[r=r||0].dim=i.precisePct(e[r].value,t),e[r].offset=i.precisePct(n,t),e[r].total=t,e[r].cumulativeValue=e[r].value+n,e[r].cumulativePercent=t?e[r].cumulativeValue/t:null,r+1!==e.length&&a(e,t,r+1,n+e[r].value)}function n(e,t,r){var n,i=l(p(),p(t.name.toLowerCase().replace("-","_")),(s(n={},p(e),0===r),s(n,p("label"),t.statePostal||t.label),s(n,p("label-near-zero"),t.cumulativePercent<=.1),s(n,p("label-skinny-width"),t.value/t.total<=.0095),n)),a=null;return t.statePostal?a=(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[2]);var r=document.createElement("em");e(r,[arguments[0]]);var n=document.createElement("span");return e(n,[arguments[1]]),e(t,[r," ",n]),t})(t.statePostal,t.value,p("label-wrapper")):t.label&&(a=(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return e(r,[arguments[0]]),e(t,[r]),t})(t.value,p("label-wrapper"))),(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("style",arguments[0]),t.setAttribute("class",arguments[1]),e(t,[arguments[2]]),t})(h(e,t),i,a)}function h(e,t){return(/^(left|right)/.test(e)?"width:":"height:")+t.dim+";"+e+":"+t.offset}e.exports.attachBarDimensions=a,e.exports.render=function(e,t,r){return e.forEach((function(e){e.bars=e.bars.filter((function(e){return e.value})),e.bars.length&&a(e.bars,t)})),(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(t,["\n    ",arguments[2],"\n    ",r,"\n  "]),t})(p("divider"),l(p("container"),s({},p("container","vertical"),r)),e.map((function(r){return r.bars.map((function(e,t){return n(r.offset,e,t)}))})))},e.exports.renderSide=n,e.exports.barStyle=h,e.exports.parseAggregate=function(r,e){var n={},t=e?"leading-":"lean-",i=e?"won-":"safe-";for(var a in r)if(n[a]={solidGOP:u.get(r[a],i+"GOP",0),hatchGOP:u.get(r[a],t+"GOP",0),solidDem:u.get(r[a],i+"Dem",0),hatchDem:u.get(r[a],t+"Dem",0)},"P"===a&&e&&(n[a]["voteCount-total"]=u.get(r[a],"voteCount-total",0),c.forEach((function(e){var t="voteCount-"+e;n[a][t]=u.get(r[a],t,0)}))),e){var o=[],s=[];for(var l in r[a])/GOP|Dem/.test(l)||(/leading-/.test(l)?(o.push(l.replace("leading-","")),n[a][l]=r[a][l]):/won-/.test(l)&&(s.push(l.replace("won-","")),n[a][l]=r[a][l]));n[a].thirdLeading=o,n[a].thirdWon=s}else n[a].tossup=u.get(r[a],"tossup",null);return n}}),{"./bem":198,"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],197:[(function(h,e,t){"use strict";var g=h("wapo-shared/util"),v=h("../../data/battleground-states"),b=(h("yo-yo"),h("wapo-shared/race-helpers")),_=h("./format"),r=(h("./log"),h("./bem")),x=h("classnames"),i=h("../util/table"),w=h("lodash.sortby"),D=r("wpe-bt");e.exports=function(r){var c="function"==typeof r.onBattlegroundClick;function n(e){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("data-ds-value");t&&b.fips.isState(t)&&"function"===typeof r.onBattlegroundClick&&r.onBattlegroundClick(t)}}var p=i({className:D("battlegrounds-results"),headCellTemplate:function(e){return (function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("th");t.setAttribute("colspan",arguments[1]),t.setAttribute("class",arguments[2]);var r=document.createElement("span");return e(r,[arguments[0]]),e(t,[r]),t})(e.value,"undefined"==typeof e.colspan?1:e.colspan,x(D("cell"),D("header"),e.classname))},cellTemplate:function(e,t){return (function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.onclick=arguments[0],t.setAttribute("data-ds-value",arguments[1]),t.setAttribute("class",arguments[2]),e(t,[arguments[3]]),t})(0===t&&r.onBattlegroundClick?n:null,e.fips||"",x(D("cell"),e.classname),e.value)}}).render;return{render:function(e,d){var t,r,n,i=void 0,f=g.get(e,"results.live"),m=g.get(e,"results.historical"),y=g.get(f,"candidates"),a=v[d].map((function(e){var t=b.getStateFips(e.statePostal),r="H"==d?t+e.seatNum:t,n="results."+r+"."+d+"."+e.seatNum+".G",i=g.get(f,n),a=["results",r,d+".2016"],o=g.get(m,a)||{},s="Dem"==o.winningParty?"D":"GOP"==o.winningParty?"R":o.winningParty,l=["results",r,"P.2016"],u=g.get(m,l),c=u?"Dem"==u.winningParty?"D":"GOP"==u.winningParty?"R":u.winningParty:"--",p=u?"+"+(100*u.marginOfWinPercent).toFixed(1):"";if(!i)return{hasData:!1,pollCloseTime:e.pollCloseTime,abbrev:b.getAbbrev(e.statePostal),party:"--",incumbentLastName:e.incumbentLastName,incumbentParty:e.incumbentParty,lastOfficeParty:s||"--",lastPresParty:c||"--",lastPresMargin:p||"",fips:t,seatNum:e.seatNum};var h=!!i.singleLeader&&y[i.singleLeader];return{hasData:!0,pollCloseTime:e.pollCloseTime,party:h?i.winningParty:"--",leader:h?h.last:"--",margin:i.marginOfWinPercent,abbrev:b.getAbbrev(i.statePostal),status:i.status,incumbentLastName:e.incumbentLastName,incumbentParty:e.incumbentParty,lastOfficeParty:s||"--",lastPresParty:c||"--",lastPresMargin:p||"",electTotal:"P"===d?i.electTotal:null,fips:t,seatNum:e.seatNum}})).filter(Boolean);if(a.length){var o=a.some((function(e){return e.hasData})),s=w(a,(function(e){var t="--"==e.party?1:0;return t+"_"+(0==t?0:e.pollCloseTime[0]-6)+"_"+e.abbrev})).map((function(e){var t,r,n=e.abbrev+("H"==d?"-"+ +e.seatNum:""),i=void 0;"H"!=d&&"00"!=e.seatNum?(t=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),r=document.createElement("span"),t(r,[" S"]),i=r):e.electTotal&&(i=(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,["(",arguments[1],")"]),t})(D("electoral"),e.electTotal));var a=[{value:(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," ",arguments[1]]),t})(n,i),classname:D("cell_state"),fips:e.fips}];return o&&(e.pollCloseTime[0]%1==.5&&(e.pollCloseTime=[Math.floor(e.pollCloseTime)+":30"]),e.status&&"no-votes"!=e.status?a.push({value:e.leader?(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]]),e(t,[arguments[2]," ",arguments[3]," ",r]),t})(D("margin"),_.margin(e.margin,1),e.leader,_.partyAbbrev(e.party,"")):"",classname:e.leader?x(D("cell_party"),D("cell_party_"+e.status.toLowerCase())):D("cell_party")}):a.push({value:(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,["Polls close ",arguments[0]," p.m."]),t})(e.pollCloseTime.join("/")),classname:D("poll_close")})),"H"==d?(a.push({value:e.lastOfficeParty,classname:x(D("cell_incumbent_party"),D("cell_incumbent_party_"+e.lastOfficeParty.toLowerCase()))}),a.push({value:e.lastPresParty+" "+e.lastPresMargin,classname:x(D("cell_incumbent_name"))})):(a.push({value:e.incumbentParty,classname:x(D("cell_incumbent_party"),D("cell_incumbent_party_"+e.incumbentParty.toLowerCase()))}),a.push({value:e.incumbentLastName,classname:x(D("cell_incumbent_name"))})),a})),l=[{value:"State",classname:D("header_state")}];o&&l.push({value:"Lead/Win"}),"H"==d?(l.push({value:"’16",classname:D("header_past_winner")}),l.push({value:"Presidential 2016",classname:D("header_pres_winner")})):l.push({value:"Incumbent",classname:D("header_incumbent"),colspan:2}),s.unshift(l);var u={S:"Senate",H:"House",G:"Governor",P:"President"}[d]||d;i=(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[2]);var r=document.createElement("h4");return r.setAttribute("class",arguments[0]),e(r,["Battleground ",arguments[1]," races"]),e(t,["\n                  ",r,"\n                  ",arguments[3],"\n                "]),t})(D("title"),u,x(D("segment"),D("segment","content"),(t={},r=D("links-active"),n=c,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),p(s))}return i}}}}),{"../../data/battleground-states":1,"../util/table":224,"./bem":198,"./format":205,"./log":211,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"lodash.sortby":111,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],198:[(function(e,t,r){"use strict";var o=e("classnames");t.exports=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=o.apply(void 0,a);if(0===t.length)return n;var i=t.filter(Boolean).join("_");return n.split(" ").map((function(e){return e+"_"+i})).join(" ")}}}),{classnames:22}],199:[(function(n,e,t){"use strict";n("yo-yo");var i=n("next-tick"),a=n("./bem"),o=n("wapo-shared/util"),s=n("./is-mobile");e.exports=function(t){t=o.extend({className:"wpe-button",opt:null,handler:function(){return!0}},t);var e=a(t.className)();s()&&!s.isMobileDesktop()&&(e+=" wpe-mobile_button");var r=t.opt?(function(){var e=n("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("button");return t.setAttribute("type","button"),t.onclick=arguments[0],t.setAttribute("data-reset-fips",arguments[1]),t.setAttribute("data-map-id",arguments[2]),t.setAttribute("class",arguments[3]),e(t,[arguments[4]]),t})((function(e){e.stopPropagation(),e.preventDefault(),i(t.handler)}),t.fips,t.mapId,e,t.opt):null;return{render:function(){return r}}}}),{"./bem":198,"./is-mobile":209,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],200:[(function(a,e,t){"use strict";a("yo-yo");var r=a("wapo-shared/util"),o=a("../map/util").getOfficeID,s=a("../util/format"),l=a("../../data/hub-page-links");e.exports=function(i){return(i=r.extend({text:null,link:null},i||{})).text||i.link,{render:function(e){var t,r;if(i.text)t=i.text,r=i.link;else{if(!e||!o(e))return null;var n=o(e);t=s.fullResults(n),r=l[n]}return"NONE"===t?(function(){a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("span")})():(function(){var e=a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-button_wrap");var r=document.createElement("a");r.setAttribute("href",arguments[0]),r.setAttribute("class","wpe-callout-button");var n=document.createElement("span");return n.setAttribute("class","fa fa-arrow-circle-right icon-right"),e(r,[arguments[1]," ",n]),e(t,["\n        ",r,"\n      "]),t})(r,t)}}}}),{"../../data/hub-page-links":5,"../map/util":170,"../util/format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/util":264,"yo-yo":140}],201:[(function(e,t,r){"use strict";var n=e("global/window"),i=!1;if("object"===typeof n.navigator&&n.navigator.userAgent&&n.navigator.appName){var a=n.navigator;"Microsoft Internet Explorer"===a.appName?i=!0:"Netscape"===a.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a.userAgent)&&(i=!0)}var o=!(t.exports.isIE=function(){return i});"object"===typeof n.navigator&&n.navigator.userAgent&&(o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1),t.exports.isFF=function(){return o}}),{"global/window":102}],202:[(function(p,e,t){"use strict";var h=p("classnames"),d=(p("yo-yo"),p("global/window")),r=p("wapo-shared/util"),n=p("./bem"),f=p("../browser/browser").once;e.exports=function(a){var t=this;a=r.extend({opts:[],placeholder:"",toggle:function(e){return!s},textFormat:function(e){return e},onSelect:null},a);var o=n("wpe-dropdown"),s=!1,l=null,u=null;var c=(function(){var e=p("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("ul");return t.onclick=arguments[0],t.setAttribute("class",arguments[1]),e(t,["\n    ",arguments[2],"\n  "]),t})(a.onclick,o("items"),a.opts.map((function(e){return (function(){var e=p("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("a");return r.setAttribute("href",arguments[0]),r.setAttribute("data-ds-value",arguments[1]),r.onclick=arguments[2],e(r,[arguments[3]]),e(t,[r]),t})(e.href,e.value,function(e,t){null!==a.onSelect&&(t.preventDefault(),a.onSelect(e)),u=a.textFormat(e.text)}.bind(t,e),a.textFormat(e.text),o("item"))})));return{render:function(e){(s=e.expanded)&&!l&&(l=f(d,["click"],(function(){a.toggle(!1),l=null})));var t,r,n,i=e.placeholder||u||a.placeholder;return e.placeholder&&(u=null),(function(){var e=p("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[6]);var r=document.createElement("button");r.onclick=arguments[2],r.setAttribute("class",arguments[3]);var n=document.createElement("span");e(n,[arguments[0]]);var i=document.createElement("i");i.setAttribute("class",arguments[1]),e(r,["\n          ",n,"\n          ",i,"\n        "]);var a=document.createElement("div");return a.setAttribute("class",arguments[4]),e(a,["\n          ",arguments[5],"\n        "]),e(t,["\n        ",r,"\n        ",a,"\n      "]),t})(i,o("caret fa "+(s?"fa-angle-up":"fa-angle-down")),(function(e){return a.toggle(!s)}),o("btn"),h(o("list"),(t={},r=o("list","active"),n=s,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),c,o())}}}}),{"../browser/browser":145,"./bem":198,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"global/window":102,"wapo-shared/util":264,"yo-yo":140}],203:[(function(e,t,r){"use strict";var i=e("wapo-shared/util"),n={on:function(e,t){return this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t),this},off:function(e,t){if(!e)return delete this._events,this;if(!this.listens(e))return this;if(t){var r=this._events[e].indexOf(t);r>=0&&this._events[e].splice(r,1),this._events[e].length||delete this._events[e]}else delete this._events[e];return this},once:function(t,r){var n=function(e){this.off(t,n),r.call(this,e)}.bind(this);return this.on(t,n),this},fire:function(e,t){if(!this.listens(e))return this;t=i.extend({},t,{type:e,target:this});for(var r=this._events[e].slice(),n=0;n<r.length;n++)r[n].call(this,t);return this},listens:function(e){return!(!this._events||!this._events[e])}};t.exports=n}),{"wapo-shared/util":264}],204:[(function(u,e,t){"use strict";u("yo-yo");var c=u("classnames"),p=u("wapo-shared/util"),h=u("wapo-shared/race-helpers"),d=u("./format"),f=u("./bem")("wpe-flip");e.exports=function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l=p.extend({limit:null,title:"Change in vote share"},l),{render:function(e){var r=e.officeID,t=p.get(e.results,"live.results"),n=[],i="H"===r?h.fips.isDistrict:h.fips.isState;for(var a in t)if(i(a)&&t[a][r]&&"PA"!=h.getStatePostal(a))for(var o in t[a][r]){if(t[a][r][o].G&&t[a][r][o].G.flippedMargin&&t[a][r][o].G.isFinished)t[a][r][o].G.precinctsReporting/t[a][r][o].G.precinctsTotal>=.95&&n.push(t[a][r][o].G)}if(!n.length)return (function(){u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("style","display:none;"),e})();n=n.map((function(e){var t={previousMargin:p.get(e,"previousMargin",0),flippedMargin:p.get(e,"flippedMargin",0),marginOfWinPercent:p.get(e,"marginOfWinPercent",0),winningParty:e.winningParty};return t.name="H"===r?e.statePostal+"-"+e.seatNum:e.statePostal,t})).sort((function(e,t){return e.flippedMargin>t.flippedMargin?-1:1})).filter((function(e){return e.flippedMargin>=.05})),l.limit&&(n=n.slice(0,l.limit));var s=Math.max.apply(null,n.map((function(e){return Math.max(e.previousMargin,e.marginOfWinPercent)})));return s?(function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[6]);var r=document.createElement("h4");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("div");n.setAttribute("class",arguments[2]);var i=document.createElement("div");i.setAttribute("class","wpe-flip_head_item wpe-flip_head_item_l"),e(i,["← Dem."]);var a=document.createElement("div");a.setAttribute("class","wpe-flip_head_item wpe-flip_head_item_r"),e(a,["Rep. →"]),e(n,["\n          ",i,a,"\n        "]);var o=document.createElement("div");o.setAttribute("class",arguments[4]);var s=document.createElement("span");return s.setAttribute("class",arguments[3]),e(o,["\n          ",s,"\n          ",arguments[5],"\n        "]),e(t,["\n        ",r,"\n        ",n,"\n        ",o,"\n      "]),t})(f("title"),l.title,f("head"),f("divider"),f("container"),n.map(function(e,t){var r="Dem"===t.winningParty?"right":"left",n=r+":"+d.precisePct(e-t.previousMargin,2*e),i="width:"+d.precisePct(t.flippedMargin,2*e);return (function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[7]);var r=document.createElement("div");r.setAttribute("style",arguments[5]),r.setAttribute("class",arguments[6]);var n=document.createElement("div");n.setAttribute("class",arguments[4]);var i=document.createElement("h6");i.setAttribute("class",arguments[0]),e(i,[arguments[1]]);var a=document.createElement("h6");return a.setAttribute("class",arguments[2]),e(a,[arguments[3]]),e(n,["\n        ",i,"\n        ",a,"\n      "]),e(r,["\n      ",n,"\n    "]),e(t,["\n    ",r,"\n  "]),t})(c(f("line","text"),f("name")),t.name,c(f("line","text"),f("delta")),d.pct(100*t.flippedMargin,1,null,"0.0"),f("line","inner"),[n,i].join(";"),f("line"),c(f("item"),f("item",r)))}.bind(null,s)),c(f(),f(h.officeNames[r]))):(function(){u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("style","display:none;"),e})()}}}}),{"./bem":198,"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],205:[(function(e,t,r){"use strict";var i=e("numeral"),a=e("wapo-shared/race-helpers"),n=e("wapo-shared/util"),o=e("camelcase");t.exports.displayCase=function(e){return e?e.split(" ").map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1)})).join(" "):""},t.exports.camelCase=o;var s=function(e){return i(e).format("0,0")};t.exports.tally=s;t.exports.shortTally=function(e){return e>=1e6?i(e/1e6).format("0,0.[00]")+"M":e>=1e3?i(e/1e3).format("0,0.[00]")+"K":s(e)};var l=function(e,t,r,n){return n=n||"0.0%",r=r||"–",isNaN(e)||!t?r:e/t==1&&"0.0%"==n?"100%":e/t==0&&"0.0%"==n?"0%":i(e/t).format(n)};function u(e){var t="not available";switch(e){case"Vulnerable R":t="Vulnerable GOP";break;case"Vulnerable D":t="Vulnerable Dem";break;case"Strong R":t="Safe GOP";break;case"Strong D":t="Safe Dem";break;case"Likely R":t="Likely GOP";break;case"Likely D":t="Likely Dem"}return t}t.exports.pct=l,t.exports.withPercent=function(e){return e||0===e?e+"%":"–"},t.exports.precisePct=function(e,t){return l(e,t,0,"0.0000000000%")},t.exports.margin=function(e,t){var r="";return e>0&&(r="+"),r+l(100*e,t,null,"0.0")},t.exports.predicted=u,t.exports.predictedAnnotation=function(e){return"Prediction: "+u(e)},t.exports.reportingUnitName=function(e,t){if(!e)return null;{if("H"===e.officeID||"0W"===e.officeID)return (function(e,t,r){var n=a.stateNameByPostal(e);{if(c.indexOf(e)>=0)return n+" At-Large";if(!t)return n}return a.isPrimary(r)?n+" "+t+" - "+("D"===r?"Democratic":"Republican")+" primary":n+" "+p(+t)+" District"})(e.statePostal,e.seatNum,e.raceTypeID);if(a.fips.isCounty(e.id)){var r=a.getAbbrev(e.statePostal);return r?e.reportingunitName+", "+r:e.reportingUnitName}if(a.fips.isState(e.id)){var n=t?a.getAbbrev(e.statePostal):a.stateNameByPostal(e.statePostal);return a.isPrimary(e)&&(n=n+" "+("S"===e.officeID?"Senate":"Governor")+" - "+("D"===e.raceTypeID?"Democratic":"Republican")+" primary"),n}return e.reportingunitName}};var c=["AK","ND","SD","DE","MT","VT","WY"];function p(e){var t=e%10;return e+(1===Math.floor(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}t.exports.atLargeDistricts=c,t.exports.ordinal=p,t.exports.note=function(e){return{label:"Quick Fix:",text:e}},t.exports.defaults=function(e,t){return"undefined"!==typeof e?e:t};var h={dem:"Dem.",gop:"Rep.",rep:"Rep.",ind:"Ind.",grn:"Green",lib:"Lib."};t.exports.party=function(e){return e&&"string"===typeof e&&h[e.toLowerCase()]||"–"};var d={dem:"(D)",gop:"(R)",rep:"(R)",ind:"(I)",grn:"(G)",lib:"(L)",bfa:"(I)",inp:"(I)"};t.exports.partyAbbrev=function(e,t){"undefined"===typeof t&&(t="–");return e&&"string"===typeof e&&d[e.toLowerCase()]||t};var f={dem:{name:"Clinton",party:"Democrats"},rep:{name:"Trump",party:"Republicans"}};function m(e,t){var r="P"===t?"name":"party";return f[e][r]}t.exports.partyOrName=m,t.exports.otherPartyOrName=function(e,t){return m("dem"===e?"rep":"dem",t)},t.exports.electoralVotes=function(e){return a.getElectoral(e)||""};t.exports.stateUrl=function(e){return"//washingtonpost.com/2016-election-results/"+n.slugify(e.toLowerCase())},t.exports.voteCount=function(e,t){var r=n.get(e,"voteCount",0);return r||1!==t.candidates.length?s(r):"–"},t.exports.precinctsReporting=function(e,t){return s(e)+"/"+s(t)};var y={P:"Full National Results",S:"Full Senate Results",H:"Full House Results",G:"All Governors Races"};t.exports.fullResults=function(e){return y[e]};var g={P:"electoral votes",S:"Senate seats",H:"House seats",G:"statehouses"};t.exports.electionUnit=function(e,t){var r=g[e];"undefined"!==typeof t&&1===+t&&(r=r.substr(0,r.length-1));return r},t.exports.flip=function(){return"Flipped since last election"},t.exports.freshie=function(e,t){{if(e.justFinished){if(!t)return"Race just finished";var r=t[e.candidates[0].id];return r.first+" "+r.last+" just won"}if(e.leaderSwapped)return"Leader just swapped";if(e.isClose)return"Close race";if(e.isTied)return"Race tied"}return!1}}),{camelcase:21,numeral:120,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],206:[(function(e,t,r){var _=e("d3-collection").nest,x=e("d3-array").sum,w=e("lodash.sortby"),D=e("wapo-shared/util"),n=e("./string-starts-with");t.exports=function(g){var e=D.get(g.state,["results","live"]),t=D.get(e,["results"]),v=D.get(e,["candidates"]),b=D.filterObject(t,(function(e,t){return n(t,g.stateFips)}));return g.bucketSet.bucketDefinitions.map((function(e){var t,r=-e.margin2016,n=(r>0?"Trump +":"Clinton +")+Math.abs(r),i=r>0?"R":"D",a=e.regions.map((function(e){return D.get(b,[e,g.officeID,g.seat,g.raceTypeID])})).filter(Boolean),o=D.flatten(a.map((function(e){return e.candidates}))),s=_().key((function(e){return e.id})).rollup((function(e){return x(e,(function(e){return e.voteCount}))})).entries(o),l=x(s,(function(e){return e.value})),u=w(s,(function(e){return-e.value})).map((function(e){return D.extend(e,{pct:e.value/l},v[e.key])})).filter((function(e){return"GOP"===e.party||"Dem"===e.party})),c=null,p=null,h=null,d=null,f=null;2===u.length&&(u[0].value>u[1].value?(p="G"===(t=u[0].party)[0]?"R":t[0],c=100*(u[0].pct-u[1].pct),c*="D"===p?-1:1,h=u[0].last,f=(d=c-r)>0?"R":d<0?"D":null):(c=0,p="TIED"));var m=x(a,(function(e){return e.precinctsReporting})),y=x(a,(function(e){return e.precinctsTotal}));return{label:e.label,map:e.map,margin2016:n,margin2016Party:i,precinctsReporting:m,precinctsTotal:y,firstCandidate:h,margin2018:null!==c?Math.abs(c):null,margin2018Party:p,swing:null!==d?Math.abs(d):null,swingDirection:f}}))}}),{"./string-starts-with":223,"d3-array":87,"d3-collection":88,"lodash.sortby":111,"wapo-shared/util":264}],207:[(function(N,e,t){function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=N("url"),r=(N("yo-yo"),N("../util/bem")),F=N("classnames"),V=N("wapo-shared/util"),G=N("wapo-shared/race-helpers"),B=G.fips.isState,U=N("./format"),H=N("../config"),q=N("./bars").render,W=N("./bars").parseAggregate,Y=N("../../data/seats"),Z=r("wpe-hh"),X=r("wpe-progressbar"),$=r("wpe-tossup");function K(e){var t=G.getElectoral(e.statePostal),r=e.expectation?$(e.expectation.toLowerCase()):null;return (function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("style","width: "+arguments[5]),t.setAttribute("class",arguments[6]);var r=document.createElement("span");r.setAttribute("class",arguments[2]);var n=document.createElement("span");n.setAttribute("class",arguments[0]),e(n,[arguments[1]]),e(r,[arguments[3]," ",n]);var i=document.createElement("span");return i.setAttribute("class",arguments[4]),e(t,["\n    ",r,"\n    ",i,"\n  "]),t})($("vote"),t,$("state","name"),e.statePostal,F($("bar"),r),U.precisePct(t,538),$("state","container"))}function J(e,t,r){var n=0;for(var i in e)e[i][t]===r&&(e[i].electTotal?n+=e[i].electTotal:n+=G.getElectoral(e[i].statePostal));return n}function Q(r,e,n,t){e.filter(t).forEach((function(e){var t=e.electTotal||G.getElectoral(e.statePostal);"Dem"===e.winningParty?r.left.push({name:n+"_dem",value:t,statePostal:e.statePostal}):"GOP"===e.winningParty&&r.right.push({name:n+"_rep",value:t,statePostal:e.statePostal})}))}e.exports=function(L){return L=V.extend({race:"president",mapViewGroup:null,showLink:!1,link:null,linkText:null,live:!1,showRaceTitle:!0,showMarginToControl:!1,showLegend:!1,forceCompleteLegend:!1,showNotes:!1},L),{render:function(e){var t,r,n=e.officeID,i=G.officeNames[n],a="president"===i,o=Y[i],s=V.get(e,"results.expectations");if(s&&!s.loading&&a)for(var l in r=[],s.results)V.get(s.results[l],"P.battleground")&&r.push(l);var u,c,p,h,d,f=L.live?V.get(e,"results.live"):s,m=L.live&&-1!==["S","G"].indexOf(n),y={left:[{name:m?"hatch-Dem":"nocontest",value:o.demTotal,label:!0}],right:[{name:m?"hatch-GOP":"nocontest",value:o.repTotal,label:!0}]},g="0",v="0",b=!1;if(f&&(!f.loading||L.live)&&f.aggregate){var _=f.results,x=[];if(a)for(var w in _)B(w)&&_[w].P&&x.push(_[w].P);var D=L.live&&x.length;D&&r&&(h=x.filter((function(e){return r.indexOf(e.id)>=0})),x=x.filter((function(e){return-1===r.indexOf(e.id)})));var S=V.get(f,["aggregate",n],!1);b=S["below-reporting-threshold"]&&S["below-reporting-threshold"]>0,S&&(g=(S=W({P:S},L.live).P).solidDem,v=S.solidGOP,m?(g+=o.demTotal,v+=o.repTotal):L.live||(g+=S.hatchDem,v+=S.hatchGOP),L.live&&a&&(u=S["voteCount-Dem"],c=S["voteCount-GOP"],p=S["voteCount-total"]),y.left.push({name:"solid_dem",value:a&&D?J(x,"status","won-Dem"):S.solidDem,label:!0}),y.right.push({name:"solid_rep",value:a&&D?J(x,"status","won-GOP"):S.solidGOP,label:!0}),L.live?(a&&D?(h&&Q(y,h,"battle_won",(function(e){return e.isFinished})),y.left.push({name:"leading_dem",value:J(x,"status","leading-Dem")}),y.right.push({name:"leading_gop",value:J(x,"status","leading-GOP")}),h&&Q(y,h,"battle_lead",(function(e){return!e.isFinished&&e.winningParty}))):(y.left.push({name:"leading_dem",value:S.hatchDem,label:!0}),y.right.push({name:"leading_gop",value:S.hatchGOP,label:!0})),(S.thirdLeading.length||S.thirdWon.length)&&(S.thirdLeading.forEach((function(e){y.left.push({name:"leading_"+e,value:S["leading-"+e]})})),S.thirdWon.forEach((function(e){y.right.push({name:"won_"+e,value:S["won-"+e]})})))):a?(y.left.push({name:"hatch_dem",value:J(x,"expectation","lean-Dem")}),y.right.push({name:"hatch_rep",value:J(x,"expectation","lean-GOP")})):(y.left.push({name:"hatch_dem",value:S.hatchDem,label:!0}),y.right.push({name:"hatch_rep",value:S.hatchGOP,label:!0}))),"G"===n&&y.right.push({name:"solid_ind",value:o.ind}),h&&((h=h.filter((function(e){return!e.winningParty}))).length||(h=null)),L.live&&o.win&&(S.solidDem+o.demTotal>=o.win?d="dem":S.solidGOP+o.repTotal>=o.win&&(d="rep")),"H"===n&&(d="dem")}var R=L.showMarginToControl&&-1!==["S","H"].indexOf(n),P=R?(function(e,t,r){var n,i,a,o,s=void 0,l=Z(t>r?"towin-dem":"towin-rep");if(t>=e)a=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),o=document.createElement("span"),a(o,["Dems. win control"]),s=o;else if(r>=e)n=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),i=document.createElement("span"),n(i,["GOP keeps control"]),s=i;else if(r!==t){var u=t>r?"Dems.":"GOP";s=(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," ",arguments[1]," ",arguments[2]," to win"]),t})(u,"GOP"===u?"needs":"need",e-Math.max(t,r))}return s?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n      ",arguments[1],"\n    "]),t})(F(Z("towin"),l),s):null})(o.win,g,v):null,E=(function(){N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})();if(L.showLegend){var A=[L.forceFullLegend||"S"==n||"G"==n?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(t,["\n            ",r,"\n              Not up for election\n          "]),t})(F(Z("legend-box"),Z("no-election-dem")),Z("legend-item-no-election-dem")):null,(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[4]);var r=document.createElement("span");r.setAttribute("class",arguments[1]);var n=document.createElement("span");n.setAttribute("class",arguments[0]),e(r,[n," Win"]);var i=document.createElement("span");i.setAttribute("class",arguments[3]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(i,[a," Lead"]),e(t,["\n            ",r,"\n            ",i,"\n          "]),t})(F(Z("legend-box"),Z("won-dem")),Z("legend-item"),F(Z("legend-box"),Z("leading-dem")),Z("legend-item"),Z("legend-item-wrap"))],M=[(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[4]);var r=document.createElement("span");r.setAttribute("class",arguments[1]);var n=document.createElement("span");n.setAttribute("class",arguments[0]),e(r,["Lead ",n]);var i=document.createElement("span");i.setAttribute("class",arguments[3]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(i,["Win ",a]),e(t,["\n            ",r,"\n            ",i,"\n          "]),t})(F(Z("legend-box"),Z("leading-rep")),Z("legend-item"),F(Z("legend-box"),Z("won-rep")),Z("legend-item"),Z("legend-item-wrap")),L.forceFullLegend||"S"==n||"G"==n?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(t,["\n              Not up for election\n              ",r,"\n            "]),t})(F(Z("legend-box"),Z("no-election-rep")),Z("legend-item-no-election-rep")):null],I=!1;S&&(S["won-Ind"]&&S["won-Ind"]>0||S["leading-Ind"]&&S["leading-Ind"]>0)&&(I=!0);var O=I?[(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[4]);var r=document.createElement("span");r.setAttribute("class",arguments[1]);var n=document.createElement("span");n.setAttribute("class",arguments[0]),e(r,[n," Ind. win"]);var i=document.createElement("span");i.setAttribute("class",arguments[3]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(i,[a," Lead"]),e(t,["\n            ",r,"\n            ",i,"\n          "]),t})(F(Z("legend-box"),Z("won-ind")),Z("legend-item"),F(Z("legend-box"),Z("leading-ind")),Z("legend-item"),Z("legend-item-wrap"))]:null;E=(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[7]);var r=document.createElement("span");r.setAttribute("class",arguments[4]);var n=document.createElement("span");n.setAttribute("class",arguments[0]),e(n,["\n                ",arguments[1],"\n              "]);var i=document.createElement("span");i.setAttribute("class",arguments[2]),e(i,["\n                ",arguments[3],"\n              "]),e(r,["\n              ",n,"\n              ",i,"\n            "]);var a=document.createElement("span");return a.setAttribute("class",arguments[5]),e(a,["\n              ",arguments[6],"\n            "]),e(t,["\n            ",r,"\n\n            ",a,"\n          "]),t})(Z("legend-d"),A,Z("legend-i"),O,Z("legend-d-i-wrap"),Z("legend-r"),M,F(Z("legend")))}var C=y.left.length>1&&y.right.length>1&&!L.live,T=[];"S"==n&&T.push("Democratic totals include two Independents who caucus with the Democrats."),b&&T.push("Results with fewer than 10 percent of precincts reporting are not shown.");var k=L.mobileHeadlineLink?"fa fa-arrow-circle-right icon-right":"";return (function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[27]);var r=document.createElement("div");r.setAttribute("class",arguments[23]);var n=document.createElement("div");n.setAttribute("class",arguments[0]),e(n,["\n              ",arguments[1],"\n\n              ",arguments[2],"\n            "]);var i=document.createElement("div");i.setAttribute("class",arguments[7]);var a=document.createElement("h5");a.setAttribute("class",arguments[3]),e(a,[arguments[4]]);var o=document.createElement("span");o.setAttribute("class",arguments[5]),e(o,[arguments[6]]),e(i,["\n              ",a,"\n              ",arguments[8],"\n\n              ",o,"\n              ",arguments[9],"\n              ",arguments[10],"\n            "]);var s=document.createElement("div");s.setAttribute("class",arguments[15]);var l=document.createElement("h5");l.setAttribute("class",arguments[11]),e(l,[arguments[12]]);var u=document.createElement("span");u.setAttribute("class",arguments[13]),e(u,[arguments[14]]),e(s,["\n              ",l,"\n              ",arguments[16],"\n\n              ",arguments[17],"\n              ",arguments[18],"\n\n              ",u,"\n            "]);var c=document.createElement("div");c.setAttribute("class",arguments[21]);var p=document.createElement("span");return p.setAttribute("class",arguments[19]),e(p,[arguments[20]]),e(c,["\n            ",arguments[22],"\n              ",p,"\n            "]),e(r,["\n\n            ",arguments[24],"\n\n            ",n,"\n\n            ",i,"\n            ",s,"\n\n            ",c,"\n\n            ",arguments[25],"\n\n            ",arguments[26],"\n          "]),e(t,["\n          ",r,"\n\n          ",arguments[28],"\n\n          ",arguments[29],"\n\n        "]),t})(Z("title-area"),L.showRaceTitle?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("h6");t.setAttribute("class",arguments[3]);var r=document.createElement("a");r.setAttribute("href",arguments[1]);var n=document.createElement("span");return n.setAttribute("class",arguments[0]),e(r,[arguments[2],n]),e(t,[r]),t})(k,L.link,U.displayCase(i),F($("title"),$("race","title"))):null,P,Z("name"),a?"Clinton":"Democrats",X("num"),g,F(Z("candidate"),Z("candidate","dem"),z({},Z("candidate","won"),"dem"===d)),"dem"===d?(function(){N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("class","fa fa-check"),e})():null,L.live?null:(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]);var r=document.createElement("small");return e(r,["votes"]),e(t,["predicted ",r]),t})(X("context")),L.live&&a?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[1]);var r=document.createElement("span");r.setAttribute("class",arguments[0]);var n=document.createElement("small");return e(n,["votes"]),e(r,["electoral ",n]),e(t,["\n                  ",r,"\n                  ",arguments[2],"\n                "]),t})(Z("electoral"),X("context"),u?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[3]);var r=document.createElement("em"),n=document.createElement("span");return n.setAttribute("class",arguments[0]),e(n,[arguments[1]," - "]),e(r,[n,arguments[2]]),e(t,["\n                      ",r," popular vote\n                    "]),t})(Z("pop","tally"),U.shortTally(u),U.pct(u,p),F(Z("pop"),Z("pop","dem"))):null):null,Z("name"),a?"Trump":"Republicans",X("num"),v,F(Z("candidate"),Z("candidate","rep"),z({},Z("candidate","won"),"rep"===d)),"rep"===d?(function(){N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("class","fa fa-check"),e})():null,L.live?null:(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]);var r=document.createElement("small");return e(r,["votes"]),e(t,["predicted ",r]),t})(X("context")),L.live&&a?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[1]);var r=document.createElement("span");r.setAttribute("class",arguments[0]);var n=document.createElement("small");return e(n,["votes"]),e(r,["electoral ",n]),e(t,["\n                  ",r,"\n                  ",arguments[2],"\n                "]),t})(Z("electoral"),X("context"),c?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[3]);var r=document.createElement("em"),n=document.createElement("span");return n.setAttribute("class",arguments[0]),e(n,[arguments[1]," - "]),e(r,[n,arguments[2]]),e(t,["\n                      ",r," popular vote\n                    "]),t})(Z("pop","tally"),U.shortTally(c),U.pct(c,p),F(Z("pop"),Z("pop","rep"))):null):null,Z("notation"),o.half,F(z({},Z("include","tossup"),C)),q([{offset:"left",bars:y.left},{offset:"right",bars:y.right}],o.total),F(Z("main"),(z(t={},Z("main","compressed"),!a),z(t,Z("main","has","margin"),R),z(t,Z("include","tossup"),C),z(t,X("live"),L.live),t)),h?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("h6");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("ul");return e(n,["\n                  ",arguments[2],"\n                "]),e(t,["\n                ",r,"\n                ",n,"\n              "]),t})($("title"),L.live?"Available Battleground States":"Battleground States",h.sort((function(e,t){return"lean-Dem"===e.expectation?-1:1})).sort((function(e,t){return"lean-GOP"===e.expectation?1:0})).map(K),$()):null,E,a?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("div");r.setAttribute("class",arguments[1]);var n=document.createElement("img");n.setAttribute("alt","Clinton"),n.setAttribute("src",arguments[0]),e(r,["\n                ",n,"\n              "]);var i=document.createElement("div");i.setAttribute("class",arguments[3]);var a=document.createElement("img");return a.setAttribute("alt","Trump"),a.setAttribute("src",arguments[2]),e(i,["\n                ",a,"\n              "]),e(t,["\n              ",r,"\n              ",i,"\n            "]),t})(j.resolve(H.assets,"graphics/busts/Hillary_Clinton_head_color_128x128_transparent.png"),F(Z("headshot"),Z("clinton")),j.resolve(H.assets,"graphics/busts/Donald_trump_head_color_128x128_transparent.png"),F(Z("headshot"),Z("trump"))):null,F(Z(),Z("office-"+n)),L.showNotes?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("p");return e(r,[arguments[0]]),e(t,["\n              ",r,"\n            "]),t})(T.map((function(e){return e+" "})),Z("notes")):null,L.showLink?(function(){var e=N("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[2]);var r=document.createElement("a");r.setAttribute("href",arguments[0]);var n=document.createElement("span");return n.setAttribute("class","fa fa-arrow-circle-right icon-right"),e(r,["\n                ",arguments[1],"\n                ",n,"\n              "]),e(t,["\n              ",r,"\n            "]),t})(L.link,L.linkText,Z("link")):null)}}}}),{"../../data/seats":7,"../config":146,"../util/bem":198,"./bars":196,"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,url:19,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],208:[(function(h,e,t){"use strict";h("wapo-shared/util");var d=h("wapo-shared/race-helpers"),f=(h("yo-yo"),h("classnames")),r=h("./bem"),m=(h("./format"),h("../map/util").getOfficeID),y=h("./legend")().render,n=h("./flipped-states"),i=h("./timer"),a=(h("../util/table"),h("./callout-button")),o=h("./sidebar"),s=h("./battlegrounds-table"),g=r("wpe-hsb"),v=n({limit:5,title:"Largest flips"}).render;e.exports=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(i().render,(u&&u.link?a(u):a()).render,o(u).render),p=s(u).render;return{render:function(e,t,r){var n,i,a=e.mapView,o=e.stateFips;a&&(!/historical|expected/.test(a),n=m(a)),o&&"00"!==o&&n&&"H"!==n?i=c(e,r):n&&("P"===n||"S"===n||"G"===n?i=p(e,n,t):("H"===n&&"00"===o||document.body.classList.contains("house-landing"))&&(i=(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n              ",arguments[1],"\n            "]),t})(f(g("segment"),g("segment","flipped")),v({officeID:n,results:e.results}))));var s="function"===typeof u.isUsingStatic&&u.isUsingStatic(),l=u.enableLegend&&!d.isPrimary(r)?(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("h4");return r.setAttribute("class",arguments[0]),e(r,["Map Key"]),e(t,["\n              ",r,"\n              ",arguments[2],"\n            "]),t})(g("title"),f(g("segment"),g("segment","legend")),y(e,t)):null;return (function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[5]);var r=document.createElement("div");r.setAttribute("class",arguments[4]);var n=document.createElement("div");return n.setAttribute("class",arguments[0]),e(n,["\n            ",arguments[1],"\n\n            ",arguments[2],"\n\n            ",arguments[3],"\n          "]),e(r,["\n          ",n,"\n        "]),e(t,["\n        ",r,"\n      "]),t})(g("inner"),i,l,"H"!==n&&"S"!==n&&"G"!=n||s?null:(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("div"),n=document.createElement("span");return n.setAttribute("class",arguments[0]),e(n,["Hover over the map for more information."]),e(r,[n]),e(t,["\n                ",r,"\n                ",arguments[2],"\n              "]),t})(f(g("instructions"),g("hover-for-info")),f(g("segment")),"00"!==o||/cartogram/g.test(e.mapView)?null:(function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[0]);var r=document.createElement("span");return e(r,["Click on a state to zoom."]),e(t,[r]),t})(f(g("instructions"),"wpe_click-to-zoom-instruction"))),g("outer"),g())}}}}),{"../map/util":170,"../util/table":224,"./battlegrounds-table":197,"./bem":198,"./callout-button":200,"./flipped-states":204,"./format":205,"./legend":210,"./sidebar":221,"./timer":226,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],209:[(function(e,t,r){"use strict";var n=e("global/window"),i=e("./detect-browser"),a={isMobile:null,isAndroid:null};n.hasOwnProperty("isMobile")&&"function"===typeof n.isMobile.any&&(a.isMobile=!!n.isMobile.any()),n.hasOwnProperty("isMobile")&&"function"===typeof n.isMobile.Android&&"function"===typeof n.isMobile.AndroidTablet&&(a.isAndroid=!!n.isMobile.Android()||!!n.isMobile.AndroidTablet()),t.exports=function(){return!!i.isIE()||a.isMobile},t.exports._dangerouslySetIsMobile=function(e){a.isMobile=e,a.isAndroid=e},t.exports.isAndroid=function(){return a.isAndroid},t.exports.isMobileDesktop=function(){return!a.isMobile&&(i.isIE()||i.isFF())}}),{"./detect-browser":201,"global/window":102}],210:[(function(g,e,t){"use strict";var a=g("url"),v=(g("yo-yo"),g("classnames")),b=g("wapo-shared/race-helpers"),_=g("wapo-shared/util"),r=g("./bem"),n=g("./format"),o=g("../config"),i=g("../map/util"),x=i.getOfficeID,w=i.raceTypeFromMapView,D=g("./is-mobile"),s=(g("./log"),g("./primary-legend"),g("../map/style/constants").shiftStops),S=r("wpe-legend");function l(e){return v(S("item"),S("item","square"),S(e))}function u(e,t){return function(){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[2]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]]),e(t,[r]),t})(l(e),t,S("item-wrapper"))}}function c(e){return function(){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("div");r.setAttribute("class",arguments[3]);var n=document.createElement("strong");e(n,[arguments[0]]);var i=document.createElement("span");i.setAttribute("class",arguments[1]),e(i,["lead,"]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(a,["win"]),e(r,["\n        ",n,"\n        ",i,"\n        ",a,"\n      "]),e(t,["\n      ",r,"\n    "]),t})(n.party(e.replace("-margin","")),l("safe_"+e),l(e),S("group"),S("item-wrapper"))}}function p(e,t,r){return function(){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[3]);var r=document.createElement("span");r.setAttribute("class",arguments[2]);var n=document.createElement("i");n.setAttribute("aria-hidden","true"),n.setAttribute("class",arguments[0]);var i=document.createElement("span");return e(i,[arguments[1]]),e(r,["\n        ",n,"\n        ",i,"\n      "]),e(t,["\n      ",r,"\n    "]),t})(v("fa",t),r,v(S("item"),S(e)),S("item-wrapper"))}}function h(r,e){var n=a.resolve(o.assets,"graphics/icons"),i=1;return"dem"===r?e=e.slice().reverse():"rep"===r&&(i=2),function(){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("span");r.setAttribute("class",arguments[0]),e(r,["More ",arguments[1]]);var n=document.createElement("ul");return n.setAttribute("class",arguments[2]),e(n,["\n      ",arguments[3],"\n    "]),e(t,["\n    ",r,"\n    ",n,"\n  "]),t})(v(S("shift-legend-header"),r),"dem"===r?"Democratic":"Republican",v(S(r),S("shift")),e.filter((function(e){return.01!==e})).map((function(e,t){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("img");r.setAttribute("src",arguments[0]),r.setAttribute("class",arguments[1]);var n=document.createElement("span");return e(n,[arguments[2],arguments[3]]),e(t,["\n        ",r,"\n          ",n,"\n        "]),t})(n+"/election-arrows-"+r+"-0"+(t+i)+".svg",v(S("shift_icon"),"icon-"+t),.01!==e?100*e:"",.2===e?"+":"",S("item-wrapper"))})),v(S("shift-legend-wrapper"),r))}}var d,R={dem:u("dem","Dem."),safeDem:u("safe_dem","Safe Dem."),predDem:u("pred_dem","Pred. Dem."),leadingDem:u("safe_dem","Leading Dem."),wonDem:u("dem","Won Dem."),groupDem:c("dem"),groupDemMargin:c("dem-margin"),rep:u("rep","Rep."),safeRep:u("safe_rep","Safe Rep."),predRep:u("pred_rep","Pred. Rep."),leadingRep:u("safe_rep","Leading Rep."),wonRep:u("rep","Won Rep."),groupRep:c("rep"),groupRepMargin:c("rep-margin"),norace:u("norace","No race"),noresults:u("noresults","No results yet"),independent:u("ind","Ind."),safeIndependent:u("safe_ind","Safe Ind."),predIndependent:u("pred_ind","Pred. Ind."),leadingIndependent:u("safe_ind","Leading Ind."),wonIndependent:u("ind","Won Ind."),groupIndependent:c("ind"),groupIndependentMargin:c("ind-margin"),green:u("green","Green"),safeGreen:u("safe_grn","Safe Grn."),predGreen:u("pred_grn","Pred. Grn."),leadingGreen:u("safe_grn","Leading Grn."),wonGreen:u("grn","Won Grn."),groupGreen:c("grn"),groupGreenMargin:c("grn-margin"),libertarian:u("lib","Libertarian"),safeLibertarian:u("safe_lib","Safe Lib."),predLibertarian:u("pred_lib","Pred. Lib."),leadingLibertarian:u("safe_lib","Leading Lib."),wonLibertarian:u("lib","Won Lib."),groupLibertarian:c("lib"),groupLibertarianMargin:c("lib-margin"),tossup:u("tossup","Toss-up"),lead:u("lead","Lead"),won:u("won","Won"),updates:p("updates","fa-exclamation","Updates"),flipped:p("flipped","fa-long-arrow-right","Switched party since last election"),gainDem:h("dem",s),gainRep:h("rep",s),gainMid:(d=a.resolve(o.assets,"graphics/icons"),function(){return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[6]);var r=document.createElement("ul");r.setAttribute("class",arguments[5]);var n=document.createElement("li");n.setAttribute("class",arguments[4]);var i=document.createElement("img");i.setAttribute("src",arguments[0]+"/election-arrows-dem-05.svg"),i.setAttribute("class",arguments[1]);var a=document.createElement("img");a.setAttribute("src",arguments[2]+"/election-arrows-rep-01.svg"),a.setAttribute("class",arguments[3]);var o=document.createElement("span");return e(o,["1"]),e(n,["\n        ",i,"\n        ",a,"\n        ",o,"\n      "]),e(r,["\n      ",n,"\n    "]),e(t,["\n    ",r,"\n  "]),t})(d,v(S("shift_icon"),"icon-0"),d,v(S("shift_icon"),"icon-0"),S("item-wrapper"),v(S("shift")),v(S("shift-legend-wrapper"),S("shift-legend-mid")))})};e.exports=function(){return{render:function(t,e){var r,n,i=t.mapView,a=[];"undefined"!==typeof i&&(/live-gain/.test(r=i)?n=["gainDem","gainMid","gainRep"]:/scaled-margin/.test(r)?n=["groupDemMargin","groupRepMargin","groupLibertarianMargin","groupGreenMargin","groupIndependentMargin","norace","noresults","updates","flipped"]:/live/.test(r)?n=["wonDem","leadingDem","wonRep","leadingRep","wonLibertarian","leadingLibertarian","wonGreen","leadingGreen","wonIndependent","leadingIndependent","norace","noresults","updates","flipped"]:/state-detail/.test(r)?n=["wonDem","leadingDem","wonRep","leadingRep","wonLibertarian","leadingLibertarian","wonGreen","leadingGreen","wonIndependent","leadingIndependent","norace","noresults"]:/historical/.test(r)?n=["dem","rep","libertarian","green"]:/expected/.test(r)?n=["safeDem","predDem","safeRep","predRep","tossup","norace"]:"empty"===r&&(n=[]),a=n);var o=x(i);"S"!==o&&"G"!==o?a=_.without(a,"norace"):"00"!==t.stateFips&&(a=_.without(a,"norace"));var s=w(i);if(b.isPrimary(s))return"";(e||"H"===o||D()&&!D.isMobileDesktop())&&(a=_.without(a,"updates"),a=_.without(a,"flipped"));var l=_.get(t,"results.live.results",null);if(l){var u=function(){return!1},c=function(e){return b.fips.isCounty(e)&&e.slice(0,2)===t.stateFips};/states/.test(i)&&"00"!==t.stateFips?u=c:/states/.test(i)?u=b.fips.isState:/districts|cartogram/.test(i)?u=b.fips.isDistrict:/counties/.test(i)&&(u="00"!==t.stateFips?c:b.fips.isCounty);var p={},h={flipped:!1,freshie:!1,novotes:!1};Object.keys(l).filter((function(e){return u(e)&&_.get(l[e],o,s)})).forEach((function(r){Object.keys(_.get(l,[r,o],{})).forEach((function(e){var t=_.get(l,[r,o,e,s],{});t.freshie&&(h.freshie=!0),"no-votes"!==t.status&&"not-yet-reporting"!==t.status||(h.novotes=!0),p[t.winningParty]=!0}))})),h.flipped||(a=_.without(a,"flipped")),h.freshie||(a=_.without(a,"updates")),h.novotes||(a=_.without(a,"noresults")),p.Lib||(a=_.without(a,"wonLibertarian"),a=_.without(a,"leadingLibertarian")),p.Grn||(a=_.without(a,"wonGreen"),a=_.without(a,"leadingGreen")),p.Ind||(a=_.without(a,"wonIndependent"),a=_.without(a,"leadingIndependent"))}(d=t).style&&(d.style.layers||[]).filter((function(e){return/circle/.test(e.id)&&!/_inner/.test(e.id)&&_.get(e,["paint","circle-radius"])}));var d,f=void 0;if("number"===typeof t.zoom&&/margin/.test(t.mapView)){f=(function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(r,["Circle size based on total vote margin"]),e(t,["\n          ",r,"\n        "]),t})(S("size-scale","label"),S("size-scale_wrap","margin-legend"))}var m,y=/gain/.test(i)?S("gain"):null;return (function(){var e=g("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("ul");return e(r,["\n          ",arguments[0],"\n        "]),e(t,["\n        ",r,"\n        ",arguments[2],"\n      "]),t})((m=a)?m.map((function(e){return R[e].call(null)})):null,v(S(),null,y),f)}}}}),{"../config":146,"../map/style/constants":152,"../map/util":170,"./bem":198,"./format":205,"./is-mobile":209,"./log":211,"./primary-legend":217,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,url:19,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],211:[(function(e,t,r){"use strict";var n=e("global/window"),i=e("performance-now"),a=e("json-stringify-safe"),o=n.console;["info","warn","error","group","groupCollapsed","groupEnd"].forEach((function(e){r[e]=function(){o[e]?o[e].apply(o,arguments):n.console[e]?n.console[e].apply(n.console,arguments):n.console.log.apply(n.console,arguments)}}));var s=r,l=i();s.debug=function(){},s.debugGroup=function(){},s.enableDebugLogs=function(e){if(e){var a=new RegExp(e);s.debug=function(e){a.test(e)&&r.info.apply(s,c.apply(null,arguments))},s.debugGroup=function(e,t,r,n){var i=n&&s.groupCollapsed?s.groupCollapsed.bind(s):s.group?s.group.bind(s):null;a.test(e)&&(i&&i.apply(null,c(e,t)),r((function(){s.info.apply(s,arguments)})),s.groupEnd&&s.groupEnd())}}};var u={};function c(e){var t=Array.prototype.slice.call(arguments,1),r=(function(e){var t=[0,0,0,1];try{for(var r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n%3;t[i]=(t[r%3]+n%13*13)%20}}finally{return"rgba("+t.map((function(e,t){return 3===t?e:10*(0+e)})).join(",")+")"}})(e);return["%c"+(l?(i()-l).toFixed(0):"")+" %c"+e,"font-weight: bold","font-weight: bold; color: "+r].concat(t)}s.warnOnce=function(e){var t;arguments.length>1&&(t=Array.prototype.slice.call(arguments),e=a(t,(function(e,t){if("function"===typeof t.serialize)return t.serialize()}))),u[e]||(u[e]=!0,t?s.warn.apply(s,t):s.warn(e))}}),{"global/window":102,"json-stringify-safe":107,"performance-now":125}],212:[(function(e,t,r){"use strict";var n=e("validimir"),s=e("object-path"),i=e("xtend"),a=/\[object (\w+)\]/,l=function(e){return{}.toString.call(e).match(a)[1]},o=t.exports=function(){};o.type=l;var u={value:"undefined",operator:"Boolean",actual:"undefined",message:"Value is required"};o.validators=function(e){var t=n();return t.optional=e,t},o.create=function(){for(var e=Array.from(arguments),o=e.shift(),t=0;t<e.length;t++)o=i(o,e[t].model);var r=function(e,t){var r={};if("Object"!==l(e))return r[""]=u,r;for(var n in o)if("@root"!==n){var i=o[n],a=s.get(e,n);i.optional&&"Undefined"===l(a)||("Undefined"!==l(a)?r[n]=i(a).errors:(r[n]=r[n]||[],r[n].push(u)))}return o["@root"]&&(r[""]=o["@root"](e).errors),{errors:r,length:(function(e){var t=0;for(var r in e)t+=e[r].length||0;return t})(r),data:t?(function(e,t){var r={};for(var n in t){var i=s.get(e,n);s.set(r,n,i)}return r})(e,o):e}};return r.model=o,r}}),{"object-path":122,validimir:135,xtend:138}],213:[(function(l,e,t){"use strict";l("yo-yo");var u=l("classnames"),c=l("../config"),p=l("./time"),h=l("./log");function d(e){var t=Math.round(e/1e3);return Math.floor(t/60)+":"+((t%=60)<10?"0":"")+t}e.exports=function(e,t){if(!c.showTimer)return (function(){l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("style","display: none"),e.setAttribute("class","wpe-timer_hidden"),e})();var r=p.time(),n=e.errored,i=e.loading,a=e.nextFetch,o=-1;i?o=0:a&&((o=p.diff(a,r))<=0&&i&&(o=0),(o<0||o>6e4)&&(o=-1));{if(h.debug("next-update",o,i,n,a,r),n){var s="Connection problem.";return o>=500?s+=" Trying again in "+d(o)+".":o>=0&&(s+=" Trying again now."),(function(){var e=l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.onclick=arguments[1],t.setAttribute("class","wpe-timer wpe-timer_offline");var r=document.createElement("span"),n=document.createElement("i");return n.setAttribute("class","fa fa-warning"),e(r,["\n          ",n,"\n          ",arguments[0],"\n        "]),e(t,["\n        ",r,"\n      "]),t})(s,t)}return (function(){var e=l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.onclick=arguments[0],t.setAttribute("class",arguments[1]),e(t,["\n      ",arguments[2],"\n     "]),t})(t,u("wpe-timer","wpe-timer_online",{"wpe-timer_loading":i}),o>=0?(function(){var e=l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("i");return r.setAttribute("class","fa fa-refresh"),e(t,["\n          ",r,"\n          Checking for new results: ",arguments[0],"\n        "]),t})(d(o)):null)}}}),{"../config":146,"./log":211,"./time":225,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"yo-yo":140}],214:[(function(e,t,r){"use strict";var n=e("wapo-shared/util"),i=e("wapo-shared/race-helpers"),a=["01","02","05","08","13","16","17","19","20","21","22","33","37","40","41","45","46"],o=["10","18","21","22","28","29","30","34","37","38","49","51","53","54"],s={S:{},G:{}};function l(e){return"S"===e?a:"G"===e?o:[]}a.forEach((function(e){s.S[e]=!0})),o.forEach((function(e){s.G[e]=!0})),t.exports.noRaceFips=l,t.exports.noRacePostal=function(e){return l(e).map(i.getStatePostal)},t.exports.hasNoRace=function(e,t){return n.get(s,[e,t])}}),{"wapo-shared/race-helpers":263,"wapo-shared/util":264}],215:[(function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i=JSON.stringify(e),a=void 0===t?2166136261:t;for(r=0,n=i.length;r<n;r++)a^=i.charCodeAt(r),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return("0000000"+(a>>>0).toString(16)).substr(-8)}}),{}],216:[(function(s,e,t){"use strict";s("yo-yo");var l=s("wapo-shared/util"),u=s("./format");var c=["P","P.2008","P.2004"],p=["2012","2008","2004"];e.exports=function(n,e,t,r){if(!n||n.loading||!l.get(n,"results."+e))return null;("undefined"===typeof r||r>3)&&(r=3);var i,a=l.get(n,"results."+e);if("P"===t)i=c.slice(0,r).map((function(e,t){var r=a[e];return r&&r.winningParty?{year:p[t],candidateLast:l.get(n.candidates,[r.candidates[0].id,"last"],"--"),winningParty:r.winningParty}:null})).filter(Boolean);else{var o=a[t];if(!o||!o.winningParty)return null;i=[{year:o.year,candidateLast:l.get(n.candidates,[o.candidates[0].id,"last"],"--"),winningParty:o.winningParty}]}return (function(){var e=s("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("dl");return t.setAttribute("class","wpe-tip_sidenote"),e(t,[arguments[0]]),t})(i.map((function(e,t){return[(function(){var e=s("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("dt");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]," win:"]),t})("wpe-past-"+t,e.year),(function(){var e=s("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("dd");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]," ",arguments[2]]),t})("wpe-past-"+t,e.candidateLast,u.partyAbbrev(e.winningParty))]})))}}),{"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/util":264,"yo-yo":140}],217:[(function(A,e,t){"use strict";A("yo-yo");var M=A("classnames"),I=A("wapo-shared/race-helpers"),O=A("wapo-shared/util"),r=A("./bem"),C=(A("./format"),A("../config"),A("../race-config").raceConfigLookup),n=A("../map/util"),T=n.getOfficeID,k=n.raceTypeFromMapView,L=A("./is-mobile"),N=(A("./log"),r("wpe-legend"));function i(e){return M(N("item"),N("item","circle"),N(e))}function a(e,t){return function(){return (function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[2]);var r=document.createElement("span");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]]),e(t,[r]),t})(i(e),t,N("item-wrapper"))}}function o(t){return function(e){return (function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("div");r.setAttribute("class",arguments[3]);var n=document.createElement("strong");e(n,[arguments[0]]);var i=document.createElement("span");i.setAttribute("class",arguments[1]),e(i,["lead,"]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(a,["win"]),e(r,["\n        ",n,"\n        ",i,"\n        ",a,"\n      "]),e(t,["\n      ",r,"\n    "]),t})(e,i(t+"_lead"),i(t),N("group"),N("item-wrapper"))}}function s(e){return function(){return (function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[4]);var r=document.createElement("div");r.setAttribute("class",arguments[3]);var n=document.createElement("strong");e(n,[arguments[0]]);var i=document.createElement("span");i.setAttribute("class",arguments[1]),e(i,["lead,"]);var a=document.createElement("span");return a.setAttribute("class",arguments[2]),e(a,["win"]),e(r,["\n        ",n,"\n        ",i,"\n        ",a,"\n      "]),e(t,["\n      ",r,"\n    "]),t})("dem"===e?"Dem.":"Rep.",i("safe_"+e),i(e),N("group"),N("item-wrapper"))}}function l(e,t,r){return function(){return (function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class",arguments[3]);var r=document.createElement("span");r.setAttribute("class",arguments[2]);var n=document.createElement("i");n.setAttribute("aria-hidden","true"),n.setAttribute("class",arguments[0]);var i=document.createElement("span");return e(i,[arguments[1]]),e(r,["\n        ",n,"\n        ",i,"\n      "]),e(t,["\n      ",r,"\n    "]),t})(M("fa",t),r,M(N("item"),N(e)),N("item-wrapper"))}}var z={dem:a("dem","Dem."),safeDem:a("safe_dem","Safe Dem."),predDem:a("pred_dem","Pred. Dem."),leadingDem:a("safe_dem","Leading Dem."),wonDem:a("dem","Won Dem."),groupDem:s("dem"),rep:a("rep","Rep."),safeRep:a("safe_rep","Safe Rep."),predRep:a("pred_rep","Pred. Rep."),leadingRep:a("safe_rep","Leading Rep."),wonRep:a("rep","Won Rep."),groupRep:s("rep"),norace:a("norace","No race"),noresults:a("noresults","No results yet"),green:a("green","Green"),libertarian:a("lib","Libertarian"),independent:a("ind","Independent"),tossup:a("tossup","Toss-up"),lead:a("lead","Lead"),won:a("won","Won"),updates:l("updates","fa-exclamation","Updates"),flipped:l("flipped","fa-long-arrow-right","Switched party since last election"),gainDem:l("vote-gain-dem","fa-arrow-left","Democrat gains since last election"),gainRep:l("vote-gain-rep","fa-arrow-right","Republican gains since last election"),rep_incumbent:o("rep_incumbent"),rep_challenger1:o("rep_challenger1"),rep_challenger2:o("rep_challenger2"),rep_challenger3:o("rep_challenger3"),rep_other:o("rep_other"),dem_incumbent:o("dem_incumbent"),dem_challenger1:o("dem_challenger1"),dem_challenger2:o("dem_challenger2"),dem_challenger3:o("dem_challenger3"),dem_other:o("dem_other"),tied:a("tied","Tied")};e.exports=function(){return{render:function(a,e,o){var t,r,n=a.mapView,i=[];"undefined"!==typeof n&&(/-primary-republican$/.test(t=n)?r=["rep_incumbent","rep_challenger1","rep_challenger2","rep_challenger3","rep_other","noresults","tied"]:/-primary-democratic$/.test(t)?r=["dem_incumbent","dem_challenger1","dem_challenger2","dem_challenger3","dem_other","noresults","tied"]:/-primary-open$/.test(t)?r=["dem_incumbent","dem_challenger1","dem_challenger2","dem_challenger3","dem_other","rep_incumbent","rep_challenger1","rep_challenger2","rep_challenger3","rep_other","tied"]:"empty"===t&&(r=[]),i=r);var s=T(n);"S"!==s&&"G"!==s&&(i=O.without(i,"norace"));var l=k(n),u=(I.isPrimary(l),I.isOpenRace(l));(e||"H"===s||L()&&!L.isMobileDesktop())&&(i=O.without(i,"updates"),i=O.without(i,"flipped"));var c={},p=O.get(a,"results.live.results",null);if(p){var h=function(){return!1},d=function(e){return I.fips.isCounty(e)&&e.slice(0,2)===a.stateFips};/states/.test(n)&&"00"!==a.stateFips?h=d:/states|cartogram/.test(n)?h=I.fips.isState:/districts/.test(n)?h=I.fips.isDistrict:/counties/.test(n)&&(h="00"!==a.stateFips?d:I.fips.isCounty);var f={flipped:!1,freshie:!1,novotes:!1,incumbent:!1,challenger1:!1,challenger2:!1,challenger3:!1,other:!1,tied:!1},m={D:"dem",R:"rep",X:"open"}[l]+"_",y=function(e){return e.match(/primary-(?:dem|rep)-(.*)$/)[1]},g=function(e){return e.match(/primary-(dem|rep)-(.*)$/)[1]};a.stateFips;o=o||"00","S"===s&&""+a.stateFips+o;var v=C(a.stateFips,s,o,l,{});for(var b in v){c[u?g(v[b])+"_"+y(v[b]):m+y(v[b])]=O.get(a,["results","live","candidates",b,"last"],"Nobody")}var _={};if(p=Object.keys(p).filter((function(e){return h(e)&&O.get(p[e],s,o,l)})).forEach((function(e){var t=O.get(p,e+"."+s+"."+o+"."+l,{});if(t.flipped&&(f.flipped=!0),t.freshie&&(f.freshie=!0),"no-votes"!==t.status&&"not-yet-reporting"!==t.status||(f.novotes=!0),u){if(t.leaders.length>0)if(/tied-finished/.test(t.leadingCandidateIndex))_.Tied="tied";else{var r=O.get(a,["results","live","candidates",t.leaders[0],"last"],"Error"),n=g(t.leadingCandidateIndex),i=t.leadingCandidateIndex.match(/primary-(?:dem|rep)-(.*)-(?:won|lead|tied)$/)[1];_[r]=n+"_"+i}}else/-incumbent-/.test(t.leadingCandidateIndex)?f.incumbent=!0:/-challenger1-/.test(t.leadingCandidateIndex)?f.challenger1=!0:/-challenger2-/.test(t.leadingCandidateIndex)?f.challenger2=!0:/-challenger3-/.test(t.leadingCandidateIndex)?f.challenger3=!0:/-other-/.test(t.leadingCandidateIndex)?f.other=!0:/tied/.test(t.leadingCandidateIndex)&&(f.tied=!0)})),f.flipped||(i=O.without(i,"flipped")),f.freshie||(i=O.without(i,"updates")),f.novotes||(i=O.without(i,"noresults")),u){var x=O.values(_);i=i.filter((function(e){return-1!=x.indexOf(e)})),c=_}else f.incumbent||(i=O.without(i,m+"incumbent")),f.challenger1||(i=O.without(i,m+"challenger1")),f.challenger2||(i=O.without(i,m+"challenger2")),f.challenger3||(i=O.without(i,m+"challenger3")),f.other||(i=O.without(i,m+"other")),f.tied||(i=O.without(i,"tied"))}var w,D=(w=a).style?(w.style.layers||[]).filter((function(e){return/circle/.test(e.id)&&!/_inner/.test(e.id)&&O.get(e,["paint","circle-radius"])})):[],S=void 0;if("number"===typeof a.zoom&&D.length>0&&circleScale.scale.length>0){S=(function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("h5");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("span");return n.setAttribute("class",arguments[2]),e(n,["Circle size based on total vote margin"]),e(t,["\n            ",r,"\n            ",n,"\n          "]),t})(N("size-scale_title"),"Margin of Lead",N("size-scale","label"),N("size-scale_wrap"))}var R,P,E=/live|state-detail/.test(n)?N("has-group"):null;return (function(){var e=A("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("ul");return e(r,["\n          ",arguments[0],"\n        "]),e(t,["\n        ",r,"\n        ",arguments[2],"\n      "]),t})(u?(function(e,r){if(e){var n=[];return Object.keys(r).forEach((function(e){var t=r[e];n.push(z[t].call(null,e))})),n}return null})(i,c):(P=c,(R=i)?R.map((function(e){return z[e].call(null,P[e])})):null),M(N(),E),S)}}}}),{"../config":146,"../map/util":170,"../race-config":185,"./bem":198,"./format":205,"./is-mobile":209,"./log":211,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],218:[(function(n,e,t){"use strict";n("yo-yo");e.exports=function(e){return (function(){var e=n("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-progress");var r=document.createElement("div");return r.setAttribute("class","wpe-progress_number"),e(r,[arguments[0]," of precincts reporting"]),e(t,["\n  ",r,"\n"]),t})(e)}}),{"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"yo-yo":140}],219:[(function(D,e,t){"use strict";var S=D("wapo-shared/util"),h=D("wapo-shared/race-helpers"),R=(D("yo-yo"),D("./format")),P=D("./bem")("wpe-nlp");e.exports.parse=function(e,t,r){return"G"===e?null:r&&(+(p=r)["leading-Dem"]||+p["won-Dem"]||+p["leading-GOP"]||+p["won-GOP"])?(function(e,t){if(function(e,t){var r=S.get(t,"won-Dem",0);"S"===e&&(r+=A.S.demTotal);if(r>=E[e])return"dem";var n=S.get(t,"won-GOP",0);"S"===e&&(n+=A.S.repTotal);if(n>=E[e])return"rep"}(e,t))return null;var r,n=Math.abs(t["won-Dem"]-t["won-GOP"]),i=t["won-Dem"]||t["won-GOP"],a=Math.abs(t["leading-Dem"]-t["leading-GOP"]);r=n||!i||a?i||a?a&&!i?(function(e,t,r){var n=t["leading-Dem"]>t["leading-GOP"]?"dem":"rep",i="dem"===n?t["leading-Dem"]:t["leading-GOP"],a=R.partyOrName(n,e),o=R.otherPartyOrName(n,e),s="P"===e?"is":"are",l=void 0;l="P"===e?i>1?"electoral votes":"electoral vote":i>1?"races":"race";var u="P"===e?(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,[arguments[0]]),e(t,["in states with ",r," ",arguments[1]]),t})(i,l):(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,[arguments[0]]),e(t,["in ",r," ",arguments[1]]),t})(i,l);return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," ",arguments[1]," leading ",arguments[2],", ",arguments[3]," more than ",arguments[4],"."]),t})(a,s,u,r,o)})(e,t,a):i&&!n?(o=e,l=(s=t)["leading-Dem"]>s["leading-GOP"]?"dem":"rep",u="P"===o?"leads":"lead",c=s["won-Dem"],p=R.partyOrName("rep",o),h=R.partyOrName("dem",o),(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," and ",arguments[1]," are tied with ",arguments[2]," ",arguments[3],", but ",arguments[4]," ",arguments[5]," in more races."]),t})(p,h,c,R.electionUnit(o,c),R.partyOrName(l,o),u)):(function(e,t){var r=t["won-Dem"]>t["won-GOP"]?"dem":"rep",n=R.partyOrName(r,e),i=R.otherPartyOrName(r,e),a="dem"===r?"Dem":"GOP",o="dem"===r?"GOP":"Dem",s=t["won-"+a]-t["won-"+o],l="P"===e,u=l?"has":"have",c=0===s?null:(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,[arguments[0]]),e(t,[", ",r," more than ",arguments[1]]),t})(s,i),p=0===t["won-"+o]?null:(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");e(r,[arguments[0]]);var n=document.createElement("strong");return e(n,[arguments[1]]),e(t,[r," ",arguments[2]," won ",n," ",arguments[3],"."]),t})(i,t["won-"+o],u,R.electionUnit(e,t["won-"+o]));{if(l){var h="Clinton"===n?"She":"He",d=(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");e(r,[arguments[0]]);var n=document.createElement("strong");return e(n,[arguments[1]]),e(t,[r," ",arguments[2]," won ",n," ",arguments[3],arguments[4],"."]),t})(n,t["won-"+a],u,R.electionUnit(e,t["won-"+a]),c),f=0===t["leading-"+a]?null:(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,[arguments[0]]),e(t,[arguments[1]," leads in states with ",r," ",arguments[2],"."]),t})(t["leading-"+a],h,R.electionUnit(e,t["leading-"+a]));return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," ",arguments[1]," ",arguments[2]]),t})(d,f,p)}var m=(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");e(r,[arguments[0]]);var n=document.createElement("strong");return e(n,[arguments[1]]),e(t,[r," ",arguments[2]," won ",n," ",arguments[3],arguments[4]]),t})(n,t["won-"+a],u,R.electionUnit(e,t["won-"+a]),c),y=1===t["leading-"+a]?"race":"races",g=0===t["leading-"+a]?null:(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,[arguments[0]]),e(t,["and lead in ",r," ",arguments[1],"."]),t})(t["leading-"+a],y);return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0],arguments[1]," ",arguments[2]," ",arguments[3]]),t})(m,g?",":".",g,p)}})(e,t):(d=e,f=t,m=R.partyOrName("rep",d),y=R.partyOrName("dem",d),g=f["leading-Dem"],(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return e(t,[arguments[0]," and ",arguments[1]," are leading ",arguments[2]," ",arguments[3]," ",arguments[4]," each."]),t})(m,y,"P"===d?"with":"in",g,R.electionUnit(d,g))):(v=e,b=t,_=R.partyOrName("rep",v),x=R.partyOrName("dem",v),w=b["won-Dem"],(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("strong");return e(r,["tied"]),e(t,[arguments[0]," and ",arguments[1]," are ",r," with ",arguments[2]," ",arguments[3],"."]),t})(_,x,w,R.electionUnit(v,w)));var o,s,l,u,c,p,h;var d,f,m,y,g;var v,b,_,x,w;return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("p");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(P(),r)})(e,r):t?(n=e,a=(i=t)["lean-Dem"]+i["safe-Dem"]>i["lean-GOP"]+i["safe-GOP"]?"dem":"rep",o="dem"===a?i["safe-Dem"]:i["safe-GOP"],s="dem"===a?i["lean-Dem"]:i["lean-GOP"],l=R.partyOrName(a,n),u=h.officeNames[n],c="P"===n?"win the presidency":"control the "+R.displayCase(u),(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[5]);var r=document.createElement("span"),n=document.createElement("strong"),i=document.createElement("a");i.setAttribute("href","https://www.washingtonpost.com/news/the-fix/"),e(i,["The Fix's forecast"]),e(n,[i," has ",arguments[0]]);var a=document.createElement("strong");e(a,[arguments[1]]);var o=document.createElement("strong");return e(o,[arguments[2]]),e(r,[n," expected to ",arguments[3]," with ",a," safe ",arguments[4]," and ",o," likely."]),e(t,["\n    ",r,"\n  "]),t})(l,o,s,c,R.electionUnit(n,o),P())):null;var n,i,a,o,s,l,u,c,p};var E={S:51,H:218,P:270},A={S:{demTotal:23,repTotal:42}}}),{"./bem":198,"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],220:[(function(e,t,r){"use strict";var s=e("performance-now"),l=e("next-tick"),u=e("./log");t.exports=function(r,n,e){n=n||0;var i=s()+(e?0:n),a=r.name||r.displayName,o=function(){var e=s();if(o.cancelled)o.timer&&clearTimeout(o.timer);else{if(e>=i&&(u.debug("set-accurate-interval",a,"invoking",e,i),r()),e>i+n){var t=Math.floor((e-i)/n);u.warn("Missed timer window ["+[i,i+n]+"] for "+a+", t = "+e+", missed cycles = "+t),i+=n*(t+1),u.warn("Resetting nextAt = "+i)}else e>=i&&(i+=n,u.debug("set-accurate-interval","scheduling",a,i));o.timer=setTimeout(o,i-s())}};o.displayName=a+"Wrapper";return l(o),function(){u.debug("set-accurate-interval","clear",a),o.cancelled=!0}}}),{"./log":211,"next-tick":119,"performance-now":125}],221:[(function(L,e,t){"use strict";L("yo-yo");var N=L("classnames"),r=L("./bem"),z=L("wapo-shared/util"),j=L("./format"),F=L("wapo-shared/race-helpers"),V=L("../map/util").getOfficeID,G=(L("./log.js"),L("./progressbar")),B=L("./past-wins"),U=L("../race-config").raceConfigLookup,H=r("wpe-sidebar");function q(e){return (function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class","wpe-sidebar_window"),e(t,["\n    ",arguments[0],"\n  "]),t})(e)}var W=function(){return q(function(){L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("aside");return e.setAttribute("class",arguments[0]),e}(N(H(),H("inactive"))))};e.exports=function(){var k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k=z.extend({showSidebarLink:!0},k),{render:function(e,t){if(!e.stateFips||"00"===e.stateFips||!e.mapView||/expected/.test(e.mapView))return W();var r=/historical/.test(e.mapView)?"historical":"live",p=z.get(e,["results",r]),h=!1;F.isOpenRace(t);if(!p||"historical"===r&&p.loading)return W();var n=V(e.mapView);if("H"===n)return W();var i=new RegExp(e.stateFips+"[0-9][0-9][0-9]"),a=!1;try{if(e.stateFips&&("G"===n||"S"===n))for(var o=Object.keys(p.results),s=0;s<o.length;s++)if(i.test(o[s])&&p.results[o[s]][n][e.seat][t].isTied){a=!0;break}}catch(e){a=!0}var d=z.get(p,["results",e.stateFips,n,e.seat||"00",t||"G"]),l=F.stateNameByPostal(F.getStatePostal(e.stateFips));if(!d)return q(function(){L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("aside");return e.setAttribute("class",arguments[0]),e}(N(H(),H("no-race"))));var u="P"===n.charAt(0),c=e.results.historical,f=B(c,e.stateFips,n),m=null,y="Not all candidates shown";if(p.candidates){var g,v=U(e.stateFips,n,e.seat,t),b=["66961","66962"],_="G"==t?.02:.05;0==d.voteCount&&"G"!=t?(g=[],d.candidates.forEach((function(e){var t=v[+e.id];(t.indexOf("incumbent")>=0||t.indexOf("challenger")>=0||b.indexOf(e.id)>=0)&&g.push(e),g.sort((function(e,t){var r=v[+e.id];r=r.indexOf("incumbent")>=0?"incumbent":r;var n=v[+t.id];return r>(n=n.indexOf("incumbent")>=0?"incumbent":n)}))}))):0==d.voteCount?g=d.candidates.length>10?(d.candidates.sort((function(e,t){var r="GOP"==p.candidates[e.id].party||"Dem"==p.candidates[e.id].party,n="GOP"==p.candidates[t.id].party||"Dem"==p.candidates[t.id].party;return r<n?1:r>n?-1:0})),d.candidates.slice(0,9)):d.candidates:(g=d.candidates.filter((function(e){return e.voteCount/d.voteCount>=_})),y="Candidates with less than "+100*_+" percent of the vote not shown.",g.length>10&&(g=g.slice(0,9)),1==g.length&&d.candidates.length>1&&(g.push(d.candidates[1]),y="Some candidates with less than "+100*_+" percent of the vote not shown."));var x=F.isPrimary(t);(m=g.map((function(e,t){var r=p.candidates[e.id];h=!!p.candidates[e.id].incumbent||h;var n=void 0;n=x&&v?v[+e.id]:"63538"==e.id?"second-GOP":"66485"==e.id?"second-Dem":r.party.toLowerCase();var i,a,o,s,l=e.winner,u="R"===e.winner,c=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class","wpe-party-abbrev"),e(t,[arguments[0]]),t})(j.partyAbbrev(p.candidates[e.id].party,""));return (function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");t.setAttribute("class",arguments[12]);var r=document.createElement("td");r.setAttribute("class",arguments[0]);var n=document.createElement("div");n.setAttribute("class","key-square key-square-win");var i=document.createElement("div");i.setAttribute("class","key-square key-square-lead"),e(r,[n,i]);var a=document.createElement("td");a.setAttribute("class",arguments[6]);var o=document.createElement("span");o.setAttribute("class","first"),e(o,[arguments[1]," "]);var s=document.createElement("span");s.setAttribute("class","last"),e(s,[arguments[2],arguments[3]," ",arguments[4]," ",arguments[5]]),e(a,[o,s]);var l=document.createElement("td");l.setAttribute("class",arguments[9]);var u=document.createElement("span");u.setAttribute("class",arguments[7]),e(u,[arguments[8]]),e(l,[u]);var c=document.createElement("td");c.setAttribute("class",arguments[11]);var p=document.createElement("span");return e(p,[arguments[10]]),e(c,[p]),e(t,["\n            ",r,"\n            ",a,"\n            ",l,"\n            ",c,"\n          "]),t})(H("squares"),r.first,r.last,p.candidates[e.id].incumbent||1===d.candidates.length?"*":"",c,"X"===e.winner||"R"===e.winner?(function(){L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("class","fa fa-check"),e})():null,H("name"),H("pop-num"),(a=d,0==(i=e).voteCount&&1===a.candidates.length?(o=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),(s=document.createElement("span")).setAttribute("class","unopposed-bold"),o(s,["–"]),s):j.tally(i.voteCount)),H("pop"),j.pct(e.voteCount,d.voteCount),H("num"),N(H("list","item"),H("item",n),l?H("item","winner-primary"):"",u?H("item","winner-runoff"):""))})).filter(Boolean)).length||(m=null)}var w=null,D=d.voteCount;if("live"===r&&d.precinctsTotal){var S=j.pct(d.precinctsReporting,d.precinctsTotal);w=G(S),S+" rpt."}var R="Pct.";"23"===e.stateFips&&d.candidates.length>2&&("G"!=d.raceTypeID||"G"!=d.officeID)&&(R="1st choice");var P=null;"live"!==r||"31"!==e.stateFips&&"23"!==e.stateFips||!u?1===d.candidates.length?P=h?"*Incumbent, running unopposed":"*Running unopposed":h&&(P="*Incumbent"):P="23"===e.stateFips?"*Maine's electoral votes are awarded by congressional district and can be split among multiple candidates. Three of Maine's electoral votes went to Clinton, one to Trump.":"*Nebraska's electoral votes can be split among multiple candidates.";var E="Race goes to a runoff.",A=g.find((function(e){return"R"==e.winner})),M=d.candidates.length>g.length;A&&M&&P?P=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","first-note"),e(r,[arguments[0]," ",arguments[1]]);var n=document.createElement("div");return e(n,[arguments[2]]),e(t,[r,n]),t})(E,y,P):P&&A?P=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0],". ",arguments[1]]),t})(P,E):P&&M?P=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0],". ",arguments[1]]),t})(P,y):A?P=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0]]),t})(E):M&&(P=(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0]]),t})(y));u&&(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]),e(t,[" (",arguments[1],arguments[2],")"])})(H("notation"),j.electoralVotes(d.statePostal),P?"*":"");var I,O,C,T=a?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");t.setAttribute("class","wpe-sidebar_list_item wpe-sidebar_item_primary_tie "+arguments[0]);var r=document.createElement("td");r.setAttribute("class","wpe-sidebar_squares");var n=document.createElement("div");n.setAttribute("class","key-square key-square-win");var i=document.createElement("div");i.setAttribute("class","key-square key-square-lead"),e(r,[n,i]);var a=document.createElement("td");a.setAttribute("class","wpe-sidebar_name"),e(a,["Tie"]);var o=document.createElement("td");o.setAttribute("class","wpe-sidebar_pop");var s=document.createElement("span");s.setAttribute("class","wpe-sidebar_pop-num"),e(o,[s]);var l=document.createElement("td");return l.setAttribute("class","wpe-sidebar_num"),e(l,[document.createElement("span")]),e(t,["\n          ",r,"\n          ",a,"\n          ",o,"\n          ",l,"\n        "]),t})(d.candidates.length>1?"":"one-candidate"):null;return q(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("aside");t.setAttribute("class",arguments[6]);var r=document.createElement("div");return r.setAttribute("class",arguments[0]),e(r,["\n\n          ",arguments[1],"\n\n          ",arguments[2],"\n\n          ",arguments[3],"\n\n          ",arguments[4],"\n\n          ",arguments[5],"\n\n        "]),e(t,["\n        ",r,"\n      "]),t}(N(H("inner"),(I={},O=H("inner","has","sidebar"),C=P,O in I?Object.defineProperty(I,O,{value:C,enumerable:!0,configurable:!0,writable:!0}):I[O]=C,I)),w?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n            ",arguments[1],"\n          "]),t})(N(H("segment"),H("progressbar")),w):null,m?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[8]);var r=document.createElement("table"),n=document.createElement("thead"),i=document.createElement("tr"),a=document.createElement("th");a.setAttribute("colspan","2"),e(a,["Win/lead"]);var o=document.createElement("th");e(o,["Votes"]);var s=document.createElement("th");e(s,[arguments[0]]),e(i,["\n                  ",a,"\n                  ",o,"\n                  ",s,"\n                "]),e(n,["\n                ",i,"\n              "]);var l=document.createElement("tbody");l.setAttribute("class",arguments[5]);var u=document.createElement("tr");u.setAttribute("class","wpe-sidebar_list_item wpe-sidebar_vote-total-row "+arguments[4]);var c=document.createElement("td");c.setAttribute("class","wpe-sidebar_squares");var p=document.createElement("div");p.setAttribute("class","key-square");var h=document.createElement("div");h.setAttribute("class","key-square"),e(c,[p,h]);var d=document.createElement("td");d.setAttribute("class","wpe-sidebar_vote-total"),e(d,["Total Votes"]);var f=document.createElement("td");f.setAttribute("class",arguments[3]);var m=document.createElement("span");m.setAttribute("class",arguments[1]),e(m,[arguments[2]]),e(f,[m]);var y=document.createElement("td");return y.setAttribute("class","wpe-sidebar_num"),e(y,[document.createElement("span")]),e(u,["\n                  ",c,"\n                  ",d,"\n                  ",f,"\n                  ",y,"\n                "]),e(l,["\n                ",arguments[6],"\n                ",arguments[7],"\n                ",u,"\n              "]),e(r,["\n              ",n,"\n              ",l,"\n            "]),e(t,["\n            ",r,"\n\n          "]),t})(R,H("pop-num"),0==D?"–":j.tally(D),H("pop"),d.candidates.length>1?"":"one-candidate",N(H("list"),H("list",m.length)),m,T,H("segment")):null,f?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n            ",arguments[1],"\n          "]),t})(N(H("segment"),H("historical")),f):null,k.showSidebarLink?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[2]);var r=document.createElement("a");return r.setAttribute("href",arguments[0]),r.setAttribute("class","wpe-link"),e(r,["Full results for ",arguments[1]]),e(t,["\n            ",r,"\n          "]),t})(j.stateUrl(l),l,H("segment")):null,P?(function(){var e=L("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n            ",arguments[1],"\n          "]),t})(N(H("segment"),H("annotation")),P):null,H()))}}}}),{"../map/util":170,"../race-config":185,"./bem":198,"./format":205,"./log.js":211,"./past-wins":216,"./progressbar":218,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],222:[(function(e,t,r){"use strict";t.exports=function(e,t,r){("number"!==typeof r||!isFinite(r)||Math.floor(r)!==r||r>e.length)&&(r=e.length),r-=t.length;var n=e.lastIndexOf(t,r);return-1!==n&&n===r}}),{}],223:[(function(e,t,r){"use strict";t.exports=function(e,t,r){return r=r||0,e.substr(r,t.length)===t}}),{}],224:[(function(o,e,t){"use strict";o("yo-yo");var r=o("classnames"),n=o("./bem"),s=o("wapo-shared/util");e.exports=function(i){i=s.extend({className:"wpe-table",limit:null,rowTemplate:function(e,t){return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(a("row"),e.map(t))},cellTemplate:function(e){return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(a("cell"),e)},headTemplate:function(e,t){return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(r(a("row"),a("header")),e.map(t))},headCellTemplate:function(e,t){return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("th");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(r(a("cell"),a("header")),e)},sort:!1},i);var a=n(i.className);return{render:function(e){var t=!!i.headTemplate;if(t){var r=i.headCellTemplate||i.cellTemplate,n=(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("thead");return e(t,["\n          ",arguments[0],"\n        "]),t})(i.headTemplate(e[0],r));e=e.slice(1)}return i.sort&&(e=e.sort(i.sort)),i.limit&&(e=e.slice(0,i.limit).filter(Boolean)),(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("table");t.setAttribute("class",arguments[1]);var r=document.createElement("tbody");return e(r,["\n          ",arguments[0],"\n        "]),e(t,["\n        ",arguments[2],"\n        ",r,"\n      "]),t})(e.map((function(e){return i.rowTemplate(e,i.cellTemplate)})),a(),t?n:null)}}}}),{"./bem":198,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/util":264,"yo-yo":140}],225:[(function(e,t,r){"use strict";var n=e("next-tick"),i=e("moment"),a=e("./log"),o=e("../config"),s=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/;function l(){var e=void 0;return e=1===arguments.length&&("string"===typeof arguments[0]&&s.test(arguments[0])||"number"===typeof arguments[0])?i(new Date(arguments[0])):i.apply(null,arguments),p&&"undefined"===typeof arguments[0]?e.add(p):e}function u(e){return l(e).valueOf()}function c(e,t,r,n){return l(e).diff(l(t),r||"milliseconds",!n)}t.exports.strictISOPattern=s,t.exports.moment=l,t.exports.isValid=function(e){return l(e).isValid()},t.exports.time=u,t.exports.diff=c,t.exports.subtract=function(e,t){return i(e).subtract(t,"milliseconds").toISOString()};var p=0;t.exports.pretendTodayIs=function(e){("production"!==o.environment||o.scaryproductionoverride)&&(p=!1===e?0:c(e,Date.now()),n((function(){a.info("Pretending today is "+e),a.info("fakeTimeDelta = "+p),a.info("new Date(time())",new Date(u()))})))}}),{"../config":146,"./log":211,moment:117,"next-tick":119}],226:[(function(l,e,t){"use strict";var u=l("yo-yo"),c=l("next-tick"),p=l("global/document"),h=l("wapo-shared/util"),d=l("../store"),f=l("./set-accurate-interval"),m=l("./next-update");e.exports=function(){var t=!1,e=void 0,r=void 0,n=d.start()("timer",!0);function i(){e=f(a,1e3)}function a(){!(function e(t,r){r=r||[];if(t===p)return!0;if(!t||r.indexOf(t)>=0)return!1;return e(t.parentNode,r.concat(t))})(r)?s():u.update(r,m(d.state().results.live,o))}function o(){n("results:fetchLive",{})}function s(){e&&e(),t=!1,r=(function(){l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return p.createElement("div")})()}return s(),{render:function(){t||c(i);var e=t?null:r;return t=!0,h.get(d.state(),"results.live.loading")&&a(),(function(){var e=l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=p.createElement("div");return t.setAttribute("data-ds-widget","wpe-timekeeper"),e(t,[arguments[0]]),t})(e)}}}}),{"../store":195,"./next-update":213,"./set-accurate-interval":220,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"global/document":101,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],227:[(function(u,e,t){"use strict";u("yo-yo");var c=u("classnames"),n=(u("next-tick"),u("lodash.isobject")),i=u("wapo-shared/util"),p=u("./bem"),h=u("./format"),d=u("../../src/map/views");e.exports=function(a){a=i.extend({className:"wpe-toggle",opts:[],optTemplate:function(e){return e.text},template:function(e){return (function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("role","group"),t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(o("group"),e)},handler:function(e){return!0},isActive:function(e,t){return!1},filter:function(){return!0}},a);var o=p(a.className),s=o("selected"),r=a.opts.map((function(e){return n(e)&&e.hasOwnProperty("value")?{text:e.text||h.displayCase(e.value),value:e.value}:"string"!==typeof e?null:{text:i.get(d,[e,"label"],!1)||h.displayCase(e),value:e}})).filter(a.filter).filter(Boolean);return{render:function(i,e){if(r.length<=1)return (function(){u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("style","display: none;"),e})();var t=r.map((function(e){return (function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("button");return t.setAttribute("type","button"),t.onclick=arguments[0],t.setAttribute("data-ds-value",arguments[1]),t.setAttribute("class",arguments[2]),e(t,[arguments[3]]),t})(l,e.value,c(o("option"),(t={},r=s,n=a.isActive(i,e),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),a.optTemplate(e));var t,r,n}));return a.template(t)}};function l(e){e.preventDefault();var t=e.target.getAttribute("data-ds-value");if(!t&&0!==t)throw new Error("Could not find dataset target");a.handler(t)}}}),{"../../src/map/views":175,"./bem":198,"./format":205,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"lodash.isobject":110,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],228:[(function(m,e,t){"use strict";m("yo-yo");var y=m("classnames"),r=m("wapo-shared/race-helpers"),g=r.isPrimary,v=r.isOpenRace,n=m("./bem"),i=m("./table"),a=m("wapo-shared/util"),b=m("./format"),_=m("./progressbar"),o=m("../util/is-mobile"),x=o()&&!o.isMobileDesktop();m("./log");e.exports=function(p){p=a.extend({className:"wpe-tip",tableLimit:2,close:function(){return!0},zoom:function(e){return!0}},p);var h=n(p.className),d=i({limit:p.tableLimit});return{render:function(n){var e,t,r,i,a,o,s,l=!1;if(n.table){n.table.rows.length>p.tableLimit&&0==n.table.rows[0].result.voteCount&&n.table.rows.sort((function(e,t){var r="GOP"==e.meta.party||"Dem"==e.meta.party,n="GOP"==t.meta.party||"Dem"==t.meta.party;return r<n?1:r>n?-1:0}));var u=n.table.rows.slice(0,p.tableLimit).map((function(e,t){var r=(function(e,t,r,n,i){var a=x?e.last:e.first+" "+e.last,o=e.incumbent?"*":"";67552!=e.id||r||(e.party="Ind");var s=(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class","wpe-party-abbrev"),e(t,[arguments[0]]),t})(b.partyAbbrev(e.party,"")),l=y("wpe-table_"+(u=e,c=r,c?u.primaryCandidateColor:u.party),"wpe-table_candidate",{"wpe-table_winner":t});var u,c;return t&&!i?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]);var r=document.createElement("span");return r.setAttribute("class","fa fa-check"),e(t,[arguments[1],arguments[2]," ",arguments[3]," ",r]),t})(l,a,o,s):(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,[arguments[1],arguments[2]," ",arguments[3]]),t})(l,a,o,s)})(e.meta,e.winner,g(n.raceTypeId),v(n.raceTypeId),5===n.id.length);return l=l||e.meta.incumbent,[r].concat(e.cells)})).filter(Boolean);e=d.render([n.table.head].concat(u))}if(n.progress&&n.progress.total){var c=b.pct(n.progress.reporting,n.progress.total);t=x?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class","wpe-progress_number"),e(t,[arguments[0]," reporting"]),t})(c):_(c)}return n.annotation&&(r=(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("p");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]]),e(t,["\n          ",r,"\n        "]),t})(h("annotation"),n.annotation)),n.sidenotes&&(i=(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("dl");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(h("sidenote"),n.sidenotes.map((function(e){return (function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("dt");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("dd");return n.setAttribute("class",arguments[2]),e(n,[arguments[3]]),e(t,["\n              ",r,"\n              ",n,"\n            "]),t})(h("sidenote_title"),e.label,h("sidenote_item"),e.text)})))),x?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.onclick=arguments[13],t.setAttribute("class","wpe-map_static_tooltip");var r=document.createElement("div");r.setAttribute("class",arguments[12]);var n=document.createElement("div");n.setAttribute("class",arguments[2]);var i=document.createElement("h4");i.setAttribute("class",arguments[0]),e(i,[arguments[1]]),e(n,["\n              ",i," ",arguments[3],"\n            "]);var a=document.createElement("div");a.setAttribute("class",arguments[8]);var o=document.createElement("div");o.setAttribute("class",arguments[4]),e(o,["\n                ",arguments[5],"\n                ",arguments[6],"\n                ",arguments[7],"\n              "]),e(a,["\n              ",o,"\n              ",arguments[9],"\n            "]);var s=document.createElement("a");s.onclick=arguments[10],s.setAttribute("href","#"),s.setAttribute("class",arguments[11]);var l=document.createElement("i");return l.setAttribute("aria-hidden","true"),l.setAttribute("class","fa fa-times"),e(s,[l]),e(r,["\n            ",n,"\n            ",a,"\n            ",s,"\n          "]),e(t,["\n          ",r,"\n        "]),t})(h("title"),n.title,y(h("header")),t,h("table_wrapper"),e,l?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["*Incumbent"]),t})(h("incumbent")):null,r,y(h("body")),i?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0]]),t})(i):null,f,h("close"),y(h()),f):(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[9]);var r=document.createElement("div");r.setAttribute("class",arguments[2]);var n=document.createElement("h4");n.setAttribute("class",arguments[0]),e(n,[arguments[1]]),e(r,["\n          ",n,"\n          ",arguments[3],"\n        "]);var i=document.createElement("div");return i.setAttribute("class",arguments[4]),e(i,["\n          ",arguments[5],"\n          ",arguments[6],"\n          ",arguments[7],"\n          ",arguments[8],"\n        "]),e(t,["\n        ",r,"\n        ",i,"\n      "]),t})(h("title"),n.title,y(h("header"),(a={},o=h("header","mini"),s=!t||!e,o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a)),t,h("body"),e,l?(function(){var e=m("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["*Incumbent"]),t})(h("incumbent")):null,r,i,h())}};function f(e){return e.stopImmediatePropagation(),e.preventDefault(),p.close()}}}),{"../util/is-mobile":209,"./bem":198,"./format":205,"./log":211,"./progressbar":218,"./table":224,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],229:[(function(e,t,r){function h(e,t){return!!(null==e?0:e.length)&&e.indexOf(e,t)>-1}function d(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}t.exports=function(e,t,r){var n=-1,i=h,a=e.length,o=!0,s=[],l=s;r?(o=!1,i=d):l=t?[]:s;e:for(;++n<a;){var u=e[n],c=t?t(u):u;if(u=r||0!==u?u:0,o&&c===c){for(var p=l.length;p--;)if(l[p]===c)continue e;t&&l.push(c),s.push(u)}else i(l,c,r)||(l!==s&&l.push(c),s.push(u))}return s}}),{}],230:[(function(e,t,r){"use strict";var n=e("./time"),i=e("wapo-shared/race-helpers");function a(e,t){var r=e(t);if(0!==r.length){var n=[],i=function(t){r.errors[t].forEach((function(e){n.push("Invalid value for "+t+": "+JSON.stringify(e.value)+". "+e.message)}))};for(var a in r.errors)i(a);0===n.length&&n.push("Validation error: "+JSON.stringify(r));var o=new Error(n.join("\n"));return o.validationResult=r,o}}t.exports.asError=a,t.exports.list=function(t){Array.isArray(t)||(t=Object.keys(t));return function(e){if(t.indexOf(e)<0)return{value:e,operator:"list",message:"Expected one of: "+t.join(", ")}}},t.exports.stateFipsOrNational=function(e){if(!i.fips.isNatl(e)&&!i.fips.isState(e))return{value:e,operator:"stateFips",message:'Expected a valid state FIPS code or "00" for national.'}},t.exports.regionId=function(e){if(!i.fips.isValid(e))return{value:e,operator:"regionId",message:"Expected a valid region ID"}},t.exports.model=function(r){return function(e){var t=a(r,e);if(t)return{value:e,message:t.error||t.message||t,subValidation:t.validationResult}}},t.exports.date=function(e){if(!n.isValid(e))return{value:e,message:"Invalid Date"}}}),{"./time":225,"wapo-shared/race-helpers":263}],231:[(function(w,e,t){"use strict";var D=w("classnames"),i=(w("yo-yo"),w("wapo-shared/util")),r=w("../store"),a=w("../util/timer"),S=w("../util/bem")("wpe-map");r.model({namespace:"auto-last-update",state:{instances:{}},reducers:{}}),e.exports=function(e,b,t,r,n){var _,x=a().render;b=i.extend({showUpdateTimer:!1},b),n(null,{select:function(e){return e},render:function(e,t){var r="",n=DevelopmentSeed.Elections.prodStable?DevelopmentSeed.Elections.prodStable:DevelopmentSeed.Elections.develop?DevelopmentSeed.Elections.develop:DevelopmentSeed.Elections.store?DevelopmentSeed.Elections:null;if(null!=n.store.state().results.live.nextFetch)for(var i in n.store.state().results.live.timestamp){var a=n.store.state().results.live.timestamp[i];if(null!=a.state){var o=new Date(a.state);if(o.toString()!=_){_=o.toString();var s=o.getDate(),l=o.getMonth(),u=o.getFullYear(),c=o.getHours(),p=o.getMinutes(),h=c>=12?"pm":"am";r="Latest update: "+["January","February","March","April","May","June","July","August","September","October","November","December"][l]+" "+s+", "+u+" "+(c=(c%=12)||12)+":"+(p=p<10?"0"+p:p)+" "+h;var d=jQuery("li time").first();d.attr("datetime",a.state),d.html(r)}}}var f="";1==b.liveData&&(f=(function(){var e=w("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("li");t.setAttribute("class","live_bug");var r=document.createElement("span");return r.setAttribute("class","is_live"),e(r,["live"]),e(t,[r]),t})());var m,y,g,v="";return 1==b.showUpdateTimer&&(v=(function(){var e=w("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("div");r.setAttribute("class",arguments[2]);var n=document.createElement("h4");return n.setAttribute("class",arguments[0]),e(n,[arguments[1]]),e(r,[n]),e(t,["\n                          ",r]),t})(D(S("title"),S("timer"),(m={},y=S("timer","hidden"),g=!0,y in m?Object.defineProperty(m,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[y]=g,m)),x(),D(S("segment"),S("segment","timer")),D("hsb-wrapper","wpe-auto-last-update"))),(function(){var e=w("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("ul");t.setAttribute("class","sigline normal wpe-auto-last-update");var r=document.createElement("li");r.setAttribute("class","timestamp static");var n=document.createElement("time");return n.setAttribute("datetime",""),e(n,[arguments[0]]),e(r,["\n              ",n,"\n            "]),e(t,[arguments[1],"\n            ",r,arguments[2],"\n          "]),t})(r,f,v)}})}}),{"../store":195,"../util/bem":198,"../util/timer":226,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/util":264,"yo-yo":140}],232:[(function(c,e,t){"use strict";c("yo-yo");var r=c("../store"),p=c("./instance"),h=c("wapo-shared/util"),d=c("../util/validate"),f=c("../map"),m=c("../map/validate").MapState,y=c("wapo-shared/race-helpers").fips;r.model({namespace:"bare-map",state:{instances:{}},reducers:{init:p.init((function(e,t){return{ready:!1,frame:0}})),destroy:p.destroy,ready:p.reducer((function(e,t){return h.set(t,"ready",!0)})),frame:p.reducer((function(e,t){return h.set(t,"frame",t.frame+1)}))}}),e.exports=function(n,e,t,r,i){var a=d.asError(m,e);if(a)return i(a);var o=f(),s=p.send("bare-map",n,r);s("init",{options:e}),r("map:initOrUpdate",{id:n,options:e,keys:["mapView","stateFips","bucketSet","bucket"]});var l=void 0;function u(e){l=e,s("frame")}o.on("load",(function(){s("ready"),e.onLoad&&e.onLoad(u,o)})).on("navigate",(function(e){(y.isState(e.id)||y.isNatl(e.id))&&r("map:setStateFips",{id:n,stateFips:e.id})})),setTimeout(i,0,null,{select:function(e){var t=h.get(e,["bare-map","instances",n]),r=h.get(e,["map","instances",n]);return h.extend(t,r,{results:e.results})},render:function(e,t){return e=h.extend(h.pick(e,["stateFips","mapView","bucket","bucketSet","results","enableZoom","enableBackButton"]),l),(function(){var e=c("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-preview-map");var r=document.createElement("div");return r.setAttribute("style","position: relative"),e(r,["\n        ",arguments[0],"\n        "]),e(t,["\n        ",r,"\n      "]),t})(o.render(e))}})}}),{"../map":149,"../map/validate":171,"../store":195,"../util/validate":230,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],233:[(function(l,e,t){"use strict";l("yo-yo");var r=l("../util/bem"),u=(l("classnames"),l("../util/format"),l("./instance")),n=l("wapo-shared/util"),c=l("../../wapo-shared/race-helpers"),i=l("../store"),p=l("../util/battlegrounds-table"),h=r("wpe-bt-standalone");function a(e,t){return n.set(e,["instances",t.id],t)}i.model({namespace:"battlegrounds-table",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return u.initOrUpdate(a(t,e))},init:function(e,t){return a(t,e)},destroy:u.destroy,ready:u.reducer((function(e,t){return n.set(t,"ready",!0)}))}}),e.exports=function(e,t,r,n,i){var a=t.office;t.onBattlegroundClick=function(e){var t=c.getStatePostal(e),r=c.getStatePageUrl(t);window.location.href=r};var o=p(t).render,s=u.send("battlegrounds-table",e,n);s("init",t),s("ready"),i(null,{select:function(e){return e},render:function(e,t){return (function(){var e=l("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(h(),o(e,a))}})}}),{"../../wapo-shared/race-helpers":263,"../store":195,"../util/battlegrounds-table":197,"../util/bem":198,"../util/format":205,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/util":264,"yo-yo":140}],234:[(function(D,e,t){"use strict";D("yo-yo");var r=D("../util/bem"),y=D("classnames"),s=(D("../util/format"),D("./instance")),l=D("../util/get-bucketed-results"),u=D("../../wapo-shared/race-helpers.js").getStatePostal,c=D("wapo-shared/util"),n=D("../store"),g=r("wpe-bat");function i(e,t){return c.set(e,["instances",t.id],t)}n.model({namespace:"bucket-analysis-table",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return s.initOrUpdate(i(t,e))},init:function(e,t){return i(t,e)},destroy:s.destroy,ready:s.reducer((function(e,t){return c.set(t,"ready",!0)}))}}),e.exports=function(e,i,t,r,n){(i=c.extend({stateFips:"00",officeID:"S",bucketSlug:"trump-clinton-margin"},i)).stateFips=""+i.stateFips;var a=i.bucketSlug+"-"+u(i.stateFips)+"-"+i.officeID,o=s.send("bucket-analysis-table",e,r);o("init",i),o("ready"),r("results:fetchBucketAnalysis",a),n(null,{select:function(e){return c.get(e)},render:function(e,t){var r=c.get(e,["results","bucketAnalysis",a]);if(!r||r.loading)return (function(){D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})();e.results.historical;var n=l({state:e,stateFips:i.stateFips,officeID:i.officeID,seat:"00",raceTypeID:"G",bucketSet:r}).map((function(e,t){var r=e.label,n=e.map,i=e.margin2016,a=e.margin2016Party,o=e.margin2018,s=e.margin2018Party,l=e.swing,u=e.swingDirection,c=e.firstCandidate,p=e.precinctsReporting,h=e.precinctsTotal,d=o?c+" ("+s+") +"+o.toFixed(1):null!==o?"0":null,f=l>0?u+" +"+l.toFixed(1):null,m=h>0?+(100*p/h).toFixed(1):0;return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tbody"),r=document.createElement("tr");r.setAttribute("class",arguments[4]);var n=document.createElement("td");n.setAttribute("colspan","5"),n.setAttribute("class",arguments[2]);var i=document.createElement("img");i.setAttribute("src",arguments[0]),i.setAttribute("class",arguments[1]),e(n,["\n                ",i,"\n                ",arguments[3],"\n              "]),e(r,["\n              ",n,"\n            "]);var a=document.createElement("tr");a.setAttribute("class",arguments[10]);var o=document.createElement("th");o.setAttribute("class",arguments[5]);var s=document.createElement("th");s.setAttribute("class",arguments[6]);var l=document.createElement("th");l.setAttribute("class",arguments[7]),e(l,["2016 margin"]);var u=document.createElement("th");u.setAttribute("class",arguments[8]),e(u,["2018 margin"]);var c=document.createElement("th");c.setAttribute("class",arguments[9]),e(c,["Swing"]),e(a,["\n              ",o,"\n              ",s,"\n              ",l,"\n              ",u,"\n              ",c,"\n            "]);var p=document.createElement("tr");p.setAttribute("class",arguments[21]);var h=document.createElement("td");h.setAttribute("rowspan","2"),h.setAttribute("class",arguments[12]);var d=document.createElement("img");d.setAttribute("src",arguments[11]),e(h,["\n                ",d,"\n              "]);var f=document.createElement("td");f.setAttribute("class",arguments[13]),e(f,["\n                ",arguments[14],"\n              "]);var m=document.createElement("td");m.setAttribute("class",arguments[15]),e(m,["\n                ",arguments[16],"\n              "]);var y=document.createElement("td");y.setAttribute("class",arguments[17]),e(y,["\n                ",arguments[18],"\n              "]);var g=document.createElement("td");g.setAttribute("class",arguments[19]),e(g,["\n                ",arguments[20],"\n              "]),e(p,["\n              ",h,"\n              ",f,"\n              ",m,"\n              ",y,"\n              ",g,"\n            "]);var v=document.createElement("tr");v.setAttribute("class",arguments[28]);var b=document.createElement("td");b.setAttribute("colspan","4");var _=document.createElement("span");_.setAttribute("class",arguments[25]);var x=document.createElement("span");x.setAttribute("style","width: "+arguments[22]+"%"),x.setAttribute("class",arguments[23]),e(x,[arguments[24]]),e(_,[x]);var w=document.createElement("span");return w.setAttribute("class",arguments[26]),e(w,[arguments[27],"% precincts reporting"]),e(b,["\n                ",_,"\n                ",w,"\n              "]),e(v,["\n              ",b,"\n            "]),e(t,["\n            ",r,"\n            ",a,"\n            ",p,"\n            ",v,"\n          "]),t})(n,g("mobile-map"),g("bucket-label"),r,y(g("bucket-label"),g("title")),g("bucket-map"),g("bucket-label"),g("margin-2016"),g("margin-2018"),g("swing"),g("head"),n,g("bucket-map"),g("bucket-label"),r,y(g("margin-2016"),g("party",a)),i,y(g("margin-2018"),g("party",s)),d,y(g("swing"),g("party",u)),f,y(g("bucket"),g("bucket",""+t)),m,g("bar-inner"),m?"-":"",g("bar-outer"),g("text"),m,g("precincts"))}));return (function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(g(),n?(function(){var e=D("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("table");return e(r,["\n              ",arguments[0],"\n            "]),e(t,["\n            ",r,"\n          "]),t})(n,g("segment")):null)}})}}),{"../../wapo-shared/race-helpers.js":263,"../store":195,"../util/bem":198,"../util/format":205,"../util/get-bucketed-results":206,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/util":264,"yo-yo":140}],235:[(function(e,t,r){"use strict";var l=e("wapo-shared/util"),n=e("../util/models"),u=e("../util/validate"),i=e("../map/validate").BucketSet,c=e("../util/toggle"),p=n.create({bucketSets:n.validators().array().each(n.validators().custom(u.model(i))),initialBucketSet:n.validators(!0).number().equal({gte:0}),bucketGroup:n.validators().string()});t.exports=function(r,n,e,t,i){var a=u.asError(p,n);if(a)return i(a);var o=c({opts:n.bucketSets.map((function(e,t){return{text:e.label,value:t}})),handler:function(e){return t("map:setBucketSet",{id:n.bucketGroup,bucketSet:n.bucketSets[e]})},isActive:function(e,t){return e&&e.bucketSet===n.bucketSets[t.value]}}),s=n.bucketSets[n.initialBucketSet||0];t("map:initOrUpdate",{id:n.bucketGroup,options:{bucketGroup:n.bucketGroup,bucketSet:s},keys:["bucketSet","bucketGroup"]}),i(null,{select:function(e){return l.get(e,["map","instances",n.bucketGroup])},render:function(e,t){return e||t("views:error",{id:r,error:new Error('No map state found for "'+n.mapViewGroup+'"')}),o.render(e)}})}}),{"../map/validate":171,"../util/models":212,"../util/toggle":227,"../util/validate":230,"wapo-shared/util":264}],236:[(function(h,e,t){"use strict";var d=h("object-path"),f=h("global/window");h("yo-yo");e.exports=function(l,u,e,r,t){u.regions=u.regions||/^..$/,u.offices=u.offices||/P|S|G/,["live-president-counties","live-senate-counties","live-governor-counties","live-house-districts"].forEach((function(e,t){r("map:initOrUpdate",{id:"debug-"+t,options:{initialMapView:e}})}));var c=new Date,p=c.toISOString().replace(/^.*T/,"").replace(/:/g,".");t(null,{select:function(e){return e.results.live.results},render:function(e){var t={},r=[];for(var n in e)if(u.regions.test(n))for(var i in e[n])u.offices.test(i)&&(d.set(t,[n,i],e[n][i]),r.push([n,i,e[n][i]]));r.sort((function(e,t){return(e=e[0]+"-"+e[1])>(t=t[0]+"-"+t[1])?1:e<t?-1:0})),r=r.map((function(e){return e[2]})),t=f.btoa(JSON.stringify(t));var a=r.map((function(e){return JSON.stringify(e)})).join("\n"),o=new Date,s=Math.round((o.getTime()-c.getTime())/1e3);return (function(){var e=h("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("style");e(r,["a { color: blue; text-decoration: underline; }"]);var n=document.createElement("div");e(n,["Loaded at: ",arguments[0]]);var i=document.createElement("div");e(i,["Elapsed: ",arguments[1]]);var a=document.createElement("a");a.setAttribute("id",arguments[2]),a.setAttribute("href",arguments[3]),a.setAttribute("download",arguments[4]),e(a,["Download JSON"]);var o=document.createElement("br"),s=document.createElement("a");s.setAttribute("href",arguments[5]),s.setAttribute("target","_blank"),e(s,["Open fresh data to compare"]);var l=document.createElement("pre");return l.setAttribute("id",arguments[6]),e(l,[arguments[7]]),e(t,["\n        ",r,"\n        ",n,"\n        ",i,"\n        ",a,"\n        ",o,"\n        ",s,"\n        ",l,"\n      "]),t})(p,s,"link-"+l,"data:application/ndjson;base64,"+t,"debug-"+p+"-"+s+".json",f.location.href,"raw-"+l,a)}})}}),{"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"global/window":102,"object-path":122,"yo-yo":140}],237:[(function(e,t,r){"use strict";var o=e("wapo-shared/util"),n=e("../store"),s=e("./instance"),l=e("../util/flipped-states");n.model({namespace:"flipped",state:{instances:{}},reducers:{init:s.init((function(e,t){return{options:e}})),destroy:s.destroy}}),t.exports=function(e,t,r,n,i){(t=o.extend({race:"president",mapViewGroup:null},t)).mapViewGroup&&(delete t.race,n("map:initOrUpdate",{id:t.mapViewGroup,options:t,keys:["mapViewGroup"]}));var a=l({}).render;s.send("flipped",e,n)("init",{options:t}),i(null,{select:s.selectResultsWithOffice(t),render:a})}}),{"../store":195,"../util/flipped-states":204,"./instance":242,"wapo-shared/util":264}],238:[(function(s,e,t){"use strict";s("yo-yo");var r=s("../store"),l=s("./instance"),u=s("wapo-shared/util"),c=s("../util/format"),p=s("../util/head-to-head");r.model({namespace:"headhead",state:{instances:{}},reducers:{init:l.init((function(e,t){return{options:t.options}})),destroy:l.destroy}}),e.exports=function(e,t,r,n,i){(t=u.extend({race:"president",mapViewGroup:null,showLink:!1,link:null,linkText:null,live:!1,showRaceTitle:!0,showMarginToControl:!1,showLegend:!1,showNotes:!1},t)).live;if(t.showLink&&!t.linkText&&(t.linkText=c.displayCase("Full "+t.race+" results")),t.mapViewGroup)delete t.race,n("map:initOrUpdate",{id:t.mapViewGroup,options:t,keys:["mapViewGroup"]});else if(!t.race)return i(new Error("Either mapViewGroup or race property is required"));l.send("headhead",e,n)("init",{options:t});var a=l.selectResultsWithOffice(t),o=p(t);i(null,{select:function(e){return a(e)},render:function(e){return (function(){var e=s("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0]]),t})(o.render(e))}})}}),{"../store":195,"../util/format":205,"../util/head-to-head":207,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/util":264,"yo-yo":140}],239:[(function(o,e,t){"use strict";o("yo-yo");var r=o("../util/bem"),s=o("classnames"),n=o("../store"),l=o("./instance"),u=o("wapo-shared/util"),c=(o("../util/format"),o("../util/head-to-head")),p=r("wpe-hp-hh");n.model({namespace:"hp-headhead",state:{instances:{}},reducers:{init:l.init((function(e,t){return{options:t.options}})),destroy:l.destroy}}),e.exports=function(e,t,r,n,i){if(3!==(t=u.extend({officeList:["S","H","G"]},t)).officeList.length)return i(new Error("officeList must include three offices"));l.send("hp-headhead",e,n)("init",{options:t});var a=t.officeList.map((function(e,t){var r={H:"House",G:"Governor",S:"Senate"}[e],n={race:r,live:!0,showRaceTitle:!0,showLegend:1===t,forceFullLegend:!0,showLink:!0,linkText:"Full "+r+" results",link:"https://www.washingtonpost.com/election-results/"+r.toLowerCase()+"/",mobileHeadlineLink:!0};return c(n)}));i(null,{select:function(e){return u.get(e,["results"])},render:function(i){var e=t.officeList.map((function(e,t){var r={officeID:e,results:i},n=1===t?p("large")+" custom-responsive col-lg-6 col-md-6 col-sm-12 col-xs-12":p("small")+" custom-responsive col-lg-3 col-md-3 col-sm-6 col-xs-12";return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n            ",arguments[1],"\n          "]),t})(s(p("office"),n),a[t].render(r))}));return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(s(p(),"clearfix"),e)}})}}),{"../store":195,"../util/bem":198,"../util/format":205,"../util/head-to-head":207,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/util":264,"yo-yo":140}],240:[(function(u,e,t){"use strict";var L=this,r=(u("yo-yo"),u("../util/bem")),l=u("classnames"),N=u("d3-array"),z=(u("d3-collection"),u("d3-selection")),j=u("d3-scale"),c=u("next-tick"),p=u("lodash.throttle"),h=u("wapo-shared/util"),d=u("../util/evented"),f=(u("../util/format"),u("../util/uniq"),u("wapo-shared/util").uniqueId),m=u("../../data/district-political-lean-2016.json"),F=r("wpe-pl");e.exports=function(e,t,r,n,i){var a=""+t.stateFips;a=1===a.length?"0"+a:a;var o=t.keyRaces?t.keyRaces.map((function(e){return e.table?+e.table.seat:null})):[],s=t.electionType&&"RO"===t.electionType,l=y(void 0,m,a,o,s);return i(null,{select:function(e){return null},render:function(e,t){return (function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(F("wrap"),l.render(e))}}),{createPoliticalLean:y}};var y=function(r,e,t,n,i){var a=f(),o=!0;r=r||(function(){u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("id",arguments[0]),e.setAttribute("class",arguments[1]),e})("house-political-lean-"+a,l(F("container"),F(i?"runoff":"")));var s=function(){g(r,e,t,n,i),window.addEventListener("resize",p(g.bind(null,r,e,t,n,i),250))};return h.extend({render:function(e){var t=(function(){var e=u("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("data-ds-widget","house-political-lean"),e(t,["\n          ",arguments[0],"\n        "]),t})(o?r:null);return o&&c(s),o=!1,t}},d)},g=function(e,t,r,n,i){z.select(e).html(null);var a=e.getBoundingClientRect().width;a>0&&(a<480?s(e,a,t,r,n,i):o(e,a,t,r,n,i))},o=function(e,t,r,n,i,a){var o=r.filter((function(e){return e.state===n}))[0],s=o.districtResults2016.map((function(e){return Math.abs(e.gopPres2016Margin)})),l=Math.max.apply(null,s),u=l>.5?.06:.04,c=Math.ceil(Math.max(l,.42)/u)*u,p=[-c,c],h=c/u*2+1,d=N.range(p[0],p[1],u).map((function(e){return.12===e&&(e=.120000001),e})),f={right:0,left:0},m=t-f.left-f.right,y=j.scaleLinear().domain(p).range([0,m]),g=N.histogram().domain(p).thresholds(d).value((function(e){return e.gopPres2016Margin})),v=o.districtResults2016.map((function(e){return e.isKey=!a&&i.indexOf(e.district)>=0,e})),b=g(v),_=Math.max.apply(L,b.map((function(e){return e.length}))),x=m/h,w=_*x;f.top=14+x,f.bottom=70;var D=j.scaleLinear().domain([0,_]).range([w,0]),S=z.select(e).append("div").attr("class",F("legend")),R=[{type:"D",text:"Democratic-held seat"},{type:"R",text:"Republican-held seat"}];v.filter((function(e){return e.isKey})).length&&R.push({type:"key",text:"Key race"}),a&&v.filter((function(e){return e.hasRunoff})).length&&R.push({type:"key",text:"District with runoff"});var P=S.selectAll("."+F("legend-item")).data(R).enter().append("span").attr("class",F("legend-item"));P.append("span").attr("class",F("legend-boxes")).append("span").attr("class",F("legend-box")).attr("data-type",(function(e){return e.type})),P.append("span").text((function(e){return e.text}));var E=z.select(e).append("svg").attr("width",m).attr("height",w+f.top+f.bottom).append("g").attr("transform","translate("+f.left+", "+f.top+")");E.append("rect").attr("class",F("within-12")).attr("x",y(-.12)).attr("y",-x-10).attr("width",y(.12)-y(-.12)).attr("height",w+x+59+20);var A=E.selectAll("."+F("tick")).data([{n:-.6},{n:-.3},{n:0},{n:.3},{n:.6}].filter((function(e){return e.n>-c&&e.n<c}))).enter().append("g").attr("class",F("tick")).attr("transform",(function(e){return"translate("+y(e.n)+", 0)"})).attr("data-value",(function(e){return e.n})).attr("data-party",(function(e){return e.n<0?"D":e.n>0?"R":""}));A.append("line").attr("x1",0).attr("x2",0).attr("y1",D(0)).attr("y2",-x),A.append("text").each((function(e){return e.closeToExtent=0!==e.n&&Math.abs(Math.abs(e.n)-c)<=.1,e})).attr("x",(function(e){return e.closeToExtent?e.n<0?-20:20:0})).attr("y",D(0)+22).text((function(e){return e.n<0?"+"+100*Math.abs(e.n)+" Clinton":e.n>0?"+"+100*Math.abs(e.n)+" Trump":c>.6?"Pres. vote":"Presidential vote"})).style("text-anchor",(function(e){if(e.closeToExtent)return e.n<0?"start":"end"})),A.filter((function(e){return 0===e.n})).append("text").attr("x",0).attr("y",D(0)+40).text("within 12 pts."),A.filter((function(e){return 0===e.n})).append("text").attr("class",F("num-districts")).attr("x",0).attr("y",D(0)+58).text((function(e){var t=o.districtResults2016.filter((function(e){return Math.abs(e.gopPres2016Margin)<=.12})).length;return t+" district"+(1===t?"":"s")}));var M=E.selectAll("."+F("bin")).data(b).enter().append("g").attr("class",F("bin")).attr("transform",(function(e){return"translate("+y((e.x1+e.x0)/2)+", 0)"})).attr("data-margin",(function(e){return e.x0+" to "+e.x1})).selectAll("."+F("district")).data((function(e){return e})).enter().append("g").attr("class",F("district")).attr("transform",(function(e,t){return"translate(0, "+D(t)+")"})).attr("data-winner-2016",(function(e){return e.winner2016Party})).attr("data-margin",(function(e){return e.gopPres2016Margin})).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff}));M.append("rect").attr("x",-(x-2)/2).attr("y",-(x-1)).attr("width",x-2).attr("height",x-2);var I=j.scaleLinear().domain([22,32]).range([-6,-11]);M.append("text").attr("x",0).attr("y",I(x)).text((function(e){return 0===e.district?"":e.district})).style("font-size",x<22?11.5:14);var O=E.selectAll("."+F("key-bin")).data(b).enter().append("g").attr("class",F("key-bin")).attr("transform",(function(e){return"translate("+y((e.x1+e.x0)/2)+", 0)"}));O.selectAll("."+F("key-district-outer")).data((function(e){return e})).enter().append("rect").attr("class",F("key-district-outer")).attr("transform",(function(e,t){return"translate(0, "+D(t)+")"})).attr("x",-x/2).attr("y",-x).attr("width",x).attr("height",x).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff})),O.selectAll("."+F("key-district")).data((function(e){return e})).enter().append("rect").attr("class",F("key-district")).attr("transform",(function(e,t){return"translate(0, "+D(t)+")"})).attr("x",-x/2).attr("y",-x).attr("width",x).attr("height",x).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff})).on("mouseover",(function(e){z.select(this).classed("hover",!0)})).on("mouseout",(function(e){z.select(this).classed("hover",!1)})).on("click",(function(e){if(a&&!e.hasRunoff)return!1;var t=""+e.district,r="district"+(1===t.length?"0"+t:t);wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&wp_pb.StaticMethods.scrollToAnchor(r,{offset:100})})),E.append("line").attr("class",F("domain")).attr("x1",0).attr("x2",m).attr("y1",D(0)).attr("y2",D(0))},s=function(e,t,r,n,i,a){var o=r.filter((function(e){return e.state===n}))[0],s=o.districtResults2016.map((function(e){return e.gopPres2016Margin})),l=Math.max.apply(null,s.map((function(e){return Math.abs(e)})))>.5?.06:.04,u=[Math.floor(Math.min.apply(null,s.concat(-.32))/l)*l,Math.ceil(Math.max.apply(null,s.concat(.32))/l)*l],c=(u[1]-u[0])/l,p=N.range(u[0],u[1],l).map((function(e){return.12===e&&(e=.120000001),e})),h=N.histogram().domain(u).thresholds(p).value((function(e){return e.gopPres2016Margin})),d=o.districtResults2016.map((function(e){return e.isKey=!a&&i.indexOf(e.district)>=0,e})),f=h(d),m=Math.max.apply(L,f.map((function(e){return e.length}))),y=10,g=10,v=10,b=100,_=Math.min((t-b-g)/m,25),x=_*m+1+10,w=c*_,D=j.scaleLinear().domain(u).range([0,w]),S=j.scaleLinear().domain([0,m]).range([0,_*m]),R=z.select(e).append("div").attr("class",F("legend")),P=[{type:"D",text:"Democratic-held seat"},{type:"R",text:"Republican-held seat"}];d.filter((function(e){return e.isKey})).length&&P.push({type:"key",text:"Key race"}),a&&d.filter((function(e){return e.hasRunoff})).length&&P.push({type:"key",text:"District with runoff"});var E=R.selectAll("."+F("legend-item")).data(P).enter().append("span").attr("class",F("legend-item"));E.append("span").attr("class",F("legend-box")).attr("data-type",(function(e){return e.type})),E.append("span").text((function(e){return e.text}));var A=z.select(e).append("svg").attr("width",x+_+b+g).attr("height",w+y+v).attr("data-is-vertical",!0).append("g").attr("transform","translate("+b+", "+y+")");A.append("rect").attr("class",F("within-12")).attr("x",-b).attr("y",D(-.12)).attr("width",b+x+_+10).attr("height",D(.12)-D(-.12));var M=[{n:-.6},{n:-.3},{n:0},{n:.3},{n:.6}].filter((function(e){return e.n>=u[0]&&e.n<=u[1]})),I=.02*Math.round((f[0].x1+f[0].x0)/2/.02);M[0].n-I>.1&&M.unshift({n:I,noLine:!0});var O=A.selectAll("."+F("tick")).data(M).enter().append("g").attr("class",F("tick")).attr("transform",(function(e){return"translate(0, "+D(e.n)+")"})).attr("data-value",(function(e){return e.n})).attr("data-party",(function(e){return e.n<0?"D":e.n>0?"R":""}));O.append("line").filter((function(e){return!e.noLine})).attr("x1",0).attr("x2",_*(m+1)).attr("y1",0).attr("y2",0),O.append("text").attr("x",-6).attr("y",4).text((function(e){return e.n<0?"+"+100*Math.abs(e.n)+" Clinton":e.n>0?"+"+100*Math.abs(e.n)+" Trump":"within 12 pts."})),O.filter((function(e){return 0===e.n})).append("text").attr("x",-6).attr("y",-14).text("Pres. vote"),O.filter((function(e){return 0===e.n})).append("text").attr("class",F("num-districts")).attr("x",-6).attr("y",24).text((function(e){var t=o.districtResults2016.filter((function(e){return Math.abs(e.gopPres2016Margin)<=.12})).length;return t+" district"+(1===t?"":"s")}));var C=A.selectAll("."+F("bin")).data(f).enter().append("g").attr("class",F("bin")).attr("transform",(function(e){return"translate(0, "+D((e.x1+e.x0)/2)+")"})).attr("data-margin",(function(e){return e.x0+" to "+e.x1})).selectAll("."+F("district")).data((function(e){return e})).enter().append("g").attr("class",F("district")).attr("transform",(function(e,t){return"translate("+(S(t)+_/2)+", "+_/2+")"})).attr("data-winner-2016",(function(e){return e.winner2016Party})).attr("data-margin",(function(e){return e.gopPres2016Margin})).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff}));C.append("rect").attr("x",-(_-2)/2).attr("y",-(_-1)).attr("width",_-2).attr("height",_-2);var T=j.scaleLinear().domain([22,32]).range([-6,-11]);C.append("text").attr("x",0).attr("y",T(_)).text((function(e){return 0===e.district?"":e.district})).style("font-size",_<22?11.5:14);var k=A.selectAll("."+F("key-bin")).data(f).enter().append("g").attr("class",F("key-bin")).attr("transform",(function(e){return"translate(0, "+D((e.x1+e.x0)/2)+")"}));k.selectAll("."+F("key-district-outer")).data((function(e){return e})).enter().append("rect").attr("class",F("key-district-outer")).attr("transform",(function(e,t){return"translate("+(S(t)+_/2)+", "+_/2+")"})).attr("x",-_/2).attr("y",-_).attr("width",_).attr("height",_).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff})),k.selectAll("."+F("key-district")).data((function(e){return e})).enter().append("rect").attr("class",F("key-district")).attr("transform",(function(e,t){return"translate("+(S(t)+_/2)+", "+_/2+")"})).attr("x",-_/2).attr("y",-_).attr("width",_).attr("height",_).attr("data-is-key",(function(e){return e.isKey})).attr("data-has-runoff",(function(e){return e.hasRunoff})).on("click",(function(e){if(a&&!e.hasRunoff)return!1;var t=""+e.district,r="district"+(1===t.length?"0"+t:t);wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&wp_pb.StaticMethods.scrollToAnchor(r,{offset:100})})),A.append("line").attr("class",F("domain")).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",w)}}),{"../../data/district-political-lean-2016.json":3,"../util/bem":198,"../util/evented":203,"../util/format":205,"../util/uniq":229,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"d3-array":87,"d3-collection":88,"d3-scale":93,"d3-selection":95,"lodash.throttle":112,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],241:[(function(e,t,r){"use strict";var i=e("next-tick"),a=e("wapo-shared/util"),n=e("../store"),o=e("../util/log");t.exports={},n.model({namespace:"views",state:{mounted:[]},reducers:{addMount:function(e,t){return a.set(t,"mounted",t.mounted.concat([e]))},removeMount:function(e,t){return a.set(t,"mounted",a.without(t.mounted,e.id,(function(e){return e.id})))}},effects:{unmount:function(t,e,r,n){o.debug("view-unmount","Unmount view...",t.id,t.view);var i=a.find(e.mounted,(function(e){return e.id===t.id}));if(!i)return o.warnOnce("Could not find instance "+t.id+" to unmount."),n();i.instance.destroy&&i.instance.destroy(),r("views:removeMount",{id:t.id},(function(e){o.debug("view-unmount","... unmounted",t.id,t.view),i.tree.parentNode&&i.tree.parentNode.removeChild(i.tree),n(e)}))},error:function(t,e,r,n){e.mounted.some((function(e){return e.id===t.id}))&&(o.warnOnce("Unmounting view "+t.id+" due to error.",t.error),o.error(t.error),i((function(){r("views:unmount",t,n)})))}}})}),{"../store":195,"../util/log":211,"next-tick":119,"wapo-shared/util":264}],242:[(function(e,t,r){"use strict";var o=e("wapo-shared/util"),i=e("wapo-shared/race-helpers"),a=e("../map/util").getOfficeID;t.exports.init=function(r){return function(e,t){return o.set(t,["instances",e.id],r(e.options,e))}},t.exports.initOrUpdate=function(i){return function(e,t){var r=i(e.options,e);e.keys&&(r=o.pick(r,e.keys));var n=o.get(t,["instances",e.id]);return n&&(r=o.extend(n,r)),o.set(t,["instances",e.id],r)}},t.exports.initMapStates=function(e,r,n){var i={mapViewGroup:e,navigationGroup:e,bucketGroup:e,fallbackGroup:e,initialMapView:e,initialStateFips:e,mapView:e,stateFips:e,bucketSet:e,bucket:e,enableZoom:e,enableBackButton:e,showStateLabels:e,hideOtherStates:e,useStaticImage:e,zoom:e,style:e,seat:e,electionDate:e};return r.mapViewGroup&&(i.initialMapView=i.mapView=r.mapViewGroup),r.fallbackGroup&&(i.useStaticImage=r.fallbackGroup),r.navigationGroup&&(i.initialStateFips=i.stateFips=r.navigationGroup),r.bucketGroup&&delete i.bucketSet,o.unique(o.values(i)).forEach((function(t){var e=o.filterKeys(i,(function(e){return e===t}));n("map:initOrUpdate",{id:t,options:r,keys:e})})),delete i.initialMapView,delete i.initialStateFips,delete i.mapViewGroup,delete i.bucketGroup,delete i.navigationGroup,delete i.fallbackGroup,r.bucketGroup&&(i.bucketSet=r.bucketGroup),i},t.exports.selectMapState=function(n,i){var e=o.unique(o.values(n)).map((function(t){var e=o.get(i,["map","instances",t]),r=o.filterKeys(n,(function(e){return e===t}));return o.pick(e,r)}));return o.extend.apply(null,e.concat({results:i.results}))},t.exports.destroy=function(){return function(e,t){return o.omit(t,[["instances",e.id]])}},t.exports.reducer=function(i){return function(e,t){var r=["instances",e.id],n=o.get(t,r);return o.set(t,r,i(e,n))}},t.exports.select=function(n,i,a){return function(e){var t=o.get(e,[n,"instances",i]),r=e[n];return a?a(t,r,e):t}},t.exports.selectResultsWithOffice=function(n){return function(e){var t;if(n.mapViewGroup){var r=o.get(e,"map.instances."+n.mapViewGroup+".mapView");t=a(r)}return!t&&n.race?t=i.officeIDs[n.race]:t||(t="P"),{officeID:t,results:e.results}}},t.exports.send=function(r,n,i){return function(e,t){t=t?o.ensureExists(t,"id",n):{id:n},e=e.indexOf(":")?r+":"+e:e,i(e,t)}}}),{"../map/util":170,"wapo-shared/race-helpers":263,"wapo-shared/util":264}],243:[(function(v,e,t){"use strict";var d=v("yo-yo"),r=v("../util/bem"),p=v("classnames"),f=v("wapo-shared/util"),i=v("../util/format"),n=v("../util/uniq"),a=v("lodash.sortby"),m=(v("../util/evented"),v("next-tick")),y=v("../store"),g=(v("wapo-shared/util").uniqueId,v("../util/set-accurate-interval")),o=v("wapo-shared/race-helpers").stateNameByPostal,s=v("../../data/keyRacesForRobotext.js"),b=r("wpe-ir");function h(e){this.message=e,this.name="InterestingRacesException"}var _=function(e,t){if(!e)throw new h(t)};e.exports=function(e,t,r,n,i){t=f.extend({pageType:"state",stateFips:"00",officeID:"S"},t);var a=l(t,n);return i(null,{select:function(e){return e},render:function(e,t){return (function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(b("wrap"),a.render())}}),{createInterestingRaces:l,raceFinders:u,getRaceOtherParty:c,cap:D,sortInterestingRacesBeforeDedupe:S,sortInterestingRacesAfterDedupe:R,dedupeInterestingRaces:P,findInterestingRaces:E,withPrecinctsReporting:A,leaderIncumbency:I,leader:M,theRaceName:N,novemberRaceName:z,getSentencesPrimary:j,getSentencesGeneral:F,getSentences:V,getRaceLink:G,InterestingRacesException:h}};var l=function(n,i){var t=!1,e=void 0,a=void 0,o=0,r=!1,s=void 0;function l(){e=g(c,1e4)}function u(e){r=!0,s&&window.clearTimeout(s),s=window.setTimeout((function(){r=!1}),2e4),"left"===e?(o-=1)<0&&(o=0):o+=1,p()}function c(){r||(o=y.state().results.live.loading?o:++o,p())}function p(){if(function e(t,r){r=r||[];if(t===document)return!0;if(!t||r.indexOf(t)>=0)return!1;return e(t.parentNode,r.concat(t))}(a)){d.update(a,x(y.state().results.live,n,i,o,u));var e=Array.from(a.querySelectorAll("."+b("sentence"))).map((function(e){return e.clientHeight})),t=Math.max.apply(this,e),r=a.querySelectorAll("."+b("sentences-wrap"));r&&r.length&&r[0].setAttribute("style","min-height:"+t+"px;")}else h()}function h(){e&&e(),t=!1,a=(function(){v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})()}return h(),{render:function(){t||m(l);var e=t?null:a;return t=!0,f.get(y.state(),"results.live.loading")&&p(),(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("data-ds-widget","wpe-ir"),e(t,[arguments[0]]),t})(e)}}},x=function(s,l,u,e,t){var r=E(s,l),c={},n=r.map((function(e){try{var t=V(s.candidates,e,l),r=c[t.key]||0;c[t.key]=r+1;var n=t.options[r%t.options.length],i=null;if("state"===l.pageType){var a=G(e);if("H"===e.raceData.officeID){var o=B(e);o&&document.getElementById(o)&&(a=o)}i=(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.onclick=arguments[0],t.setAttribute("class",arguments[1]),e(t,["See race"]),t})(w.bind(null,s,u,e,a),b("see-race"))}return{sentence:n,link:i}}catch(e){if(!(e instanceof h))throw e}})).filter(Boolean),i=e%n.length,a=n.map((function(e,t){return (function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("data-show",arguments[0]),t.setAttribute("class",arguments[1]),e(t,["\n        ",arguments[2],"\n        ",arguments[3],"\n      "]),t})(t===i,b("sentence"),e.sentence,e.link)})),o=n.length?(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("data-increment",arguments[0]),t.setAttribute("class",arguments[1]),e(t,["\n      ",arguments[2]," of ",arguments[3],"\n    "]),t})(e,b("number"),i+1,n.length):null;return n.length>0?(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("div");r.setAttribute("class","layout-interesting-sentences-wrapper");var n=document.createElement("div");return n.setAttribute("class",arguments[0]),e(n,["\n              ",arguments[1],"\n            "]),e(r,["\n            ",arguments[2],"\n            ",n,"\n          "]),e(t,["\n          ",r,"\n          ",arguments[4],"\n        "]),t})(b("sentences-wrap"),a,o,p(b(),n.length?b("has-content"):""),n.length>1?(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","interesting-races-arrows-container");var r=document.createElement("div");r.onclick=arguments[1],r.setAttribute("class","interesting-races-arrow-wrapper");var n=document.createElement("span");n.setAttribute("class",arguments[0]);var i=document.createElement("i");i.setAttribute("aria-hidden","true"),i.setAttribute("class","fa fa-angle-left"),e(n,[i]),e(r,["\n                ",n,"\n              "]);var a=document.createElement("div");a.onclick=arguments[3],a.setAttribute("class","interesting-races-arrow-wrapper");var o=document.createElement("span");o.setAttribute("class",arguments[2]);var s=document.createElement("i");return s.setAttribute("aria-hidden","true"),s.setAttribute("class","fa fa-angle-right"),e(o,[s]),e(a,["\n                ",o,"\n              "]),e(t,["\n              ",r,"\n              ",a,"\n            "]),t})(p(b("arrow"),b("arrow-left")),t.bind(null,"left"),p(b("arrow"),b("arrow-right")),t.bind(null,"right")):null):(function(){v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})()},w=function(e,a,o,t){"R"!==o.raceData.raceTypeID&&"D"!==o.raceData.raceTypeID||"S"!==o.raceData.officeID&&"G"!==o.raceData.officeID||f.entries(e.map.instances).map((function(e){var t=e[0],r=e[1],n="R"===o.raceData.raceTypeID?"republican":"democratic",i=r.mapView.replace(/democratic|republican/,n);a("map:setMapView",{id:t,mapView:i})})),wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&wp_pb.StaticMethods.scrollToAnchor(t,{offset:100})},u={keyRaces:function(e,t,r,n){return e.filter((function(e){return("state"==r.pageType&&"G"==e.raceTypeID&&("S"==e.officeID||"G"==e.officeID)||s[r.pageType].indexOf(e.statePostal+"-"+e.officeID+"-"+ +e.seatNum+"-"+e.raceTypeID)>=0)&&e.precinctsTotal&&(e.precinctsReporting/e.precinctsTotal>=.1||e.isFinished)}))},recentlyCalled:function(e,t,r,n){return e.filter((function(e){if(e.annotations.length){var t=e.annotations.filter((function(e){return"raceCalled"==e.type}));if(t.length){var r=new Date(t[0].datetime);if(n-r<=6e4)return!0}}}))},previouslyCalled:function(e,t,r,n){return e.filter((function(e){if(e.annotations.length&&e.candidates.length>1&&e.reportingOverThreshold){var t=e.annotations.filter((function(e){return"raceCalled"==e.type}));if(t.length){var r=new Date(t[0].datetime);if(n>=r)return!0}}}))}},c=function(e,t){if(["AK-G-0"].indexOf(t.statePostal+"-"+t.officeID+"-"+ +t.seatNum)>=0)return null;var r="D"==t.raceTypeID?"R":"R"==t.raceTypeID?"D":null;return f.get(e,[t.id,t.officeID,t.seatNum,r])},D=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},S=function(r,e){var t={keyRaces:0,recentlyCalled:1,previouslyCalled:2};return a(e,[function(e){return t[e.reason]},function(e){return t=r,e.raceData.candidates.filter((function(e){return t[e.id].incumbent})).length?-1:1;var t}])},R=function(e,t){var r={recentlyCalled:0,keyRaces:1,previouslyCalled:2};return a(t,[function(e){return r[e.reason]}])},P=function(e){return n(n(e,(function(e){return e.raceData.id+"-"+e.raceData.officeID+"-"+e.raceData.seatNum+"-"+e.raceData.raceTypeID+"-"+(e.raceDataOtherParty?e.raceDataOtherParty.raceTypeID:"")})),(function(e){var t=e.raceData.id+"-"+e.raceData.officeID+"-"+e.raceData.seatNum;return e.raceDataOtherParty&&e.raceData.isFinished&&e.raceDataOtherParty.isFinished&&0===e.raceData.candidates.filter((function(e){return"R"===e.winner})).length&&0===e.raceDataOtherParty.candidates.filter((function(e){return"R"===e.winner})).length?t+"-primary-matchup":t+"-"+e.raceData.raceTypeID+"-"+(e.raceDataOtherParty?e.raceDataOtherParty.raceTypeID:"")}))},E=function(n,i){var a=f.entries(n.results).filter((function(e){return 2==e[0].length||4==e[0].length})).filter((function(e){return"state"!=i.pageType||e[0].substring(0,2)==i.stateFips})).reduce((function(e,t){return e.concat(f.entries(t[1]).reduce((function(e,t){return e.concat(f.entries(t[1]).reduce((function(e,t){return e.concat(f.entries(t[1]))}),[]))}),[]))}),[]).map((function(e){return e[1]})).filter((function(e,t){return"landing"!=i.pageType||e.officeID==i.officeID})).filter((function(e){return"X"===e.raceTypeID?e.candidates.length>2:e.candidates.length>1})).filter((function(e){return"D"===e.raceTypeID||"R"===e.raceTypeID||"X"===e.raceTypeID||"G"===e.raceTypeID})),o=new Date,e=f.entries(u).reduce((function(e,t){var r=t[1](a,n.candidates,i,o);return e.concat(r.map((function(e){return{reason:t[0],raceData:e,raceDataOtherParty:c(n.results,e)}})))}),[]);e.filter((function(e){return"keyRaces"==e.reason})).length&&(e=e.filter((function(e){return"previouslyCalled"!=e.reason})));var t=P(S(n.candidates,e));return R(n.candidates,t)},A=function(e){return e.precinctsReporting===e.precinctsTotal?"with all precincts reporting":"with "+i.pct(100*e.precinctsReporting,e.precinctsTotal,"0","0.0")+" percent of precincts reporting"},M=function(e,t,r){_(!t.isTied),_(t.candidates.length);var n=e[t.candidates.sort((function(e,t){return t.voteCount-e.voteCount}))[0].id];return n.first+" "+n.last+(r?" "+i.partyAbbrev(n.party):"")},I=function(e,t){_(!t.isTied),_(t.candidates.length);var r=e[t.candidates.sort((function(e,t){return t.voteCount-e.voteCount}))[0].id];return"PA"===t.statePostal&&"H"===t.officeID?"":r.incumbent?"incumbent":""},O=function(e,t,r){_(!t.isTied),_(t.candidates.length),_(1===t.numWinners);var n=e[t.candidates.filter((function(e){return e.winner}))[0].id];return n.first+" "+n.last+(r?" "+i.partyAbbrev(n.party):"")},C=function(e,t){_(!t.isTied),_(t.candidates.length),_(1===t.numWinners);var r=e[t.candidates.filter((function(e){return e.winner}))[0].id];return"PA"===t.statePostal&&"H"===t.officeID?"":r.incumbent?"incumbent":""},T=function(r,e){return _("X"==e.raceTypeID),_(e.candidates.length),e.candidates.sort((function(e,t){return t.voteCount-e.voteCount})).map((function(e){var t=r[e.id];return{incumbent:t.incumbent,first:t.first,last:t.last,party:i.partyAbbrev(t.party),voteCount:e.voteCount,winner:e.winner}}))},k=function(e,t){return T(e,t).filter((function(e){return"X"===e.winner}))},L=function(r,e){return _(!e.isTied),_(e.candidates.length),e.candidates.filter((function(e){return"R"===e.winner})).map((function(e){var t=r[e.id];return{incumbent:t.incumbent,first:t.first,last:t.last,voteCount:e.voteCount}}))},N=function(e,t,r){_("G"===e.officeID||"S"===e.officeID||"H"===e.officeID||"A"===e.officeID),_("99"!==e.seatNum);var n="G"===e.officeID?"governor":"S"===e.officeID?"Senate":"A"===e.officeID?"Attorney General":i.atLargeDistricts.indexOf(e.statePostal)>=0?"at-large district":i.ordinal(+e.seatNum)+" Congressional District";return"MN"==e.statePostal&&"S"==e.officeID&&"01"==e.seatNum&&(n="Al Franken’s Senate seat"),"G"==e.raceTypeID||t?"H"==e.officeID?"the race for "+(r?o(e.statePostal)+"’s":"the")+" "+n:"the "+(r?o(e.statePostal)+" ":"")+"race for "+n:"D"==e.raceTypeID||"R"==e.raceTypeID||"X"==e.raceTypeID?"the "+{R:"Republican",D:"Democratic",X:""}[e.raceTypeID]+" primary for "+("H"==e.officeID?"the ":"")+n:void _(!1)},z=function(e){return _("G"===e.officeID||"S"===e.officeID||"H"===e.officeID||"A"===e.officeID),_("99"!==e.seatNum),"G"===e.officeID?"November governor’s race":"S"===e.officeID?"November Senate race":"A"===e.officeID?"November Attorney General race":"H"===e.officeID?"November race for the "+(i.atLargeDistricts.indexOf(e.statePostal)>=0?"at-large district":i.ordinal(+e.seatNum)+" Congressional District"):void _(!1)},j=function(e,t,r){_("state"==r.pageType);var n=t.raceData.candidates.filter((function(e){return"R"===e.winner})).length;if(t.raceData.isFinished)if("X"===t.raceData.raceTypeID){var i=k(e,t.raceData);if(2===i.length){if(i[0].party!==i[1].party)return{key:"open-primary-two-winners-different-party",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]," ",arguments[2]]);var n=document.createElement("b");return e(n,[arguments[3]," ",arguments[4]," ",arguments[5]]),e(t,["\n                 ",arguments[6]," ",r,"\n                 will face\n                 ",arguments[7]," ",n,"\n                 in a ",arguments[8],".\n              "]),t})(i[0].first,i[0].last,i[0].party,i[1].first,i[1].last,i[1].party,i[0].incumbent?"Incumbent":"",i[1].incumbent?"incumbent":"",z(t.raceData)),(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]," ",arguments[2]]);var n=document.createElement("b");return e(n,[arguments[3]," ",arguments[4]," ",arguments[5]]),e(t,["\n                ",arguments[6]," will feature\n                ",arguments[7]," ",r,"\n                and\n                ",arguments[8]," ",n,"\n              "]),t})(i[0].first,i[0].last,i[0].party,i[1].first,i[1].last,i[1].party,D(N(t.raceData,!0)),i[0].incumbent?"Incumbent":"",i[1].incumbent?"incumbent":"")]};_("(D)"===i[0].party||"(R)"===i[0].party);var a="(R)"===i[0].party?"Republicans":"Democrats";return{key:"open-primary-two-winners-same-party",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]]);var n=document.createElement("b");return e(n,[arguments[2]," ",arguments[3]]),e(t,["\n                 Two ",arguments[4],", ",arguments[5]," ",r," and ",arguments[6]," ",n,",\n                 will face off in a ",arguments[7],".\n              "]),t})(i[0].first,i[0].last,i[1].first,i[1].last,a,i[0].incumbent?"incumbent":"",i[1].incumbent?"incumbent":"",z(t.raceData))]}}var o=T(e,t.raceData);if(1===i.length&&o.length>=2)return{key:"open-primary-one-winner",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]," ",arguments[2]]);var n=document.createElement("b");return e(n,[arguments[3]," ",arguments[4]," ",arguments[5]]),e(t,["\n                 ",arguments[6]," ",r,"\n                 will advance in ",arguments[7],".\n\n                 If the current results hold, ",arguments[8]," will face ",arguments[9]," ",n," in the fall.\n              "]),t})(o[0].first,o[0].last,o[0].party,o[1].first,o[1].last,o[1].party,o[0].incumbent?"Incumbent":"",N(t.raceData,!0),o[0].last,o[1].incumbent?"Incumbent":"")]};_(!1)}else{if(!(n>0))return t.raceDataOtherParty&&t.raceDataOtherParty.isFinished&&0===t.raceDataOtherParty.candidates.filter((function(e){return"R"===e.winner})).length?{key:"primary-both-parties-finished",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]]);var n=document.createElement("b");return e(n,[arguments[1]]),e(t,["\n            ",arguments[2]," ",r," has won ",arguments[3],",\n            setting up a November showdown with ",arguments[4]," ",n,".\n          "]),t})(M(e,t.raceData),M(e,t.raceDataOtherParty),D(I(e,t.raceData)),N(t.raceData),I(e,t.raceDataOtherParty)),(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," (",arguments[1],")"]);var n=document.createElement("b");return e(n,[arguments[2]," (",arguments[3],")"]),e(t,["\n            ",arguments[4]," ",r," will advance to face ",arguments[5]," ",n," in a ",arguments[6],".\n          "]),t})(M(e,t.raceData),t.raceData.raceTypeID,M(e,t.raceDataOtherParty),t.raceDataOtherParty.raceTypeID,D(I(e,t.raceData)),I(e,t.raceDataOtherParty),z(t.raceData))]}:{key:"primary-one-party-finished",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]]),e(t,["\n            ",arguments[1]," has been called for ",arguments[2]," ",r,".\n            "]),t})(M(e,t.raceData),D(N(t.raceData)),I(e,t.raceData))]};var s=L(e,t.raceData);if(s.length>1)return{key:"primary-runoff-two-candidates",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]]);var n=document.createElement("b");return e(n,[arguments[2]," ",arguments[3]]),e(t,["\n               ",arguments[4]," ",r,"\n               will face\n               ",arguments[5]," ",n,"\n               in a runoff for ",arguments[6],".\n            "]),t})(s[0].first,s[0].last,s[1].first,s[1].last,s[0].incumbent?"Incumbent":"",s[1].incumbent?"incumbent":"",N(t.raceData))]};_(!1)}else if("X"===t.raceData.raceTypeID){var l=k(e,t.raceData),u=T(e,t.raceData);if(u.length>=3){var c=t.raceData.voteCount,p=100*(u[1].voteCount/c-u[2].voteCount/c),h=Math.round(p),d=p<1?"by less than one point":"by "+h+" point"+(1===h?"":"s");if(u.length>=2)return l.length?{key:"open-primary-in-progress-one-winner",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]," ",arguments[2]]);var n=document.createElement("b");return e(n,[arguments[3]," ",arguments[4]," ",arguments[5]]),e(t,["\n                   ",arguments[6]," ",r,"\n                   will advance in ",arguments[7],".\n                   ",arguments[8]," ",n," is currently in second, leading the third-place candidate ",arguments[9],".\n                "]),t})(l[0].first,l[0].last,l[0].party,u[1].first,u[1].last,u[1].party,l[0].incumbent?"Incumbent":"",N(t.raceData,!0),u[1].incumbent?"Incumbent":"",d)]}:{key:"open-primary-in-progress",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");e(r,[arguments[0]," ",arguments[1]," ",arguments[2]]);var n=document.createElement("b");return e(n,[arguments[3]," ",arguments[4]," ",arguments[5]]),e(t,["\n                   ",arguments[6]," ",r,"\n                   and\n                   ",arguments[7]," ",n,"\n                   are leading in ",arguments[8],".\n                   The third-place candidate trails ",arguments[9]," ",arguments[10],".\n                "]),t})(u[0].first,u[0].last,u[0].party,u[1].first,u[1].last,u[1].party,u[0].incumbent?"Incumbent":"",u[1].incumbent?"Incumbent":"",N(t.raceData),u[1].last,d)]};_(!1)}else _(!1)}else{if(!t.raceData.isTied){if(n>0){var f=L(e,t.raceData);return{key:"primary-runoff-one-candidate",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]," ",arguments[1]]),e(t,["\n             ",arguments[2]," ",r," has advanced to a runoff election for ",arguments[3],".\n          "]),t})(f[0].first,f[0].last,f[0].incumbent?"Incumbent":"",N(t.raceData))]}}var m=100*t.raceData.marginOfWinPercent,y=Math.round(m),g=m<1?"by less than one point":"by "+y+" point"+(1===y?"":"s");return{key:"primary-in-progress",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]]),e(t,["\n          ",arguments[1]," ",r," is leading ",arguments[2]," ",arguments[3]," in ",arguments[4],", ",arguments[5],".\n          "]),t})(M(e,t.raceData),D(I(e,t.raceData)),["ME"].indexOf(t.raceData.statePostal)>=0?"the first-choice vote":"",g,N(t.raceData),A(t.raceData))]}}_(!1)}_(!1)},F=function(e,t,r){if(_("G"==t.raceData.raceTypeID),t.raceData.isFinished)return 1!==t.raceData.numWinners&&_(!1),0===t.raceData.candidates.filter((function(e){return e.winner})).length&&_(!1),{key:"general-called",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]]),e(t,["\n          ",arguments[1]," has been called for ",arguments[2]," ",r,".\n          "]),t})(O(e,t.raceData,!0),D(N(t.raceData,!1,"landing"==r.pageType)),C(e,t.raceData)),(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]]),e(t,["\n          ",arguments[1]," ",r," has won ",arguments[2],".\n          "]),t})(O(e,t.raceData,!0),D(C(e,t.raceData)),N(t.raceData,!1,"landing"==r.pageType))]};var n=100*t.raceData.marginOfWinPercent,i=Math.round(n),a=n<1?"by less than one point":"by "+i+" point"+(1===i?"":"s"),o={ME:["H","S"]}[t.raceData.statePostal]||[];return{key:"general-in-progress",options:[(function(){var e=v("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span"),r=document.createElement("b");return e(r,[arguments[0]]),e(t,["\n          ",arguments[1]," ",r," is leading ",arguments[2]," ",arguments[3]," in ",arguments[4],", ",arguments[5],".\n          "]),t})(M(e,t.raceData,!0),D(I(e,t.raceData)),o.indexOf(t.raceData.officeID)>=0?"the first-choice vote":"",a,N(t.raceData,!1,"landing"==r.pageType),A(t.raceData))]}},V=function(e,t,r){return"G"==t.raceData.raceTypeID?F(e,t,r):j(e,t,r)},G=function(e){if("H"!==e.raceData.officeID)return"S"===e.raceData.officeID?"senate"+("00"!=e.raceData.seatNum?"-"+e.raceData.seatNum:""):"G"===e.raceData.officeID?"governor":"A"===e.raceData.officeID?"attorney-general":void 0;var t=""+e.raceData.seatNum;return"district"+(1===e.raceData.seatNum.length?"0"+t:t)},B=function(e){if("H"===e.raceData.officeID){var t=e.raceData.raceTypeID,r=""+e.raceData.seatNum;return"key-race-district"+(1===e.raceData.seatNum.length?"0"+r:r)+"-"+t}}}),{"../../data/keyRacesForRobotext.js":6,"../store":195,"../util/bem":198,"../util/evented":203,"../util/format":205,"../util/set-accurate-interval":220,"../util/uniq":229,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"lodash.sortby":111,"next-tick":119,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],244:[(function(e,t,r){"use strict";var o=e("wapo-shared/util"),s=e("../util/legend");t.exports=function(r,n,e,t,i){if(!n.mapViewGroup)return i(new Error("mapViewGroup option is required but was not provided"));t("map:initOrUpdate",{id:n.mapViewGroup,options:n,keys:["mapViewGroup"]});var a=s();i(null,{select:function(e){return o.get(e,["map","instances",n.mapViewGroup])},render:function(e,t){return e||t("views:error",{id:r,error:new Error('No map state found for "'+n.mapViewGroup+'"')}),a.render(e)}})}}),{"../util/legend":210,"wapo-shared/util":264}],245:[(function(c,e,t){"use strict";c("yo-yo");var r=c("../util/bem"),p=c("classnames"),L=c("d3-array"),N=(c("d3-collection"),c("d3-selection")),z=c("d3-scale"),h=c("next-tick"),d=c("lodash.throttle"),f=c("wapo-shared/util"),m=c("wapo-shared/util").uniqueId,n=c("../store"),s=c("./instance"),j=c("../util/is-mobile"),F=c("../util/detect-browser").isIE,l=c("../../data/district-political-lean-2016.json"),V=r("wpe-pl");function i(e,t){return f.set(e,["instances",t.id],t)}n.model({namespace:"live-house-political-lean",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return s.initOrUpdate(i(t,e))},init:function(e,t){return i(t,e)},destroy:s.destroy,ready:s.reducer((function(e,t){return f.set(t,"ready",!0)}))}}),e.exports=function(e,t,r,n,i){(t=f.extend({electionDate:"2018-11-06"},t)).stateFips=""+t.stateFips,t.stateFips=1===t.stateFips.length?"0"+t.stateFips:t.stateFips;var a=u(void 0,l,t.stateFips),o=s.send("live-house-political-lean",e,n);return o("init",t),o("ready"),i(null,{select:function(e){return f.get(e,["results"])},render:function(e,t){return (function(){var e=c("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(V("wrap"),a.render(e))}}),{createPoliticalLean:u}};var u=function(n,i,o){var e=m(),a=!0;n=n||(function(){c("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("id",arguments[0]),e.setAttribute("class",arguments[1]),e})("live-house-political-lean-"+e,p(V("container"),V(""),V(j()?"mobile":"")));var s={};function l(e,t,r){N.select(e).html(null);var n=e.getBoundingClientRect().width;n>0&&(n<500?(function(e,t,r,n){var i=r.filter((function(e){return e.state===n}))[0],a=i.districtResults2016.map((function(e){return e.gopPres2016Margin})),o=Math.max.apply(null,a.map((function(e){return Math.abs(e)})))>.5?.06:.04,h=[Math.floor(Math.min.apply(null,a.concat(-.32))/o)*o,Math.ceil(Math.max.apply(null,a.concat(.32))/o)*o],s=(h[1]-h[0])/o,l=L.range(h[0],h[1],o).map((function(e){return.12===e&&(e=.120000001),e})),u=L.histogram().domain(h).thresholds(l).value((function(e){return e.gopPres2016Margin})),c=i.districtResults2016,p=u(c.filter((function(e){return"R"==e.winner2016Party}))),d=u(c.filter((function(e){return"D"==e.winner2016Party}))),f=Math.max.apply(this,p.map((function(e){return e.length}))),m=Math.max.apply(this,d.map((function(e){return e.length}))),y=(Math.max(m,f),{top:50,right:10,bottom:10,left:92,xBetween:50}),g=Math.min((t-y.left-y.xBetween-y.right)/(f+m),25),v=g*(f+m+2);y.xBetween=Math.max(y.xBetween,t-v-y.left-y.right);var b=t-y.left-y.right-y.xBetween,_=s*g,x=z.scaleLinear().domain(h).range([0,_]),w=z.scaleLinear().domain([0,f]).range([0,g*f]),D=z.scaleLinear().domain([0,m]).range([0,g*m]),S=N.select(e).append("div").attr("class",V("legend"));if(!j()&&!F()){var R=S.append("div").attr("class",V("legend-section"));R.append("span").attr("class","fa fa-hand-pointer-o").attr("area-hidden","true"),R.append("span").text("Click a box to jump to detailed results")}var P=S.append("div").attr("class",V("legend-section")),E=P.selectAll("."+V("legend-item")).data([{types:["DW","DL"],text:"Democratic win/lead"},{types:["RW","RL"],text:"Republican win/lead"},{types:["key"],text:"Flipped seat"},{types:["no-results-yet"],text:"No results yet"}]).enter().append("span").attr("class",V("legend-item")).classed(V("legend-item-key"),(function(e){return"key"===e.types[0]})).classed(V("legend-item-no-result"),(function(e){return"no-results-yet"===e.types[0]})).attr("data-num-sq",(function(e){return e.types.length}));E.append("span").attr("class",V("legend-boxes")).selectAll("."+V("legend-box")).data((function(e){return e.types})).enter().append("span").attr("class",V("legend-box")).attr("data-type",(function(e){return e})),E.append("span").text((function(e){return e.text}));var A=N.select(e).append("svg").attr("width",b+y.left+y.xBetween+y.right).attr("height",_+y.top+y.bottom).attr("data-is-vertical",!0).append("g").attr("transform","translate("+y.left+", "+y.top+")"),M=A.append("g").attr("transform","translate(0, 0)"),I=A.append("g").attr("transform","translate("+(f*g+y.xBetween)+", 0)");function O(e,r,t,n){var i=[{n:-.6},{n:-.3},{n:0},{n:.3},{n:.6}].filter((function(e){return e.n>=h[0]&&e.n<=h[1]})),a=.02*Math.round((e[0].x1+e[0].x0)/2/.02);i[0].n-a>.1&&i.unshift({n:a,noLine:!0});var o=t.selectAll("."+V("tick")).data(i).enter().append("g").attr("class",V("tick")).attr("transform",(function(e){return"translate(0, "+x(e.n)+")"})).attr("data-value",(function(e){return e.n})).attr("data-party",(function(e){return e.n<0?"D":e.n>0?"R":""}));o.append("line").filter((function(e){return!e.noLine})).attr("x1",0).attr("x2",-7).attr("y1",0).attr("y2",0),n&&(o.append("text").attr("x",-10).attr("y",4).text((function(e){return e.n<0?"+"+100*Math.abs(e.n)+" Clinton":e.n>0?"+"+100*Math.abs(e.n)+" Trump":"Presidential"})),o.filter((function(e){return 0===e.n})).append("text").attr("x",-10).attr("y",-12).text("2016"),o.filter((function(e){return 0===e.n})).append("text").attr("x",-10).attr("y",20).text("vote"));var s=t.selectAll("."+V("bin")).data(e).enter().append("g").attr("class",V("bin")).attr("transform",(function(e){return"translate(0, "+x((e.x1+e.x0)/2)+")"})).attr("data-margin",(function(e){return e.x0+" to "+e.x1})),l=s.selectAll("."+V("district")).data((function(e){return e})).enter().append("g").attr("class",V("district")).attr("transform",(function(e,t){return"translate("+(r(t)+g/2)+", "+g/2+")"})).attr("data-margin",(function(e){return e.gopPres2016Margin})).attr("data-winner-2016",(function(e){return e.winner2016Party}));l.append("rect").attr("x",-(g-2)/2).attr("y",-(g-1)).attr("width",g-2).attr("height",g-2);var u=z.scaleLinear().domain([22,32]).range([-6,-11]);l.append("text").attr("x",0).attr("y",u(g)).text((function(e){return 0===e.district?"":e.district})).style("font-size",g<22?11.5:14);var c=t.selectAll("."+V("key-bin")).data(e).enter().append("g").attr("class",V("key-bin")).attr("transform",(function(e){return"translate(0, "+x((e.x1+e.x0)/2)+")"}));c.selectAll("."+V("key-district-outer")).data((function(e){return e})).enter().append("rect").attr("class",V("key-district-outer")).attr("transform",(function(e,t){return"translate("+(r(t)+g/2)+", "+g/2+")"})).attr("x",-g/2).attr("y",-g).attr("width",g).attr("height",g);var p=c.selectAll("."+V("key-district")).data((function(e){return e})).enter().append("rect").attr("class",V("key-district")).attr("transform",(function(e,t){return"translate("+(r(t)+g/2)+", "+g/2+")"})).attr("x",-g/2).attr("y",-g).attr("width",g).attr("height",g);j()||F()?(l.classed("no-cursor",!0),p.classed("no-cursor",!0)):p.on("click",(function(e){var t=""+e.district,r=1===t.length?"0"+t:t,n="district"+r;wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&wp_pb.StaticMethods.scrollToAnchor(n,{offset:100})})),t.append("line").attr("class",V("domain")).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",_)}0!==f&&O(p,w,M,!0);0!==m&&O(d,D,I,0===f);0!==m&&0!==f?(A.append("text").attr("class",V("chart-subhead")).attr("x",-60).attr("y",18-y.top).text("Seats previously"),A.append("text").attr("class",V("chart-subhead")).attr("x",-60).attr("y",36-y.top).text("held by Republicans"),A.append("text").attr("class",V("chart-subhead")).attr("x",m>3?f*g+y.xBetween:b+y.xBetween).attr("y",36-y.top).style("text-anchor",m>3?"start":"end").text("By Democrats")):0===f?(I.attr("transform","translate("+b/2+",0)"),A.append("text").attr("class",V("chart-subhead")).attr("x",b/2).attr("y",18-y.top).text("Seats previously"),A.append("text").attr("class",V("chart-subhead")).attr("x",b/2).attr("y",36-y.top).text("held by Democrats")):(M.attr("transform","translate("+b/2+",0)"),A.append("text").attr("class",V("chart-subhead")).attr("x",b/2).attr("y",18-y.top).text("Seats previously"),A.append("text").attr("class",V("chart-subhead")).attr("x",b/2).attr("y",36-y.top).text("held by Republicans"))})(e,Math.min(375,n),t,r):(function(e,t,r,n){var i=r.filter((function(e){return e.state===n}))[0],a=i.districtResults2016.map((function(e){return Math.abs(e.gopPres2016Margin)})),o=Math.max.apply(null,a),s=o>.5?.06:.04,u=Math.ceil(Math.max(o,.42)/s)*s,l=[-u,u],c=u/s*2+1,p=L.range(l[0],l[1],s).map((function(e){return.12===e&&(e=.120000001),e})),h={right:0,left:0},d=t-h.left-h.right,f=z.scaleLinear().domain(l).range([0,d]),m=L.histogram().domain(l).thresholds(p).value((function(e){return e.gopPres2016Margin})),y=i.districtResults2016,g=m(y.filter((function(e){return"R"==e.winner2016Party}))),v=m(y.filter((function(e){return"D"==e.winner2016Party}))),b=(m(y.filter((function(e){return"D"==e.winner2016Party}))),Math.max.apply(this,g.map((function(e){return e.length})))),_=Math.max.apply(this,v.map((function(e){return e.length}))),x=(Math.max(_,b),d/c),w=b*x,D=_*x,S=w+D,R=z.scaleLinear().domain([0,b]).range([w,0]),P=z.scaleLinear().domain([0,_]).range([D,0]);h.top=0===b||0===_?25:24,h.yBetween=0===_||0===b?0:75,h.bottom=100;var E=N.select(e).append("div").attr("class",V("legend"));if(!j()&&!F()){var A=E.append("div").attr("class",V("legend-section")+" "+V("click-state-to-jump"));A.append("span").attr("class","fa fa-hand-o-up").attr("area-hidden","true"),A.append("span").text("Click a box to jump to detailed results")}var M=E.append("div").attr("class",V("legend-section")),I=M.selectAll("."+V("legend-item")).data([{types:["DW","DL"],text:"Democratic win/lead"},{types:["RW","RL"],text:"Republican win/lead"},{types:["key"],text:"Flipped seat"},{types:["no-results-yet"],text:"No results yet"}]).enter().append("span").attr("class",V("legend-item")).classed(V("legend-item-key"),(function(e){return"key"===e.types[0]})).classed(V("legend-item-no-result"),(function(e){return"no-results-yet"===e.types[0]})).attr("data-num-sq",(function(e){return e.types.length}));I.append("span").attr("class",V("legend-boxes")).selectAll("."+V("legend-box")).data((function(e){return e.types})).enter().append("span").attr("class",V("legend-box")).attr("data-type",(function(e){return e})),I.append("span").attr("class",V("legend-text")).text((function(e){return e.text}));var O=N.select(e).append("svg").attr("width",d).attr("height",S+h.top+h.yBetween+h.bottom).append("g").attr("transform","translate("+h.left+", "+h.top+")"),C=O.append("g").attr("transform","translate(0, 0)"),T=O.append("g").attr("transform","translate(0, "+(b*x+(h.top+h.yBetween))+")");function k(e,r,t){var n=t.selectAll("."+V("tick")).data([{n:-.6},{n:-.3},{n:0},{n:.3},{n:.6}].filter((function(e){return e.n>-u&&e.n<u}))).enter().append("g").attr("class",V("tick")).attr("transform",(function(e){return"translate("+f(e.n)+", 0)"})).attr("data-value",(function(e){return e.n})).attr("data-party",(function(e){return e.n<0?"D":e.n>0?"R":""}));n.append("line").attr("x1",0).attr("x2",0).attr("y1",r(0)).attr("y2",r(0)+8),n.append("text").each((function(e){return e.closeToExtent=0!==e.n&&Math.abs(Math.abs(e.n)-u)<=.1,e})).attr("x",(function(e){return e.closeToExtent?e.n<0?-20:20:0})).attr("y",r(0)+22).text((function(e){return e.n<0?"+"+100*Math.abs(e.n)+" Clinton":e.n>0?"+"+100*Math.abs(e.n)+" Trump":"2016"})).style("text-anchor",(function(e){if(e.closeToExtent)return e.n<0?"start":"end"})),n.filter((function(e){return 0===e.n})).append("text").attr("x",0).attr("y",r(0)+22+16).text("Presidential vote");var i=t.selectAll("."+V("bin")).data(e).enter().append("g").attr("class",V("bin")).attr("transform",(function(e){return"translate("+f((e.x1+e.x0)/2)+", 0)"})).attr("data-margin",(function(e){return e.x0+" to "+e.x1})),a=i.selectAll("."+V("district")).data((function(e){return e})).enter().append("g").attr("class",V("district")).attr("transform",(function(e,t){return"translate(0, "+r(t)+")"})).attr("data-margin",(function(e){return e.gopPres2016Margin})).attr("data-winner-2016",(function(e){return e.winner2016Party}));a.append("rect").attr("x",-(x-2)/2).attr("y",-(x-1)).attr("width",x-2).attr("height",x-2);var o=z.scaleLinear().domain([22,32]).range([-6,-11]);a.append("text").attr("x",0).attr("y",o(x)).text((function(e){return 0===e.district?"":e.district})).style("font-size",x<22?11.5:14);var s=t.selectAll("."+V("key-bin")).data(e).enter().append("g").attr("class",V("key-bin")).attr("transform",(function(e){return"translate("+f((e.x1+e.x0)/2)+", 0)"}));s.selectAll("."+V("key-district-outer")).data((function(e){return e})).enter().append("rect").attr("class",V("key-district-outer")).attr("transform",(function(e,t){return"translate(0, "+r(t)+")"})).attr("x",-x/2).attr("y",-x).attr("width",x).attr("height",x);var l=s.selectAll("."+V("key-district")).data((function(e){return e})).enter().append("rect").attr("class",V("key-district")).attr("transform",(function(e,t){return"translate(0, "+r(t)+")"})).attr("x",-x/2).attr("y",-x).attr("width",x).attr("height",x);j()||F()?(a.classed("no-cursor",!0),l.classed("no-cursor",!0)):l.on("mouseover",(function(e){N.select(this).classed("hover",!0)})).on("mouseout",(function(e){N.select(this).classed("hover",!1)})).on("click",(function(e){var t=""+e.district,r=1===t.length?"0"+t:t,n="district"+r;wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&wp_pb.StaticMethods.scrollToAnchor(n,{offset:100})})),t.append("line").attr("class",V("domain")).attr("x1",0).attr("x2",d).attr("y1",r(0)).attr("y2",r(0))}0!==b&&k(g,R,C);0!==_&&k(v,P,T);0!==b&&(C.append("text").attr("class",V("chart-subhead")).attr("x",0).attr("y",R(0)-36).text("Seats previously held"),C.append("text").attr("class",V("chart-subhead")).attr("x",0).attr("y",R(0)-18).text("by Republicans"));0!==_&&(0!==b?T.append("text").attr("class",V("chart-subhead")).attr("x",0).attr("y",-18).text("By Democrats"):(T.append("text").attr("class",V("chart-subhead")).attr("x",0).attr("y",-36).text("Seats previously held"),T.append("text").attr("class",V("chart-subhead")).attr("x",0).attr("y",-18).text("by Democrats")))})(e,n,t,r))}function u(){var n=!1,i=!1;function a(e,t){var r=""+t,n=e+(r=1===r.length?"0"+r:r);return f.get(s,["live","results",n,"H",r,"G","status"])}N.selectAll(".wpe-pl_district").attr("data-race-status",(function(e){return a(o,e.district)})).attr("data-race-precincts-reporting",(function(e){return t=o,r=e.district,i=t+(n=1===(n=""+r).length?"0"+n:n),f.get(s,["live","results",i,"H",n,"G","reportingOverThreshold"]);var t,r,n,i})),N.selectAll(".wpe-pl_key-district, .wpe-pl_key-district-outer").attr("data-is-key",(function(e){var t=a(o,e.district);t||(i=!0);var r="won-GOP"==t&&"D"==e.winner2016Party||"won-Dem"==t&&"R"==e.winner2016Party;return r&&!n&&(N.selectAll("."+V("legend-item-key")).classed("hidden",!1),n=!0),r})),n||N.selectAll("."+V("legend-item-key")).classed("hidden",!0),i?N.selectAll("."+V("legend-item-no-result")).classed("hidden",!1):N.selectAll("."+V("legend-item-no-result")).classed("hidden",!0)}return{render:function(e){s=e;var t=(function(){var e=c("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("data-ds-widget","live-house-political-lean"),e(t,["\n          ",arguments[0],"\n        "]),t})(a?n:null);if(a){a=!1;var r=function(){l(n,i,o),u()};h(r),window.addEventListener("resize",d(r))}else u();return t}}}}),{"../../data/district-political-lean-2016.json":3,"../store":195,"../util/bem":198,"../util/detect-browser":201,"../util/is-mobile":209,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"d3-array":87,"d3-collection":88,"d3-scale":93,"d3-selection":95,"lodash.throttle":112,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],246:[(function(e,t,r){"use strict";var o=e("wapo-shared/util"),s=e("../util/toggle"),l=e("../map/util");e("next-tick");t.exports=function(r,n,e,t,i){if(!(n=o.extend({mapViewGroup:null,opts:["historical-president-states","historical-president-counties"],filter:l.isKnownMapViewOption},n)).mapViewGroup)return i(new Error("mapViewGroup property is required"));var a=s({opts:n.opts,handler:function(e){return t("map:setMapView",{id:n.mapViewGroup,mapView:e})},isActive:function(e,t){return!!e&&e.mapView===t.value},filter:n.filter});t("map:initOrUpdate",{id:n.mapViewGroup,options:n,keys:["mapViewGroup"]}),i(null,{select:function(e){return o.get(e,["map","instances",n.mapViewGroup])},render:function(e,t){return e||t("views:error",{id:r,error:new Error('No map state found for "'+n.mapViewGroup+'"')}),a.render(e)}})}}),{"../map/util":170,"../util/toggle":227,"next-tick":119,"wapo-shared/util":264}],247:[(function(R,e,t){"use strict";var P=R("classnames"),r=(R("yo-yo"),R("../store")),E=R("./instance"),A=R("wapo-shared/util"),M=R("../util/validate"),I=R("../util/toggle"),O=R("../map"),C=R("../map/validate").MapState,n=R("wapo-shared/race-helpers"),T=n.fips,k=n.stateNameByPostal,L=n.getStatePostal,N=n.getStatePageUrl,z=R("wapo-shared/race-helpers").getStateFips,j=R("../util/log"),F=R("../util/legend"),V=R("../util/primary-legend"),G=R("../util/sidebar"),B=R("../util/homepage-sidebar"),U=R("../util/callout-button"),H=R("wapo-shared/data/state-meta"),q=R("../util/format"),W=R("../util/timer"),i=R("../util/bem"),Y=R("../util/dropdown"),Z=R("../map/util"),X=R("../util/is-mobile"),$=(R("../config"),i("wpe-map"));r.model({namespace:"map-view",state:{instances:{}},reducers:{init:E.init((function(e,t){return{ready:!1}})),destroy:E.destroy,ready:E.reducer((function(e,t){return A.set(t,"ready",!0)})),setDropdown:E.reducer((function(e,t){return A.set(t,"selectStates",e.isOpen)}))}}),e.exports=function(n,u,e,r,t){var c=W().render;u.bucketGroup&&u.bucketSet&&(j.warn("bucketGroup and bucketSet are mutually exclusive; ignoring bucketSet",u),delete u.bucketSet);var i=M.asError(C,u);if(i)return t(i);(u=A.extend({results:"live",showMapViewToggle:!u.mapViewGroup,enableLegend:!0,showStateSidebar:!0,hideOtherStates:!1,alignBucketLabel:"center",showHomepageSidebar:!1,showSidebarLink:!0,showLinkButton:!1,buttonText:null,buttonLink:null,showMapHeader:!1,useStaticImage:null,raceType:"G",aspectRatioMethod:"square",electionDate:null,seat:"00",onceDataReady:null,showUpdateTimer:!0,initialStateFips:"00"},u)).opts=u.opts||[{text:"States",value:u.results+"-president-states"},{text:"Counties",value:u.results+"-president-counties"}];var a={useStaticImage:u.useStaticImage,fallbackSize:u.fallbackSize,aspectRatioMethod:u.aspectRatioMethod,isAlbers:u.isAlbers,initialMapView:u.initialMapView,initialStateFips:u.initialStateFips,officeId:u.officeID,raceType:u.raceType},p=O(n,a),o=E.send("map-view",n,r);o("init",{options:u});var s=E.initMapStates(n,u,r),l=[];for(var h in H)l.push({statePostal:h,text:H[h].name,value:H[h].name,href:q.stateUrl(H[h].name)});var d=Y({opts:l,placeholder:"Select a State",onSelect:function(e){r("map:setStateFips",{id:s.stateFips,stateFips:z(e.statePostal.toUpperCase())})},toggle:function(e){return o("setDropdown",{isOpen:e})}}).render;p.on("load",(function(){o("ready"),u.onLoad&&u.onLoad()})).on("navigate",(function(e){var t=e.id;(T.isDistrict(t)||T.isCounty(t))&&(t=t.slice(0,2)),(T.isState(t)||T.isNatl(t))&&r("map:setStateFips",{id:s.stateFips,stateFips:t})})).on("zoomend",(function(e){r("map:setZoom",{id:n,zoom:e.zoom})})).on("error",(function(e){r("map:setUseStaticImage",{id:u.fallbackGroup||n,useStaticImage:"always"})})).on("featureStateUpdated",(function(e){j.debug("feature-state","Feature state updated")}));var f=u.showMapViewToggle?I({opts:u.opts,filter:Z.isKnownMapViewOption,handler:function(e){r("map:setMapView",{id:s.mapView,mapView:e}),"00"===u.initialStateFips&&r("map:setStateFips",{id:s.mapView,stateFips:u.initialStateFips})},isActive:function(e,t){return e.map.mapView===t.value}}):null,m=X()&&!X.isMobileDesktop(),y={showSidebarLink:u.showSidebarLink},g={enableLegend:u.enableLegend},v=u.enableLegend&&"G"===Z.raceTypeFromMapView(u.initialMapView)?F():V(),b=u.showStateSidebar&&!m?G(y):null,_=u.buttonLink?{link:u.buttonLink,text:u.buttonText}:null,x=u.showLinkButton?U(_):null,w=u.showHomepageSidebar?B(A.extend(_,y,g,{onBattlegroundClick:function(e){if(T.isState(e)){var t=L(e),r=N(t);window.location.href=r}},isUsingStatic:function(){return Z.useStaticImage(u.useStaticImage)}})):null,D=[];w&&D.push($("view_compressed")),"00"!==u.initialStateFips&&D.push($("view_single-state"));var S=P(D);t(null,{select:function(e){var t=A.get(e,["map-view","instances",n]),r=E.selectMapState(s,e);return r=A.set(r,"data",e.results.mapData),j.debug("map-state",r),A.extend(t,{map:r})},render:function(e,t){var r=void 0,n=Z.useStaticImage(e.map.useStaticImage);e.map.bucketSet&&(r=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("h3");return r.setAttribute("class","wpe-bucket-label"),e(r,[arguments[0]]),e(t,["\n          ",r,"\n        "]),t})(e.map.bucketSet.bucketDefinitions[e.map.bucket].label,"wpe-align_"+u.alignBucketLabel));var i,a,o,s=Z.raceTypeFromMapView(e.map.mapView),l="00"===u.initialStateFips?"right":"left";return (function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[10]);var r=document.createElement("div");r.setAttribute("class",arguments[9]);var n=document.createElement("div");n.setAttribute("class",arguments[2]);var i=document.createElement("div");i.setAttribute("class",arguments[0]),e(i,["\n              ",arguments[1],"\n            "]),e(n,["\n            ",i,"\n            ",arguments[3],"\n\n            ",arguments[4],"\n\n            ",arguments[5],"\n          "]);var a=document.createElement("div");a.setAttribute("class",arguments[7]);var o=document.createElement("div");return o.setAttribute("class","wpe-sidebar_inset"),e(o,["\n              ",arguments[6],"\n            "]),e(a,["\n            ",o,"\n            ",arguments[8],"\n          "]),e(r,["\n          ",n,"\n          ",a,"\n\n\n        "]),e(t,["\n        ",arguments[11],"\n        ",arguments[12],"\n        ",r,"\n\n        ",arguments[13],"\n      "]),t})(P($("segment"),$("segment","timer")),u.showUpdateTimer?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("h4");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(P($("title"),$("timer"),(i={},a=$("timer","hidden"),o=!1,a in i?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,i)),c()):null,P("hsb-wrapper","hsb-wrapper-"+l),f?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n                ",arguments[1],"\n              "]),t})(P($("toggle"),$("toggle-desktop")),f.render(e,t)):null,w?w.render(e.map,n,s):null,f?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n                ",arguments[1],"\n              "]),t})(P($("toggle"),$("toggle-mobile")),f.render(e,t)):null,b?b.render(e.map,Z.raceTypeFromMapView(e.map.mapView)):null,$("container"),p.render(e.map,u.enableLegend,{legend:v,usingStaticImage:n}),$("row"),P($("view"),S),r,u.showMapHeader?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("div");r.setAttribute("class",arguments[2]);var n=document.createElement("h4");return n.setAttribute("class",arguments[0]),e(n,[arguments[1]]),e(r,["\n              ",n,"\n            "]),e(t,["\n            ",r,"\n            ",arguments[4],"\n          "]),t})($("timer"),c(),$("segment","timer"),$("actions"),n?null:(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n                ",arguments[1],"\n              "]),t})($("dropdown"),d({expanded:e.selectStates,placeholder:"00"===e.map.stateFips?"Select a State":k(L(e.map.stateFips))}))):null,u.showLinkButton?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class","wpe-map_callout"),e(t,[arguments[0]]),t})(x.render(e.map.mapView)):null)},destroy:function(){o("destroy"),r("map:destroy",{id:n})}})}}),{"../config":146,"../map":149,"../map/util":170,"../map/validate":171,"../store":195,"../util/bem":198,"../util/callout-button":200,"../util/dropdown":202,"../util/format":205,"../util/homepage-sidebar":208,"../util/is-mobile":209,"../util/legend":210,"../util/log":211,"../util/primary-legend":217,"../util/sidebar":221,"../util/timer":226,"../util/toggle":227,"../util/validate":230,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/data/state-meta":136,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],248:[(function(o,e,t){"use strict";o("yo-yo");var s=o("../util/timer");e.exports=function(e,t,r,n,i){var a=s();i(null,{select:function(e){return{}},render:function(e,t){return (function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,[arguments[0]]),t})(a.render())}})}}),{"../util/timer":226,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"yo-yo":140}],249:[(function(e,t,r){"use strict";var a=e("wapo-shared/util"),o=e("./map");t.exports=function(e,t,r,n,i){return t=a.extend(t,{results:"historical"}),o(e,t,r,n,i)}}),{"./map":247,"wapo-shared/util":264}],250:[(function(o,e,t){"use strict";var s=o("../util/race-summaries");o("yo-yo");e.exports=function(e,n,t,r,i){var a={select:function(e){return!1},render:function(e){var t=void 0,r=void 0;return n.data?(t=n.data.officeID,r=n.data.aggregate):e&&(t=e.officeID,r=e.aggregate),(function(){var e=o("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,["\n        ",arguments[0],"\n      "]),t})(s.parse(t,null,r))}};return n.onload(a.render),i(null,a)}}),{"../util/race-summaries":219,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"yo-yo":140}],251:[(function(R,e,t){"use strict";function P(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}R("yo-yo");var c=R("classnames"),E=R("wapo-shared/util"),A=R("wapo-shared/race-helpers"),r=R("../store"),l=R("./instance"),n=R("../util/bem"),M=R("../util/format"),u=R("../util/table"),p=R("../util/log"),I=(E.get,R("../util/sidebar"),R("../util/tooltip"),R("../util/progressbar")),O=R("../map/views/results-table"),h=R("../util/toggle"),C=n("wpe-result"),d=R("../util/timer"),T=(R("../config"),R("../race-config").raceConfigLookup);function i(e,t){return E.set(e,["instances",t.id],t)}function k(e,t,r,n){var i=e.winner,a=e.winner_runoff,o=e.meta.incumbent?"*":"",s=c("wpe-table_candidate",{"wpe-table_winner":i});67552==e.meta.id&&(e.meta.party="Ind");var l=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class","wpe-party-abbrev"),e(t,[arguments[0]]),t})(M.partyAbbrev(e.meta.party,"")),u=t?null:(function(){R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("class","key-square"),e})();return i||a&&!t?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]);var r=document.createElement("span");return r.setAttribute("class","fa fa-check"),e(t,[r," ",arguments[1]," ",arguments[2],arguments[3]," ",arguments[4]]),t})(s,e.meta.first,e.meta.last,o,l):(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]," ",arguments[2]," ",arguments[3],arguments[4]," ",arguments[5]]),t})(s,u,e.meta.first,e.meta.last,o,l)}function L(e,t,r,n){var i;return n&&"H"===t?i="House District "+ +n:"S"===t?i="U.S. Senate":"G"===t?i="Governor":"A"===t?i="Attorney General":"M"===t?i="Mayor":"0D"===t?i="Delegate":"0C"===t?i="Council Chairman":"0W"===t?i="Councilman "+("00"===n?"At-Large":"Ward "+ +n):"0S"===t&&(i="Shadow Senator"),"D"==r||"R"==r?i=i+" - "+("D"===r?"Democratic":"Republican")+" primary":"X"===r&&(i="Open primary"),i}r.model({namespace:"race-table",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return l.initOrUpdate(i(t,e))},init:function(e,t){return i(t,e)},destroy:l.destroy,ready:l.reducer((function(e,t){return E.set(t,"ready",!0)})),setTableView:l.reducer((function(e,t){return E.set(t,"tableView",e.tableView)})),setSelectedRaceID:l.reducer((function(e,t){return E.set(t,"selectedRaceID",e.selectedRaceID)}))}}),e.exports=function(o,x,e,t,r){var n=(x=E.extend({mapViewGroup:null,tableView:"live-senate-state-table",showPartyToggle:!1,race:"house",results:"live",raceTypeId:"D",includeUpdateTimer:!1,hideCloseButton:!0,progressInSidenote:!0,showFullResultsLink:!0,fullResultsLinkTitle:"See Full Results",fullResultsLinkTarget:"https://www.washingtonpost.co/",maxRows:10,supressTitle:!1,overrideTitle:"",electionDate:null,seat:"00",bigOnHomepage:!1},x)).tableView.toLowerCase().match(/(live|historical)-(senate|house|governor|mayor|delegate|councilchair|dccouncil|dcsenator|ballot|attorney\-general)-(state|county|district|locality|ward)-table/i);null===n&&r("Invalid tableView");var w=x.includeUpdateTimer?d().render:null;x.results=n[1],x.race=n[2],x.detailLevel=n[3],x.officeID=A.officeIDs[x.race];var i=x.stateFips;x.raceId=""+i,x.stateFips=""+x.stateFips,p.debug("race-table","options",x),x.computedOfficeID=x.stateFips,x.seat&&-1!=["H","0I","0W"].indexOf(x.officeID)&&(x.computedOfficeID=""+x.computedOfficeID+x.seat),x.selectedRaceID=x.raceTypeId,1===x.seat.length&&(x.seat="0"+x.seat),x.mapViewGroup&&(delete x.race,t("race-table:initOrUpdate",{id:o,options:x,keys:["mapViewGroup"]}));var D=x.showPartyToggle?h({opts:[{text:"Democrat",value:"D"},{text:"Republican",value:"R"}],handler:function(e){return t("race-table:setSelectedRaceID",{id:o,selectedRaceID:e})},isActive:function(e,t){return t.value==e.selectedRaceID}}):null,s=l.select("race-table",o),a=l.send("race-table",o,t);a("init",x),a("ready");var S=u({className:C(),headCellTemplate:function(e){return (function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("th");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return e(r,[arguments[0]]),e(t,[r]),t})(e,c(C("cell"),C("header"),e))},rowTemplate:function(e,t){return null==e[0].meta.party&&(e[0].meta.party=""),(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,["\n            ",arguments[1],"\n          "]),t})(c(C("row"),C("row",e[0].meta.party.toLowerCase()),{"wpe-result_row_winner":e[0].winner,"wpe-result_row_winner_runoff":e[0].winner_runoff},e[0].isPrimary?"wpe-result_row_winner_primary":"wpe-result_row_general"),e.slice(1,e.length).map(t))},cellTemplate:function(e,t){return (function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(c(C("cell"),e),e)},limit:x.maxRows}).render;x.onLoad&&x.onLoad(),r(null,{select:function(e){var t=E.get(e,["race-table","instances",o]),r=s(e),n=E.pick(e.results.live.results,[r.computedOfficeID]),i=E.get(n,[r.computedOfficeID,x.officeID,x.seat,r.selectedRaceID,"candidates"],[]).map((function(e){return e.id})),a={live:{candidates:E.pick(e.results.live.candidates,i),results:n}};return E.extend(t,{tableState:r,results:a})},render:function(e,t){var r,n,i,a,o,s=E.get(e,"results"),l=E.get(e,["tableState","selectedRaceID"]),u=E.get(e,"tableState"),c=O(s,x.officeID,x.seat,l,u.computedOfficeID),p=A.isOpenRace(x.raceTypeId),h=A.isPrimary(l);if(null===c.title&&null==T(u.computedOfficeID,x.officeID,x.seat,l,null)){n=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("h5");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C("title"),L(x.stateFips,x.officeID,l,x.seat));var d="G"==x.raceTypeId?"":"No candidates for this race";"51"==x.stateFips?("05"==x.seat&&"D"==x.raceTypeId&&(d="Democrats chose Leslie Cockburn in a contested convention."),"05"==x.seat&&"R"==x.raceTypeId&&(d="The local Republican committee nominated Denver Riggleman to replace Rep. Tom Garrett on the ballot."),"06"==x.seat&&"R"==x.raceTypeId&&(d="Republicans chose Ben Cline in a contested convention."),"07"==x.seat&&"R"==x.raceTypeId&&(d="Rep. Dave Brat was the only Republican to file, making him the automatic nominee."),"08"==x.seat&&"R"==x.raceTypeId&&(d="Thomas Oh was the only Republican to file, making him the automatic nominee.")):"10"==x.stateFips&&"00"==x.seat&&"D"==x.raceTypeId&&(d="Rep. Lisa Blunt Rochester was the only Democrat to file, making her the automatic nominee."),r=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("p");return r.setAttribute("class",arguments[0]),e(r,[arguments[1]]),e(t,[r]),t})(C("no-candidates"),d)}else if(c.title){var f=(function(e,t,r,n){var i,a,o,s=[];s.push(["Candidate"].concat(P(e.head))),e.rows.length>=n&&!t&&!r&&(e.rows=(i=e.rows,a=n,o=(o=i.filter((function(e){return-1!=["Dem","GOP"].indexOf(e.meta.party)}))).concat(i.filter((function(e,t){return t<=a-o.length&&-1==["Dem","GOP"].indexOf(e.meta.party)})))));for(var l=0;l<e.rows.length;l++){var u=e.rows[l];u.isPrimary=t,u.isOpenRace=r,void 0==u.meta.first&&"No"===u.meta.last?u.meta.party="no":void 0===u.meta.first&&"Yes"===u.meta.last&&(u.meta.party="yes");var c=k(u,t,0,e.rows.length);s.push([u,c].concat(P(u.cells)))}return s})(c.table,h,p,x.maxRows);r=S(f),n=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("h5");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C("title"),L(x.stateFips,x.officeID,l,x.seat));var m=c.progress?M.pct(c.progress.reporting,c.progress.total):null;m&&(i=I(m)),x.showPartyToggle&&(a=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n              ",arguments[1],"\n            "]),t})(C("toggle"),D.render(e,t)));var y="Race goes to a runoff.",g="*Incumbent";h&&"20"==x.stateFips&&"04"==x.seat&&"R"==x.raceTypeId&&(g="Candidates have same name");var v=c.table.rows.find((function(e){return e.winner_runoff})),b=c.table.rows.find((function(e){return e.meta.incumbent}));v&&b?o=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-result_special-note");var r=document.createElement("span");return r.setAttribute("class","runoff"),e(r,[". ",arguments[0]]),e(t,[arguments[1],r]),t})(y,g):v?o=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-result_special-note");var r=document.createElement("span");return r.setAttribute("class","runoff"),e(r,[arguments[0]]),e(t,[r]),t})(y):b&&(o=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class","wpe-result_special-note incumbent"),e(t,[arguments[0]]),t})(g))}x.supressTitle?n=null:x.overrideTitle&&x.overrideTitle.length>0&&(n=(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("h5");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C("title"),x.overrideTitle));var _="table_live"+(x.bigOnHomepage?" big_on_homepage":"")+(x.showVoteCountInBigTable?" show-vote-count":"");return (function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("div");return r.setAttribute("class",arguments[0]),e(r,["\n                ",arguments[1],"\n                ",arguments[2],"\n            "]),e(t,["\n            ",arguments[4],"\n            ",r,"\n            ",arguments[5],"\n            ",arguments[6],"\n            ",arguments[7],"\n          "]),t})(C("header"),n,x.includeUpdateTimer&&n&&i?(function(){var e=R("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C("timer"),w()):null,C(_),a,r,i,o)}})}}),{"../config":146,"../map/views/results-table":184,"../race-config":185,"../store":195,"../util/bem":198,"../util/format":205,"../util/log":211,"../util/progressbar":218,"../util/sidebar":221,"../util/table":224,"../util/timer":226,"../util/toggle":227,"../util/tooltip":228,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],252:[(function(a,e,t){"use strict";a("yo-yo"),a("global/window"),a("../util/browser");var o=a("wapo-shared/util");a("./instance");e.exports=function(e,t,r,n,i){i(null,{select:function(e){return e},render:function(e,t){var r,n=o.get(e,["results","live","raceLastUpdate"]);return n?(function(){var e=a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return e(t,["\n            ",arguments[0],"\n        "]),t})((r=n,(function(){var e=a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("table");return t.setAttribute("class","wpe-result"),e(t,["\n            ",arguments[0],"\n        "]),t})(Object.keys(r).map((function(e){return (function(){var e=a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");t.setAttribute("class","wpe-result_row");var r=document.createElement("td");r.setAttribute("class","wpe-result_cell"),e(r,[arguments[0]]);var n=document.createElement("td");return n.setAttribute("class","wpe-result_cell"),e(n,[arguments[1]]),e(t,[r,n]),t})(e,r[e])}))))):(function(){a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})()}})}}),{"../util/browser":145,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"global/window":102,"wapo-shared/util":264,"yo-yo":140}],253:[(function(e,t,r){"use strict";var o=e("yo-yo"),s=e("next-tick");t.exports=function(e,t,r,n){try{var i=t.select(r),a=t.render(i,n);o.update(e,a,{onBeforeElUpdated:function(e,t){return!(e.getAttribute&&t.getAttribute&&e.getAttribute("data-ds-hash")&&e.getAttribute("data-ds-hash")===t.getAttribute("data-ds-hash"))},onBeforeElChildrenUpdated:function(e,t){return!e.getAttribute||!e.getAttribute("data-ds-widget")}})}catch(e){s((function(){n("views:error",{id:t.id,error:e})}))}}}),{"next-tick":119,"yo-yo":140}],254:[(function(O,e,t){"use strict";O("yo-yo");var C=O("classnames"),T=O("wapo-shared/util"),k=O("wapo-shared/race-helpers"),r=O("../store"),a=O("./instance"),n=O("../util/bem"),L=O("../util/format"),i=O("../util/table"),N=O("../util/log"),o="wpe-result",z=n(o),j=i({className:o,cellTemplate:function(e,t){return (function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C(z("cell"),z("cell",t)),e)},rowTemplate:function(e,t){return (function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C(z("row"),z("winner",e.leaderIndex,e.indLeader),(r={},n=z("called"),i=e.isCalled,n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r)),e.data.map(t));var r,n,i},headTemplate:function(e,t){return (function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(C(z("row"),z("header")),e.data.map(t))}}).render,F=["Strong D","Likely D","Vulnerable D","Vulnerable R","Likely R","Strong R"];function V(e,t){var r=e._name.split("-"),n=t._name.split("-");return r[0]>n[0]?1:r[0]<n[0]?-1:parseInt(r[1])>parseInt(n[1])?1:-1}r.model({namespace:"table",state:{instances:{}},reducers:{init:a.init((function(e,t){return{options:t.options}})),destroy:a.destroy}}),e.exports=function(e,t,r,n,i){t=T.extend({mapViewGroup:null,race:"house"},t),a.send("table",e,n)("init",{options:t}),i(null,{select:a.selectResultsWithOffice(t),render:function(e){var t=T.get(e,"results.live"),r=T.get(e,"results.expectations");if(!t||!t.aggregate||!r||r.loading)return (function(){O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})();for(var n=e.officeID,i="H"===n,a=t.results,o=t.candidates,s={other:[],"Strong D":[],"Likely D":[],"Vulnerable D":[],"Vulnerable R":[],"Likely R":[],"Strong R":[]},l=i?Object.keys(r.results).filter(k.fips.isDistrict):k.stateFips,u=function(e){return 1==e.length?e[0]:e.sort((function(e,t){return e.voteCount<t.voteCount}))[0]},c=0;c<l.length;++c){var p=l[c],h=T.get(a,[p,n]);if(h)for(var d=p.length>2?[p.slice(-2)]:Object.keys(h),f=0;f<d.length;f++){var m=h[d[f]].G,y=u(m.candidates.filter((function(e){return"GOP"===o[e.id].party}))),g=u(m.candidates.filter((function(e){return"Dem"===o[e.id].party}))),v=u(m.candidates.filter((function(e){return"Ind"===o[e.id].party})));if(y||g){var b="H"==n?p:p+"-"+m.seatNum,_=T.get(r.results,[b,n,"expectation"],"other"),x=0,w="",D=!1,S=!1,R=m.candidates.filter((function(e){return"X"===e.winner})).length>0;y&&g||(S=!0,D=1===m.candidates.length&&R),m.winningParty?x="Dem"===m.winningParty?1:"GOP"===m.winningParty?2:0:D&&(x=y?2:1);var P=D||/won-(Dem|GOP|Ind)/.test(m.status),E=k.getAbbrev(p);i&&"00"!=m.seatNum?E=k.getStatePostal(p)+"-"+parseInt(m.seatNum):i?E=""+k.getStatePostal(p):"01"==m.seatNum&&(E+=" S"),"00"!=m.seatNum||i||"ME"!=m.statePostal&&"VT"!=m.statePostal&&"AK"!=m.statePostal||/-Ind/.test(m.status)&&(!g||T.get(v,"voteCount",0)>T.get(g,"voteCount",0))&&(g=v,x=1,w="ind");var A=void 0,M=void 0;M=D?(A=g?"Unc.":"*",y?"Unc.":"*"):S?(A=g?L.pct(g.voteCount,m.voteCount,"--"):"*",y?L.pct(y.voteCount,m.voteCount,"--"):"*"):(A=L.pct(g.voteCount,m.voteCount),L.pct(y.voteCount,m.voteCount));var I=k.getStatePageUrl(m.statePostal);s[_].push({leaderIndex:x,indLeader:w,isCalled:P,_name:E,data:[(function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("a");return t.setAttribute("href",arguments[0]),e(t,[arguments[1]]),t})(I,E),A,M,D?"":L.pct(m.precinctsReporting,m.precinctsTotal)]})}else N.warn("Neither democratic nor republican candidates found for "+p)}}s.other.length&&(N.warn("No expectations for race and fips",n,JSON.stringify(s.other)),delete s.other);return (function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("div");return r.setAttribute("class",arguments[0]),e(r,["\n          ",arguments[1],"\n        "]),e(t,["\n        ",r,"\n          ",arguments[2],"\n      "]),t})(z("container"),F.map((function(e,t){var r=s[e].sort(V);return r.unshift({data:["","D","R","% report."]}),(function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[3]);var r=document.createElement("h5");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("div");return n.setAttribute("class","table-container"),e(n,["\n                ",arguments[2],"\n              "]),e(t,["\n              ",r,"\n              ",n,"\n            "]),t})(z("title"),L.predicted(e),j(r),C(z("item"),z(e.toLowerCase().replace(" ","-"))))})),"H"===n||"S"===n?(function(){var e=O("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("p");return t.setAttribute("class",arguments[0]),e(t,["*Party not participating in this election"]),t})(z("note")):null)}})}}),{"../store":195,"../util/bem":198,"../util/format":205,"../util/log":211,"../util/table":224,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],255:[(function(a,e,t){"use strict";a("yo-yo");var o=a("wapo-shared/util"),s=a("../config");e.exports=function(e,t,r,n,i){t=o.extend({requireGlSupport:!0,align:"center",headingText:""},t),i(null,{select:function(){return{}},render:function(){return s.glSupport||!t.requireGlSupport?(function(){var e=a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[1]);var r=document.createElement("div");return r.setAttribute("class","wpe-simple-heading label label-kicker label-primary"),e(r,["\n          ",arguments[0],"\n        "]),e(t,["\n        ",r,"\n      "]),t})(t.headingText,"wpe-align_"+t.align):(function(){a("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("style","display: none;"),e})()}})}}),{"../config":146,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,"wapo-shared/util":264,"yo-yo":140}],256:[(function(b,e,t){"use strict";function h(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}b("yo-yo");var r=b("../util/bem"),u=b("classnames"),_=b("../util/format"),x=b("../util/log"),a=b("./instance"),w=b("wapo-shared/util"),n=b("../store"),d=b("wapo-shared/race-helpers"),i=b("../util/table"),f=b("../map/views/results-table"),m=b("../util/progressbar"),D=r("wpe-result");function o(e,t){return w.set(e,["instances",t.id],t)}n.model({namespace:"state-highlight-table",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return a.initOrUpdate(o(t,e))},init:function(e,t){return o(t,e)},destroy:a.destroy,ready:a.reducer((function(e,t){return w.set(t,"ready",!0)}))}}),e.exports=function(e,o,t,r,n){(o=w.extend({stateFips:"00",electionDate:"2018-11-06",keyRaces:[]},o)).stateFips=""+o.stateFips;var i=a.send("state-highlight-table",e,r);i("init",o),i("ready"),n(null,{select:function(e){return w.get(e,["results"])},render:function(t,e){var r=[{office:"S",seat:"00",stateFips:o.stateFips},{office:"S",seat:"01",stateFips:o.stateFips},{office:"G",seat:"00",stateFips:o.stateFips}],n=o.keyRaces.map((function(e){return{office:"H",seat:e.table.seat,stateFips:o.stateFips}})),i=[l(t,r.concat(n),"Key races")],a=r.map((function(e){return (function(e,t){var r=f(e,t.office,t.seat,"G",t.stateFips);if(r.title&&"No race"!==r.annotation){0==r.table.rows[0].result.voteCount?r.table.rows=r.table.rows.filter((function(e){return"GOP"==e.meta.party||"Dem"==e.meta.party||"Angus"==e.meta.first&&"King"==e.meta.last||"Bill"==e.meta.first&&"Walker"==e.meta.last||"Bernie"==e.meta.first&&"Sanders"==e.meta.last})):r.table.rows=r.table.rows.filter((function(e){return d.isIndividual(e.meta)&&+e.cells[1].slice(0,-1)>2}));var n=(function(e,t,r,n,i){var a=[],o="S"==n?"Senate":"G"==n?"Governor":"";"S"==n&&"00"!=i&&(o+=" (special)");a.push([o].concat(h(e.head)));for(var s=0;s<e.rows.length;s++){var l=e.rows[s];l.isPrimary=t,l.isOpenRace=r,void 0==l.meta.first&&"No"===l.meta.last?l.meta.party="no":void 0===l.meta.first&&"Yes"===l.meta.last&&(l.meta.party="yes");var u=g(l,t,r,e.rows.length);a.push([l,u].concat(h(l.cells)))}return a})(r.table,!1,!1,t.office,t.seat),i=y(n),a=void 0,o=r.table.rows.find((function(e){return e.winner_runoff})),s=r.table.rows.find((function(e){return e.meta.incumbent})),l="Race goes to a runoff.",u="*Incumbent";o&&s?a=(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-result_special-note");var r=document.createElement("span");return r.setAttribute("class","runoff"),e(r,[". ",arguments[0]]),e(t,[arguments[1],r]),t})(l,u):o?a=(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class","wpe-result_special-note");var r=document.createElement("span");return r.setAttribute("class","runoff"),e(r,[arguments[0]]),e(t,[r]),t})(l):s&&(a=(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class","wpe-result_special-note"),e(t,[arguments[0]]),t})(u));var c=void 0,p=r.progress?_.pct(r.progress.reporting,r.progress.total):null;return p&&(c=m(p)),(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[4]);var r=document.createElement("div");return r.setAttribute("class",arguments[0]),e(r,["\n          ",arguments[1],"\n          ",arguments[2],"\n          ",arguments[3],"\n      "]),e(t,["\n      ",r,"\n    "]),t})(D("table_live"),i,a,c,D("table_live-wrap"))}})(t,e)})).filter(Boolean);return a.push(l(t,n,"Key House races")),(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[4]);var r=document.createElement("div");r.setAttribute("class",arguments[0]),e(r,["\n            ",arguments[1],"\n          "]);var n=document.createElement("div");return n.setAttribute("class",arguments[2]),e(n,["\n            ",arguments[3],"\n          "]),e(t,["\n          ",r,"\n\n          ",n,"\n        "]),t})(u(D("state-highlight-table-compact")),i,u(D("state-highlight-table-standard"),D("n-tables-"+a.length)),a,u(D("state-highlight-table")))}})};var y=i({className:u(D(),D("senate-gov")),headCellTemplate:function(e){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("th");t.setAttribute("class",arguments[1]);var r=document.createElement("span");return e(r,[arguments[0]]),e(t,[r]),t})(e,u(D("cell"),D("header"),e))},rowTemplate:function(e,t){return null==e[0].meta.party&&(e[0].meta.party=""),(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,["\n        ",arguments[1],"\n      "]),t})(u(D("row"),D("row",e[0].meta.party.toLowerCase()),{"wpe-result_row_winner":e[0].winner,"wpe-result_row_winner_runoff":e[0].winner_runoff},e[0].isPrimary?"wpe-result_row_winner_primary":"wpe-result_row_general"),e.slice(1,e.length).map(t))},cellTemplate:function(e,t){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(u(D("cell"),e),e)}}).render,s=i({className:u(D(),D("house")),headCellTemplate:function(e,t){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("th");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(u(D("cell"),D("cell",t),D("header")),e)},cellTemplate:function(e,t){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("td");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(u(D("cell"),D("cell",t)),e)},rowTemplate:function(e,t){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(u(D("row"),D("winner",e.leaderIndex),(r={},n=D("called"),i=e.isCalled,n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r)),e.data.map(t));var r,n,i},headTemplate:function(e,t){return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("tr");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(u(D("row"),D("header")),e.data.map(t))}}).render;function g(e,t,r,n){var i=e.winner,a=e.meta.incumbent?"*":"",o=u("wpe-table_candidate",{"wpe-table_winner":i}),s=(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class","wpe-party-abbrev"),e(t,[arguments[0]]),t})(_.partyAbbrev(e.meta.party,"")),l=t?null:(function(){b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("span");return e.setAttribute("class","key-square"),e})();return i?(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");t.setAttribute("class",arguments[0]);var r=document.createElement("span");return r.setAttribute("class","fa fa-check"),e(t,[r," ",arguments[1]," ",arguments[2],arguments[3]," ",arguments[4]]),t})(o,e.meta.first,e.meta.last,a,s):(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,[arguments[1]," ",arguments[2]," ",arguments[3],arguments[4]," ",arguments[5]]),t})(o,l,e.meta.first,e.meta.last,a,s)}function l(e,t,r){var m=this,y=w.get(e,["live","results"]),g=w.get(e,["expectations","results"]),v=w.get(e,["live","candidates"]);if(!y||!v)return (function(){b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("class",arguments[0]),e})(D("table_live"));var n=t.map((function(e){var t=w.get(y,["H"==e.office?e.stateFips+e.seat:e.stateFips,e.office,e.seat,"G"]),r=w.get(g,["H"==e.office?e.stateFips+e.seat:e.stateFips+"-"+e.seat,e.office]);if(t){var n=t.candidates.find((function(e){return"GOP"===v[e.id].party})),i=t.candidates.find((function(e){return"Dem"===v[e.id].party}));if(n||i){var a=0,o=!1,s=!1;n&&i||(s=!0,o=1===t.candidates.length),t.winningParty?a="Dem"===t.winningParty?1:"GOP"===t.winningParty?2:0:o&&(a=n?2:1);var l=o||/won-(Dem|GOP)/.test(t.status),u="";u="H"===e.office?"00"==e.seat?"At-Large District":"District "+parseInt(t.seatNum):{S:"Senate",G:"Governor"}[e.office]+" "+("00"!==e.seat?"special":"");var c=r?r.party:null,p="Dem"==t.winningParty&&"R"==c||"GOP"==t.winningParty&&"D"==c,h=l&&p?(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.setAttribute("class",arguments[0]),e(t,["Flip"]),t})(D("flip")):null,d=void 0,f=void 0;return f=o?(d=i?"Unc.":"",n?"Unc.":""):s?(d=i?_.pct(i.voteCount,t.voteCount,"--"):"*",n?_.pct(n.voteCount,t.voteCount,"--"):"*"):(d=_.pct(i.voteCount,t.voteCount),_.pct(n.voteCount,t.voteCount)),{leaderIndex:a,isCalled:l,data:[(function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("span");return t.onclick=arguments[0],t.setAttribute("class","key-house-races-district-name"),e(t,[arguments[1]," ",arguments[2]]),t})(function(e){var t="district"+(1===e.length?"0"+e:e),r="key-race-"+t+"-G";wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.scrollToAnchor&&(document.getElementById(r)?wp_pb.StaticMethods.scrollToAnchor(r,{offset:100}):wp_pb.StaticMethods.scrollToAnchor(t,{offset:100}))}.bind(m,t.seatNum),u,h),d,f,o?"":_.pct(t.precinctsReporting,t.precinctsTotal)]}}x.warn("Neither democratic nor republican candidates found for "+fips)}})).filter(Boolean);n.unshift({data:[r,"D","R","% report."]});var i=s(n);return (function(){var e=b("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");t.setAttribute("class",arguments[2]);var r=document.createElement("div");return r.setAttribute("class",arguments[0]),e(r,["\n      ",arguments[1],"\n    "]),e(t,["\n    ",r,"\n  "]),t})(D("table_live"),i,D("table_live-wrap"))}}),{"../map/views/results-table":184,"../store":195,"../util/bem":198,"../util/format":205,"../util/log":211,"../util/progressbar":218,"../util/table":224,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"wapo-shared/race-helpers":263,"wapo-shared/util":264,"yo-yo":140}],257:[(function(f,e,t){"use strict";var m=f("yo-yo"),r=f("../util/bem"),D=f("classnames"),n=f("d3-collection"),S=f("d3-scale"),R=f("d3-selection"),s=(f("../util/evented"),f("../util/format"),f("./instance")),y=f("next-tick"),P=f("lodash.sortby"),i=f("../store"),E=f("lodash.throttle"),A=f("wapo-shared/util"),M=f("../util/is-mobile"),a=f("../util/tooltip"),I=f("../map/views/live-tooltip"),O=r("wpe-vs"),C={H:f("../../data/house-ratings-data.json"),S:f("../../data/senate-ratings-data.json").map((function(e){return e.seatID=e.fips+"-"+("undefined"==typeof e.seatNum?-e.senateClass:e.seatNum),e}))};function u(e){this.message=e,this.name="VulnerableSeatsException"}function o(e,t){return A.set(e,["instances",t.id],t)}i.model({namespace:"vulnerable-seats",state:{instances:{}},reducers:{initOrUpdate:function(e,t){return s.initOrUpdate(o(t,e))},init:function(e,t){return o(t,e)},destroy:s.destroy,ready:s.reducer((function(e,t){return A.set(t,"ready",!0)}))}}),e.exports=function(e,t,r,n,i){"H"!=(t=A.extend({horseshoeMode:!1,office:"H",showHeader:!0,headerTemplate:"Which <%= office %> seats are vulnerable",showBlurb:!0,blurbTemplate:"Democrats need a net gain of <%= netGain %> to win control of the <%= office %>. Here’s the result for each seat and how likely it is to flip, based on pre-race ratings from Cook Political Report. So far Democrats have <%= currentGain %>."},t)).office&&(t.horseshoeMode=!1);var a=l(t),o=s.send("vulnerable-seats",e,n);return o("init",t),o("ready"),i(null,{select:function(e){return A.get(e,["results"])},render:function(e,t){return (function(){var e=f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("class",arguments[0]),e(t,["\n          ",arguments[1],"\n        "]),t})(O(),a.render(e))}}),{createComponent:l,miniMustache:c,getText:L}};var l=function(b){var e=A.uniqueId(),o=!0,_=(function(){f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");var e=document.createElement("div");return e.setAttribute("id",arguments[0]),e.setAttribute("class",arguments[1]),e})("vulnerable-seats-"+e,O("container")),p={},g={},x=n.nest().key((function(e){return e.party})).sortKeys((function(e,t){return e.localeCompare(t)})).key((function(e){return e.ratingGroup})).sortKeys((function(e,t){var r={"Strong R":0,"Strong D":0,"Likely R":1,"Likely D":1,"Vulnerable R":2,"Vulnerable D":2};return r[e]-r[t]})).entries(C[b.office]);[["Strong D","Likely D","Vulnerable D"],["Strong R","Likely R","Vulnerable R"]].map((function(e,r){e.map((function(t,e){0===x[r].values.filter((function(e){return e.key==t})).length&&x[r].values.splice(e,0,{key:t,values:[]})}))}));var c=a({tableLimit:100}).render,h=(function(){f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})(),d=(function(){f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js");return document.createElement("div")})();function s(){R.select(_).html(null);var e=Math.min(_.getBoundingClientRect().width,598);return R.select(_).attr("data-size",e>=598?"xl":e>=520?"l":e>=400?"m":"s"),b.horseshoeMode&&e>=520?(function(e){var t=598==(e=598===e?598:Math.min(e,520)),r=e*(t?.58:.59),n={top:e/2+40,right:0,bottom:0,left:e/2},i=S.scaleLinear().domain([375,600]).range([2.3,4.2])(e),a=e-n.left-n.right,o=r-n.top-n.bottom,s=R.select(_).append("svg").attr("width",a+n.left+n.right).attr("height",o+n.top+n.bottom).attr("data-chart-type","horseshoe").append("g").attr("transform","translate("+n.left+", "+n.top+")");s.append("circle").attr("class",O("background-arc")).attr("cx",0).attr("cy",0).attr("r",t?213:185);var l=240/435*Math.PI;return s.append("line").attr("class",O("domain")).attr("x1",Math.cos(l)*(t?150:100)).attr("x2",276*Math.cos(l)).attr("y1",-Math.sin(l)*(t?150:100)).attr("y2",276*-Math.sin(l)),s.append("text").attr("class",D(O("party-header"),O("party-D"))).attr("x",(t?50:2)-a).attr("y",15-n.top).text("DEMOCRAT-HELD"),s.append("text").attr("class",D(O("party-header"),O("party-D"))).attr("x",(t?50:2)-a).attr("y",15-n.top+16).text("SEATS"),s.append("text").attr("class",O("party-header")).attr("class",D(O("party-header"),O("party-R"))).attr("x",a-(t?50:2)).attr("y",15-n.top).text("REPUBLICAN-HELD"),s.append("text").attr("class",O("party-header")).attr("class",D(O("party-header"),O("party-R"))).attr("x",a-(t?50:2)).attr("y",15-n.top+16).text("SEATS"),s.append("text").attr("class",O("group-header")).attr("x",t?-105:-86).attr("y",(t?60:55)-n.top+0).text("Vulnerable D"),s.append("text").attr("class",O("group-number")).attr("x",t?-105:-86).attr("y",(t?60:55)-n.top+16).text(C[b.office].filter((function(e){return"Vulnerable D"===e.ratingGroup})).length),s.append("text").attr("class",O("group-header")).attr("x",t?55:45).attr("y",(t?50:45)-n.top+0).text("Vulnerable R"),s.append("text").attr("class",O("group-number")).attr("x",t?55:45).attr("y",(t?50:45)-n.top+16).text(C[b.office].filter((function(e){return"Vulnerable R"===e.ratingGroup})).length),s.append("text").attr("class",O("group-header")).attr("x",t?-175:-150).attr("y",(t?95:85)-n.top+0).text("Likely D"),s.append("text").attr("class",O("group-number")).attr("x",t?-175:-150).attr("y",(t?95:85)-n.top+16).text(C[b.office].filter((function(e){return"Likely D"===e.ratingGroup})).length),s.append("text").attr("class",O("group-header")).attr("x",t?175:155).attr("y",(t?95:90)-n.top+0).text("Likely R"),s.append("text").attr("class",O("group-number")).attr("x",t?175:155).attr("y",(t?95:90)-n.top+16).text(C[b.office].filter((function(e){return"Likely R"===e.ratingGroup})).length),s.append("text").attr("class",O("group-header")).attr("x",t?-260:-230).attr("y",(t?175:160)-n.top+0).text("Strong D"),s.append("text").attr("class",O("group-number")).attr("x",t?-260:-230).attr("y",(t?175:160)-n.top+16).text(C[b.office].filter((function(e){return"Strong D"===e.ratingGroup})).length),s.append("text").attr("class",O("group-header")).attr("x",t?260:230).attr("y",(t?185:165)-n.top+0).text("Strong R"),s.append("text").attr("class",O("group-number")).attr("x",t?260:230).attr("y",(t?185:165)-n.top+16).text(C[b.office].filter((function(e){return"Strong R"===e.ratingGroup})).length),s.append("text").attr("class",O("net-gain-title")).attr("x",0).attr("y",o-(t?70:60)).text("Net gain so far"),{chartType:"horseshoe",svg:s,width:a,height:o,margin:n,radius:i,isXL:t}})(e):(function(e){var a=Math.round(S.scaleLinear().domain([600,375]).range("H"==b.office?[7,14]:[4,8])(e)),r=0,t=x.map((function(e){return e.values.map((function(e){var t=Math.ceil(e.values.length/a);return r+=t,t}))})),n={top:30,right:1,bottom:48,left:1},o=e-n.left-n.right,i=o/r,s=S.scaleLinear().domain([598,375]).range("H"==b.office?[9.7,8]:[29.35,14])(e),l=i-6*s/r,u=s/l,c=l*a,p=R.select(_).append("svg").attr("width",o+n.left+n.right).attr("height",c+n.top+n.bottom).attr("data-chart-type","flat").append("g").attr("transform","translate("+n.left+", "+n.top+")"),h=p.append("pattern").attr("class",D(O("hatch"),O("hatch-r"))).attr("id","republican-hatch").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(90)").attr("width",10).attr("height",10);h.append("rect").attr("width",10).attr("height",10).style("fill","#9e3b34"),h.append("path").attr("d","M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2").style("stroke","#dc5147");var d=p.append("pattern").attr("class",D(O("hatch"),O("hatch-d"))).attr("id","democrat-hatch").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(90)").attr("width",10).attr("height",10);d.append("rect").attr("width",10).attr("height",10),d.append("path").attr("d","M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2");var f=(t[0][0]+t[0][1]+t[0][2])*l+3*s;p.append("line").attr("class",O("domain")).attr("x1",f).attr("x2",f).attr("y1",10-n.top).attr("y2",c),p.append("text").attr("class",D(O("party-header"),O("party-D"))).attr("x",f-10).attr("y",20-n.top).text("DEMOCRAT-HELD SEATS"),p.append("text").attr("class",D(O("party-header"),O("party-R"))).attr("x",f+10).attr("y",20-n.top).text("REPUBLICAN-HELD SEATS");var m=[{key:"Strong D",party:"D",labels:"S"==b.office?o<500?["Safe/","No race"]:["Safe/no race"]:["Safe"],x0:0,x1:t[0][0],labelPercent:0,labelAnchor:"start"},{key:"Likely D",party:"D",labels:["Likely"],x0:t[0][0]+u,x1:t[0][0]+t[0][1]+u,labelPercent:T([280,600],[.18,.25],e),labelAnchor:"middle"},{key:"Vulnerable D",party:"D",labels:["Vulnerable"],x0:t[0][0]+t[0][1]+2*u,x1:t[0][0]+t[0][1]+t[0][2]+2*u,labelPercent:T([280,600],[.38,.4],e),labelAnchor:"middle",leaderType:"straight"},{key:"Strong R",party:"R",labels:"S"==b.office?o<500?["Safe/","No race"]:["Safe/no race"]:["Safe"],x0:0,x1:t[1][0],labelPercent:1,labelAnchor:"end"},{key:"Likely R",party:"R",labels:["Likely"],x0:t[1][0]+u,x1:t[1][0]+t[1][1]+u,labelPercent:T([280,600],[.825,.7],e),labelAnchor:"middle"},{key:"Vulnerable R",party:"R",labels:["Vulnerable"],x0:t[1][0]+t[1][1]+2*u,x1:t[1][0]+t[1][1]+t[1][2]+2*u,labelPercent:T([280,600],[.65,.55],e),labelAnchor:"middle",leaderType:"straight"}],y=p.selectAll("."+O("group-label")).data(m).enter().append("g").attr("class",O("group-label"));y.selectAll("."+O("group-header")).data((function(t){return t.labels.map((function(e){return{labelPercent:t.labelPercent,labelAnchor:t.labelAnchor,label:e}}))})).enter().append("text").attr("class",O("group-header")).attr("x",(function(e){return o*e.labelPercent})).attr("y",(function(e,t){return c+28+14*t})).text((function(e){return e.label})).style("text-anchor",(function(e){return e.labelAnchor})),y.append("text").attr("class",O("group-number")).attr("x",(function(e){return o*e.labelPercent})).attr("y",(function(e){return c+28+14*e.labels.length})).text((function(t){return C[b.office].filter((function(e){return e.ratingGroup==t.key})).length})).style("text-anchor",(function(e){return e.labelAnchor})),y.append("line").attr("class",O("group-leader-line")).attr("x1",(function(e){return"R"==e.party?o-e.x0*l:e.x0*l})).attr("x2",(function(e){return"R"==e.party?o-e.x1*l:e.x1*l})).attr("y1",c+2).attr("y2",c+2),y.append("path").attr("class",O("group-leader-line")).attr("d",(function(e){var t=(e.x0+e.x1)/2,r=t*l,n=o*e.labelPercent+("start"==e.labelAnchor?14:"end"==e.labelAnchor?-14:0);return"straight"==e.leaderType?"\n            M "+("R"==e.party?o-r:r)+" "+(c+2)+"\n            L "+("R"==e.party?o-r:r)+" "+(c+14)+"\n          ":"\n            M "+("R"==e.party?o-r:r)+" "+(c+2)+"\n            L "+("R"==e.party?o-r:r)+" "+(c+10)+"\n            L "+n+" "+(c+10)+"\n            L "+n+" "+(c+14)+"\n          "}));var g=p.append("g");if("S"==b.office){var v=[C[b.office].filter((function(e){return e.notUpForReelection&&"D"==e.party})).length,C[b.office].filter((function(e){return e.notUpForReelection&&"R"==e.party})).length];p.selectAll("."+O("not-up")).data(v).enter().append("path").attr("class",O("not-up")).attr("d",(function(r,e){var n=0===e?"D":"R",i=r%a||1/0,t=new Array(a).fill().map((function(e,t){return[(Math.ceil(r/a)-(t>=i?1:0))*l,t*l]}));return i<1/0?t.splice(i,0,[t[i][0],t[i][1]-l]):t.splice(t.length-1,0,[t[t.length-1][0],t[t.length-1][1]]),t.reduce((function(e,t,r){return"D"==n?e+" L"+t[0]+","+(t[1]+l):e+" L"+(o-t[0])+","+(t[1]+l)}),"M"+("D"==n?t[0][0]:o-t[0][0])+","+t[0][1])}))}return{chartType:"flat",svg:p,gSeats:g,width:o,height:c,margin:n,BOXES_PER_COL:a,boxWidth:l,colsPerGroup:t,groupPaddingBoxUnits:u}})(e)}function l(){return"horseshoe"==p.chartType?(function(){var e=p,t=e.svg,r=(e.width,e.height),h=(e.margin,e.radius),n=e.isXL,i=t.selectAll(".party").data(x);i.enter().append("g").attr("class","party");var a=(i=t.selectAll(".party")).selectAll(".group").data((function(e){return e.values}));a.enter().append("g").attr("class","group"),a=i.selectAll(".group");var d={"Strong R":16,"Likely R":2,"Vulnerable R":7,"Strong D":18,"Likely D":2,"Vulnerable D":1},f={"Strong R":[0,1,2,3,4,5,6,7,9,10],"Likely R":[4,10],"Vulnerable R":[1,4,7],"Strong D":[0,2,3,4,6,8,9,10,11],"Likely D":[0,1],"Vulnerable D":[]},m={"Strong R":0,"Likely R":-51*Math.PI/180,"Vulnerable R":-72*Math.PI/180,"Strong D":180*Math.PI/180,"Likely D":233*Math.PI/180,"Vulnerable D":248*Math.PI/180},y=[0,0];var o=a.selectAll(".seat").data((function(e){return (function(l){for(var e=d[l[0].ratingGroup],t=f[l[0].ratingGroup],u=m[l[0].ratingGroup],c=u,r=0,n=0,i=0,a=0,o=-1,s=[];r<l.length;r++)s[r]={},l[r].i=r,i>e?(s[r].row=++a,s[r].col=o=0,i=0,t.indexOf(n)>=0&&--e,++n):(s[r].row=a,s[r].col=++o),++i;s.map((function(e){var t=2*h+2,r=(26-e.row)*t;if(0===e.col)c=u;else{var n=t,i=r,a=Math.acos((2*Math.pow(i,2)-Math.pow(n,2))/(2*Math.pow(i,2)));"R"===l[0].party?c-=a:c+=a}var o=y[0]+Math.cos(c)*r,s=y[1]+Math.sin(c)*r;return e.x=o,e.y=s,e}));var p=P(s,[function(e){return-e.col},function(e){return e.row}]);return l.map((function(e,t){return e.row=p[t].row,e.col=p[t].col,e.x=p[t].x,e.y=p[t].y,e}))})(e.values)}));o.enter().append("circle").attr("class","seat").attr("data-i",(function(e){return e.i})).attr("data-id",(function(e){return e.row+"\t"+e.col})).attr("transform",(function(e){return"translate("+e.x+", "+e.y+")"})).attr("cx",0).attr("cy",0).attr("r",h),(o=a.selectAll(".seat")).attr("data-race-status",(function(e){return N(g,b.office,e)})),M()||o.on("mousemove",(function(e){if(!e.notUpForReelection){var t=R.mouse(_);v(e.fips,e.party,e.seatNum,g,t),R.select(this).attr("data-hover","true")}})).on("mouseout",(function(e){w(),R.select(this).attr("data-hover","false")}));var s=k(g,b.office,C[b.office]),l=t.selectAll("."+O("net-gain-value")).data([{party:s.netGain>0?"D":s.netGain<0?"R":"",gain:s.absGain}]);l.enter().append("text").attr("class",O("net-gain-value")).attr("x",0).attr("y",r-(n?40:30)),(l=t.selectAll("."+O("net-gain-value"))).merge(l).attr("data-party",(function(e){return e.party})).text((function(e){return e.party+"+"+e.gain+" seat"+(1===e.gain?"":"s")}))})():(function(){var e=p,t=(e.svg,e.gSeats),o=e.width,s=(e.height,e.margin,e.BOXES_PER_COL),l=e.boxWidth,u=e.colsPerGroup,c=e.groupPaddingBoxUnits;if("undefined"!==typeof t){var r=t.selectAll(".party").data(x);r.enter().append("g").attr("class","party");var n=(r=t.selectAll(".party")).selectAll(".group").data((function(e){return e.values}));n.enter().append("g").attr("class","group");var i=(n=r.selectAll(".group")).selectAll(".seat").data((function(e){return e.values}),(function(e){return"S"==b.office?e.seatID:e.fips}));i.enter().append("rect").attr("class","seat").attr("x",(function(e,t){var r="D"==e.party?0:1,n=0;"Likely D"==e.ratingGroup||"Likely R"==e.ratingGroup?n=u[r][0]+c:"Vulnerable D"!=e.ratingGroup&&"Vulnerable R"!=e.ratingGroup||(n=u[r][0]+u[r][1]+2*c);var i=Math.floor(t/s)+n,a=i*l;return"R"==e.party?o-a-l:a})).attr("y",(function(e,t){return t%s*l})).attr("width",l).attr("height",l),(i=n.selectAll(".seat")).attr("data-race-status",(function(e){return N(g,b.office,e)})).filter((function(e){var t=N(g,b.office,e);return"not-up-Dem"==t||"not-up-GOP"==t})).attr("fill",(function(e){var t=N(g,b.office,e);return"not-up-Dem"==t?"url(#democrat-hatch)":"not-up-GOP"==t?"url(#republican-hatch)":void 0})).style("fill",(function(e){var t=N(g,b.office,e);return"not-up-Dem"==t?"url(#democrat-hatch)":"not-up-GOP"==t?"url(#republican-hatch)":void 0})),M()||i.on("mouseover",(function(e){R.select(this).raise()})).on("mousemove",(function(e){if(!e.notUpForReelection){var t=R.mouse(_);v(e.fips,e.party,e.seatNum,g,t),R.select(this).attr("data-hover","true")}})).on("mouseout",(function(e){w(),R.select(this).attr("data-hover","false")}))}})()}function v(e,t,r,n,i){var a,o,s,l=I(b.office,n,e,"G",r),u=A.extend({id:e},l);u.title?(m.update(d,c(u)),o="R"==t,s=(function(){var e=f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("style",arguments[0]),t.setAttribute("class",arguments[1]),e(t,["\n      ",arguments[2],"\n    "]),t})("top:"+((a=i)[1]+10)+"px; left:"+(a[0]-(o?300:0)+10)+"px;",O("tip-wrap"),d),m.update(h,s)):w()}function w(){m.update(h,(function(){var e=f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div");return t.setAttribute("style","display:none;"),t.setAttribute("class",arguments[0]),e(t,[arguments[1]]),t})(O("tip-wrap"),d))}function u(e,t,r){var n=A.get(r,e);if(n&&n.candidates.length&&n.candidates.sort((function(e,t){return e.voteCount>t.voteCount?-1:e.voteCount<t.voteCount?1:0}))[0].id===t){var i=e.concat(["status"]);r=A.set(r,i,n.status.replace(/Ind/g,"Dem"))}return r}return{render:function(e){g=u(["live","results","50","S","00","G"],"1445",g=u(["live","results","23","S","00","G"],"62418",g=e));var t=b.showHeader?L(g,b.office,b.headerTemplate):null,r=b.showBlurb?L(g,b.office,b.blurbTemplate):null,n=("S"==b.office&&(function(){var e=f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("p");t.setAttribute("class",arguments[0]),e(t,["\n          Democratic totals include two Independents who caucus with the Democrats.\n        "])})(O("note")),[]);"S"==b.office&&n.push("Democratic totals include two Independents who caucus with the Democrats."),C[b.office].filter((function(e){return"below-reporting-threshold"==N(g,b.office,e)})).length>0&&n.push("Results with fewer than 10 percent of precincts reporting are not shown.");var i=(function(){var e=f("/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js"),t=document.createElement("div"),r=document.createElement("p");r.setAttribute("class",arguments[0]),e(r,[arguments[1]]);var n=document.createElement("p");n.setAttribute("class",arguments[2]),e(n,[arguments[3]]);var i=document.createElement("div");i.setAttribute("data-ds-widget","d3"),e(i,["\n            ",arguments[4],"\n            ",arguments[5],"\n          "]);var a=document.createElement("div");a.setAttribute("class",arguments[7]);var o=document.createElement("p");return e(o,[arguments[6]]),e(a,["\n            ",o,"\n          "]),e(t,["\n          ",r,"\n          ",n,"\n          ",i,"\n          ",a,"\n        "]),t})(O("header"),t,O("blurb"),r,o?_:null,o?h:null,n.map((function(e){return e+" "})),O("notes"));if(o){o=!1;var a=function(){p=s(),l()};y(a),window.addEventListener("resize",E(a))}else l();return i}}};function T(e,t,r){return S.scaleLinear().domain(e).range(t)(r)}function c(e,n){return e.replace(/<%=\s*(.+?)\s*%>/g,(function(e,t){var r=n[t];if("undefined"!==typeof r)return r;throw new u("Unexpected variable: "+t)}))}function k(t,r,e){var n=e.filter((function(e){return"R"==e.party&&"won-Dem"==A.get(t,["live","results",e.fips,r,e.seatNum,"G","status"])})).length-e.filter((function(e){return"D"==e.party&&"won-GOP"==A.get(t,["live","results",e.fips,r,e.seatNum,"G","status"])})).length;return{netGain:n,absGain:Math.abs(n)}}function L(e,t,r){var n,i,a,o,s={netGain:"H"==t?"23 seats":"2 seats",office:"H"==t?"House":"Senate",currentGain:(n=e,i=t,a=C[t],o=k(n,i,a),0===o.netGain?"gained no seats":(o.netGain>0?"gained":"lost")+" "+o.absGain+" seat"+(1!==o.absGain?"s":""))},l=void 0;try{l=c(r,s)}catch(e){if(!(e instanceof u))throw e;l=""}return l}function N(e,t,r){if("S"==t&&r.notUpForReelection)return"R"==r.party?"not-up-GOP":"D"==r.party?"not-up-Dem":"";var n=A.get(e,["live","results",r.fips,t,r.seatNum,"G"]);return n&&n.reportingOverThreshold?n.status:"below-reporting-threshold"}}),{"../../data/house-ratings-data.json":4,"../../data/senate-ratings-data.json":8,"../map/views/live-tooltip":182,"../store":195,"../util/bem":198,"../util/evented":203,"../util/format":205,"../util/is-mobile":209,"../util/tooltip":228,"./instance":242,"/home/circleci/project/node_modules/yo-yoify/lib/appendChild.js":142,classnames:22,"d3-collection":88,"d3-scale":93,"d3-selection":95,"lodash.sortby":111,"lodash.throttle":112,"next-tick":119,"wapo-shared/util":264,"yo-yo":140}],258:[(function(e,t,r){"use strict";var g=e("object-path"),v=e("./race-helpers");t.exports=function(o,s,n){if("P"===n.officeID&&n.candidates.forEach((function(e){var t=s[e.id].party;if(v.MAJOR_PARTIES.indexOf(t)>-1){var r=["P","voteCount-"+t],n=g.get(o,r,0);g.set(o,r,n+e.voteCount)}var i=["P","voteCount-total"],a=g.get(o,i,0);g.set(o,i,a+e.voteCount)})),n.isFinished&&"P"===n.officeID){var i=0;if(n.candidates.forEach((function(e){if("P"===n.officeID&&e.electWon){var t=["P","won-"+s[e.id].party],r=g.get(o,t,0);g.set(o,t,r+e.electWon),i+=e.electWon}})),!i&&n.singleLeader&&s[n.singleLeader]){var e=["P","won-"+s[n.singleLeader].party],t=g.get(o,e,0);g.set(o,e,t+v.getElectoral(n.statePostal))}}else if(("DC"!==n.statePostal||"H"!==n.officeID)&&("DC"!==n.statePostal||"S"!==n.officeID)){var r=n.reportingOverThreshold?n.status:"below-reporting-threshold",a="P"===n.officeID?v.getElectoral(n.statePostal):1,l=[n.officeID,r],u=n.statePostal,c=+n.seatNum;if("S"===n.officeID&&"Ind"===n.winningParty&&("ME"===u||"VT"===u)&&0===c){var p=s[n.leaders[0]],h=p.first+" "+p.last;"Angus King"!==h&&"Bernie Sanders"!==h||(l=[n.officeID,r.replace(/Ind/g,"Dem")])}if("LA"===n.statePostal||"MS"===n.statePostal&&"01"===n.seatNum&&"S"===n.officeID){for(var d="",f=0,m=0;m<n.candidates.length;m++)if("R"===n.candidates[m].winner&&s[n.candidates[m].id].party!==d){if(++f>1)break;d=s[n.candidates[m].id].party}1===f&&(n.status="won-"+d)}var y=g.get(o,l,0);g.set(o,l,y+a)}}}),{"./race-helpers":263,"object-path":122}],259:[(function(e,t,r){t.exports={AL:9,AK:3,AZ:11,AR:6,CA:55,CO:9,CT:7,DE:3,DC:3,FL:29,GA:16,HI:4,ID:4,IL:20,IN:11,IA:6,KS:6,KY:8,LA:8,ME:4,MD:10,MA:11,MI:16,MN:10,MS:6,MO:10,MT:3,NE:5,NV:6,NH:4,NJ:14,NM:5,NY:29,NC:15,ND:3,OH:18,OK:7,OR:7,PA:20,RI:4,SC:9,SD:3,TN:11,TX:38,UT:6,VT:3,VA:13,WA:12,WV:5,WI:10,WY:3}}),{}],260:[(function(e,t,r){arguments[4][136][0].apply(r,arguments)}),{dup:136}],261:[(function(e,t,r){t.exports={"01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY",60:"AS",64:"FM",66:"GU",68:"MH",69:"MP",70:"PW",72:"PR",74:"UM",78:"VI"}}),{}],262:[(function(e,t,r){"use strict";var p=e("./util"),h=e("./race-helpers"),d=.02;function l(e,t){var r=e.seatNum;if(!r&&0!==r)return t.districtId=t.reportingUnitUID,void(t.seatNum=-1);"number"===typeof r&&(r=String(r)),1===r.length&&(r="0"+r),t.districtId=h.getStateFips(t.statePostal)+""+r,t.seatNum=e.seatNum}function f(e,t){return"P"===e.officeID||t?["results",e.id,"P.2016"]:"S"===e.officeID?["results",e.id,"S.2012"]:"H"===e.officeID?["results",e.id,"H.2016"]:void 0}function m(e,t,r,n){var i=void 0,a=void 0;if(n.demVotes&&n.repVotes&&(i=n.demVotes,a=n.repVotes),t&&r&&i&&a){var o=t/e.voteCount-i/n.voteCount,s=r/e.voteCount-a/n.voteCount,l=void 0;"P"===n.officeID?l="shift.P.2016":"S"===n.officeID?l="shift.S.2012":"H"===n.officeID&&(l="shift.H.2016"),e[l]=o>0||s>0?o>s?-o:s:null}}function y(e){var t=null;if("string"===typeof e){t="Ind";var r=e.toLowerCase();if("rep"===r)t="GOP";else for(var n=0;n<h.MAJOR_PARTIES.length;++n){var i=h.MAJOR_PARTIES[n];if(i.toLowerCase()===r){t=i;break}}}return t}t.exports=function(e,t,r,n){if(t.raceType&&!(t.raceType.toLowerCase().indexOf("caucus")>-1||t.raceType.toLowerCase().indexOf("primary")>-1||t.raceType.toLowerCase().indexOf("general")>-1||t.raceType.toLowerCase().indexOf("ballot")>-1||t.raceType.toLowerCase().indexOf("special")>-1||t.raceType.toLowerCase().indexOf("runoff")>-1))return null;if(-1!=["H","A"].indexOf(t.officeID)&&"state"!==r.level)return null;r.statePostal=r.statePostal||t.statePostal,r.officeID=t.officeID,r.raceId=t.raceId||t.raceID;var i=p.extend({},r);"H"===t.officeID&&(i.level="district",l(t,i));"Y"===t.officeID&&(i.level="district",l(t,i));"0W"!==t.officeID&&"0I"!=t.officeID||(i.level="district",l(t,i));"S"===t.officeID||"G"===t.officeID||"P"===t.officeID?(i.parentRaceId=h.getStateFips(r.statePostal),t.seatNum="00","S"===t.officeID&&("2020"!==t.seatName&&-1==["2018-11-06-MN-25151","2018-11-06-MS-27182"].indexOf(t.raceUID)||(t.seatNum="01")),l(t,i)):"H"===t.officeID?i.parentRaceId=i.districtId:"A"===t.officeID?(i.parentRaceId=h.getStateFips(r.statePostal),t.seatNum="00",l(t,i)):"0C"===t.officeID||"0S"===t.officeID?(i.level="state",i.parentRaceId=h.getStateFips(r.statePostal),t.seatNum="00",l(t,i)):i.parentRaceId="00";i.seatNum&&1==i.seatNum.length&&(i.seatNum="0"+i.seatNum);i.seatNum||(i.seatNum="00");i.numWinners=t.numWinners||1,i.raceTypeID=t.raceTypeID,i.candidates&&i.candidates.length>0&&!i.candidates[0].hasOwnProperty("ballotOrder")&&(i.candidates=i.candidates.sort((function(e,t){return e.last>t.last})).map((function(e,t){return e.ballotOrder=t+1,e})));i.candidates.sort((function(e,t){return t.voteCount-e.voteCount})),(function(t,e){var r="H"===t.officeID&&"district"===t.level||"state"===t.level,n=t.candidates.filter(g),i=n.length&&n||t.candidates,a=i.length&&b(t.candidates)&&!h.isPrimary(t),o=r&&p.find(i,(function(e){return"X"===e.winner})),s=r&&i.filter((function(e){return"R"===e.winner})),l=s.length===e.numRunoff,u=b(s),c=a||o||l&&u;t.id="district"===t.level?t.districtId:"state"===t.level&&-1!==["G","S","A","M","0D","0C","0S"].indexOf(t.officeID)?h.getStateFips(t.statePostal):"FIPSCode"===t.level?t.fipsCode:"subunit"===t.level?t.reportingUnitUID:(t.reportingUnitUID||"unknown").trim(),t.voteCount=p.sum(t.candidates,v),t.reportingOverThreshold=Boolean(c||h.isReporting(t,{reportingThreshold:.1})),t.reporting=Boolean(c||s||h.getReportingPct(t)>=0||h.regionHasVotes(t)),t.isFinished=r?Boolean(c):+t.precinctsReporting>=+t.precinctsTotal,t.reporting&&t.isFinished&&1===i.length&&h.isPrimary(t)&&(o=!0);t.reporting&&(t.leaderVotes=o?o.voteCount:(p.max(i,v)||{voteCount:0}).voteCount,t.nonLeaderVotes=t.voteCount-(t.leaderVotes||0));t.leaders=i.filter((function(e){return o?"X"===e.winner:e.voteCount&&e.voteCount===t.leaderVotes})).map((function(e){return e.candidateUID})),t.singleLeader=!(t.leaders.length>1)&&t.leaders[0],t.winningParty=y(o&&o.party||l&&u&&s[0].party||a&&!h.isPrimary(t)&&o&&i[0].party||t.singleLeader&&p.find(i,(function(e){return e.candidateUID===t.singleLeader})).party||null),t.isClose=t.reporting&&!t.isFinished&&t.singleLeader&&t.marginOfWinVotes&&t.marginOfWinPercent<d,t.isTied=t.reporting&&t.leaderVotes>0&&t.leaders.length>t.numWinners,!t.isTied&&t.leaders.length<i.length&&(t.marginOfWinVotes=t.leaderVotes-i[t.leaders.length].voteCount,t.marginOfWinPercent=t.marginOfWinVotes/t.voteCount);t.isFinished&&t.winningParty?"66485"===t.leaders[0]||"63538"===t.leaders[0]?t.status="won-second-"+t.winningParty:t.status="won-"+t.winningParty:t.winningParty?"66485"===t.leaders[0]||"63538"===t.leaders[0]?t.status="leading-second-"+t.winningParty:t.status="leading-"+t.winningParty:t.reporting&&t.leaderVotes>0&&t.leaders.length>1?t.isFinished?t.status="tied-finished":t.status="tied-in-progress":t.reporting&&0===t.voteCount?t.status="no-votes":t.status=t.reporting?"unknown":"not-yet-reporting"})(i,t);for(var a=(s=i,s.candidates.slice().filter((function(e){return h.isIndividual(e)}))),o=0;o<a.length;++o)a[o]=u(e,a[o]);var s;return i.candidates=a,i},t.exports.attachDistrictId=l,t.exports.setHistoricalFields=function(e,t,r){if(!e||!e.reporting)return;if(e.precinctsReporting/e.precinctsTotal<.1)return;var n=p.get(r,f(e));if(!n)return;var i=e.winningParty&&("Dem"===e.winningParty||"GOP"===e.winningParty)&&n.winningParty&&("Dem"===n.winningParty||"GOP"===n.winningParty),a=i&&e.winningParty!==n.winningParty;e.flipped=a&&e.isFinished,n.marginOfWinPercent&&(e.previousMargin=n.marginOfWinPercent,e.marginOfWinPercent&&i&&a&&(e.flippedMargin=e.previousMargin+e.marginOfWinPercent));var o=void 0,s=void 0;if(e.candidates)for(var l=0;l<e.candidates.length;++l){var u=p.get(t,e.candidates[l].id);if("Dem"===u.party?o=e.candidates[l].voteCount:"GOP"===u.party&&(s=e.candidates[l].voteCount),o&&s)break}m(e,o,s,n);var c=p.get(r,f(e,!0));m(e,o,s,c)},t.exports.normalizeParty=y;function u(e,t){if(!e[t.candidateUID]){var r=y(t.party);"28529"===t.candidateUID&&(r="GOP"),"63538"===t.candidateUID&&(r="GOP"),"66877"===t.candidateUID&&(r="Ind"),"66875"===t.candidateUID&&(r="Dem"),"67552"===t.candidateUID&&(r="Dem"),e[t.candidateUID]={id:t.candidateUID,first:t.first,last:t.last,party:r,incumbent:Boolean(t.incumbent),ballotOrder:t.ballotOrder}}var n={id:t.candidateUID,voteCount:t.voteCount};return"X"===t.winner||"R"===t.winner?n.winner=t.winner:n.winner=!1,"number"===typeof t.electWon&&(n.electWon=t.electWon),100008==+n.id&&(n.last="Total Write-Ins"),n}function g(e){return h.isIndividual(e)||h.isUncommitted(e)&&e.voteCount>0}function v(e){return e.voteCount||0}function b(e){return e.length&&e[0].party&&Boolean(e.reduce((function(e,t){return e.party===t.party?e:NaN}),e[0]))}}),{"./race-helpers":263,"./util":264}],263:[(function(e,t,r){"use strict";var n=e("./util"),i=e("./data/states-by-fipscode"),a=e("./data/state-meta"),o=e("./data/electoral-by-statepostal"),s={};Object.keys(i).forEach((function(e){var t=i[e];s[t]=e}));var l={};Object.keys(a).forEach((function(e){var t=e.toUpperCase(),r=s[t];l[t]=l[r]=a[e].abbreviation})),l[11]="D.C.",l.DC="D.C.";var u={president:"P",house:"H",senate:"S",governor:"G","attorney-general":"A","lt-governor":"L","state-house":"Y",mayor:"M",delegate:"0D",councilchair:"0C",dccouncil:"0W",dcsenator:"0S",ballot:"0I"};t.exports.officeIDs=u;t.exports.officeNames={P:"president",H:"house",S:"senate",G:"governor",L:"lt-governor",Y:"state-house",A:"attorney-general",M:"mayor","0D":"delegate","0C":"councilchair","0W":"dccouncil","0S":"dcsenator","0I":"ballot"};t.exports.MAJOR_PARTIES=["GOP","Dem","Grn","Lib"];var c=/[Pp]recinct|\d+-\d+/,p={isValid:function(e){return"string"===typeof e&&(!isNaN(+e)||c.test(e))},isNatl:function(e){return"00"===e},isState:function(e){return i.hasOwnProperty(e)},isDistrict:function(e){return 4===e.length},isCounty:function(e){return 5===e.length}};function h(e){if(e=2===e.length?e:e.slice(0,2),!i.hasOwnProperty(e))throw new Error("State postal code not found");return i[e]}function d(e){var t=s[e];if(!t)throw new Error("State fips not found for "+e);return t}t.exports.fips=p,t.exports.stateFips=Object.keys(i),t.exports.allRaceTypes=["R","D","G","X"],t.exports.getStatePostal=h,t.exports.getStateFips=d;var f=function(e,t,r){var n=u[r];if(!n)throw new Error("Not a valid office name");return"house"===r?e.find((function(e){return e.officeID===n&&e.districtId===t})):e.find((function(e){return e.officeID===n&&e.statePostal===h(t)}))};function m(e,t){return"undefined"===typeof t&&(t=""),n.get(a,[e.toLowerCase(),"name"],t)}function y(e){return l[e.toUpperCase()]}function g(e){return m(e).toLowerCase().replace(" ","-")}t.exports.getRace=f,t.exports.stateNameByPostal=m,t.exports.getElectoral=function(e){return o[e.toUpperCase()]},t.exports.getAbbrev=y,t.exports.getStateSlug=g,t.exports.getStatePageUrl=function(e){return"https://www.washingtonpost.com/election-results/"+g(e)},t.exports.getResult=function(e,t,r){var n=f(e.results,t,r);return n?_(n,t):null};var v=function(e){return e.meta||{}};t.exports.getRaceMeta=v;var b=function(e){return e.reportingUnits||[]};function _(e,t){var r=void 0;if(p.isState(t)?r=b(e).find((function(e){return"state"===e.level})):p.isDistrict(t)?r=b(e).find((function(e){return e.districtId===t})):p.isCounty(t)&&(r=b(e).find((function(e){return e.fipsCode===t}))),!r)throw new Error("Could not find reporting unit");return r}t.exports.getReportingUnits=b,t.exports.getReportingUnit=_;var x=["leading-Dem","won-Dem","leading-GOP","won-GOP"];t.exports.isEmptyAggregate=function(e){for(var t=0;t<x.length;++t)if(e[x[t]])return!1;return!0},t.exports.getReportingUnitId=function(e){return"district"===e.level?e.districtId:"state"===e.level?d(e.statePostal):e.fipsCode};t.exports.getRegionName=function(e){return n.get(e,"reportingunitName","")};function w(e){return 0===+e.precinctsTotal?0:+e.precinctsReporting/+e.precinctsTotal}t.exports.isHistorical=function(e){return v(e).isHistorical},t.exports.isWinner=function(e){var t=n.get(e,"winner",!1);return!!t&&("X"===t||"R"===t)},t.exports.getReportingPct=w,t.exports.isReporting=function(e,t){var r=t&&t.reportingThreshold||0;return w(e)>r},t.exports.isIndividual=function(e){return+(e&&(e.candidateUID||e.id)?e.candidateUID||e.id:e)<1e5},t.exports.isAggregateWriteIn=function(e){return 100004===+(e&&e.candidateUID?e.candidateUID:e)},t.exports.isUncommitted=function(e){return 100004===+(e&&e.candidateUID?e.candidateUID:e)},t.exports.regionHasVotes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.candidates&&e.candidates.some((function(e){return e.voteCount>0}))};var D=["R","D","X"];function S(e){return"string"===typeof e||e instanceof String?-1!==D.indexOf(e):-1!==D.indexOf(n.get(e,"raceTypeID",""))}t.exports.isPrimary=S,t.exports.makeRaceID=function(e,t){return e+(S(t)?"."+t:"")};var R=["won-GOP","leading-GOP","won-Dem","leading-Dem"];t.exports.normalizeLiveAggregate=function(t){var r={};return R.forEach((function(e){r[e]=n.get(t,e,0)})),r},t.exports.sortRace=function(e,t){return e.isFinished&&!t.isFinished?-3:!e.isFinished&&t.isFinished?3:e.precinctsTotal&&t.precinctsTotal&&e.precinctsReporting/e.precinctsTotal>t.precinctsReporting/t.precinctsTotal?-2:e.precinctsTotal&&t.precinctsTotal&&e.precinctsReporting/e.precinctsTotal<t.precinctsReporting/t.precinctsTotal?2:y(e.statePostal)<y(t.statePostal)?-1:1},t.exports.formatDateState=function(e,t){return t+"-"+e},t.exports.isDateStateId=function(e){return/^[A-Z]+-201/.test(e)},t.exports.isOpenRace=function(e){return"X"===e}}),{"./data/electoral-by-statepostal":259,"./data/state-meta":260,"./data/states-by-fipscode":261,"./util":264}],264:[(function(e,n,t){"use strict";var r=e("xtend"),i=e("object-path"),a=e("object-path-immutable"),o=e("deepmerge"),s=e("uniq"),l=e("hat"),u=function(e){return e},c=l.rack();n.exports.uniqueId=c,n.exports.deepEqual=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},n.exports.isEmpty=function(e){switch(typeof e){case"string":return""===e;case"object":for(var t in e)return!1;return!0;default:return!1}},n.exports.extend=r,n.exports.merge=function(e,t,r){return r||(r={}),r.arrayMerge||(r.arrayMerge=function(e,t){return n.exports.deepEqual(e,t)?e:t.slice()}),o(e,t,r)},n.exports.get=function(e,t,r){return i.get(e,t,r)},n.exports.getWithInherited=function(e,t,r){return i.withInheritedProps.get(e,t,r)},n.exports.set=function(e,t,r){return a.set(e,t,r)},n.exports.push=function(e,t,r){return a.push(e,t,r)},n.exports.ensureExists=function(e,t,r){return"undefined"!==typeof i.get(e,t)?e:a.set(e,t,r)},n.exports.omit=function(e,t){for(var r=e,n=0;n<t.length;n++)r=a.del(r,t[n]);return r},n.exports.pick=function(e,t){for(var r={},n=0;n<t.length;n++)i.set(r,t[n],i.get(e,t[n]));return r},n.exports.without=function(e,t,r){var n=(r?e.map(r):e).indexOf(t);return n>=0?e.slice(0,n).concat(e.slice(n+1)):e},n.exports.find=function(e,r){return e.reduce((function(e,t){return e||(r(t)?t:e)}),void 0)},n.exports.unique=s,n.exports.values=function(t){return Object.keys(t).map((function(e){return t[e]}))},n.exports.entries=function(e){var t=[];for(var r in e)t.push([r,e[r]]);return t},n.exports.filterKeys=function(t,r){return Object.keys(t).filter((function(e){return r(t[e],e)}))},t.mapObject=function(e,t,r){var n={};for(var i in e)n[i]=t.call(r||this,e[i],i,e);return n},t.filterObject=function(e,t,r){var n={};for(var i in e)t.call(r||this,e[i],i,e)&&(n[i]=e[i]);return n},n.exports.max=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return e.reduce((function(e,t){return r(t)>r(e)?t:e}),e[0])},n.exports.min=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return e.reduce((function(e,t){return r(t)<r(e)?t:e}),e[0])},n.exports.sum=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return e.reduce((function(e,t){return e+r(t)}),0)},n.exports.sortUsingOrder=function(a,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return a.sort((function(e,t){var r=o.indexOf(s(e)),n=o.indexOf(s(t)),i=r<0||n<0;return i&&(r>=0||n>=0)?r<0?1:-1:i?a.indexOf(e)-a.indexOf(t):r-n})),a},n.exports.flatten=function(e){return Array.prototype.concat.apply([],e)},n.exports.slugify=function(e){return(e||"").trim().toLowerCase().replace(/[\(\)\[\]\{\},"'\.\?&<>]/g,"").replace(/[-\s]+/g,"-").replace(/%/g,"percent")}}),{deepmerge:99,hat:103,"object-path":122,"object-path-immutable":121,uniq:131,xtend:138}]},{},[143])(143)}));