(function($){TWP=window.TWP||{};TWP.Features=TWP.Features||{};TWP.Features.PrimaryElection=TWP.Features.PrimaryElection||{};var codeVersion=$("#elections-code-root").data("code-version")||"prodStable";var resources=[],e2018ds="";if(location.search.match(/e2018ds=([^&]+)/))e2018ds=RegExp.$1;if(!e2018ds.match(/no_css/))try{var ss=document.createElement("link");ss.rel="stylesheet";ss.href="https://dohdeick6sqa6.cloudfront.net/assets/"+codeVersion+"/common.css";var headElm=document.getElementsByTagName("head")[0];
headElm.insertBefore(ss,headElm.children[0])}catch(err){resources.push("https://dohdeick6sqa6.cloudfront.net/assets/"+codeVersion+"/common.css")}if(!e2018ds.match(/no_js/))resources.push("https://dohdeick6sqa6.cloudfront.net/assets/"+codeVersion+"/elections.js");if(location.href.indexOf("elex_late_load")>0&&document.readyState!="complete")window.addEventListener("load",function(){wp_import(resources).then(function(){initElections()})});else if(location.href.indexOf("elex_late_init")>0)wp_import(resources).then(function(){if(document.readyState===
"complete")initElections();else window.addEventListener("load",function(){initElections()})});else wp_import(resources).then(function(){initElections()});var initElections=function(){TWP.Features.PrimaryElection.getGlSupport=function(codeVersion){if(wp_pb.StaticMethods.getCookie("wp_devicetype")=="1"&&!!document.querySelector('[data-gl-support-for-mobile\x3d"false"]'))return false;else if(wp_pb.StaticMethods.getCookie("wp_devicetype")=="2"&&!!document.querySelector('[data-gl-support-for-tablet\x3d"false"]'))return false;
else if(wp_pb.StaticMethods.getCookie("wp_devicetype")=="0"&&!!document.querySelector('[data-gl-support-for-desktop\x3d"false"]'))return false};try{if(typeof TWP.Features.PrimaryElection.getGlSupport=="function"&&typeof TWP.Features.PrimaryElection.getGlSupport(codeVersion)=="boolean"&&!TWP.Features.PrimaryElection.getGlSupport(codeVersion))DevelopmentSeed.Elections[codeVersion].config.glSupport=TWP.Features.PrimaryElection.getGlSupport(codeVersion)}catch(e){}TWP.Features.PrimaryElection.featureHash=
TWP.Features.PrimaryElection.featureHash||{};TWP.Features.PrimaryElection.featureInitCount=TWP.Features.PrimaryElection.featureInitCount||0;TWP.Features.PrimaryElection.featureMountCount=TWP.Features.PrimaryElection.featureMountCount||0;TWP.Features.PrimaryElection.featureMapCount=TWP.Features.PrimaryElection.featureMapCount||0;TWP.Features.PrimaryElection.featureMapLoadedCount=TWP.Features.PrimaryElection.featureMapLoadedCount||0;var logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("devseed-elections-2016"):
window.console,idStem="primary-election",$devseedFeatures=$('div[id^\x3d"dev-seed-'+idStem+'-"]'),$devseedFeatureCount=$devseedFeatures.length;$devseedFeatures.each(function(i){var $this=$(this),id=$this.attr("id"),component=$this.attr("data-component"),tokenizedComponent=component.replace(/-/g,"").toLowerCase(),idSelector="#"+id,idFallbackURLSSelector=idSelector.replace(idStem,"fallback-urls-"+idStem);if(component=="map")TWP.Features.PrimaryElection.featureMapCount++;try{logger.info("TRY processCustomResponders");
wp_pb.StaticMethods.processCustomResponders($this.closest(".early-custom-responder"))}catch(e){logger.info("ERRROR in processCustomResponders");logger.info(e)}if(!TWP.Features.PrimaryElection.featureHash.hasOwnProperty(id)){TWP.Features.PrimaryElection.featureHash[id]="processing";try{var options=$(idSelector).data();if(!!options.initialStateFips){logger.info("****************PLEASE REBUILD THE FEATURE BELOW****************");logger.info("  COMPONENT: "+component);if(!!options.featureName)logger.info("  FEATURE NAME/ENTANGLEMENT ID: "+
options.featureName);logger.info(" IT MAY BE RELYING ON CODE THAT WON'T WORK IN PRODUCTION ")}if(!!options.initialStateFips)options.initialStateFips=""+options.initialStateFips;if(!!options.mapViewOptionInitialStateFips)options.mapViewOptionInitialStateFips=""+options.mapViewOptionInitialStateFips;for(var p in options)if($.isArray(options[p]))$.each(options[p],function(i,v){if(typeof v=="string")options[p][i]=v.replace(/-EscApos-/g,"'");else if(typeof v=="object")options[p][i]=JSON.parse(JSON.stringify(v).replace(/-EscApos-/g,
"'"))});else if(typeof options[p].replace=="function")options[p]=options[p].replace(/-EscQuote-/g,'"');options.onLoad=function(err){TWP.Features.PrimaryElection.featureMapLoadedCount++;if(!!err){logger.error(idSelector+": loading failed.");logger.error(err)}else logger.info(idSelector+": successfully loaded.");if(TWP.Features.PrimaryElection.featureMapCount==TWP.Features.PrimaryElection.featureMapLoadedCount){logger.info("All devseed maps loaded and/or failed to load");!!window.wp_pb&&!!wp_pb.report&&
wp_pb.report("devseed","all-maps-loaded");window.electionFeaturesLoaded=true}};logger.info(options);DevelopmentSeed.Elections[codeVersion].mountView(document.getElementById(id),component,options,function(err){if(!!err){TWP.Features.PrimaryElection.featureHash[id]=false;logger.error(idSelector+": initialization failed.");logger.error(err,err.stack)}else{TWP.Features.PrimaryElection.featureHash[id]=true;logger.info(idSelector+": successfully initiated.")}logger.info(TWP.Features.PrimaryElection.featureHash);
TWP.Features.PrimaryElection.featureMountCount++;if(TWP.Features.PrimaryElection.featureMountCount==$devseedFeatureCount){logger.info("All devseed features mounted and/or failed to mount");!!window.wp_pb&&!!wp_pb.report&&wp_pb.report("devseed","all-components-mounted");setTimeout(function(){wp_pb.report("devseed","all-components-mounted-with-delay")},1E3)}});TWP.Features.PrimaryElection.featureHash[id]="initiated";TWP.Features.PrimaryElection.featureInitCount++;try{var $fallbackURLInfoBox=$(idFallbackURLSSelector);
if($fallbackURLInfoBox.length){var mapState={stateFips:options.mapViewOptionInitialStateFips+"",mapView:options.mapViewOptionInitialMapView};var withoutBucketUrl="https:"+DevelopmentSeed.Elections[codeVersion].fallbackImageURL(mapState,"lg");mapState=$.extend(mapState,{bucketSet:{slug:"your-bucket-slug"},bucket:0});var withBucketUrl="https:"+DevelopmentSeed.Elections[codeVersion].fallbackImageURL(mapState,"lg");$fallbackURLInfoBox.html("\x3cstyle\x3e.fallback-url-hilite{display:inline-block;background-color:#ccc;font-style:normal;padding:0 3px;line-height:1.1;}\x3c/style\x3e\x3cb\x3ewithout bucket:\x3c/b\x3e "+
withoutBucketUrl+"\x3cbr/\x3e\x3cb\x3ewith bucket:\x3c/b\x3e "+withBucketUrl+'\x3cbr/\x3e\x3cbr/\x3e\x3cb style\x3d"color:#C00;"\x3eWARNING:\x3c/b\x3e \x3cem\x3eNot all possible maps have a screenshot. Test the generated URL in a separate browser tab to see if it looks like you expect it to before you use it.\x3c/em\x3e\x3cbr/\x3e\x3cb\x3eNOTE:\x3c/b\x3e \x3cem\x3eReplace \x3cdiv class\x3d"fallback-url-hilite"\x3elg\x3c/div\x3e with \x3cdiv class\x3d"fallback-url-hilite"\x3esm\x3c/div\x3e or other suppoted size as desired. Also, if you know what you\'re doing, you can replace \x3cdiv class\x3d"fallback-url-hilite"\x3e'+
mapState.mapView+'\x3c/div\x3e with another map view.\x3c/em\x3e\x3c/br\x3e\x3cb\x3eBUCKET NOTE:\x3c/b\x3e \x3cem\x3eReplace \x3cdiv class\x3d"fallback-url-hilite"\x3eyour bucket slug\x3c/div\x3e as appropriate. Replace the \x3cdiv class\x3d"fallback-url-hilite"\x3e0\x3c/div\x3e with the appropriate bucket index.\x3c/em\x3e')}}catch(e){logger.error(e)}}catch(e){logger.error(e)}}else{logger.info(idSelector+": already processed. Two instances of state single render.js likely on the page.");logger.info("This can happen when the feature is embedded inline into an article.")}logger.info("TWP.Features.PrimaryElection.featureHash");
logger.info(TWP.Features.PrimaryElection.featureHash);if(TWP.Features.PrimaryElection.featureInitCount==$devseedFeatureCount)logger.info("All devseed features initiated")});console.log("Election resources loaded")}})(jQuery);
(function($,window){var core=window.wp_pb=window.wp_pb||{};var nav=core.nav=core.nav||{};var SCROLL_DEBOUNCE_TIME=20;var wpHeader={isHomepage:$("#logo-in-nav").hasClass("homePage"),init:function(){if($("#page").hasClass("ie8"))return;else{if($("#article-full-width-content").length===0)if($("#pb-root .pb-f-page-header-v2").length){var $header=$(".pb-f-page-header-v2");$("#pb-root").before($header)}if(window.ActiveXObject||"ActiveXObject"in window){$("#main-sections-nav").addClass("ie");$("#wp-header").addClass("ie")}$("#sections-menu-off-canvas ul.side-nav li").each(function(){if($(this).hasClass("nav-screenreader-link"))return;
var item=$(this).find("\x3ea"),itemText=item.html().replace(/\s+/g,"").replace(/&/g,"-").toLowerCase(),itemLink=item.attr("href");if($(this).hasClass("main-nav"))item.attr("href",itemLink+"?nid\x3dmenu_nav_"+itemText);else if($(this).hasClass("sub-nav-item")){var mainItem=$(this).parents(".main-nav").find("\x3ea").text().replace(/\s+/g,"").replace(/&/g,"-").toLowerCase();item.attr("href",itemLink+"?nid\x3dmenu_nav_"+mainItem+"-"+itemText)}});$("#sections-menu-wide li").each(function(){var item=$(this).find("a"),
itemText=item.html().replace(/\s+/g,"").replace(/&/g,"-").toLowerCase(),itemLink=item.attr("href");item.attr("href",itemLink+"?nid\x3dtop_nav_"+itemText)});(function(){var searchIconHovered;$("#search-btn").click(function(e){e.stopPropagation();e.preventDefault();if($(this).hasClass("closed")){$(this).removeClass("closed").addClass("opened");$("#search-field").removeClass("closed").addClass("opened");$("#search-field").focus()}else if($(this).hasClass("opened"))$("#search-form").submit()});$("#search-btn").on("mouseover",
function(){if($(this).hasClass("opened"))searchIconHovered=true}).on("mouseout",function(){if($(this).hasClass("opened"))searchIconHovered=false});$("#search-field").on("blur",function(){if($(this).hasClass("opened")&&!searchIconHovered){$(this).removeClass("opened").addClass("closed");$("#search-btn").removeClass("opened").addClass("closed")}});$("#search-form, #nav-search-mobile").submit(function(){if($(this).find("input[type\x3dtext]").val()){if(!!window.s&&!!s.sendDataToOmniture)s.sendDataToOmniture("Search Submit",
"event2",{eVar38:$(this).find("input[type\x3dtext]").val(),eVar1:s.pageName});return true}else return false})})();(function(){var timer;$("#sections-menu-off-canvas li a").hover(function(){$(this).addClass("hover-name");$(this).parent().addClass("unhover-list")},function(){$(this).removeClass("hover-name");$(this).parent().removeClass("unhover-list")});$("#nav-user").click(function(){if($("body").hasClass("left-menu left-menu-pb")){$("body").removeClass("left-menu left-menu-pb");$("#main-sections-nav").removeClass("active");
$(".section-menu-btn").removeClass("active")}$("#user-menu").toggleClass("nav-user-show");$("body").toggleClass("account-menu")});$("#settings-nav-btn").click(function(){if($("body").hasClass("left-menu left-menu-pb")){$("body").removeClass("left-menu left-menu-pb");$("#main-sections-nav").removeClass("active");$(".section-menu-btn").removeClass("active")}if($("#logged-in-status").hasClass("logged-in"))$("#user-menu").toggleClass("nav-user-show");else $(".sign-up-buttons").toggleClass("nav-user-show");
$("body").toggleClass("account-menu")});$(document).on("click",".section-menu-btn",function(event){event.stopPropagation();event.preventDefault();if($("html").hasClass("drawbridge-up"))return;var _clickElement=$(this),_menuElement=$("#main-sections-nav");if(_menuElement.hasClass("active")){$("body").removeClass("left-menu left-menu-pb");_clickElement.removeClass("active");_menuElement.removeClass("active");if(typeof window.wp_pb=="object"&&typeof window.wp_pb.report=="function"){wp_pb.report("nav",
"menu_start_close",true);setTimeout(function(){wp_pb.report("nav","menu_finish_close",true)},500)}}else{if($("body").hasClass("account-menu")){$("body").removeClass("account-menu");$("#user-menu").removeClass("nav-user-show");$(".sign-up-buttons").removeClass("nav-user-show")}$("body").addClass("left-menu left-menu-pb");if(!$.trim($("#sections-menu-off-canvas").html()).length){var siteurl="";var contentUri=!wpHeader.isHomepage&&wp_pb.canonical_url?"\x26contentUri\x3d"+wp_pb.canonical_url:"";if($(".pb-f-page-header-v2 #page").hasClass("offsite"))siteurl=
"https://www.washingtonpost.com/pb/api/v2/render/feature/page/header-v2?shownav\x3dshownav";else siteurl="/pb/api/v2/render/feature/page/header-v2?shownav\x3dshownav"+contentUri;$.get(siteurl,function(data){var rootEl=$(data.rendering);var subscribeNav=rootEl.find("#subscribe-left-nav");$(".pb-f-page-header-v2").find("#main-sections-nav-inner").append(subscribeNav);var searchNav=rootEl.find("#search-nav-wrapper");$(".pb-f-page-header-v2").find("#main-sections-nav-inner").append(searchNav);var rootContent=
rootEl.find("#sections-menu-off-canvas");$(".pb-f-page-header-v2").find("#main-sections-nav-inner").append(rootContent);var footerNav=rootEl.find("#site-attribution-off-canvas-menu");$(".pb-f-page-header-v2").find("#main-sections-nav-inner").append(footerNav);if(!$("#main-sections-nav").hasClass("hide-subscribe-left-nav"))$("#subscribe-left-nav").removeClass("hidden");wpHeader.initRegionalToggle()})}_clickElement.addClass("active");_menuElement.addClass("active");if(typeof window.wp_pb=="object"&&
typeof window.wp_pb.report=="function"){wp_pb.report("nav","menu_start_open",true);setTimeout(function(){wp_pb.report("nav","menu_finish_open",true)},500)}}calcSubnavPosition()});function delayHover(element){timer=setTimeout(function(){$("#main-sections-nav").addClass("subNavigation");$(element).addClass("hover")},75)}$(document).on({mouseenter:function(){delayHover($(this))},mouseleave:function(){$(this).removeClass("hover");$("#main-sections-nav").removeClass("subNavigation");clearTimeout(timer)}},
".main-nav");if($(window).width()<=480)$(".main-nav").click(function(){location.href=$(this).find(".main-nav-item").attr("href")})})()}},setupNav:function(){$.fn.appendLinkItems=function(links,surroundingTag){var element=this;surroundingTag=surroundingTag||"\x3cli\x3e";$.each(links,function(i,link){var a=$("\x3ca\x3e");if(link.title)a.text(link.title);if(link.html)a.html(link.html);if(link.href)a.attr("href",link.href);if(link.attr)a.attr(link.attr);if(link["class"])a.addClass(link["class"]);element.append($(surroundingTag).append(a).addClass(link.selected?
"selected":"").append("\x3chr /\x3e"))});return this};nav.setIdentityMenu=function(menu){var element=$("#user-menu ul.user-info");element.children("li").remove();element.appendLinkItems(menu)};nav.closeDropdowns=function(){$("#wp-header .dropdown-trigger.active").each(function(){$(this).removeClass("active");$("#"+$(this).data("menu")).hide()});$(".leaderboard").removeClass("hideAd")};nav.showNav=function(){if(typeof window.wp_pb=="object"&&typeof window.wp_pb.report=="function"&&$("#wp-header").hasClass("bar-hidden")){wp_pb.report("nav",
"start_open",true);setTimeout(function(){$("#wp-header").removeClass("bar-hidden site-header-is-colored");wp_pb.report("nav","finish_open",true)},250)}};nav.hideNav=function(){if(typeof window.wp_pb=="object"&&typeof window.wp_pb.report=="function"&&!$("#wp-header").hasClass("bar-hidden")){wp_pb.report("nav","start_close",true);setTimeout(function(){wp_pb.report("nav","finish_close",true);$("#wp-header").addClass("bar-hidden")},250)}}},setScrollEvents:function(){var isHomepage=$("#logo-in-nav").hasClass("homePage"),
scrollPos=$(this).scrollTop()||0,isMobileDevice=isMobile(),notificationBar=$(".pb-f-page-notification-bar"),notificationOffset=0;if(notificationBar.length)notificationOffset=notificationBar.outerHeight();if(isHomepage){$("#logo-in-nav").removeClass("nav-display-show").addClass("nav-display-hide");$(".main-navigation").removeClass("nav-logo-display-show");$("#sections-menu-wide").addClass("nav-display-show").removeClass("nav-display-hide");$(window).scroll(wp_pb.StaticMethods.debounce(function(){if(isMobileDevice&&
$("#main-sections-nav").hasClass("active"))return false;var navchange=false,widthbreak=768,window_width=$(window).width(),y_scroll_pos=window.pageYOffset,scroll_pos_test=80;if(window_width>991)$("#logo-in-nav").addClass("nav-display-hide-tagline");if(window_width>=widthbreak)if(y_scroll_pos>scroll_pos_test&&navchange==false){navchange=true;$("#sections-menu-wide").removeClass("nav-display-show").addClass("nav-display-hide");$("#logo-in-nav").addClass("nav-display-show").removeClass("nav-display-hide");
$(".main-navigation").addClass("nav-logo-display-show")}else if(y_scroll_pos<=0){navchange=false;if(!$("#section-menu-btn").hasClass("active")){$("#logo-in-nav").removeClass("nav-display-show").addClass("nav-display-hide");$(".main-navigation").removeClass("nav-logo-display-show");$("#sections-menu-wide").addClass("nav-display-show").removeClass("nav-display-hide")}}if($("#main-sections-nav").hasClass("active"))calcSubnavPosition()},SCROLL_DEBOUNCE_TIME))}else if(!isHomepage||isMobileDevice){var timeOutTime=
100,scrollHeight=150;if(isMobileDevice){scrollHeight=30;timeOutTime=25}$(window).scroll(wp_pb.StaticMethods.debounce(function(){if(isMobileDevice&&$("#main-sections-nav").hasClass("active"))return false;if(!$("#section-menu-btn").hasClass("active")){var currentPos=$(this).scrollTop();if(currentPos+80<scrollPos||currentPos===0){var copyPos=currentPos;setTimeout(function(){var lastPos=$(this).scrollTop();if(copyPos-lastPos>scrollHeight||currentPos===0){nav.showNav();scrollPos=currentPos}},timeOutTime)}else if(currentPos-
80>scrollPos&&currentPos>50+notificationOffset){var hidenav=true;if(isMobile()&&window.matchMedia("(orientation: landscape)").matches&&($("#user-menu").hasClass("nav-user-show")||$(".sign-up-buttons").hasClass("nav-user-show")))hidenav=false;if($("header").hasClass("dont-hide-header-on-scroll"))hidenav=false;if(hidenav){nav.hideNav();scrollPos=currentPos;$("body").removeClass("account-menu");$("#user-menu").removeClass("nav-user-show");$(".sign-up-buttons").removeClass("nav-user-show")}}}if($("#main-sections-nav").hasClass("active"))calcSubnavPosition()},
SCROLL_DEBOUNCE_TIME))}$(window).resize(function(){nav.closeDropdowns();if(isHomepage&&$(window).width()<991)if($("#logo-in-nav").hasClass("nav-display-hide-tagline"))$("#logo-in-nav").removeClass("nav-display-hide-tagline");if(isHomepage&&$(window).width()>991)if(!$("#logo-in-nav").hasClass("nav-display-hide-tagline"))$("#logo-in-nav").addClass("nav-display-hide-tagline")});$(function(){wp_pb.register("nav","force-show",function(){nav.showNav()})});if(isMobile()){$(document).mouseup(function(e){if(e.target.id==
"mobile-hamburger-ic")return;var menuElement=$("#main-sections-nav"),container=$("#main-sections-nav");if(menuElement.hasClass("active")&&!container.is(e.target)&&(container.has(e.target).length===0||e.target.id=="main-sections-nav-inner")){$("body").removeClass("left-menu left-menu-pb");$(".section-menu-btn").removeClass("active");menuElement.removeClass("active");if(typeof window.wp_pb=="object"&&typeof window.wp_pb.report=="function"){wp_pb.report("nav","menu_start_close",true);setTimeout(function(){wp_pb.report("nav",
"menu_finish_close",true)},500)}}});$(document).bind("touchend",function(e){var container=$(".sign-up-buttons");if(!container.is(e.target)&&container.has(e.target).length===0&&$(".sign-up-buttons").hasClass("nav-user-show")&&e.target.id!=="settings-nav-btn"){$(".sign-up-buttons").removeClass("nav-user-show");$("body").removeClass("account-menu")}});$(document).bind("touchend",function(e){var container=$("#main-sections-nav");if(!container.is(e.target)&&container.has(e.target).length===0&&$("#main-sections-nav").hasClass("active")&&
e.target.id!=="section-menu-btn"&&e.target.parentNode.id!=="section-menu-btn"&&e.target.id!=="mobile-hamburger-ic"){$("#main-sections-nav, .section-menu-btn").removeClass("active");$("body").removeClass("left-menu left-menu-pb")}});$(document).bind("touchend",function(e){var container=$("#user-menu");if(!container.is(e.target)&&container.has(e.target).length===0&&$("#user-menu").hasClass("nav-user-show")&&e.target.id!=="settings-nav-btn"&&e.target.parentNode.id!=="nav-user"&&e.target.className!==
"username"){$("#user-menu").removeClass("nav-user-show");$("body").removeClass("account-menu")}})}$(document).mouseup(function(e){var container=$("#user-menu");if(!container.is(e.target)&&container.has(e.target).length===0&&$("#user-menu").hasClass("nav-user-show")&&e.target.id!=="settings-nav-btn"&&e.target.parentNode.id!=="nav-user"&&e.target.className!=="username"){$("#user-menu").removeClass("nav-user-show");$("body").removeClass("account-menu")}});$(document).mouseup(function(e){var container=
$("#main-sections-nav");if(!container.is(e.target)&&container.has(e.target).length===0&&$("#main-sections-nav").hasClass("active")&&e.target.id!=="section-menu-btn"&&e.target.parentNode.id!=="section-menu-btn"&&e.target.id!=="mobile-hamburger-ic"){$("#main-sections-nav, .section-menu-btn").removeClass("active");$("body").removeClass("left-menu left-menu-pb")}})},setIdentity:function(){var idp;nav.getIdentityProvider=function(){return idp};nav.setIdentityProvider=function(provider){var ef=function(){};
idp={};idp.name=provider.name||"";idp.getUserId=provider.getUserId||ef;idp.getUserMenu=provider.getUserMenu||ef;idp.getSignInLink=provider.getSignInLink||ef;idp.getRegistrationLink=provider.getRegistrationLink||ef;idp.isUserLoggedIn=provider.isUserLoggedIn||ef;idp.render=provider.render||function(){if(idp.isUserLoggedIn()){$("#nav-user .username").text(idp.getUserId());nav.setIdentityMenu(idp.getUserMenu());$("#nav-user, #user-menu, .site-info .account-menu").removeClass("hidden");$("#logged-in-status").addClass("logged-in");
$(document).on("onTwpMeterReady",function(){if(!wp_pb.StaticMethods.isSubscriber()){$("#user-menu").addClass("no-subscriber");$("#nav-subscribe, #subscribe-left-nav").removeClass("hidden");$("#logged-in-status.logged-in #nav-subscribe").css("display","block");$("#main-sections-nav").removeClass("hide-subscribe-left-nav")}})}else{$("#sign-in-link").attr("href",idp.getSignInLink()+"?nid\x3dtop_pb_signin\x26tid\x3dnav_sign_in");$(".nav-sign-in, #nav-subscribe, #nav-subscribe-mobile, #subscribe-left-nav").removeClass("hidden");
$("#main-sections-nav").removeClass("hide-subscribe-left-nav")}};nav.renderIdentity()};nav.renderIdentity=function(callback){callback=callback||function(){};if(idp)idp.render();callback(idp)};var showIdentity=$("#nav-user").data("show-identity");var current=window.location.href.split("?")[0];var twpIdentity={name:"TWP",getUserId:function(){var username=TWP.Util.User.getUserName();var userid=TWP.Util.User.getUserId();if(typeof username=="string"&&username.length>0)return username;else return userid},
getUserMenu:function(){return[{title:TWP.Util.User.getUserId(),href:TWP.signin.profileurl+current+"\x26tid\x3dnav_acctmgnt_menu\x26refresh\x3dtrue","class":"account"},{title:"Sign out",href:TWP.signin.logouturl_page+"?tid\x3dnav_acctmgnt_menu"}]},getSignInLink:function(){return TWP.signin.loginurl_page+current},getRegistrationLink:function(){return TWP.signin.registrationurl_page+current},isUserLoggedIn:function(){return TWP.Util.User?TWP.Util.User.getAuthentication():false}};if(showIdentity)(function checkTWP(){if(!nav.getIdentityProvider())if(TWP&&
TWP.signin&&TWP.Util){nav.setIdentityProvider(twpIdentity);nav.renderIdentity()}else window.setTimeout(function(){checkTWP()},200)})()},initMastheadCorrelation:function(){if(typeof window.wp_pb=="object"&&typeof window.wp_pb.register=="function")wp_pb.register("masthead","masthead-init-correlation",function(maxSpace){$("#wp-header").addClass("move-for-masthead");$("#pb-root").addClass("move-for-masthead");if(maxSpace==undefined)maxSpace=30;wp_pb.register("masthead","masthead-add-space",function(object){if(object.movableSpace<=
maxSpace&&object.cssObj!=undefined){$("#wp-header").css(object.cssObj);$("#pb-root").css(object.cssObj)}});wp_pb.register("masthead","masthead-remove-space",function(cssObj){if(cssObj!=undefined){$("#wp-header").css(cssObj);$("#pb-root").css(cssObj)}})})},initRegionalToggle:function(){var setRegionCookie=function(value){try{$.cookie("region_cookie",value,{path:"/",domain:document.location.hostname.replace(/([a-zA-Z0-9-]+)/,"")});localStorage.setItem("region_cookie",value)}catch(err){}};$(".main-nav.has-info .additional-inline-info a").each(function(){if($(this).text().indexOf("Regional")>
0)$(this).on("click",function(){setRegionCookie(1)});else if($(this).text().indexOf("World")>0)$(this).on("click",function(){setRegionCookie(0)})})}};function isMobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Kindle/i)||navigator.userAgent.match(/Windows Phone/i))return true;else return false}function calcSubnavPosition(){$("#sections-menu-off-canvas \x3e ul \x3e li").each(function(){if(!$("#main-sections-nav").hasClass("active"))return;
if($(this).hasClass("has-sub")){var movetop=$(this).find("ul").height()/2-10,offsetY=$(this).offset().top-$(window).scrollTop();if(offsetY<94)movetop=0;else if(offsetY-movetop<95)movetop=offsetY-95;$(this).find("ul").css("top","-"+movetop+"px")}})}wpHeader.init();wpHeader.setupNav();wpHeader.setScrollEvents();wpHeader.setIdentity();wpHeader.initMastheadCorrelation()})(jQuery,window);