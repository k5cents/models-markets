(function($){var UPDATE_INTERVAL=6E4;var $root=$(".pb-f-prime-time-promo"),$timeline=$root.find(".timeline-stream");$timeline.find(".timeline-group").each(function(i,elm){var $elm=$(elm);$elm.find(".moment-timestamp").html(moment($elm.data("timestamp")).format("LT")).removeClass("utc")});var primetimeInterval=setInterval(liveUpdate,UPDATE_INTERVAL);wp_pb.StaticMethods.reactOnPageVisibilityChanges(function(){primetimeInterval=setInterval(liveUpdate,UPDATE_INTERVAL)},function(){clearInterval(primetimeInterval)},
primetimeInterval);function liveUpdate(){$timeline.each(function(){var $this=$(this),path=$this.data("path"),src_uri=$this.data("src_uri"),now=moment();var before=now.utc().format("YYYY-MM-DDTHH:mm:00.0000")+"Z";var renderData='{"src_uri":"'+src_uri+'"'+',"sort":"-cms_date",'+'"includeParent":"1",'+'"limit": "20"}';$.ajax({url:path+"/prime-time/promo",data:{contentConfig:renderData,service:"primetime updates v2",action:"update",token:before},success:function(data){var newUpdates=0;if(data&&data.rendering){var $rendering=
$(data.rendering);wp_pb.primetimeVars.limit=$rendering.find("ul.timeline-stream").data("limit")||20;var currentLength=$this.children().length;var renderingList=$rendering.find("ul.timeline-stream li").get();renderingList=renderingList.slice(0,currentLength);if(renderingList.length>0){$("ul.timeline-stream").css("height",$("ul.timeline-stream").height());$("li.timeline-group").fadeOut().remove();$(renderingList).each(function(i,elm){var $elm=$(elm);$elm.find(".moment-timestamp").html(moment($elm.data("timestamp")).format("LT")).removeClass("utc");
$elm.hide().appendTo($this).fadeIn(700);newUpdates++;var countSpan=$this.prev().find(".update-count");var currCount=countSpan.text();var newCount=parseInt(currCount)+newUpdates;countSpan.text(newCount)})}}$("ul.timeline-stream").css("height","")}})})}})(jQuery);
(function($){var feature={initBetaOptInOutButton:function(){var headerEl=document.getElementById("wp-header"),forceEligible=!!document.location.search.match(/[?&]betaOptInStatus[=$&]/),forceOptedIn=!!document.location.search.match(/[?&]betaOptInStatus=true[$&]/),okToShowBetaOptInButton=forceEligible||(headerEl?headerEl.getAttribute("data-beta-btn")=="true":false);if(okToShowBetaOptInButton)headerEl.setAttribute("data-beta-btn","true");function _init(){if(_isEligible()&&_isNR()){_insertButton(_isOptedIn());
_setUpClickHandler()}}function _isEligible(){if(forceEligible)return true;else return okToShowBetaOptInButton&&!!document.cookie.match("NWSRDRBTEL:")}function _isNR(){return window.wp_site==="newsreader"}function _setUpClickHandler(){$("body").on("click",function(ev){if($(ev.target).closest("#beta-container").length==0)$("#beta-container input[type\x3dcheckbox]:checked").trigger("click")})}function _isOptedIn(){if(forceEligible)return forceOptedIn;else return okToShowBetaOptInButton&&_isEligible()&&
!!document.cookie.match("NWSRDRBT:")}function _getForceFlyoutOpen(){if(wp_pb.StaticMethods.isLocalStorageAccessible()&&localStorage.getItem("forceNewsreaderFlyoutOpen")=="true"){localStorage.removeItem("forceNewsreaderFlyoutOpen");return true}else return false}function _insertButton(isOptedIn){var el=document.querySelector("#main-navigation-right .sign-up-buttons");if(el!=null)el.insertAdjacentHTML("afterend",_getHtml(isOptedIn,_getForceFlyoutOpen()))}function _getHtml(isOptedIn,forceFlyoutOpen){var checkedAttr=
forceFlyoutOpen?' checked\x3d"checked"':"";var openingHtml='\x3cdiv id\x3d"beta-container"\x3e\x3cinput type\x3d"checkbox" id\x3d"beta-cbx" class\x3d"hidden"'+checkedAttr+'\x3e\x3clabel for\x3d"beta-cbx" class\x3d"btn"\x3e\x3cspan class\x3d"fa fa-beta icon"\x3e\x3c/span\x3e\x3cspan class\x3d"text"\x3eBETA\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"flyout"\x3e\x3cdiv class\x3d"flyout-top-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"flyout-msg"\x3e';var flyoutHtml="";switch(isOptedIn){case false:flyoutHtml=
'You will no longer be presented with our new article experience. If you decide to give it another try, please \x3ca href\x3d"javascript:void( TWP.newsreader._optIn() )"\x3eopt-in\x3c/a\x3e again.';break;default:flyoutHtml='\x3cdiv class\x3d"flyout-header"\x3eWelcome to our new reading experience.\x3c/div\x3e Thank you for trying out our new article format. It\u2019s still in development, so we\u2019d \x3ca href\x3d"https://helpcenter.washingtonpost.com/hc/en-us/requests/new?ticket_form_id\x3d360000023891"\x3elove your feedback\x3c/a\x3e. If you no longer wish to participate, you can opt out \x3ca href\x3d"javascript:void( TWP.newsreader._optOut() )"\x3ehere\x3c/a\x3e.';
break}var closingHtml="\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";return openingHtml+flyoutHtml+closingHtml}_init()},init:function(){this.initBetaOptInOutButton()}};feature.init()})(jQuery);
(function(){__e=window.__e||[];var $w=$(window),logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-sharebars-top-share-bar"):window.console;try{var socialTools={myRoot:".top-sharebar-wrapper",init:function(){$(".pb-f-sharebars-top-share-bar").each(function(index,root){if(!wp_pb.BrowserInfo.desktop&&!$(root).find(".top-sharebar-wrapper").data("pb-prevent-ajax")&&$(root).find(".vertical-sticky-top-sharebar").length==0){var contentUriPath=$(root).find(".top-sharebar-wrapper").data("pb-canonical-url");
if(contentUriPath.indexOf(".washingtonpost.com")>=0)$.ajax({url:"/pb/api/v2/render/feature",dataType:"json",data:{id:$(root)[0].id,uri:window.location.pathname,contentUri:contentUriPath,desktop:wp_pb.BrowserInfo.desktop,mobile:wp_pb.BrowserInfo.mobile},cache:true,jsonCallback:"wpTopShareBarAjax",success:function(data){$(root).empty();$(root).append($(data.rendering).children());socialTools.originalInit()},error:function(data){socialTools.originalInit()}});else socialTools.originalInit();$(root).find(".top-sharebar-wrapper").data("pb-prevent-ajax",
"true")}else socialTools.originalInit()})},originalInit:function(myRoot){var self=this;myRoot=myRoot||this.myRoot;$myRoot=$(myRoot);if($myRoot.hasClass("sticky-top-sharebar"))stickyHorizontalShareBar.init();$myRoot.each(function(index,myRootElement){if($(myRootElement).hasClass("vertical-sticky-top-sharebar"))stickyVerticalShareBar.init($(myRootElement));var $root=$(myRootElement),$individualTool=$(".tool:not(.more, .read-later-bookmark, .read-later-list)",$root),$socialToolsWrapper=$(".social-tools-wrapper",
$root),$socialToolsMoreBtn=$(".tool.more",$socialToolsWrapper),$socialToolsAdditional=$(".social-tools-additional",$root),width=window.innerWidth>0?window.innerWidth:screen.width,isMobile=mobile_browser===1&&width<480?true:false;$socialToolsMoreBtn.off("click").on("click",this,function(ev){$socialToolsMoreBtn.hide();$socialToolsAdditional.show("fast",function(ev){$root.addClass("expanded");$(".social-tools",$socialToolsAdditional).animate({"margin-left":0},4250)}).addClass("more-open")});$individualTool.off("click");
$individualTool.on({click:function(event){var shareType=$(this).attr("class");var eVar1=$(this).data("evar1");shareType=typeof shareType!="undefined"?shareType.split(" ")[0].trim():"";self.trackTraffic("share."+shareType,shareType+"_bar",eVar1)}});if(wp_pb&&wp_pb.BrowserInfo&&wp_pb.BrowserInfo.tablet)$root.addClass("tablet");if(wp_pb.BrowserInfo.mobile&&$root.find(".vertical-sticky-top-sharebar").length>0){var calcMobileIcons=function(){var width=$root.find(".social-tools-wrapper").width()-5;var shareIconWidth=
Math.ceil($root.find(".social-tools-primary .social-tools .tool").first().outerWidth(true));$root.find(".social-tools-primary .social-tools .tool.more").hide();var allShare=$root.find(".social-tools-primary .social-tools .tool:not(.more), .social-tools-additional .social-tools .tool").hide();if($root.find(".social-tools-readlater").length>0)width=width-Math.ceil($root.find(".social-tools-readlater").width());var numShare=Math.floor(width/shareIconWidth);for(var share=0;share<allShare.length;share++)try{if(share<
numShare)$(allShare.get(share)).fadeIn();else $(allShare.get(share)).hide()}catch(e){}};$(window).resize(function(){calcMobileIcons()});calcMobileIcons()}else $root.find(".social-tools-primary .social-tools .tool").fadeIn();$root.removeClass("unprocessed")});if(typeof wp_pb.StaticMethods.initReadLater=="function")wp_pb.StaticMethods.initReadLater($myRoot,"top-share-bar")},trackTraffic:function(name,eVar27,eVar1){if(typeof window.sendDataToOmniture==="function"){var omnitureVars={eVar1:typeof eVar1!=
"undefined"?eVar1:typeof window.s=="object"&&s&&s.eVar1,eVar2:typeof window.s=="object"&&s&&s.eVar2,eVar8:typeof window.s=="object"&&s&&s.eVar8,eVar17:typeof window.s=="object"&&s&&s.eVar17,eVar27:eVar27};try{sendDataToOmniture(name,"event6",omnitureVars)}catch(e){}}},getSnowflake:function(){var currentSnowflake=TWP.Analytics&&TWP.Analytics.Snowflake?TWP.Analytics.Snowflake.getCurrent():{};return currentSnowflake.outgoing||""}};var stickyVerticalShareBar={init:function($myRoot){if($("#article-full-width-content").length===
0)$myRoot.closest(".pb-f-sharebars-top-share-bar").insertBefore("#pb-root");if(window.innerWidth>992){$myRoot.css({top:($w.height()-$myRoot.outerHeight()+25)/2+"px"});$myRoot.animate({left:"-1px"});$w.resize(function(){$myRoot.animate({top:($w.height()-$myRoot.outerHeight()+25)/2+"px"},50)})}stickyVerticalShareBar.enableCollisionDetection($myRoot);wp_pb.register("sticky-vertical-sharebar","collides_with_main_content",function(collides){$myRoot.closest(".pb-f-sharebars-top-share-bar").css("opacity",
collides?"0":"").css("pointer-events",collides?"none":"inherit")});wp_pb.register("magnet","start_open",function(){$myRoot.animate({top:($w.height()-$myRoot.outerHeight()+$(".pb-f-page-magnet .pb-module-area").height()+25)/2+"px"},50)});wp_pb.register("magnet","start_close",function(){$myRoot.animate({top:($w.height()-$myRoot.outerHeight()+25)/2+"px"},50)});wp_pb.register("nav","menu_start_open",function(){$myRoot.hide();$myRoot.css("left","-"+$myRoot.outerWidth()+"px")});wp_pb.register("nav","menu_finish_close",
function(){if(window.innerWidth>992)setTimeout(function(){$myRoot.show();$myRoot.animate({left:"-1px"})},100)})},enableCollisionDetection:function(supported){var INTERVAL_MS=600;var MAX_INTERVALS=3;var intervalCount=0;return function($myRoot){var job;if(!supported||intervalCount>MAX_INTERVALS)return;var collisionSelector=$myRoot.closest("[data-collision-selector]").attr("data-collision-selector");job=setInterval(function(){var $sb=$myRoot.closest(".pb-f-sharebars-top-share-bar");var $sbw=$sb.find(".top-sharebar-wrapper");
var $collisionEl=$(collisionSelector);var $mc=$collisionEl.length?$collisionEl:$("html").hasClass("gallery_story")?$(".pb-f-gallery-gallery"):$("#main-content");var oldcollides=$sb.data("__mccollides");var newcollides={value:undefined};if(!$sb.length||!$sbw.length||!$mc.length)clearInterval(job);else{$mc.each(function(){newcollides.value=newcollides.value||collision(this,$sbw[0])});if(!oldcollides||newcollides.value!==oldcollides.value){wp_pb.report("sticky-vertical-sharebar","collides_with_main_content",
newcollides.value);$sb.data("__mccollides",{value:newcollides.value})}}},INTERVAL_MS);intervalCount++;function collision(element1,element2){var rect1=element1.getBoundingClientRect(),rect2=element2.getBoundingClientRect();return!(rect1.top>rect2.bottom||rect1.right<rect2.left||rect1.bottom<rect2.top||rect1.left>rect2.right)}}}("getBoundingClientRect"in document.documentElement)};var stickyHorizontalShareBar={setElmTop:function($sharebarElm,y){var style=y?"translate3d(0px, "+y+"px, 0px)":"initial";
$sharebarElm.css({transform:style})},navMenuToggle:function($sharebarElm){wp_pb.register("nav","finish_open",function(){this.setElmTop($sharebarElm,0)},this);wp_pb.register("nav","finish_close",function(){this.setElmTop($sharebarElm,-50)},this);wp_pb.register("magnet","start_open",function(){},this)},fixedPosition:function($sharebarElm,sharebarTop){var currentTop=$w.scrollTop();if(currentTop>sharebarTop){if(!$sharebarElm.hasClass("top-sharebar-fixed")){$sharebarElm.addClass("top-sharebar-fixed");
wp_pb.report("sticky-top-sharebar","sharebar_fixed",true)}}else{$sharebarElm.removeClass("top-sharebar-fixed");wp_pb.report("sticky-top-sharebar","sharebar_unfixed",true)}},moveOutOfRoot:function($sharebarElm){var $pbRoot=$("#pb-root");if($pbRoot.css("max-width")!=="none"){var $sharebarRoot=$sharebarElm.parent();var $leaderboard=$(".pb-f-ad-leaderboard");$sharebarRoot.find(".sticky-top-sharebar").css("padding-top","55px");$pbRoot.before($sharebarRoot);$pbRoot.before($leaderboard)}},detectMobileForSMS:function(){if(mobile_browser){var shareString=
"";if(windows_browser)shareString="sms://?body\x3d";else if(android_browser||android233_browser)shareString="sms:?body\x3d";if(shareString.length>0)$(".pb-f-sharebars-top-share-bar .sms-share-device.unprocessed").each(function(){$(this).attr("onclick",$(this).attr("onclick").replace(/sms:\?&body=/g,shareString));$(this).removeClass("unprocessed")});else $(".pb-f-sharebars-top-share-bar .sms-share-device.unprocessed").removeClass("unprocessed")}},init:function(){var $sharebarElm=$(".sticky-top-sharebar"),
self=this;if(!$sharebarElm.length)return;this.moveOutOfRoot($sharebarElm);var sharebarTop=$sharebarElm.offset().top;var $header=$("#wp-header");if($header.css("position")==="fixed"&&$w.scrollTop()>sharebarTop)this.fixedPosition($sharebarElm,sharebarTop);$w.off("scroll.sharebar").on("scroll.sharebar",function(){self.fixedPosition($sharebarElm,sharebarTop)});$(function(){self.navMenuToggle($sharebarElm)});this.detectMobileForSMS()}};var userId=document.cookie.match(/wapo_login_id=([^;]+)/)?RegExp.$1:
"";var userSecureId=document.cookie.match(/wapo_secure_login_id=([^;]+)/)?RegExp.$1:"";var userAgent=navigator.userAgent;var textResizer={currIncrementMax:9,currIncrementUnit:2,currIncrementIndex:0,init:function(myRoot,resizeableElementList,clickElement){myRoot=myRoot||"#article-body article, .related-story, .liveblog-intro, #liveblog-story-list .description, #full-recipe .article-content";resizeableElementList=resizeableElementList||"p, li";clickElement=clickElement||".tool.textresizer";this.root=
$(myRoot);this.resizeableElements=$(resizeableElementList,this.root);if($(".related-story").prev("h3").length>0){this.resizeableElements.push($(".related-story").prev("h3"));this.resizeableElements.push($(".related-story h4 a"))}$(clickElement).on("click",this,this.resize)},resize:function(event){var currObj=event.data;if(currObj.currIncrementIndex==currObj.currIncrementMax){currObj.currIncrementIndex=0;currObj.currIncrementUnit=currObj.currIncrementUnit==2?-2:2}currObj.currIncrementIndex=currObj.currIncrementIndex+
1;currObj.resizeableElements.each(function(){elm=$(this);currSize=parseFloat(elm.css("font-size"),5);var result=currSize+currObj.currIncrementUnit;elm.css("font-size",result);wp_pb.report("textresizer","resized",result)})}};var trackTraffic=function(name){if(typeof window.sendDataToOmniture==="function"){var omnitureVars={eVar1:typeof window.s=="object"&&s&&s.eVar1,eVar2:typeof window.s=="object"&&s&&s.eVar2,eVar8:typeof window.s=="object"&&s&&s.eVar8,eVar17:typeof window.s=="object"&&s&&s.eVar17,
eVar27:name};try{sendDataToOmniture(name+".click","event6",omnitureVars)}catch(e){}}};var lifecycle={init:function(){$(".social-tools-wrapper .tool.textresizer, .social-tools-wrapper .tool.print").on("click",function(){var name=$(this).attr("class").split(" ")[0].trim();trackTraffic(name)});window.TWP=TWP||{};TWP.SocialTools=TWP.SocialTools||socialTools;TWP.SocialTools.init();TWP.TextResizer=TWP.TextResizer||textResizer;TWP.TextResizer.init();if($(".tool.comments")){var commentSystem=$(".tool.comments .coral-counter").length>
0?"coral":"echo";wp_pb.report("comment_count_target","init",{targetName:"#share_comment_count",targetUrl:$("#share_comment_count").attr("guid"),commentSystem:commentSystem})}var tablet=isMobile.tablet();if(!!window.VisitorSegment)window.VisitorSegment&&VisitorSegment("tablet",function(){return tablet&&$w.width()>768})}};if(wp_pb.StaticMethods.isPageHydrated())lifecycle.init();__e.push(["shamble",function(){lifecycle.init()}])}catch(err){logger.error(err)}})();
(function($,TWP,undefined){var AD_LOAD_TIMER=2E3;var AD_MIN_VISIBLE=4E3;var AD_HEIGHT_LIMITED=150;var ANIM_SPEED=250;var console=new TWP.Tools.logger("leaderboard");if($(".layout_article #pb-root .pb-f-ad-leaderboard.full").length)var $leaderboard=$(".pb-f-ad-leaderboard");var applyStickiness=function(){var isLoginUser=document.cookie.match(/wapo_secure_login_id=([^;]+)/)?RegExp.$1:"";if(wp_pb.BrowserInfo&&wp_pb.BrowserInfo.tablet||isLoginUser)return;$(function(){var $html=$("html"),$feature=getFeature().find(".leaderboard"),
$window=$(window),timer,slotId="slug_leaderboard",$slotAd=$feature.find("#"+slotId),$closeBtn=$feature.find(".leaderboard-close");if(!$feature.length)return;function removeSticky(){setTimeout(function(){console.log("remove sticky leaderboard.");$feature.slideUp(ANIM_SPEED,function(){$html.removeClass("lb-persist-top-true");$feature.slideDown(ANIM_SPEED)})},AD_MIN_VISIBLE)}function applySticky(){if($window.scrollTop()>100)$html.addClass("lb-persist-top-true");else $html.removeClass("lb-persist-top-true")}
function bindEvents(){$window.on("scroll.lb-sticky",function(e){e.stopPropagation();applySticky();var bnbHeight=$(".pb-f-page-breaking-news-bar .breaking-news-bar").outerHeight();if(bnbHeight>0){$feature.addClass("pb-has-breaking-news");$feature.css("margin-top",bnbHeight+"px");wp_pb.register("breakingnews","close",function(){$feature.removeClass("pb-has-breaking-news");$feature.css("margin-top","")})}});wp_pb.register("nav","finish_open",function(){$feature.removeClass("pb-navheader-hidden")});wp_pb.register("nav",
"finish_close",function(){$feature.addClass("pb-navheader-hidden")});$closeBtn.on("click.lb-sticky",function(e){AD_MIN_VISIBLE=0;afterLoaded();if(typeof window.sendDataToOmniture==="function"){var data={pageName:window.wp_page_name,eVar1:window.wp_page_name,prop2:window.wp_subsection,eVar2:window.wp_channel,prop3:window.wp_content_type,eVar17:window.wp_content_type,eVar26:"leaderboard-close"};sendDataToOmniture("leaderboard-close","event80",data)}})}function afterLoaded(){var $featureContainer=getFeature();
if($feature.height()>$featureContainer.outerHeight())$featureContainer.height($feature.height()+30);$feature.addClass("leaderboard-ad-loaded");$window.off("scroll.lb-sticky");if($html.hasClass("lb-persist-top-true"))removeSticky()}function afterAdInserted(){timer=setTimeout(function(){console.log("from second timeout: prevent ad load fail.");afterLoaded()},6E3);if(window.googletag&&googletag.pubadsReady)googletag.pubads().addEventListener("slotRenderEnded",function(event){console.log("ad slot: "+
event.slot.getSlotElementId()+" inserted success");if(event.slot.getSlotElementId()===slotId){clearTimeout(timer);setTimeout(function(){console.log("leaderboard ad load success.");afterLoaded()},AD_LOAD_TIMER)}})}applySticky();bindEvents();setTimeout(function(){$closeBtn.addClass("fa-remove")},6E3);if($slotAd.children().length)timer=setTimeout(function(){console.log("from first timeout: if ad is already loaded");afterLoaded()},AD_LOAD_TIMER);$feature.on("DOMNodeInserted",function(e){var $el=$(e.target),
id=$el.attr("id");if($el.is("iframe")&&id&&!/(hidden)/g.test(id)){clearTimeout(timer);$feature.off("DOMNodeInserted");afterAdInserted()}});$feature.on("disableSticky.lb-sticky",function(e){clearTimeout(timer);$window.off("scroll.lb-sticky");$feature.off("DOMNodeInserted");$html.removeClass("lb-persist-top-true");TWP.Features.Ad.Leaderboard.sticky=false})})};if(!!TWP.Features.Ad.Leaderboard.sticky)applyStickiness();if(!!TWP.Features.Ad.Leaderboard.belowSharebar)applySharebarPosition();$(window.document).on("abtest-ready",
function(e,ABT){var test=ABT.get("ads-leaderboard");getFeature().attr("moat-test-id",[getFeature().attr("moat-id")||"unknown/unknown",test.name||"control"].join("-"));if(test.is("below_sharebar"))applySharebarPosition();if(test.is("sticky"))applyStickiness()});function applySharebarPosition(){var $leaderboard=getFeature();var $shareBar=getSharebar();$leaderboard.addClass("after-sharebar-leaderboard");return $leaderboard.insertAfter($shareBar)}function getFeature(){return $(".pb-f-ad-leaderboard")}
function getSharebar(){return $(".pb-f-sharebars-top-share-bar")}})(jQuery,TWP);
(function($){var $dropdown=$("#state-dropdown"),path=$dropdown.attr("data-path")?$dropdown.attr("data-path"):"/election-results";$dropdown.removeClass("hide").chosen({width:"160px"}).change(function(e){e.preventDefault();var value=$(this).val();var state=value=="D.C."?"washington-dc":value.toLowerCase().replace(" ","-");window.location.pathname=path.replace("{state}",state)});var activateDropdown=function(){$("#state-dropdown").focus()};$("#autocomplete-activate").removeClass("hide").click(activateDropdown)})(jQuery);
var __e=window.__e||[];
(function($){var $w=$(window),$d=$(document),logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-homepage-story"):window.console;var feature={handleTimestamps:function(){var $items=$(".flex-item");$items.each(function(){var $feature=$(this);var $timestamps=$feature.find("*[data-timestamp][data-timestamp-duration]");var now=(new Date).getTime();$timestamps.each(function(){try{var $e=$(this);var duration=$e.attr("data-timestamp-duration");var hoursAgo=Math.floor((now-$e.attr("data-timestamp"))/
(1*60*60*1E3));if(hoursAgo<=duration){try{$e.text(wp_pb.StaticMethods.getTwitterTime($e.attr("data-timestamp")/1))}catch(e){}$e.show().css({display:"inline-block"})}else{var $p=$e.parent();$e.remove();if(!$.trim($p.html()))$p.remove()}}catch(e){$e.show()}})})},handleFlippers:function(){var $flippers=$(".flex-flipper.unprocessed");if($flippers.length>0){wp_pb.StaticMethods.handleFlexFlippers();$flippers.each(function(){var $this=$(this),size=$this.children().length,count=0,targetBgColor="";$this.find(".flex-flipper-item,.art-in-flipper").each(function(i){var $item=
$(this),bgColor=$item.css("background-color");if(i==0&&(bgColor=="transparent"||bgColor=="rgba(0, 0, 0, 0)"||bgColor==undefined)){var lookForBgColor=true;$item.parents().filter(function(){var color=$(this).css("background-color");if(lookForBgColor&&color!="transparent"&&color!="rgba(0, 0, 0, 0)"&&color!=undefined){lookForBgColor=false;targetBgColor=color}})}if(targetBgColor)$item.css({"background-color":targetBgColor})});$this.children(":not(:first-child)").hide();$this.removeClass("unprocessed");
var loops=$this.data("maxLoops");loops=isNaN(loops)?100:loops;if(loops>0){var time=$this.data("duration");time=isNaN(time)||time<=0?6E3:time*1E3;var fadeSpeed=$this.data("fadeSpeed");fadeSpeed=isNaN(fadeSpeed)||fadeSpeed<=0?1400:fadeSpeed*1E3;var interval=setInterval(function(){count++;if(count<size*loops){$this.data("count",count);$this.children(":first-child").fadeOut(fadeSpeed).next().show().end().appendTo($this)}if(count>=size*loops){clearInterval(interval);$this.removeClass("equalize-heights");
$this.children().css("height","auto")}},time)}})}},handleImageRefreshRates:function(){var $imgs=$("*[data-refresh-rate-status\x3d'unprocessed'][data-refresh-rate]");if($imgs.length>0){logger.info("handle images with refresh rates");$imgs.each(function(){var $img=$(this),src=$img.attr("src"),rate=$img.attr("data-refresh-rate");$img.attr("data-refresh-rate-status","processed");logger.info("\nimg: "+src+"\nrate: "+Math.round(rate/1E3)+" secs");setInterval(function(){logger.info("\nrefreshing: "+src);
$img.attr("src",src)},rate)})}},handleChartable:function(){var chartContainer=document.getElementById("chartContainer");if(!chartContainer)return;var ts=(new Date).getTime();var chartId=$("#chartContainer").attr("data-chartable-id");var script=document.createElement("script");script.type="text/javascript";script.setAttribute("id","chartScript");script.setAttribute("class","twp-module-chart-embed");script.setAttribute("data-move","false");script.setAttribute("data-data-uri","https://postgraphics.s3.amazonaws.com/chartable/"+
chartId+"/latest.json?v\x3d"+ts);script.setAttribute("data-fallback-image","https://chartable.wpentdev.com/"+chartId+"/2300.jpg");script.src="https://chartable.wpentdev.com/public/TWP.Module.chart.embed-0.0.54.min.js?v\x3d3";$("#chartContainer").empty();chartContainer.appendChild(script)},handleStoryTypeWarnings:function(){$(".story-type-warning").each(function(){var $this=$(this),$open=$this.find(".story-type-warning-tools-open"),$closed=$this.find(".story-type-warning-tools-closed"),timeout=null;
$open.on("click",function(){$this.removeClass("open").addClass("closed",{duration:500});if(timeout)clearTimeout(timeout);timeout=setTimeout(function(){if(!$open.is(":visible"))$closed.trigger("click")},6E4)});$closed.on("click",function(){$this.removeClass("closed").addClass("open",{duration:500})})})},handleFishyContentEdits:function(){try{$('*[data-will-poison-app\x3d"true"]').each(function(){var $el=$(this),msgInfo=_getMessageInfo($el,{textTmpl:"{{type}}: BAD CODING"});$el.removeAttr("data-will-poison-app");
msgInfo.$target.before(msgInfo.html)})}catch(e){logger.error("ERROR in handleFishyContentEdits:"+e)}function _getMessageInfo($el,options){options=$.extend(true,{textTmpl:"{{type}}: BAD CODING",htmlTmpl:'\x3cdiv class\x3d"content-editable-warning"\x3e\x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e {{text}} \x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e\x3c/div\x3e'},options||{});var msgInfo={},type="";if($el.hasClass("blurb")){msgInfo.$target=$el.closest(".blurb");
type="BLURB"}else if($el.hasClass("byline")||$el.parent().hasClass("byline")){msgInfo.$target=$el.closest(".sigline");type="BYLINE"}else if($el.hasClass("caption")){msgInfo.$target=$el.closest(".caption");type="CAPTION"}else if($el.hasClass("deck")||$el.parent().hasClass("deck")){msgInfo.$target=$el.closest(".deck");type="DECK"}else if($el.hasClass("headline")||$el.parent().hasClass("headline")){msgInfo.$target=$el.closest(".headline");type="HEADLINE"}else if($el.hasClass("label-primary")){msgInfo.$target=
$el.closest(".label-wrapper");type="PRIMARY LABEL";if($el.hasClass("label-item"))type="PRIMARY ITEM LABEL"}else if($el.hasClass("label-secondary")){msgInfo.$target=$el.closest(".label-wrapper");type="SECONDARY LABEL"}else{msgInfo.$target=$el;type="TEXT"}msgInfo.text=options.textTmpl.replace("{{type}}",type);msgInfo.html=options.htmlTmpl.replace("{{text}}",msgInfo.text);return msgInfo}},init:function(){var self=this;self.handleTimestamps();if(document.readyState=="complete")self.handleFlippers();else $w.on("load",
function(){self.handleFlippers()});self.handleImageRefreshRates();self.handleFishyContentEdits();self.handleStoryTypeWarnings()}};__e.push(["phase1-1",applyFeature]);function applyFeature(){feature.init();if($w.width()>1024)setInterval(function(){feature.handleTimestamps()},6E4);$d.on("dom-manipulation-complete",function(){feature.handleTimestamps()});setInterval(function(){feature.handleChartable()},6E4)}})(jQuery);
(function(){var canonicalPage=document.querySelectorAll("link[rel\x3dcanonical]")[0];var counterpointApi=wp_pb.viewpointEnv&&wp_pb.viewpointEnv.COUNTERPOINT_API;function handleClick(ev,div){if(ev.target.tagName!=="A"&&ev.target.tagName!="IMG")return;serveStat(div,"clicked");var link=null;if(ev.target.tagName==="IMG")link=div.querySelectorAll("a")[0];else link=ev.target;var dest=link.href;var mClick=ev.button>0||ev.ctrlKey||ev.metaKey||ev.shiftKey;var prefetched=$(link).hasClass("pre-fetched");if(mClick||
prefetched);else{setTimeout(function(){document.location=dest},200);ev.preventDefault()}}function serveStat(div,sType){var parsedOpinion=document.createElement("a");parsedOpinion.href=canonicalPage.href;var opinionUrl=parsedOpinion.pathname;var parsedCounterOpinion=div.querySelectorAll("a")[0];var counterUrl=parsedCounterOpinion.pathname;var params="opinion_url\x3d"+opinionUrl+"\x26counterpoint_url\x3d"+counterUrl+"\x26stype\x3d"+sType;var sReq=new XMLHttpRequest;sReq.open("POST",counterpointApi,
true);sReq.setRequestHeader("Content-type","application/x-www-form-urlencoded");sReq.send(params)}var supportsPassive=false;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=true}});window.addEventListener("test",null,opts)}catch(e){}var visibilityCallbacks={};function visibilityCallback(){var config=null;var element=null;var callback=null;var body=document.body;var html=document.documentElement;var height=html.clientHeight||body.clientHeight;for(var key in visibilityCallbacks)if(visibilityCallbacks.hasOwnProperty(key)){config=
visibilityCallbacks[key];if(config){element=config[0];callback=config[1];var boundaries=element.getBoundingClientRect();if(boundaries.top>0&&boundaries.top<height){callback();visibilityCallbacks[key]=null}}}}function init(){var leftContainer=document.getElementById("viewpoint-left-container");var rightContainer=document.getElementById("viewpoint-right-container");visibilityCallbacks["left-link"]=[leftContainer,function(){serveStat(leftContainer,"served")}];visibilityCallbacks["right-link"]=[rightContainer,
function(){serveStat(rightContainer,"served")}];window.addEventListener("resize",visibilityCallback,supportsPassive?{passive:true}:false);document.addEventListener("scroll",visibilityCallback,supportsPassive?{passive:true}:false);leftContainer.addEventListener("click",function(ev){return handleClick(ev,leftContainer)});rightContainer.addEventListener("click",function(ev){return handleClick(ev,rightContainer)});visibilityCallback()}if(wp_pb.StaticMethods.isPageHydrated())$(function(){init()});var shambleEvent=
window.__e;shambleEvent.push(["shamble",function(){init()}])})();$(function(){});
(function($,window){var root=window.wp_pb;wp_pb.StaticMethods.CommentCount.initCommentCount("div.story-list div.story-list-story span.comment-count:not(.processed)");var listClass=".story-list",itemClass=".story-list-story";var userId=document.cookie.match(/wapo_login_id=([^;]+)/)?RegExp.$1:"";var userSecureId=document.cookie.match(/wapo_secure_login_id=([^;]+)/)?RegExp.$1:"";var userAgent=navigator.userAgent;var loadMore={currPage:1,addSpinner:function($el){$el.text("Loading");$el.append('\x3ci style\x3d"padding-left:20px" class\x3d"fa fa-spinner fa-spin"\x3e\x3c/i\x3e');
$el.removeClass(".button")},removeSpinner:function($el){$el.find(".fa-spinner").remove();$el.text("Load More");$el.addClass("button")},sendOmnitureEvent:function(newProps){newProps=typeof newProps=="undefined"?{}:newProps;if(!!window.TWP&&!!TWP.Data&&TWP.Data.Tracking&&TWP.Data.Tracking.props)s.sendPageViewToOmniture(newProps)},getNextPage:function(event){var $loadMoreEl=$(event.currentTarget);$loadMoreEl.off("click.loadMore");var $moduleEl=$loadMoreEl.parents(".pb-feature");var contentConfig=$moduleEl.find(".pb-loadmore").attr("data-contentconfig");
var contentConfigPath='{"path":"'+contentConfig+'"}';var encodedConfig=encodeURIComponent(contentConfigPath);var dataService=$moduleEl.find(".pb-loadmore").attr("data-service");var pageUri=$moduleEl.find(".pb-loadmore").attr("data-uri");if($moduleEl.find(".pb-loadmore.pb-alldone").length>0){$moduleEl.find(".pb-loadmore.pb-alldone").html("No More Posts");return}if(contentConfig==""){$moduleEl.find(".pb-loadmore").html("No More Posts").fadeOut(3E3,function(){$(this).remove()});return}var feed=$moduleEl.find(listClass);
$.ajax({url:$loadMoreEl.attr("data-path")+"?id\x3d"+$moduleEl.attr("id")+"\x26contentConfig\x3d"+encodedConfig+"\x26uri\x3d"+pageUri+"\x26service\x3d"+dataService,type:"GET",success:function(data){var rootEl=$(data.rendering);if(rootEl.find(listClass+" "+itemClass).length>0)feed.find(itemClass+".last").removeClass("last");if(rootEl.find(listClass+" "+itemClass).length==0||rootEl.find(".pb-loadmore").hasClass("pb-alldone"))$moduleEl.find(".pb-loadmore").hide();rootEl.find(listClass+" "+itemClass).each(function(i,
el){var jqEl=$(el).removeClass("first");feed.append(jqEl)});var newContentConfig=rootEl.find(".pb-loadmore").attr("data-contentconfig")?rootEl.find(".pb-loadmore").attr("data-contentconfig"):"";$loadMoreEl.attr("data-contentconfig",newContentConfig);wp_pb.StaticMethods.CommentCount.initCommentCount("div.story-list div.story-list-story span.comment-count:not(.processed)");if(typeof window.postTvProcessEmbeds!="undefined")window.postTvProcessEmbeds();if(typeof root.refresh!=="undefined"){root.refresh();
setTimeout(function(){root.refresh()},500);setTimeout(function(){root.refresh()},1500)}if(feed.hasClass(".follow-enabled")&&userId!==""){feed.find(".story-top .follow").removeClass("hidden");var followed=[];$.ajax({type:"POST",url:"https://follow.washingtonpost.com/Follow/api/user",contentType:"application/json",dataType:"json",data:JSON.stringify({washPostId:userId,wapoLoginID:userId,wapoSecureID:userSecureId,userAgent:userAgent}),success:function(data){if(data.tags)for(var i=0,len=data.tags.length;i<
len;i++)if(data.tags[i].type==="category")followed.push(data.tags[i].slug);feed.find(".story-top .follow").each(function(){if(followed.indexOf($(this).data("categorySlug"))>=0)$(this).addClass("following").find("span").text("Following")})}})}}}).done(function(){wp_pb.StaticMethods.processBanditoVariants();loadMore.currPage=loadMore.currPage+1;loadMore.sendOmnitureEvent({prop14:"page_"+loadMore.currPage});wp_pb.report("section","story_list_changed",null);if($moduleEl.find(".pb-loadmore.pb-alldone").length==
0)$loadMoreEl.on("click.loadMore",loadMore.getNextPage);$(document).trigger("dom-manipulation-complete")})},getNextPageContentAPI:function(event){var $loadMoreEl=$(event.currentTarget);$loadMoreEl.off("click.loadMore");var $moduleEl=$loadMoreEl.parents(".pb-feature");var feed=$moduleEl.find(listClass);var contentConfig=$moduleEl.find(".pb-loadmore").attr("data-contentconfig");var feedPath=$loadMoreEl.attr("data-path")+"/section/story-list?"+contentConfig;$.get(feedPath,function(data){var rootEl=$(data.rendering);
if(rootEl.find(listClass+" "+itemClass).length>0)feed.find(itemClass+".last").removeClass("last");if(rootEl.find(listClass+" "+itemClass).length==0||rootEl.find(".pb-loadmore").hasClass("pb-alldone"))$moduleEl.find(".pb-loadmore").hide();rootEl.find(listClass+" "+itemClass).each(function(i,el){var jqEl=$(el).removeClass("first");feed.append(jqEl)});var newContentConfig=rootEl.find(".pb-loadmore").attr("data-contentconfig")?rootEl.find(".pb-loadmore").attr("data-contentconfig"):"";$loadMoreEl.attr("data-contentconfig",
newContentConfig);wp_pb.StaticMethods.CommentCount.initCommentCount("div.story-list div.story-list-story span.comment-count:not(.processed)");if(typeof window.postTvProcessEmbeds!="undefined")window.postTvProcessEmbeds();if(typeof root.refresh!=="undefined"){root.refresh();setTimeout(function(){root.refresh()},500);setTimeout(function(){root.refresh()},1500)}wp_pb.StaticMethods.processBanditoVariants();loadMore.currPage=loadMore.currPage+1;loadMore.sendOmnitureEvent({prop14:"page_"+loadMore.currPage});
wp_pb.report("section","story_list_changed",null);if($moduleEl.find(".pb-loadmore.pb-alldone").length==0)$loadMoreEl.on("click.loadMore",loadMore.getNextPageContentAPI);$(document).trigger("dom-manipulation-complete")})},init:function(){var $loadMoreButton=$(".pb-loadmore-div");var $loadMoreButtonContentApi=$(".pb-loadmore-div-ans");$loadMoreButton.on("click.loadMore",loadMore.getNextPage);$loadMoreButtonContentApi.on("click.loadMore",loadMore.getNextPageContentAPI);$("div.story-list-meta-social").not("div.story-list-meta-social:has(ul.story-list-meta:has(li))").addClass("empty")}};
wp_pb.StaticMethods.processBanditoVariants();loadMore.init();(function(){if(window.location.pathname.indexOf("/lifestyle/fashion/")>-1)$(".story-list-story .story-headline h3 \x3e a").each(function(){var url=$(this).attr("href");if(url.indexOf("?")>-1)url+="\x26spon_con\x3dfashion_week";else url+="?spon_con\x3dfashion_week";$(this).attr("href",url)})})()})(jQuery,window);
(function($,TWP){var logger=new TWP.Tools.logger("flex");var applyStickiness=function(){var $window=$(window),$ad=$(".pb-f-ad-flex"),$ad_div=$($ad.children()[0]),slotId="slug_flex_ss_bb_hp",adSize=0,inRightRail=false,$right_rail=$("#right-rail"),min_viewport=990;$ad.on("DOMNodeInserted",function(e){var $el=$(e.target),id=$el.attr("id");if($el.is("iframe")&&id&&!/(hidden)/g.test(id)){$ad.off("DOMNodeInserted");$ad.addClass("sticky");afterAdInserted($el)}});var bindScrollDown=function(){var scrollTop,
stopTop=$ad.offset().top+$ad.height()-$ad_div.outerHeight()-50;var getTopPoint=function(){return $ad.offset().top-50};var getMarginLeft=function(){var left=($ad.outerWidth()-adSize)/2;return left<0?0:left};var getRailMarginLeft=function(){if(inRightRail){var railLeft=($right_rail.width()-$ad_div.width())/2;return railLeft<0?0:railLeft}else return getMarginLeft()};var getAdLeft=function(){return $ad.offset().left};var applySticky=function(top){var left=0;if(inRightRail&&top<stopTop){left=$right_rail.offset().left;
$ad_div.css({top:50,left:left,position:"fixed",width:$right_rail.width()})}else if(top<stopTop){left=getAdLeft()+getMarginLeft();$ad_div.css({top:50,left:left,position:"fixed"})}else{var bTop=$ad.height()-$ad_div.height();left=getRailMarginLeft();$ad_div.css({top:bTop,left:left,position:"absolute"})}};var removeSticky=function(){if($ad.hasClass("sticky")){$ad.removeClass("sticky");$ad_div.attr("style","");$window.off("scroll.flexAd-sticky")}};$window.off("scroll.flexAd-sticky").on("scroll.flexAd-sticky",
function(){scrollTop=$window.scrollTop();if(scrollTop>getTopPoint())applySticky(scrollTop);else if($ad.hasClass("sticky"))$ad_div.css({top:0,position:"static",left:getRailMarginLeft()})});$window.off("resize.flexAd-sticky").on("resize.flexAd-sticky",function(){if($(window).outerWidth()>min_viewport)if($ad.hasClass("sticky")){var left=0;if($ad_div.css("position")==="fixed")left=getAdLeft()+getMarginLeft();else left=getRailMarginLeft();$ad_div.css({left:left})}else{$ad.addClass("sticky");startSticky()}else removeSticky()});
$ad.on("flexAd.remove_sticky",function(){$window.off("resize.flexAd-sticky");removeSticky()})};function startSticky(){if($(window).outerWidth()>min_viewport)bindScrollDown();else $window.on("resize.flexAd-invisible",function(){if($ad.is(":visible"))bindScrollDown();else $ad.trigger("flexAd.remove_sticky")})}var afterAdInserted=function(){if(window.googletag&&googletag.pubadsReady)googletag.pubads().addEventListener("slotRenderEnded",function(event){if(event.slot.getSlotElementId()===slotId){adSize=
event.size[0];inRightRail=$ad.parent("#right-rail").length>0;logger.log("Flex unit rendered");if(event.size[1]<1050)startSticky()}})}};if(TWP&&TWP.Features&&TWP.Features.Ad&&TWP.Features.Ad.flexAd&&TWP.Features.Ad.flexAd.sticky)applyStickiness()})(jQuery,TWP);
(function($){window.__e=window.__e||[];window._dw=window._dw||[];var feature={initABTest:function(){var self=this;window._dw.push(["global","ready",function(api){var variant=api.get("article-mostReadOpinion"),DEBUG=false;if(DEBUG||variant.is("replaceTwo")||variant.is("addTwo")){var x=2,normalSel="li.pm-content",addlSel="li.pm-addl-content";document.querySelectorAll(".pb-f-page-post-most ul.skin").forEach(function(ulInDom){if(ulInDom.querySelector(addlSel)){var source=ulInDom.cloneNode(true),target=
document.createElement("ul");if(!DEBUG&&variant.is("replaceTwo"))self.helpers._removeX(source,normalSel,x);else if(!DEBUG&&variant.is("addTwo"));else if(DEBUG);self.helpers._dedup(source);self.helpers._addX(source,target,normalSel);self.helpers._addX(source,target,addlSel,x);self.helpers._cleanLastClass(target);self.helpers._cleanDisplayNumbers(target);self.helpers._updateTids(target);ulInDom.innerHTML=target.innerHTML}})}}])},helpers:{_removeX:function(source,sel,x){var els=source.querySelectorAll(sel),
l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;for(var i=0;i<x;i++){var child=source.children[l-x];if($(child).is(sel))source.removeChild(child)}},_addX:function(source,target,sel,x){var els=source.querySelectorAll(sel),l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;els.forEach(function(el,i){if(i<x){$(el).removeClass("hide");target.append(el)}})},_cleanLastClass:function(el){var children=el.children,l=children.length;for(var i=0;i<l;i++)if(i==l-1)$(children[i]).addClass("last");else $(children[i]).removeClass("last")},
_cleanDisplayNumbers:function(el){var children=[],sel="#select-nothing-yKQcvflTRB";if(el.querySelector(".pm-addl-content .totalShown")){children=el.children;sel=".totalShown"}else if(el.querySelector(".pm-addl-content .thisTotalShown")){children=el.querySelectorAll(".pm-addl-content .thisTotalShown");sel=".thisTotalShown"}var l=children.length;for(var i=0;i<l;i++){var child=children[i];if($(child).is(".pm-addl-content"))try{child.querySelector(sel).innerHTML=i+1}catch(e){}}},_updateTids:function(el){var re=
/((\?|&)tid=[^&]+)/;el.querySelectorAll("a").forEach(function(a){if(a.href.match(re))a.href=a.href.replace(re,RegExp.$1+"_test")})},_dedup:function(target){var hrefs={},ul=document.createElement("ul");Array.prototype.filter.call(target.querySelectorAll("li"),function(li){var href=li.querySelector("a[href]").getAttribute("href").split("?")[0];if(href in hrefs)return false;else{hrefs[href]=true;return true}}).forEach(function(li){ul.append(li)});target.innerHTML=ul.innerHTML}},init:function(){this.initABTest()}};
var lifecycle={init:function(){feature.init()}};if(wp_pb.StaticMethods.isPageHydrated())lifecycle.init();window.__e.push(["shamble",function(){lifecycle.init()}])})(jQuery);